if("undefined"==typeof I$)I$=function(){var t={},e=function(){return!1},i={};var n=function(e,i){return t.toString.call(e)==="[object "+i+"]"};return function(t,s){var a=i[t],o=n(s,"Function");if(null!=s&&!o)a=s;if(o&&(null==a||a.__dt__===!0)){var r=[];for(var _=2,d=arguments.length;_<d;_++)r.push(arguments.callee(arguments[_]));var c={};r.push.call(r,c,{},e,[]);var l=s.apply(null,r)||c;if(!a||!n(l,"Object"))a=l;else if(Object.keys)for(var f=Object.keys(l),_=0,d=f.length,u;_<d;_++){u=f[_];a[u]=l[u]}else for(var u in l)a[u]=l[u];if(null!=a&&a.__dt__===!0)delete a.__dt__}if(null==a)a={__dt__:!0};i[t]=a;return a}}();I$("a2e1fe5ad329e35f3966d36c90672926",function(t,e,i,n){var s=Function.prototype;s._$aop=function(t,e){var e=e||i,t=t||i,s=this;return function(){var i={args:n.slice.call(arguments,0)};t(i);if(!i.stopped){i.value=s.apply(this,i.args);e(i)}return i.value}};s._$bind=function(){var t=arguments,e=arguments[0],i=this;return function(){var s=n.slice.call(t,1);n.push.apply(s,arguments);return i.apply(e||null,s)}};s._$bind2=function(){var t=arguments,e=n.shift.call(t),i=this;return function(){n.push.apply(arguments,t);return i.apply(e||null,arguments)}};var s=String.prototype;if(!s.trim)s.trim=function(){var t=/(?:^\s+)|(?:\s+$)/g;return function(){return this.replace(t,"")}}();if(!this.console)this.console={log:i,error:i};if(!0){NEJ=this.NEJ||{};NEJ.copy=function(t,i){t=t||{};i=i||e;for(var n in i)if(i.hasOwnProperty(n))t[n]=i[n];return t};NEJ=NEJ.copy(NEJ,{O:e,R:n,F:i,P:function(t){if(!t||!t.length)return null;var e=window;for(var i=t.split("."),n=i.length,s="window"==i[0]?1:0;s<n;e=e[i[s]]=e[i[s]]||{},s++);return e}});return NEJ}return t});I$("4e87ccc1b68ff498124e15ce98b82ec6",function(t,e,i,n){t.__forIn=function(t,e,i){if(!t||!e)return null;var n=Object.keys(t);for(var s=0,a=n.length,o,r;s<a;s++){o=n[s];r=e.call(i||null,t[o],o,t);if(r)return o}return null};t.__forEach=function(t,e,i){t.forEach(e,i)};t.__col2array=function(t){return n.slice.call(t,0)};t.__str2time=function(t){return Date.parse(t)};return t});I$("e7be6ff9122e14c2be65196e9dffe066",function(t,e,i,n,s){var a=this.navigator.platform,o=this.navigator.userAgent;var r={mac:a,win:a,linux:a,ipad:o,ipod:o,iphone:a,android:o};e._$IS=r;for(var _ in r)r[_]=new RegExp(_,"i").test(r[_]);r.ios=r.ipad||r.iphone||r.ipod;r.tablet=r.ipad;r.desktop=r.mac||r.win||r.linux&&!r.android;e._$is=function(t){return!!r[t]};var d={engine:"unknow",release:"unknow",browser:"unknow",version:"unknow",prefix:{css:"",pro:"",clz:""}};e._$KERNEL=d;if(/msie\s+(.*?);/i.test(o)||/trident\/.+rv:([\d\.]+)/i.test(o)){d.engine="trident";d.browser="ie";d.version=RegExp.$1;d.prefix={css:"ms",pro:"ms",clz:"MS",evt:"MS"};var c={6:"2.0",7:"3.0",8:"4.0",9:"5.0",10:"6.0",11:"7.0"};d.release=c[document.documentMode]||c[parseInt(d.version)]}else if(/webkit\/?([\d.]+?)(?=\s|$)/i.test(o)){d.engine="webkit";d.release=RegExp.$1||"";d.prefix={css:"webkit",pro:"webkit",clz:"WebKit"}}else if(/rv\:(.*?)\)\s+gecko\//i.test(o)){d.engine="gecko";d.release=RegExp.$1||"";d.browser="firefox";d.prefix={css:"Moz",pro:"moz",clz:"Moz"};if(/firefox\/(.*?)(?=\s|$)/i.test(o))d.version=RegExp.$1||""}else if(/presto\/(.*?)\s/i.test(o)){d.engine="presto";d.release=RegExp.$1||"";d.browser="opera";d.prefix={css:"O",pro:"o",clz:"O"};if(/version\/(.*?)(?=\s|$)/i.test(o))d.version=RegExp.$1||""}if("unknow"==d.browser){var c=["chrome","maxthon","safari"];for(var l=0,f=c.length,u;l<f;l++){u="safari"==c[l]?"version":c[l];if(new RegExp(u+"/(.*?)(?=\\s|$)","i").test(o)){d.browser=c[l];d.version=RegExp.$1.trim();break}}}e._$SUPPORT={};e._$support=function(t){return!!e._$SUPPORT[t]};if(!0)t.copy(t.P("nej.p"),e);return e},"a2e1fe5ad329e35f3966d36c90672926");I$("5545a08c19e41f5e6ea82cb16c1516ab",function(t,e,i,n,s,a){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="4.0")I$("f40c6f848eef306a9f0c40deeae2fe2d",function(){t.__forIn=function(t,e,i){if(t&&e){var n;for(var s in t)if(t.hasOwnProperty(s)){n=e.call(i,t[s],s,t);if(n)return s}else;}};t.__forEach=function(t,e,i){for(var n=0,s=t.length;n<s;n++)e.call(i,t[n],n,t)};t.__col2array=function(t){var e=[];if(t&&t.length)for(var i=0,n=t.length;i<n;i++)e.push(t[i]);return e};t.__str2time=function(){var t=/-/g;return function(e){return Date.parse(e.replace(t,"/").split(".")[0])}}()});return t},"4e87ccc1b68ff498124e15ce98b82ec6","e7be6ff9122e14c2be65196e9dffe066");I$("e4f0b0b7857ed3c1e2d0a46ba5b670d6",function(t,e,i,n,s,a){i._$klass=function(){var t=function(){return"[object Function]"!==n.toString.call(arguments[0])};var i=function(t,i){for(;i;){var n=i.prototype,s=e.__forIn(n,function(e){return t===e});if(null!=s)return{name:s,klass:i};i=i._$super}};return function(){var n=function(){return this.__init.apply(this,arguments)};n.prototype.__init=s;n._$extend=function(n,s){if(!t(n)){var a=this;if(s!==!1)e.__forIn(n,function(e,i){if(!t(e))a[i]=e});this._$super=n;var o=function(){};o.prototype=n.prototype;this.prototype=new o;this.prototype.constructor=this;var r=[],_={};var d=function(t,e){var n=i(t,e);if(n){if(r[r.length-1]!=n.name)r.push(n.name);_[n.name]=n.klass._$super;return n.name}};this.prototype.__super=function(){var t=r[r.length-1],e=arguments.callee.caller;if(!t)t=d(e,this.constructor);else{var i=_[t].prototype;if(!i.hasOwnProperty(e)||e!=i[t])t=d(e,this.constructor);else _[t]=_[t]._$super}var n=_[t].prototype[t].apply(this,arguments);if(t==r[r.length-1]){r.pop();delete _[t]}return n};if(!0){var c=this.prototype;c.__supInit=c.__super;c.__supReset=c.__super;c.__supDestroy=c.__super;c.__supInitNode=c.__super;c.__supDoBuild=c.__super;c.__supOnShow=c.__super;c.__supOnHide=c.__super;c.__supOnRefresh=c.__super;this._$supro=n.prototype}return this.prototype}};return n}}();if(!0){t.C=i._$klass;t.copy(this.NEJ,t)}return i},"a2e1fe5ad329e35f3966d36c90672926","5545a08c19e41f5e6ea82cb16c1516ab");I$("fbbf6ddc0634989027d138f4ffd4b78b",function(t,e,i,n,s,a){var o=function(t,e){try{e=e.toLowerCase();if(null===t)return"null"==e;if(void 0===t)return"undefined"==e;else return n.toString.call(t).toLowerCase()=="[object "+e+"]"}catch(i){return!1}};i._$isFunction=function(t){return o(t,"function")};i._$isString=function(t){return o(t,"string")};i._$isNumber=function(t){return o(t,"number")};i._$isBoolean=function(t){return o(t,"boolean")};i._$isDate=function(t){return o(t,"date")};i._$isArray=function(t){return o(t,"array")};i._$isObject=function(t){return o(t,"object")};i._$length=function(){var t=/[^\x00-\xff]/g;return function(e){return(""+(e||"")).replace(t,"**").length}}();i._$loop=function(t,n,s){if(i._$isObject(t)&&i._$isFunction(n))return e.__forIn.apply(e,arguments);else return null};i._$indexOf=function(t,e){var n=i._$isFunction(e)?e:function(t){return t===e},s=i._$forIn(t,n);return null!=s?s:-1};i._$binSearch=function(){var t;var e=function(i,n,s){if(n>s)return-1;var a=Math.ceil((n+s)/2),o=t(i[a],a,i);if(0==o)return a;if(o<0)return e(i,n,a-1);else return e(i,a+1,s)};return function(i,n){t=n||s;return e(i,0,i.length-1)}}();i._$reverseEach=function(t,e,n){if(t&&t.length&&i._$isFunction(e))for(var s=t.length-1;s>=0;s--)if(e.call(n,t[s],s,t))return s;return null};i._$forEach=function(t,n,s){if(t&&t.length&&i._$isFunction(n))if(!t.forEach)i._$forIn.apply(i,arguments);else e.__forEach(t,n,s)};i._$forIn=function(t,e,n){if(!t||!i._$isFunction(e))return null;if(i._$isNumber(t.length)){for(var s=0,a=t.length;s<a;s++)if(e.call(n,t[s],s,t))return s}else if(i._$isObject(t))return i._$loop(t,e,n);return null};i._$encode=function(t,e){e=""+e;if(!t||!e)return e||"";else return e.replace(t.r,function(e){var i=t[!t.i?e.toLowerCase():e];return null!=i?i:e})};i._$escape=function(){var t=/<br\/?>$/,e={r:/\<|\>|\&|\r|\n|\s|\'|\"/g,"<":"&lt;",">":"&gt;","&":"&amp;"," ":"&nbsp;",'"':"&quot;","'":"&#39;","\n":"<br/>","\r":""};return function(n){n=i._$encode(e,n);return n.replace(t,"<br/><br/>")}}();i._$unescape=function(){var t={r:/\&(?:lt|gt|amp|nbsp|#39|quot)\;|\<br\/\>/gi,"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&#39;":"'","&quot;":'"',"<br/>":"\n"};return function(e){return i._$encode(t,e)}}();i._$format=function(){var t={i:!0,r:/\byyyy|yy|MM|cM|eM|M|dd|d|HH|H|mm|ms|ss|m|s|w|ct|et\b/g},e=["上午","下午"],n=["A.M.","P.M."],s=["日","一","二","三","四","五","六"],a=["一","二","三","四","五","六","七","八","九","十","十一","十二"],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"];var r=function(t){t=parseInt(t)||0;return(t<10?"0":"")+t};var _=function(t){return t<12?0:1};return function(d,c,l){if(!d||!c)return"";d=i._$var2date(d);t.yyyy=d.getFullYear();t.yy=(""+t.yyyy).substr(2);t.M=d.getMonth()+1;t.MM=r(t.M);t.eM=o[t.M-1];t.cM=a[t.M-1];t.d=d.getDate();t.dd=r(t.d);t.H=d.getHours();t.HH=r(t.H);t.m=d.getMinutes();t.mm=r(t.m);t.s=d.getSeconds();t.ss=r(t.s);t.ms=d.getMilliseconds();t.w=s[d.getDay()];var f=_(t.H);t.ct=e[f];t.et=n[f];if(l)t.H=t.H%12;return i._$encode(t,c)}}();i._$var2date=function(t){var n=t;if(i._$isString(t))n=new Date(e.__str2time(t));if(!i._$isDate(n))n=new Date(t);return n};i._$fixed=function(t,e){return parseFloat(new Number(t).toFixed(e))};i._$absolute=function(){var t=/([^\/:])\/.*$/,e=/\/[^\/]+$/,i=/[#\?]/,n=location.href.split(/[?#]/)[0],s=document.createElement("a");var a=function(t){return(t||"").indexOf("://")>0};var o=function(t){return(t||"").split(i)[0].replace(e,"/")};var r=function(e,i){if(0==e.indexOf("/"))return i.replace(t,"$1")+e;else return o(i)+e};n=o(n);return function(t,e){t=(t||"").trim();if(!a(e))e=n;if(!t)return e;if(a(t))return t;t=r(t,e);s.href=t;t=s.href;return a(t)?t:s.getAttribute("href",4)}}();i._$url2origin=function(){var t=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(e){if(t.test(e||""))return RegExp.$1.toLowerCase();else return""}}();i._$string2object=function(t,e){var n={};i._$forEach((t||"").split(e),function(t){var e=t.split("=");if(e&&e.length){var i=e.shift();if(i)n[decodeURIComponent(i)]=decodeURIComponent(e.join("="))}});return n};i._$object2string=function(t,e,n){if(!t)return"";var s=[];i._$loop(t,function(t,e){if(!i._$isFunction(t)){if(i._$isDate(t))t=t.getTime();else if(i._$isArray(t))t=t.join(",");else if(i._$isObject(t))t=JSON.stringify(t);
if(n)t=encodeURIComponent(t);s.push(encodeURIComponent(e)+"="+t)}});return s.join(e||",")};i._$query2object=function(t){return i._$string2object(t,"&")};i._$object2query=function(t){return i._$object2string(t,"&",!0)};i._$object2array=function(t){return e.__col2array(t)};i._$array2object=function(t,e){var n={};i._$forEach(t,function(t){var i=t;if(e)i=e(t);if(null!=i)n[i]=t});return n};i._$number2string=function(t,e){var i=(""+t).length,n=Math.max(1,parseInt(e)||0),s=n-i;if(s>0)t=new Array(s+1).join("0")+t;return""+t};i._$safeDelete=function(t,e){if(!i._$isArray(e))try{delete t[e]}catch(n){t[e]=void 0}else i._$forEach(e,function(e){i._$safeDelete(t,e)})};i._$randString=function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";return function(e){e=e||10;var i=[];for(var n=0,s;n<e;++n){s=Math.floor(Math.random()*t.length);i.push(t.charAt(s))}return i.join("")}}();i._$randNumber=function(t,e){return Math.floor(Math.random()*(e-t)+t)};i._$randNumberString=function(t){t=Math.max(0,Math.min(t||8,30));var e=Math.pow(10,t-1),n=10*e;return i._$randNumber(e,n).toString()};i._$uniqueID=function(){var t=+new Date;return function(){return""+t++}}();i._$query=function(t,e){t=t||n;var i=(e||"").split(".");for(var s=0,a=i.length;s<a;s++){t=t[i[s]];if(!t)break}return t};i._$merge=function(){var t=arguments.length-1,e=arguments[t];if(i._$isFunction(e))t-=1;else e=s;var n=arguments[0]||{};for(var a=1;a<=t;a++)i._$loop(arguments[a],function(t,i){if(!e(t,i))n[i]=t});return n};i._$fetch=function(t,e){if(e)i._$loop(t,function(t,i,n){var s=e[i];if(null!=s)n[i]=s});return t};i._$hasProperty=function(t){if(!t)return!1;if(null!=t.length)return t.length>0;var e=0;i._$loop(t,function(){e++;return e>0});return e>0};i._$objectSize=function(t){if(!t)return-1;var e=0,i;for(i in t)if(t.hasOwnProperty(i))e++;return e};if(!0){t.Q=i._$query;t.X=i._$merge;t.EX=i._$fetch;t.copy(this.NEJ,t);t.copy(t.P("nej.u"),i)}return i},"a2e1fe5ad329e35f3966d36c90672926","5545a08c19e41f5e6ea82cb16c1516ab");I$("afbeda91efdbe7f55b05a99d9c63f33c",function(t,e,i,n,s,a){var o={};i.__url2host=function(){var t=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(e){e=e||"";if(t.test(e))return RegExp.$1;else return location.protocol+"//"+location.host}}();i.__set=function(t,e){o[t]=e};i.__get=function(t){return o[t]};var r=function(){var t={portrait:{name:"portrait",dft:"portrait/"},"ajax.swf":{name:"ajax",dft:"nej_proxy_flash.swf"},"chart.swf":{name:"chart",dft:"nej_flex_chart.swf"},"audio.swf":{name:"audio",dft:"nej_player_audio.swf"},"video.swf":{name:"video",dft:"nej_player_video.swf"},"clipboard.swf":{name:"clipboard",dft:"nej_clipboard.swf"},"upload.image.swf":{name:"uploadimage",dft:"nej_upload_image.swf"}};var s=function(t){var e={};if(!t||!t.length)return e;for(var n=0,s=t.length,a;n<s;n++){a=t[n];if(a.indexOf("://")>0)e[i.__url2host(a)]=a}return e};return function(a){i.__set("root",a.root||"/res/");var o=i.__get("root");e._$loop(t,function(t,e,n){i.__set(e,a[t.name]||o+t.dft)});var r=a.p_csrf;if(r===!0)r={cookie:"AntiCSRF",param:"AntiCSRF"};r=r||n;i.__set("csrf",{param:r.param||"",cookie:r.cookie||""});i.__set("frames",s(a.p_frame));i.__set("flashs",s(a.p_flash))}}();r(this.NEJ_CONF||n);return i},"a2e1fe5ad329e35f3966d36c90672926","fbbf6ddc0634989027d138f4ffd4b78b");I$("eaff3a29312356382770002d5d170705",function(t,e,i,n,s,a){if("trident"===e._$KERNEL.engine)I$("888b6138b2ede3d49735011546634fef",function(){t.__set("storage.swf",(this.NEJ_CONF||n).storage||t.__get("root")+"nej_storage.swf")});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="3.0")I$("23ae7c8abbbd195ca13799c9c4477328",function(){t.__set("blank.png",(this.NEJ_CONF||n).blank||t.__get("root")+"nej_blank.gif")});return t},"afbeda91efdbe7f55b05a99d9c63f33c","e7be6ff9122e14c2be65196e9dffe066");I$("c9ad5ec4461d887e3ff2709e526c3857",function(t,e,i,n,s,a){i._$getFrameProxy=function(t){var n=e.__url2host(t);return i._$get("frames")[n]||n+"/res/nej_proxy_frame.html"};i._$getFlashProxy=function(t){return i._$get("flashs")[e.__url2host(t)]};i._$get=function(t){return e.__get(t)};if(!0)t.copy(t.P("nej.c"),i);return i},"a2e1fe5ad329e35f3966d36c90672926","eaff3a29312356382770002d5d170705");I$("e9f3264f172f0455b684b5c08503be9e",function(t,e,i,n,s,a){var o=+new Date;i._$CODE_NOTFUND=1e4-o;i._$CODE_NOTASGN=10001-o;i._$CODE_NOTSPOT=10002-o;i._$CODE_TIMEOUT=10003-o;i._$CODE_ERREVAL=10004-o;i._$CODE_ERRCABK=10005-o;i._$CODE_ERRSERV=10006-o;i._$CODE_ERRABRT=10007-o;i._$HEAD_CT="Content-Type";i._$HEAD_CT_PLAN="text/plain";i._$HEAD_CT_FILE="multipart/form-data";i._$HEAD_CT_FORM="application/x-www-form-urlencoded";i._$BLANK_IMAGE=e._$get("blank.png")||"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";if(!0)t.copy(t.P("nej.g"),i);return i},"a2e1fe5ad329e35f3966d36c90672926","c9ad5ec4461d887e3ff2709e526c3857");I$("b8b996468e25a07cbdc7f02ea79cb525",function(t,e){var i={};e._$merge=function(e){t._$merge(i,e)};e._$dump=function(){return i};e._$clear=function(){i={}};return e},"fbbf6ddc0634989027d138f4ffd4b78b");I$("d576425cf56bce89b3dea73a2f135af6",function(t,e,i,n,s,a){i.__getElementById=function(t,e){if(t.getElementById)return t.getElementById(""+e);try{return t.querySelector("#"+e)}catch(i){return null}};i.__getChildren=function(e){return t._$object2array(e.children)};i.__getElementsByClassName=function(e,i){return t._$object2array(e.getElementsByClassName(i))};i.__nextSibling=function(t){return t.nextElementSibling};i.__previousSibling=function(t){return t.previousElementSibling};i.__dataset=function(t,e,i){t.dataset=t.dataset||{};if(void 0!==i)t.dataset[e]=i;return t.dataset[e]};i.__getAttribute=function(t,e){return t.getAttribute(e)};i.__serializeDOM2XML=function(t){return(new XMLSerializer).serializeToString(t)||""};i.__parseDOMFromXML=function(t){var e=(new DOMParser).parseFromString(t,"text/xml").documentElement;return"parsererror"==e.nodeName?null:e};i.__fullScreen=function(){};i.__mask=function(){};i.__unmask=function(){};var o=e._$SUPPORT,r=e._$KERNEL.prefix;i.__isMatchedName=function(){var t=/^([a-z]+?)[A-Z]/;return function(e,i){return!!(i[e]||t.test(e)&&i[RegExp.$1])}}();i.__isNeedPrefixed=function(){var e=t._$array2object(["animation","transform","transition","appearance","userSelect","box","flex","column"]);return function(t){return i.__isMatchedName(t,e)}}();i.__fmtStyleName=function(){var t=/-([a-z])/g;return function(e){e=e||"";return e.replace(t,function(t,e){return e.toUpperCase()})}}();i.__getStyleName=function(){var t=/^[a-z]/,e=r.css||"";return function(n){n=i.__fmtStyleName(n);if(!i.__isNeedPrefixed(n))return n;else return e+n.replace(t,function(t){return t.toUpperCase()})}}();i.__getStyleValue=function(t,e){var n=window.getComputedStyle(t,null);return n[i.__getStyleName(e)]||""};i.__setStyleValue=function(t,e,n){t.style[i.__getStyleName(e)]=n};i.__getCSSMatrix=function(){var e=/\((.*?)\)/,i=/\s*,\s*/,n=["CSSMatrix",r.clz+"CSSMatrix"],s=["m11","m12","m21","m22","m41","m42"];var a=function(n){var a={};if(e.test(n||""))t._$forEach(RegExp.$1.split(i),function(t,e){a[s[e]]=t});return a};return function(e){var i;t._$forIn(n,function(t){if(this[t]){i=new this[t](e||"");return!0}});return!i?a(e):i}}();i.__injectCSSText=function(t,e){t.textContent=e};i.__processCSSText=function(){var e=/\$<(.*?)>/gi,s=/\{(.*?)\}/g,a="-"+r.css.toLowerCase()+"-",_={scale:"scale({x|1},{y|1})",rotate:"rotate({a})",translate:"translate({x},{y})",matrix:"matrix({m11},{m12},{m21},{m22},{m41},{m42})"},d={scale:"scale3d({x|1},{y|1},{z|1})",rotate:"rotate3d({x},{y},{z},{a})",translate:"translate3d({x},{y},{z})",matrix:"matrix3d({m11},{m12},{m13},{m14},{m21},{m22},{m23},{m24},{m31},{m32},{m33|1},{m34},{m41},{m42},{m43},{m44|1})"};var c=function(t,e){e=e||n;return t.replace(s,function(t,i){var n=i.split("|");return e[n[0]]||n[1]||"0"})};i.__processTransformValue=function(t,e){var i=(!o.css3d?_:d)[t.trim()];if(i)return c(i,e);else return""};return function(n){if(!n.replace)return n;else return n.replace(e,function(e,n){if("vendor"===n)return a;var s=(n||"").split("|");return i.__processTransformValue(s[0],t._$query2object(s[1]))||e})}}();i.__appendCSSText=function(t,e){var i=t.sheet,n=i.cssRules.length;i.insertRule(e,n);return i.cssRules[n]};i.__getClassList=function(){var t=/\s+/;return function(e){e=(e||"").trim();return e?e.split(t):null}}();i.__processClassName=function(e,n,s){if("replace"!=n)t._$forEach(i.__getClassList(s),function(t){e.classList[n](t)});else{i.__processClassName(e,"remove",s);i.__processClassName(e,"add",arguments[3])}};i.__hasClassName=function(e,n){var s=e.classList;if(!s||!s.length)return!1;else return t._$indexOf(i.__getClassList(n),function(t){return s.contains(t)})>=0};!function(){if(!o.css3d){var t=i.__getCSSMatrix();o.css3d=!!t&&null!=t.m41}}();return i},"fbbf6ddc0634989027d138f4ffd4b78b","e7be6ff9122e14c2be65196e9dffe066");I$("79110b05045dc4c60d2f2e3be6d63885",function(t,e,i,n,s,a,o){if("trident"===e._$KERNEL.engine)I$("f5826bc54152574b66289469264f6b93",function(){t.__getChildren=t.__getChildren._$aop(function(t){var e=t.args[0];if(!e.children){t.stopped=!0;var n=[];i._$forEach(e.childNodes,function(t){if(1==t.nodeType)n.push(t)});t.value=n}})});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="6.0")I$("aaeea81db0b09f12758edc372e151030",function(){t.__dataset=function(){var t={},e="data-",n=/\-(.{1})/gi;var s=function(s){var a=s.id;if(!t[a]){var o={};i._$forEach(s.attributes,function(t){var i=t.nodeName;if(0==i.indexOf(e)){i=i.replace(e,"").replace(n,function(t,e){return e.toUpperCase()});o[i]=t.nodeValue||""}});t[a]=o}};return function(e,i,n){s(e);var a=t[e.id];if(void 0!==n)a[i]=n;return a[i]}}()});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="5.0")I$("ac5091169204bad46dcbc171af3c4fd8",function(){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}t.__injectCSSText=function(){var e=30;return t.__injectCSSText._$aop(function(t){var i=t.args[0];if(i.styleSheet){t.stopped=!0;var n=t.args[1];var s=document.styleSheets;if(s.length>e){
i=s[e];n=i.cssText+n}else i=i.styleSheet;i.cssText=n}})}();t.__getClassRegExp=function(){var t=/\s+/g;return function(e){e=(e||"").trim().replace(t,"|");return!e?null:new RegExp("(\\s|^)(?:"+e+")(?=\\s|$)","g")}}();t.__processClassName=function(e,i,n){n=n||"";var s=e.className||"",a=t.__getClassRegExp(n+" "+(arguments[3]||""));var o=s;if(a)o=o.replace(a,"");switch(i){case"remove":n="";break;case"replace":n=arguments[3]||""}o=(o+" "+n).trim();if(s!=o)e.className=o};t.__hasClassName=function(e,i){var n=t.__getClassRegExp(i);if(n)return n.test(e.className||"");else return!1}});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="4.0")I$("4deef13fec8ca40f15853cde224ce07c",function(){t.__getElementsByClassName=function(t,e){var n=[],s=new RegExp("(\\s|^)(?:"+e.replace(/\s+/g,"|")+")(?=\\s|$)");i._$forEach(t.getElementsByTagName("*"),function(t){if(s.test(t.className))n.push(t)});return n};t.__nextSibling=function(t){for(;t=t.nextSibling;)if(1==t.nodeType)return t};t.__previousSibling=function(t){for(;t=t.previousSibling;)if(1==t.nodeType)return t};t.__serializeDOM2XML=function(t){return"xml"in t?t.xml:t.outerHTML};t.__parseDOMFromXML=function(){var t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.3.0"];var e=function(){try{for(var e=0,i=t.length;e<i;e++)return new ActiveXObject(t[e])}catch(n){return null}};return function(t){var i=e();if(i&&i.loadXML(t)&&!i.parseError.errorCode)return i.documentElement;else return null}}();t.__getStyleValue=function(){var e=/opacity\s*=\s*([\d]+)/i;var i={opacity:function(t){var i=0;if(e.test(t.filter||""))i=parseFloat(RegExp.$1)/100;return i}};return function(e,n){var s=e.currentStyle,a=i[n];if(a)return a(s);else return s[t.__getStyleName(n)]||""}}();t.__setStyleValue=function(){var e={opacity:function(t,e){t.style.filter="alpha(opacity="+100*e+")"}};return function(i,n,s){var a=e[n];if(a)a(i,s);else i.style[t.__getStyleName(n)]=s}}();t.__appendCSSText=function(t,e){var i=t.styleSheet,n=i.rules.length,s=e.split(/[\{\}]/);i.addRule(s[0],s[1],n);return i.rules[n]}});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="3.0")I$("a6c517e39bb7f4ff306411b56c6f372e",function(){t.__getAttribute=t.__getAttribute._$aop(null,function(t){var e=t.args;if("maxlength"==e[1]&&2147483647==t.value)t.value=null})});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="2.0")I$("68071f602dd3dfc1dcfe7dc729110f09",function(){t.__fullScreen=function(t,e){var i=t.style;i.width=e.scrollWidth+"px";i.height=e.scrollHeight+"px"};t.__mask=function(){var e={};t.__unmask=function(t){var i=t.id,n=e[i];if(n){delete e[i];n.parentNode.removeChild(n)}};return function(t){var i=t.id,n=e[i];if(!n){n=document.createElement("iframe");n.style.position="absolute";e[i]=n}var s=n.style,a=t.style;s.top=(parseInt(a.top)||0)+"px";s.left=(parseInt(a.left)||0)+"px";s.width=t.offsetWidth+"px";s.height=t.offsetHeight+"px";t.insertAdjacentElement("beforeBegin",n);return n}}()});if("gecko"===e._$KERNEL.engine)I$("6ac786aca82c5af7ec261b1dd101410d",function(){if(!e._$SUPPORT.css3d)e._$SUPPORT.css3d="MozPerspective"in document.body.style;if(!("insertAdjacentElement"in document.body))HTMLElement.prototype.insertAdjacentElement=function(t,e){if(t&&e)switch(t){case"beforeEnd":this.appendChild(e);return;case"beforeBegin":this.parentNode.insertBefore(e,this);return;case"afterBegin":!this.firstChild?this.appendChild(e):this.insertBefore(e,this.firstChild);return;case"afterEnd":!this.nextSibling?this.parentNode.appendChild(e):this.parentNode.insertBefore(e,this.nextSibling);return}};if(!("innerText"in document.body)){HTMLElement.prototype["__defineGetter__"]("innerText",function(){return this.textContent});HTMLElement.prototype["__defineSetter__"]("innerText",function(t){this.textContent=t})}});return t},"d576425cf56bce89b3dea73a2f135af6","e7be6ff9122e14c2be65196e9dffe066","fbbf6ddc0634989027d138f4ffd4b78b");I$("5fb495f256a5dcde2a92e5fe919a6422",function(t,e,i,n,s,a,o,r,_,d){var c={},l,f={},u={},h=document.createDocumentFragment();if(!document.head)document.head=document.getElementsByTagName("head")[0]||document.body;o.dump=function(){return{pool:f,dirty:u,fragment:h}};o._$id=c._$id=function(t){t=o._$get(t);if(t){var e=t.id?t.id:"auto-id-"+i._$uniqueID();if(!("id"in t))f[e]=t;t.id=e;if(!o._$get(e))u[e]=t;return e}};o._$get=function(t){try{var e=f[""+t]}catch(n){console.log(n)}if(e)return e;if(!i._$isString(t)&&!i._$isNumber(t))return t;var e=document.getElementById(t);if(!e)e=a.__getElementById(h,t);if(e)delete u[t];return e||u[t]};o._$getChildren=c._$getChildren=function(t,e){t=o._$get(t);if(!t)return null;var n=a.__getChildren(t);if(e)i._$reverseEach(n,function(t,i,n){if(!o._$hasClassName(t,e))n.splice(i,1)});return n};o._$getParent=function(){var t;var e=function(e,i){var n=e.split(":");if(n.length>1){if(!t)t={a:o._$attr,d:o._$dataset,c:o._$hasClassName,t:function(t,e){return(t.tagName||"").toLowerCase()===e}};var s=t[n[0]];if(s)return!!s(i,n[1]);e=n[1]}return!!o._$attr(i,e)||!!o._$dataset(i,e)||o._$hasClassName(i,e)};return function(t,n){t=o._$get(t);if(t){if(!n)return t;if(i._$isString(n))n=e._$bind(null,n);if(i._$isFunction(n)){for(;t;){if(n(t))return t;t=t.parentNode}return null}return t}}}();o._$getByClassName=c._$getByClassName=function(t,e){t=o._$get(t);return!t?null:a.__getElementsByClassName(t,e.trim())};o._$getSibling=c._$getSibling=function(){var t=function(){return!0};return function(e,n){e=o._$get(e);if(!e)return null;var s={backward:!1,filter:t};if(i._$isFunction(n))s.filter=n;else s=i._$fetch(s,n);var r=s.backward?a.__previousSibling:a.__nextSibling;for(;(e=r(e))&&!s.filter(e););return e}}();o._$getScrollViewPort=function(t){t=o._$get(t);if(t){t=t.parentNode;for(;t&&!(t.scrollHeight>t.clientHeight);)t=t.parentNode;if(t)return t}var e=document.body.scrollHeight,i=document.documentElement.scrollHeight;return i>=e?document.documentElement:document.body};o._$getPageBox=function(){var t=function(t){var e=0;i._$forEach(t,function(t){if(t)if(!e)e=t;else e=Math.min(e,t)});return e};var e=[{main:"scroll",sub:["Top","Left"],func:function(t,e,i){return Math.max(e["scroll"+t],i["scroll"+t])}},{main:"client",sub:["Width","Height"],func:function(e,i,n){return t([i["client"+e],i["offset"+e],n["client"+e],n["offset"+e]])}},{main:"scroll",sub:["Width","Height"],func:function(t,e,i,n){return Math.max(n["client"+t],e["scroll"+t],i["scroll"+t])}}];return function(t){var n={},s=t||document,a=s.body,o=s.documentElement;i._$forEach(e,function(t){var e=t.main;i._$forEach(t.sub,function(i){n[e+i]=t.func(i,a,o,n)})});return n}}();o._$getMaxBox=function(t,e){var n=i._$merge({},t),s=e.width/e.height,a=t.width/t.height;if(s>a&&t.height>e.height){n.height=e.height;n.width=n.height*a}if(s<a&&t.width>e.width){n.width=e.width;n.height=n.width/a}return n};o._$scrollTo=c._$scrollTo=function(t){var e=o._$offset(t);window.scrollTo(e.x,e.y)};o._$align=function(){var t=/\s+/;var e={left:function(){return 0},center:function(t,e){return(t.width-e.width)/2},right:function(t,e){return t.width-e.width},top:function(){return 0},middle:function(t,e){return(t.height-e.height)/2},bottom:function(t,e){return t.height-e.height}};return function(i,n,s){var a={},o=(s||"").split(t),r=e[o[1]]||e.middle,_=e[o[0]]||e.center;a.top=r(i,n);a.left=_(i,n);return a}}();o._$offset=c._$offset=function(){var t=function(t){return t==document.body||t==document.documentElement};return function(e,i){e=o._$get(e);if(!e)return null;i=o._$get(i)||null;var n=e,s={x:0,y:0},a,r,_;for(;n&&n!=i;){a=t(n)||n==e;r=a?0:n.scrollLeft;_=parseInt(o._$getStyle(n,"borderLeftWidth"))||0;s.x+=n.offsetLeft+_-r;r=a?0:n.scrollTop;_=parseInt(o._$getStyle(n,"borderTopWidth"))||0;s.y+=n.offsetTop+_-r;n=n.offsetParent}return s}}();o._$fullScreen=c._$fullScreen=function(t){t=o._$get(t);if(t)a.__fullScreen(t,o._$getPageBox())};o._$mask=c._$mask=function(t){t=o._$get(t);if(t){o._$id(t);return a.__mask(t)}return null};o._$unmask=c._$unmask=function(t){t=o._$get(t);if(t){o._$id(t);return a.__unmask(t)}return null};o._$create=function(){var t={a:{href:"#",hideFocus:!0},style:{type:"text/css"},link:{type:"text/css",rel:"stylesheet"},iframe:{frameBorder:0},script:{defer:!0,type:"text/javascript"}};return function(e,n,s){var a=document.createElement(e),r=t[e.toLowerCase()];i._$merge(a,r);if(n)a.className=n;s=o._$get(s);if(s)s.appendChild(a);else if(!r)h.appendChild(a);return a}}();o._$createXFrame=function(){var t=function(){if(location.hostname==document.domain)return"about:blank";else return'javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();})();'};var e=function(t){t=t.trim();if(!t)return o._$create("iframe");var e;try{e=document.createElement('<iframe name="'+t+'"></iframe>');e.frameBorder=0}catch(i){e=o._$create("iframe");e.name=t}return e};return function(s){s=s||r;var a=e(s.name||"");if(!s.visible)a.style.display="none";if(i._$isFunction(s.onload))n._$addEvent(a,"load",function(t){if(a.src){n._$clearEvent(a,"load");s.onload(t)}});var _=s.parent;if(i._$isFunction(_))try{_(a)}catch(d){}else(o._$get(_)||document.body).appendChild(a);var c=s.src||t();window.setTimeout(function(){a.src=c},0);return a}}();o._$remove=c._$remove=function(){var t={img:function(t){t.src=e._$BLANK_IMAGE},iframe:function(t){t.src="about:blank"}};var s=function(e,n){if(n){if(e.getElementsByTagName)i._$forEach(e.getElementsByTagName(n),s)}else{var a=(e.tagName||"").toLowerCase(),o=t[a];if(o)o(e)}};return function(t){t=o._$get(t);if(t){if(!arguments[1])n._$clearEvent(t);s(t);s(t,"img");s(t,"iframe");if(t.parentNode)t.parentNode.removeChild(t)}}}();o._$removeByEC=c._$removeByEC=function(t){t=o._$get(t);if(t)try{h.appendChild(t)}catch(e){console.error(e)}};o._$clearChildren=c._$clearChildren=function(t){t=o._$get(t);if(t)i._$reverseEach(t.childNodes,function(t){o._$remove(t)})};o._$wrapInline=c._$wrapInline=function(){var t,e=/\s+/;var i=function(){if(!t){t=o._$pushCSSText(".#<uispace>{position:relative;zoom:1;}.#<uispace>-show{position:absolute;top:0;left:100%;cursor:text;white-space:nowrap;overflow:hidden;}");
o._$dumpCSSText()}};return function(n,s){n=o._$get(n);if(!n)return null;i();s=s||r;var a=n.parentNode;if(!o._$hasClassName(a,t)){a=o._$create("span",t);n.insertAdjacentElement("beforeBegin",a);a.appendChild(n)}var _=s.nid||"",d=o._$getByClassName(a,_||t+"-show")[0];if(!d){var c=((s.clazz||"")+" "+_).trim();c=t+"-show"+(!c?"":" ")+c;d=o._$create(s.tag||"span",c);a.appendChild(d)}var c=s.clazz;if(c){c=(c||"").trim().split(e)[0]+"-parent";o._$addClassName(a,c)}return d}}();o._$dataset=c._$dataset=function(t,e,n){var s=o._$id(t);if(!s)return null;if(i._$isString(e))return a.__dataset(o._$get(t),e,n);if(i._$isObject(e)){var r={};i._$forIn(e,function(t,e){r[e]=o._$dataset(s,e,t)});return r}if(i._$isArray(e)){var r={};i._$forEach(e,function(t){r[t]=o._$dataset(s,t)});return r}return null};o._$attr=c._$attr=function(t,e,i){t=o._$get(t);if(!t)return"";if(void 0!==i&&t.setAttribute)t.setAttribute(e,i);return a.__getAttribute(t,e)};o._$html2node=function(){var t=/<(.*?)(?=\s|>)/i,e={li:"ul",tr:"tbody",td:"tr",th:"tr",option:"select"};return function(i){var n;if(t.test(i))n=e[(RegExp.$1||"").toLowerCase()]||"";var s=o._$create(n||"div");s.innerHTML=i;var a=o._$getChildren(s);return a.length>1?s:a[0]}}();o._$dom2xml=c._$dom2xml=function(t){t=o._$get(t);return!t?"":a.__serializeDOM2XML(t)};o._$xml2dom=function(t){t=(t||"").trim();return!t?null:a.__parseDOMFromXML(t)};o._$dom2object=c._$dom2object=function(t,e){e=e||{};t=o._$get(t);if(!t)return e;var n=t.tagName.toLowerCase(),s=o._$getChildren(t);if(!s||!s.length){e[n]=t.textContent||t.text||"";return e}var a={};e[n]=a;i._$forEach(s,function(t){o._$dom2object(t,a)});return e};o._$xml2object=function(t){try{return o._$dom2object(o._$xml2dom(t))}catch(e){return null}};o._$text2type=function(){var t={xml:function(t){return o._$xml2dom(t)},json:function(t){try{return JSON.parse(t)}catch(e){return null}},dft:function(t){return t}};return function(e,i){i=(i||"").toLowerCase();return(t[i]||t.dft)(e||"")}}();o._$style=c._$style=function(t,e){t=o._$get(t);if(t)i._$loop(e,function(e,i){o._$setStyle(t,i,e)})};o._$setStyle=c._$setStyle=function(t,e,i){t=o._$get(t);if(t)a.__setStyleValue(t,e,a.__processCSSText(i))};o._$getStyle=c._$getStyle=function(t,e){t=o._$get(t);return!t?"":a.__getStyleValue(t,e)};o._$addScript=function(t){try{t=t.trim();if(t)return new Function(t)()}catch(e){console.error(e.message);console.error(e.stack)}};o._$addStyle=function(){var t=/[\s\r\n]+/gi;return function(e){e=(e||"").replace(t," ").trim();var i=null;if(e){i=o._$create("style");document.head.appendChild(i);a.__injectCSSText(i,a.__processCSSText(e))}return i}}();o._$pushCSSText=function(){var t=/#<(.*?)>/g,e=+new Date;return function(e,n){if(!l)l=[];var s="auto-"+i._$uniqueID(),a=i._$merge({uispace:s},n);l.push(e.replace(t,function(t,e){return a[e]||t}));return s}}();o._$dumpCSSText=function(){if(l){o._$addStyle(l.join(" "));l=null}};o._$appendCSSText=c._$appendCSSText=function(t,e){t=o._$get(t);return!t?null:a.__appendCSSText(t,a.__processCSSText(e))};o._$addClassName=c._$addClassName=function(t,e){if(e){t=o._$get(t);if(t)a.__processClassName(t,"add",e)}};o._$delClassName=c._$delClassName=function(t,e){t=o._$get(t);if(t)a.__processClassName(t,"remove",e)};o._$replaceClassName=c._$replaceClassName=function(t,e,i){t=o._$get(t);if(t)a.__processClassName(t,"replace",e,i)};o._$hasClassName=c._$hasClassName=function(t,e){t=o._$get(t);if(t)return a.__hasClassName(t,e);else return!1};o._$matrix=function(t){t=(t||"").trim();return a.__getCSSMatrix(t)};o._$css3d=c._$css3d=function(t,e,i){t=o._$get(t);if(t){var n=a.__processTransformValue(e,i);if(n)o._$setStyle(t,"transform",n)}};s._$merge(c);if(!0)t.copy(t.P("nej.e"),o);return o},"a2e1fe5ad329e35f3966d36c90672926","e9f3264f172f0455b684b5c08503be9e","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","b8b996468e25a07cbdc7f02ea79cb525","79110b05045dc4c60d2f2e3be6d63885");I$("c509066d9b8abbca2796b3835a278913",function(t,e,i,n,s,a){i.__checkEvent=function(){var t={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},i=e._$KERNEL.prefix,n={transitionend:"TransitionEnd",animationend:"AnimationEnd",animationstart:"AnimationStart",animationiteration:"AnimationIteration",visibilitychange:"visibilitychange",fullscreenchange:"fullscreenchange"};var s={enter:function(t,e,i){var n={type:"keypress"};if(i)n.handler=function(e){if(13===e.keyCode)i.call(t,e)};return n}};var a=function(t){return(i.evt||i.pro)+t};return function(e,i,o){var r={type:i,handler:o};if(!("on"+i in e)){var _=t[i];if(_){r.type=_;return r}var _=n[i];if(_){r.type=a(_);return r}var d=s[i];if(d)return d.apply(null,arguments)}return r}}();i.__addEvent=function(){var t=arguments;if(!1)if(!("on"+t[1]in t[0]))console.log("not support event["+t[1]+"] for "+t[0]);t[0].addEventListener(t[1],t[2],t[3])};i.__delEvent=function(){var t=arguments;t[0].removeEventListener(t[1],t[2],t[3])};i.__dispatchEvent=function(e,i,n){var s=document.createEvent("Event");s.initEvent(i,!0,!0);t._$merge(s,n);e.dispatchEvent(s)};return i},"fbbf6ddc0634989027d138f4ffd4b78b","e7be6ff9122e14c2be65196e9dffe066");I$("8587f106cdd072b3b7324d46f3d95aa0",function(t,e,i,n,s,a,o){if("trident"===t._$KERNEL.engine&&t._$KERNEL.release>="6.0")I$("f2e478ed1c53a670e8b4945d516b59ef",function(){e.__checkEvent=function(){var t={touchcancel:"MSPointerCancel",touchstart:"MSPointerDown",touchmove:"MSPointerMove",touchend:"MSPointerUp",fullscreenchange:"MSFullscreenChange"};return e.__checkEvent._$aop(function(e){var i=e.args;var n=t[i[1]];if(n){e.stopped=!0;e.value={type:n,handler:i[2]}}})}()});if("trident"===t._$KERNEL.engine&&"5.0"==t._$KERNEL.release)I$("5d44095f27458b7bd892edff6ff8fe89",function(){e.__checkEvent=function(){var t={};var i={input:function(e,i,n){if(!n)return{type:i};else return{type:i,handler:function(i){var s=e.id;t[s]=e.value;n.call(e,i)},link:[[document,"selectionchange",function(i){var s=e.id;if(e==document.activeElement){if(t[s]!==e.value){t[s]=e.value;n.call(e,i)}}else delete t[s]}]]}}};return e.__checkEvent._$aop(function(t){var e=t.args;var n=i[e[1]];if(n){t.stopped=!0;t.value=n.apply(null,e)}})}()});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release>="5.0")I$("a8f72827f9738a63b0bd26d5ee03fa21",function(){var t={propertychange:1};e.__addEvent=e.__addEvent._$aop(function(e){var i=e.args;if(null!=t[i[1]]&&i[0].attachEvent){e.stopped=!0;i[0].attachEvent("on"+i[1],i[2])}});e.__delEvent=e.__delEvent._$aop(function(e){var i=e.args,n=t[i[1]];if(null!=t[i[1]]&&i[0].detachEvent){e.stopped=!0;i[0].detachEvent("on"+i[1],i[2])}})});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="4.0")I$("f5a6990d17002f27ac413856957df96f",function(){e.__checkEvent=function(){var t={};var i={input:function(e,i,n){var s={type:"propertychange"};if(n){var a=e.id;var o=function(i){if(e.value&&!t["x-"+a]){t["x-"+a]=!0;n.call(e,i)}};s.handler=function(i){if("value"in e&&"value"==i.propertyName){if(t[a])return;t[a]=!0;n.call(e,i);delete t[a]}};s.link=[[e,"keyup",o],[e,"mouseup",o],[e,"mousemove",o]];s.destroy=function(){delete t[a];delete t["x-"+a]}}return s},load:function(t,e,i){var n={type:"readystatechange"};if(i)n.handler=function(e){if("loaded"==t.readyState||"complete"==t.readyState)i.call(t,e)};return n}};return e.__checkEvent._$aop(function(t){var e=t.args;var n=i[e[1]];if(n){t.stopped=!0;t.value=n.apply(null,e)}if(e[2])e[2]=e[2]._$bind(e[0])})}();e.__addEvent=function(){var t=arguments;if(!1)if(!("on"+t[1]in t[0]))console.log("not support event["+t[1]+"] for "+t[0]);t[0].attachEvent("on"+t[1],t[2])};e.__delEvent=function(){var t=arguments;t[0].detachEvent("on"+t[1],t[2])};e.__dispatchEvent=function(){var t={propertychange:{propertyName:"value"}};return function(e,n,s){var a=document.createEventObject();try{i._$merge(a,t[n],s);e.fireEvent("on"+n,a)}catch(o){console.error(o.message);console.error(o.stack)}}}()});if("gecko"===t._$KERNEL.engine)I$("c865e76286fc2ba012bc45c35afb32af",function(){e.__checkEvent=function(){var t=/^(?:transitionend|animationend|animationstart|animationiteration)$/i;var i={mousewheel:function(t,e,i){var n={type:"MozMousePixelScroll"};if(i)n.handler=function(e){var n=e.detail;e.wheelDelta=-n;e.wheelDeltaY=-n;e.wheelDeltaX=0;i.call(t,e)};return n}};return e.__checkEvent._$aop(function(e){var n=e.args;if(t.test(n[1])){e.stopped=!0;e.value={type:n[1],handler:n[2]}}var s=i[n[1]];if(s){e.stopped=!0;e.value=s.apply(null,n)}})}()});return e},"e7be6ff9122e14c2be65196e9dffe066","c509066d9b8abbca2796b3835a278913","fbbf6ddc0634989027d138f4ffd4b78b");I$("be567474249a271e4786c144ccf5f75a",function(t,e,i,n,s,a,o,r,_){var d={},c={};var l=function(){var t=/[\s,;]+/;return function(e){var e=(e||"").trim().toLowerCase();return!e?null:e.split(t)}}();var f=function(t,i,n){var s="page"+i;return null!=t[s]?t[s]:t["client"+i]+e._$getPageBox()["scroll"+n]};var u=function(t,e,i){var n="scroll"+i;_node=a._$getElement(t),_xret=f(t,e,i);for(;_node&&_node!=document.body&&_node!=document.documentElement;){_xret+=_node[n]||0;_node=_node.parentNode}return _xret};var h=function(t,n,s,a){var o={};t=e._$get(t);if(!t)return null;e._$id(t);o.element=t;if(!i._$isFunction(s))return null;o.handler=s;var n=l(n);if(!n)return null;o.type=n;o.capture=!!a;return o};a._$addEvent=c._$addEvent=function(){var t=function(t,i,n){var s=e._$id(i.element),a=d[s]||{},o=a[t]||[];o.push({type:n.type||t,func:n.handler||i.handler,sfun:i.handler,capt:i.capture,link:n.link,destroy:n.destroy});a[t]=o;d[s]=a};return function(){var n=h.apply(null,arguments);if(n)i._$forEach(n.type,function(a){var o=s.__checkEvent(n.element,a,n.handler);s.__addEvent(n.element,o.type,o.handler,n.capture);i._$forIn(o.link,function(t){t[3]=!!t[3];s.__addEvent.apply(s,t);t[0]=e._$id(t[0])});t(a,n,o)})}}();a._$delEvent=c._$delEvent=function(){var t=function(t,n){var s=e._$id(n.element),a=d[s]||o,r=a[t],_=i._$indexOf(r,function(t){return t.sfun===n.handler&&t.capt===n.capture});var c=null;if(_>=0){var l=r.splice(_,1)[0];c=[[n.element,l.type,l.func,n.capture]];if(l.link){i._$forEach(l.link,function(t){
t[0]=e._$get(t[0])});c.push.apply(c,l.link)}if(l.destroy)l.destroy();if(!r.length)delete a[t];if(!i._$hasProperty(a))delete d[s]}return c};return function(){var e=h.apply(null,arguments);if(e)i._$forEach(e.type,function(n){i._$forEach(t(n,e),function(t){s.__delEvent.apply(s,t)})})}}();a._$clearEvent=c._$clearEvent=function(){var t=function(t,e,n){i._$reverseEach(n,function(i){a._$delEvent(t,e,i.sfun,i.capt)})};return function(n,s){var o=e._$id(n);if(o){var r=d[o];if(r){s=l(s);if(s)i._$forEach(s,function(e){t(o,e,r[e])});else i._$loop(r,function(t,e){a._$clearEvent(n,e)})}}}}();a._$dispatchEvent=c._$dispatchEvent=function(t,n,a){var t=e._$get(t);if(t)i._$forEach(l(n),function(e){var i=s.__checkEvent(t,e);s.__dispatchEvent(t,i.type,a)})};a._$getElement=function(){var t;var n=function(i,n){var s=i.split(":");if(s.length>1){if(!t)t={a:e._$attr,d:e._$dataset,c:e._$hasClassName,t:function(t,e){return(t.tagName||"").toLowerCase()===e}};var a=t[s[0]];if(a)return!!a(n,s[1]);i=s[1]}return!!e._$attr(n,i)||!!e._$dataset(n,i)||e._$hasClassName(n,i)};return function(t){if(!t)return null;var e=t.target||t.srcElement,s=arguments[1];if(!s)return e;if(i._$isString(s))s=n._$bind(null,s);if(i._$isFunction(s)){for(;e;){if(s(e))return e;e=e.parentNode}return null}return e}}();a._$stop=function(t){a._$stopBubble(t);a._$stopDefault(t)};a._$stopBubble=function(t){if(t)t.stopPropagation?t.stopPropagation():t.cancelBubble=!0};a._$stopDefault=function(t){if(t)t.preventDefault?t.preventDefault():t.returnValue=!1};a._$page=function(t){return{x:a._$pageX(t),y:a._$pageY(t)}};a._$pageX=function(t){return u(t,"X","Left")};a._$pageY=function(t){return u(t,"Y","Top")};a._$clientX=function(t){return f(t,"X","Left")};a._$clientY=function(t){return f(t,"Y","Top")};n._$merge(c);if(!0)t.copy(t.P("nej.v"),a);return a},"a2e1fe5ad329e35f3966d36c90672926","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","b8b996468e25a07cbdc7f02ea79cb525","8587f106cdd072b3b7324d46f3d95aa0");!function(){if("undefined"==typeof TrimPath){TrimPath={};if("undefined"!=typeof exports)TrimPath=exports}var t={},e=[],i=/\s+/g,n=+new Date,s,a,o;var r=function(){var t=/^\s*[\[\{'"].*?[\]\}'"]\s*$/,e=/[\&\|\<\>\+\-\*\/\%\,\(\)\[\]\?\:\!\=\;]/,i=/^(?:defined|null|undefined|true|false|instanceof|new|this|typeof|\$v|[\d]+)$/i,n=/^new\s+/,s=/['"]/;var a=function(e){if(!t.test(e)){e=e.split(".")[0].trim();if(e&&!s.test(e)){e=e.replace(n,"");try{if(i.test(e))return;o[e]=1}catch(a){}}}};return function(i){i=i||"";if(i&&!t.test(i)){var n=i.split(e);for(var s=0,o=n.length;s<o;s++)a(n[s])}}}();var _=function(t){if("in"!=t[2])throw"bad for loop statement: "+t.join(" ");e.push(t[1]);r(t[3]);return"var __HASH__"+t[1]+" = "+t[3]+","+t[1]+","+t[1]+"_count=0;if (!!__HASH__"+t[1]+")for(var "+t[1]+"_key in __HASH__"+t[1]+"){"+t[1]+" = __HASH__"+t[1]+"["+t[1]+"_key];if (typeof("+t[1]+')=="function") continue;'+t[1]+"_count++;"};var d=function(){var t=e[e.length-1];return"}; if(!__HASH__"+t+"||!"+t+"_count){"};var c=function(){e.pop();return"};"};var l=function(t){if("as"!=t[2])throw"bad for list loop statement: "+t.join(" ");var e=t[1].split("..");if(e.length>1){r(e[0]);r(e[1]);return"for(var "+t[3]+","+t[3]+"_index=0,"+t[3]+"_beg="+e[0]+","+t[3]+"_end="+e[1]+","+t[3]+"_length=parseInt("+t[3]+"_end-"+t[3]+"_beg+1);"+t[3]+"_index<"+t[3]+"_length;"+t[3]+"_index++){"+t[3]+" = "+t[3]+"_beg+"+t[3]+"_index;"}else{r(t[1]);return"for(var __LIST__"+t[3]+" = "+t[1]+","+t[3]+","+t[3]+"_index=0,"+t[3]+"_length=__LIST__"+t[3]+".length;"+t[3]+"_index<"+t[3]+"_length;"+t[3]+"_index++){"+t[3]+" = __LIST__"+t[3]+"["+t[3]+"_index];"}};var f=function(t){if(t&&t.length){t.shift();var e=t[0].split("(")[0];return"var "+e+" = function"+t.join("").replace(e,"")+"{var __OUT=[];"}};var u=function(t){if(!t[1])throw"bad include statement: "+t.join(" ");return'if (typeof inline == "function"){__OUT.push(inline('};var h=function(t,e){r(e.slice(1).join(" "));return t};var p=function(t){return h("if(",t)};var m=function(t){return h("}else if(",t)};var g=function(t){return h("var ",t)};a={blk:/^\{(cdata|minify|eval)/i,tag:"forelse|for|list|if|elseif|else|var|macro|break|notrim|trim|include",def:{"if":{pfix:p,sfix:"){",pmin:1},"else":{pfix:"}else{"},elseif:{pfix:m,sfix:"){",pdft:"true"},"/if":{pfix:"}"},"for":{pfix:_,pmin:3},forelse:{pfix:d},"/for":{pfix:c},list:{pfix:l,pmin:3},"/list":{pfix:"};"},"break":{pfix:"break;"},"var":{pfix:g,sfix:";"},macro:{pfix:f},"/macro":{pfix:'return __OUT.join("");};'},trim:{pfix:function(){s=!0}},"/trim":{pfix:function(){s=null}},inline:{pfix:u,pmin:1,sfix:"));}"}},ext:{seed:function(t){return(t||"")+""+n},"default":function(t,e){return t||e}}};var b=function(){var t=/\\([\{\}])/g;return function(e,n){e=e.replace(t,"$1");var s=e.slice(1,-1).split(i),o=a.def[s[0]];if(o){if(o.pmin&&o.pmin>=s.length)throw"Statement needs more parameters:"+e;n.push(o.pfix&&"string"!=typeof o.pfix?o.pfix(s):o.pfix||"");if(o.sfix){if(s.length<=1){if(o.pdft)n.push(o.pdft)}else for(var r=1,_=s.length;r<_;r++){if(r>1)n.push(" ");n.push(s[r])}n.push(o.sfix)}}else $(e,n)}}();var v=function(t,e){if(t&&t.length)if(1!=t.length){var i=t.pop().split(":");e.push("__MDF['"+i.shift()+"'](");v(t,e);if(i.length>0){var n=i.join(":");r(n);e.push(","+n)}e.push(")")}else{var s=t.pop();r(s);e.push(""==s?'""':s)}};var $=function(t,e){if(t){var i=t.split("\n");if(i&&i.length)for(var n=0,a=i.length,o;n<a;n++){o=i[n];if(s){o=o.trim();if(!o)continue}y(o,e);if(s&&n<a-1)e.push("__OUT.push('\\n');")}}};var y=function(){var t=/\|\|/g,e=/#@@#/g;return function(i,n){var s="}",a=-1,o=i.length,r,_,d,c,l;for(;a+s.length<o;){r="${";_="}";d=i.indexOf(r,a+s.length);if(d<0)break;if("%"==i.charAt(d+2)){r="${%";_="%}"}c=i.indexOf(_,d+r.length);if(c<0)break;x(i.substring(a+s.length,d),n);l=i.substring(d+r.length,c).replace(t,"#@@#").split("|");for(var f=0,u=l.length;f<u;l[f]=l[f].replace(e,"||"),f++);n.push("__OUT.push(");v(l,n);n.push(");");s=_;a=c}x(i.substring(a+s.length),n)}}();var x=function(){var t={r:/\n|\\|\'/g,"\n":"\\n","\\":"\\\\","'":"\\'"};var e=function(e){return(e||"").replace(t.r,function(e){return t[e]||e})};return function(t,i){if(t)i.push("__OUT.push('"+e(t)+"');")}}();var w=function(){var t=/\t/g,e=/\n/g,n=/\r\n?/g;var s=function(t,e){var i=t.indexOf("}",e+1);for(;"\\"==t.charAt(i-1);)i=t.indexOf("}",i+1);return i};var r=function(){var t=[],e=arguments[0];for(var i in e){i=(i||"").trim();if(i)t.push(i+"=$v('"+i+"')");else;}return t.length>0?"var "+t.join(",")+";":""};return function(_){o={};_=_.replace(n,"\n").replace(t,"    ");var d=["if(!__CTX) return '';",""];d.push("function $v(__NAME){var v = __CTX[__NAME];return v==null?window[__NAME]:v;};");d.push("var defined=function(__NAME){return __CTX[__NAME]!=null;},");d.push("__OUT=[];");var c=-1,l=_.length;var f,u,h,p,m,g,v,y;for(;c+1<l;){f=c;f=_.indexOf("{",f+1);for(;f>=0;){u=s(_,f);h=_.substring(f,u);p=h.match(a.blk);if(p){m=p[1].length+1;g=_.indexOf("}",f+m);if(g>=0){v=g-f-m<=0?"{/"+p[1]+"}":h.substr(m+1);m=_.indexOf(v,g+1);if(m>=0){$(_.substring(c+1,f),d);y=_.substring(g+1,m);switch(p[1]){case"cdata":x(y,d);break;case"minify":x(y.replace(e," ").replace(i," "),d);break;case"eval":if(y)d.push("__OUT.push((function(){"+y+"})());")}f=c=m+v.length-1}}}else if("$"!=_.charAt(f-1)&&"\\"!=_.charAt(f-1)&&0==h.substr("/"==h.charAt(1)?2:1).search(a.tag))break;f=_.indexOf("{",f+1)}if(f<0)break;u=s(_,f);if(u<0)break;$(_.substring(c+1,f),d);b(_.substring(f,u+1),d);c=u}$(_.substring(c+1),d);d.push(';return __OUT.join("");');d[1]=r(o);o=null;return new Function("__CTX","__MDF",d.join(""))}}();TrimPath.seed=function(){return n};TrimPath.merge=function(){var e={};TrimPath.dump=function(){return{func:e,text:t}};return function(i,n,s){try{n=n||{};if(!e[i]&&!t[i])return"";if(!e[i]){e[i]=w(t[i]);delete t[i]}if(s)for(var o in a.ext)if(!s[o])s[o]=a.ext[o];return e[i](n,s||a.ext)}catch(r){return r.message||""}}}();TrimPath.parse=function(){var e=+new Date;return function(i,n){if(!i)return"";n=n||"ck-"+e++;if(null!=t[n]){console.warn("jst template overwrited with key "+n);console.debug("old template content: "+t[n].replace(/\n/g," "));console.debug("new template content: "+i.replace(/\n/g," "))}t[n]=i;return n}}()}();I$("2a0f6f00e8af2a07d5b9a7c4620f5b4e",function(t,e,i,n,s,a,o,r,_){var d={};a._$seed=TrimPath.seed;a._$get=function(){var t=function(t){return!a._$getTextTemplate?"":a._$getTextTemplate(t)};return function(i,n,s){n=n||{};n.inline=t;s=e._$merge({},d,s);s.rand=e._$uniqueID;s.format=e._$format;s.escape=e._$escape;s.inline=t;return TrimPath.merge(i,n,s)}}();a._$add=function(t,e){if(!t)return"";var n,s=i._$get(t);if(s){n=s.id;t=s.value||s.innerText;if(!e)i._$remove(s)}return TrimPath.parse(t,n)};a._$addTemplate=function(t,e){return TrimPath.parse(t,e)};a._$render=function(t,e,n,s){t=i._$get(t);if(t)t.innerHTML=a._$get(e,n,s)};a._$extend=function(t){e._$merge(d,t)};n._$merge({_$render:a._$render});if(!0){var c=t.P("nej.e");c._$addHtmlTemplate=a._$add;c._$getHtmlTemplate=a._$get;c._$getHtmlTemplateSeed=a._$seed;c._$renderHtmlTemplate=a._$render;c._$registJSTExt=a._$extend}return a},"a2e1fe5ad329e35f3966d36c90672926","fbbf6ddc0634989027d138f4ffd4b78b","5fb495f256a5dcde2a92e5fe919a6422","b8b996468e25a07cbdc7f02ea79cb525","3def9363c64f1debc440c3eac2247e92");I$("e32a3e597220aa11cee4e5c41da1a3ff",function(t,e,i,n,s,a,o,r){var _;s._$$EventTarget=e._$klass();_=s._$$EventTarget.prototype;s._$$EventTarget._$allocate=function(t){t=t||{};var e=!!this.__pool&&this.__pool.shift();if(!e){e=new this(t);this.__inst__=(this.__inst__||0)+1}e.__reset(t);return e};s._$$EventTarget._$recycle=function(){var t=function(t,e,i){t._$recycle();i.splice(e,1)};return function(e){if(!e)return null;if(!n._$isArray(e)){if(!(e instanceof this)){var i=e.constructor;if(i._$recycle)i._$recycle(e);return null}if(e==this.__instance)delete this.__instance;if(e==this.__inctanse)delete this.__inctanse;e.__destroy();if(!this.__pool)this.__pool=[];if(n._$indexOf(this.__pool,e)<0)this.__pool.push(e);return null}n._$reverseEach(e,t,this)}}();
s._$$EventTarget._$getInstance=function(t){if(!this.__instance)this.__instance=this._$allocate(t);return this.__instance};s._$$EventTarget._$getInstanceWithReset=function(t,e){if(e&&this.__inctanse){this.__inctanse._$recycle();delete this.__inctanse}if(!this.__inctanse)this.__inctanse=this._$allocate(t);else this.__inctanse.__reset(t);return this.__inctanse};_.__init=function(){this.__events={};this.__events_dom={};this.id=n._$uniqueID()};_.__reset=function(t){this._$batEvent(t)};_.__destroy=function(){this._$clearEvent();this.__doClearDomEvent()};_.__doInitDomEvent=function(){var t=function(t){if(t&&!(t.length<3)){this.__events_dom["de-"+n._$uniqueID()]=t;i._$addEvent.apply(i,t)}};return function(e){n._$forEach(e,t,this)}}();_.__doClearDomEvent=function(){var t=function(t,e,n){delete n[e];i._$delEvent.apply(i,t)};return function(){n._$loop(this.__events_dom,t)}}();_.__doClearComponent=function(t){t=t||o;n._$loop(this,function(e,i,n){if(e&&e._$recycle&&!t(e)){delete n[i];e._$recycle()}})};_._$recycle=function(){this.constructor._$recycle(this)};_._$hasEvent=function(t){var t=(t||"").toLowerCase(),e=this.__events[t];return!!e&&e!==o};_._$delEvent=function(t,e){var t=(t||"").toLowerCase(),i=this.__events[t];if(n._$isArray(i)){n._$reverseEach(i,function(t,i,n){if(t==e)n.splice(i,1)});if(!i.length)delete this.__events[t]}else if(i==e)delete this.__events[t]};_._$setEvent=function(t,e){if(t&&n._$isFunction(e))this.__events[t.toLowerCase()]=e};_._$batEvent=function(){var t=function(t,e){this._$setEvent(e,t)};return function(e){n._$loop(e,t,this)}}();_._$clearEvent=function(){var t=function(t,e){this._$clearEvent(e)};return function(e){var e=(e||"").toLowerCase();if(e)delete this.__events[e];else n._$loop(this.__events,t,this)}}();_._$addEvent=function(t,e){if(t&&n._$isFunction(e)){t=t.toLowerCase();var i=this.__events[t];if(i){if(!n._$isArray(i))this.__events[t]=[i];this.__events[t].push(e)}else this.__events[t]=e}};_._$dispatchEvent=function(t){var t=(t||"").toLowerCase(),e=this.__events[t];if(e){var i=r.slice.call(arguments,1);if(n._$isArray(e))n._$forEach(e,function(t){if(!1)t.apply(this,i);else try{t.apply(this,i)}catch(e){console.error(e.message);console.error(e.stack)}},this);else e.apply(this,i)}};if(!0){s._$$Event=s._$$EventTarget;t.copy(t.P("nej.ut"),s)}return s},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b");I$("5f75dc6bf6467f0a29ae4a457d2e9c8c",function(t,e,i,n,s,a,o,r,_,d){var c;o._$$CustomEvent=e._$klass();c=o._$$CustomEvent._$extend(a._$$EventTarget);c.__init=function(){this.__cache={};this.__super()};c.__reset=function(t){this.__super(t);this.__element=i._$get(t.element)||window;this.__doEventInit(t.event);this.__doEventAPIEnhance();this._$dispatchEvent("oninit")};c.__destroy=function(){var t=function(t,e,i){if(!s._$isArray(t))s._$safeDelete(this.__element,e);delete i[e]};return function(){this.__super();s._$loop(this.__cache,t,this);delete this.__element}}();c.__isDelegate=function(t,e){t=i._$get(t);return!(t!==this.__element||e&&!this.__cache["on"+e])};c.__doEventInit=function(t){if(!s._$isString(t)){if(s._$isArray(t))s._$forEach(t,this.__doEventInit,this)}else{var e="on"+t;if(!this.__cache[e])this.__cache[e]=this.__doEventDispatch._$bind(this,t);this.__doEventBind(t)}};c.__doEventBind=function(t){var e="on"+t,i=this.__element[e],n=this.__cache[e];if(i!=n){this.__doEventDelete(t);if(i&&i!=_)this.__doEventAdd(t,i);this.__element[e]=n}};c.__doEventAdd=function(t,e,i){var n=this.__cache[t];if(!n){n=[];this.__cache[t]=n}if(s._$isFunction(e))!i?n.push(e):n.unshift(e)};c.__doEventDelete=function(t,e){var i=this.__cache[t];if(i&&i.length)if(e)s._$reverseEach(i,function(t,i,n){if(e===t){n.splice(i,1);return!0}});else delete this.__cache[t]};c.__doEventDispatch=function(t,e){e=e||{noargs:!0};if(e==r)e={};e.type=t;this._$dispatchEvent("ondispatch",e);if(!e.stopped)s._$forEach(this.__cache[t],function(t){if(!1)t(e);else try{t(e)}catch(i){console.error(i.message);console.error(i.stack)}})};c.__doEventAPIEnhance=function(){var e=function(t){var e=t.args,i=e[1].toLowerCase();if(this.__isDelegate(e[0],i)){t.stopped=!0;this.__doEventBind(i);this.__doEventAdd(i,e[2],e[3]);this._$dispatchEvent("oneventadd",{type:i,listener:e[2]})}};var i=function(t){var e=t.args,i=e[1].toLowerCase();if(this.__isDelegate(e[0],i)){t.stopped=!0;this.__doEventDelete(i,e[2])}};var a=function(t){var e=t.args,i=(e[1]||"").toLowerCase();if(this.__isDelegate(e[0])){if(i){this.__doEventDelete(i);return}s._$loop(this.__cache,function(t,e){if(s._$isArray(t))this.__doEventDelete(e)},this)}};var o=function(t){var e=t.args,i=e[1].toLowerCase();if(this.__isDelegate(e[0],i)){t.stopped=!0;e[0]["on"+i].apply(e[0],e.slice(2))}};return function(){if(!this.__enhanced){this.__enhanced=!0;n._$addEvent=n._$addEvent._$aop(e._$bind(this));n._$delEvent=n._$delEvent._$aop(i._$bind(this));n._$clearEvent=n._$clearEvent._$aop(a._$bind(this));n._$dispatchEvent=n._$dispatchEvent._$aop(o._$bind(this));if(!0)t.copy(t.P("nej.v"),n)}}}();if(!0)t.copy(t.P("nej.ut"),o);return o},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","e32a3e597220aa11cee4e5c41da1a3ff");I$("1861e36d9953d297b72b4879b198cb59",function(t,e,i,n,s,a,o,r,_,d){var c,l=6e4;o._$$LoaderAbstract=e._$klass();c=o._$$LoaderAbstract._$extend(a._$$EventTarget);c.__init=function(){this.__super();this.__qopt={onerror:this.__onQueueError._$bind(this),onload:this.__onQueueLoaded._$bind(this)};if(!this.constructor.__cache)this.constructor.__cache={loaded:{}}};c.__reset=function(t){this.__super(t);this.__version=t.version;this.__timeout=t.timeout;this.__qopt.version=this.__version;this.__qopt.timeout=this.__timeout};c.__delLoadData=function(t){delete this.constructor.__cache[t]};c.__getLoadData=function(t){return this.constructor.__cache[t]};c.__setLoadData=function(t,e){this.constructor.__cache[t]=e};c.__getRequest=_;c.__doClearRequest=function(t){n._$clearEvent(t)};c.__doRequest=function(t){t.src=this.__url;document.head.appendChild(t)};c.__doClear=function(){var t=this.__getLoadData(this.__url);if(t){window.clearTimeout(t.timer);this.__doClearRequest(t.request);delete t.bind;delete t.timer;delete t.request;this.__delLoadData(this.__url);this.__getLoadData("loaded")[this.__url]=!0}};c.__doCallback=function(t){var e=this.__getLoadData(this.__url);if(e){var i=e.bind;this.__doClear();if(i&&i.length>0){var n;for(;i.length;){n=i.shift();try{n._$dispatchEvent(t,arguments[1])}catch(s){if(!1)throw s;console.error(s.message);console.error(s.stack)}n._$recycle()}}}};c.__onError=function(t){this.__doCallback("onerror",t)};c.__onLoaded=function(){this.__doCallback("onload")};c.__doLoadQueue=function(t){this.constructor._$allocate(this.__qopt)._$load(t)};c.__onQueueCheck=function(t){var e=this.__getLoadData(this.__key);if(e){if(t)e.error++;e.loaded++;if(!(e.loaded<e.total)){this.__delLoadData(this.__key);this._$dispatchEvent(e.error>0?"onerror":"onload")}}};c.__onQueueError=function(t){this.__onQueueCheck(!0)};c.__onQueueLoaded=function(){this.__onQueueCheck()};c._$load=function(t){t=s._$absolute(t);if(t){this.__url=t;if(this.__version)this.__url+=(this.__url.indexOf("?")<0?"?":"&")+this.__version;if(!this.__getLoadData("loaded")[this.__url]){var e=this.__getLoadData(this.__url),a;if(e){e.bind.unshift(this);e.timer=window.clearTimeout(e.timer)}else{a=this.__getRequest();e={request:a,bind:[this]};this.__setLoadData(this.__url,e);n._$addEvent(a,"load",this.__onLoaded._$bind(this));n._$addEvent(a,"error",this.__onError._$bind(this,{code:i._$CODE_ERRSERV,message:"无法加载指定资源文件["+this.__url+"]！"}))}if(0!=this.__timeout)e.timer=window.setTimeout(this.__onError._$bind(this,{code:i._$CODE_TIMEOUT,message:"指定资源文件["+this.__url+"]载入超时！"}),this.__timeout||l);if(a)this.__doRequest(a);this._$dispatchEvent("onloading")}else{try{this._$dispatchEvent("onload")}catch(o){if(!1)throw o;console.error(o.message);console.error(o.stack)}this._$recycle()}}else this._$dispatchEvent("onerror",{code:i._$CODE_NOTASGN,message:"请指定要载入的资源地址！"})};c._$queue=function(t){if(t&&t.length){this.__key=s._$uniqueID();var e={error:0,loaded:0,total:t.length};this.__setLoadData(this.__key,e);s._$forEach(t,function(t,i){if(t)this.__doLoadQueue(t);else e.total--},this);this._$dispatchEvent("onloading")}else this._$dispatchEvent("onerror",{code:i._$CODE_NOTASGN,message:"请指定要载入的资源队列！"})};return o},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","e9f3264f172f0455b684b5c08503be9e","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","e32a3e597220aa11cee4e5c41da1a3ff");I$("948cfd3d7899a2b3fc0e88dc2e0d1a90",function(t,e,i,n,s,a){i._$cookie=function(){var t=new Date,i=+t,s=864e5;var a=function(t){var e=document.cookie,i="\\b"+t+"=",n=e.search(i);if(n<0)return"";n+=i.length-2;var s=e.indexOf(";",n);if(s<0)s=e.length;return e.substring(n,s)||""};return function(o,r){if(void 0===r)return a(o);if(e._$isString(r)){if(r){document.cookie=o+"="+r+";";return r}r={expires:-100}}r=r||n;var _=o+"="+(r.value||"")+";";delete r.value;if(void 0!==r.expires){t.setTime(i+r.expires*s);r.expires=t.toGMTString()}_+=e._$object2string(r,";");document.cookie=_}}();if(!0)t.copy(t.P("nej.j"),i);return i},"a2e1fe5ad329e35f3966d36c90672926","fbbf6ddc0634989027d138f4ffd4b78b");!function(){var t=!0,e=null;!function(i){function n(i){if("bug-string-char-index"==i)return"a"!="a"[0];var n,a="json"==i;if(a||"json-stringify"==i||"json-parse"==i){if("json-stringify"==i||a){var o=d.stringify,_="function"==typeof o&&c;if(_){(n=function(){return 1}).toJSON=n;try{_="0"===o(0)&&"0"===o(new Number)&&'""'==o(new String)&&o(s)===r&&o(r)===r&&o()===r&&"1"===o(n)&&"[1]"==o([n])&&"[null]"==o([r])&&"null"==o(e)&&"[null,null,null]"==o([r,s,e])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==o({a:[n,t,!1,e,"\0\b\n\f\r\t"]})&&"1"===o(e,n)&&"[\n 1,\n 2\n]"==o([1,2],e,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new Date((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==o(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new Date((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==o(new Date((-1)));
}catch(l){_=!1}}if(!a)return _}if("json-parse"==i||a){i=d.parse;if("function"==typeof i)try{if(0===i("0")&&!i(!1)){n=i('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var f=5==n.a.length&&1===n.a[0];if(f){try{f=!i('"\t"')}catch(u){}if(f)try{f=1!==i("01")}catch(h){}}}}catch(p){f=!1}if(!a)return f}return _&&f}}var s={}.toString,a,o,r,_="function"==typeof define&&define.amd,d="object"==typeof exports&&exports;d||_?"object"==typeof JSON&&JSON?d?(d.stringify=JSON.stringify,d.parse=JSON.parse):d=JSON:_&&(d=i.JSON={}):d=i.JSON||(i.JSON={});var c=new Date((-0xc782b5b800cec));try{c=-109252==c.getUTCFullYear()&&0===c.getUTCMonth()&&1===c.getUTCDate()&&10==c.getUTCHours()&&37==c.getUTCMinutes()&&6==c.getUTCSeconds()&&708==c.getUTCMilliseconds()}catch(l){}if(!n("json")){var f=n("bug-string-char-index");if(!c)var u=Math.floor,h=[0,31,59,90,120,151,181,212,243,273,304,334],p=function(t,e){return h[e]+365*(t-1970)+u((t-1969+(e=+(e>1)))/4)-u((t-1901+e)/100)+u((t-1601+e)/400)};if(!(a={}.hasOwnProperty))a=function(t){var i={},n;if((i.__proto__=e,i.__proto__={toString:1},i).toString!=s)a=function(t){var i=this.__proto__,t=t in(this.__proto__=e,this);this.__proto__=i;return t};else{n=i.constructor;a=function(t){var e=(this.constructor||n).prototype;return t in this&&!(t in e&&this[t]===e[t])}}i=e;return a.call(this,t)};var m={"boolean":1,number:1,string:1,undefined:1};o=function(t,i){var n=0,o,r,_;(o=function(){this.valueOf=0}).prototype.valueOf=0;r=new o;for(_ in r)a.call(r,_)&&n++;o=r=e;if(n)n=2==n?function(t,e){var i={},n="[object Function]"==s.call(t),o;for(o in t)!(n&&"prototype"==o)&&!a.call(i,o)&&(i[o]=1)&&a.call(t,o)&&e(o)}:function(t,e){var i="[object Function]"==s.call(t),n,o;for(n in t)!(i&&"prototype"==n)&&a.call(t,n)&&!(o="constructor"===n)&&e(n);(o||a.call(t,n="constructor"))&&e(n)};else{r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];n=function(t,e){var i="[object Function]"==s.call(t),n,o;if(o=!i)if(o="function"!=typeof t.constructor){o=typeof t.hasOwnProperty;o="object"==o?!!t.hasOwnProperty:!m[o]}o=o?t.hasOwnProperty:a;for(n in t)!(i&&"prototype"==n)&&o.call(t,n)&&e(n);for(i=r.length;n=r[--i];o.call(t,n)&&e(n));}}n(t,i)};if(!n("json-stringify")){var g={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},b=function(t,e){return("000000"+(e||0)).slice(-t)},v=function(t){var e='"',i=0,n=t.length,s=n>10&&f,a;for(s&&(a=t.split(""));i<n;i++){var o=t.charCodeAt(i);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=g[o];break;default:if(o<32){e+="\\u00"+b(2,o.toString(16));break}e+=s?a[i]:f?t.charAt(i):t[i]}}return e+'"'},$=function(i,n,_,d,c,l,f){var h=n[i],m,g,y,x,w,S,C,I,E;try{h=n[i]}catch(k){}if("object"==typeof h&&h){m=s.call(h);if("[object Date]"==m&&!a.call(h,"toJSON"))if(h>-1/0&&h<1/0){if(p){y=u(h/864e5);for(m=u(y/365.2425)+1970-1;p(m+1,0)<=y;m++);for(g=u((y-p(m,0))/30.42);p(m,g+1)<=y;g++);y=1+y-p(m,g);x=(h%864e5+864e5)%864e5;w=u(x/36e5)%24;S=u(x/6e4)%60;C=u(x/1e3)%60;x%=1e3}else{m=h.getUTCFullYear();g=h.getUTCMonth();y=h.getUTCDate();w=h.getUTCHours();S=h.getUTCMinutes();C=h.getUTCSeconds();x=h.getUTCMilliseconds()}h=(m<=0||m>=1e4?(m<0?"-":"+")+b(6,m<0?-m:m):b(4,m))+"-"+b(2,g+1)+"-"+b(2,y)+"T"+b(2,w)+":"+b(2,S)+":"+b(2,C)+"."+b(3,x)+"Z"}else h=e;else if("function"==typeof h.toJSON&&("[object Number]"!=m&&"[object String]"!=m&&"[object Array]"!=m||a.call(h,"toJSON")))h=h.toJSON(i)}_&&(h=_.call(n,i,h));if(h===e)return"null";m=s.call(h);if("[object Boolean]"==m)return""+h;if("[object Number]"==m)return h>-1/0&&h<1/0?""+h:"null";if("[object String]"==m)return v(""+h);if("object"==typeof h){for(i=f.length;i--;)if(f[i]===h)throw TypeError();f.push(h);I=[];n=l;l+=c;if("[object Array]"==m){g=0;for(i=h.length;g<i;E||(E=t),g++){m=$(g,h,_,d,c,l,f);I.push(m===r?"null":m)}i=E?c?"[\n"+l+I.join(",\n"+l)+"\n"+n+"]":"["+I.join(",")+"]":"[]"}else{o(d||h,function(e){var i=$(e,h,_,d,c,l,f);i!==r&&I.push(v(e)+":"+(c?" ":"")+i);E||(E=t)});i=E?c?"{\n"+l+I.join(",\n"+l)+"\n"+n+"}":"{"+I.join(",")+"}":"{}"}f.pop();return i}};d.stringify=function(t,e,i){var n,a,o;if("function"==typeof e||"object"==typeof e&&e)if("[object Function]"==s.call(e))a=e;else if("[object Array]"==s.call(e)){o={};for(var r=0,_=e.length,d;r<_;d=e[r++],("[object String]"==s.call(d)||"[object Number]"==s.call(d))&&(o[d]=1));}if(i)if("[object Number]"==s.call(i)){if((i-=i%1)>0){n="";for(i>10&&(i=10);n.length<i;n+=" ");}}else"[object String]"==s.call(i)&&(n=i.length<=10?i:i.slice(0,10));return $("",(d={},d[""]=t,d),a,o,n,"",[])}}if(!n("json-parse")){var y=String.fromCharCode,x={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},w,S,C=function(){w=S=e;throw SyntaxError()},I=function(){for(var i=S,n=i.length,s,a,o,r,_;w<n;){_=i.charCodeAt(w);switch(_){case 9:case 10:case 13:case 32:w++;break;case 123:case 125:case 91:case 93:case 58:case 44:s=f?i.charAt(w):i[w];w++;return s;case 34:s="@";for(w++;w<n;){_=i.charCodeAt(w);if(_<32)C();else if(92==_){_=i.charCodeAt(++w);switch(_){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:s+=x[_];w++;break;case 117:a=++w;for(o=w+4;w<o;w++){_=i.charCodeAt(w);_>=48&&_<=57||_>=97&&_<=102||_>=65&&_<=70||C()}s+=y("0x"+i.slice(a,w));break;default:C()}}else{if(34==_)break;_=i.charCodeAt(w);for(a=w;_>=32&&92!=_&&34!=_;)_=i.charCodeAt(++w);s+=i.slice(a,w)}}if(34==i.charCodeAt(w)){w++;return s}C();default:a=w;if(45==_){r=t;_=i.charCodeAt(++w)}if(_>=48&&_<=57){for(48==_&&(_=i.charCodeAt(w+1),_>=48&&_<=57)&&C();w<n&&(_=i.charCodeAt(w),_>=48&&_<=57);w++);if(46==i.charCodeAt(w)){for(o=++w;o<n&&(_=i.charCodeAt(o),_>=48&&_<=57);o++);o==w&&C();w=o}_=i.charCodeAt(w);if(101==_||69==_){_=i.charCodeAt(++w);(43==_||45==_)&&w++;for(o=w;o<n&&(_=i.charCodeAt(o),_>=48&&_<=57);o++);o==w&&C();w=o}return+i.slice(a,w)}r&&C();if("true"==i.slice(w,w+4)){w+=4;return t}if("false"==i.slice(w,w+5)){w+=5;return!1}if("null"==i.slice(w,w+4)){w+=4;return e}C()}}return"$"},E=function(e){var i,n;"$"==e&&C();if("string"==typeof e){if("@"==(f?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(i=[];;n||(n=t)){e=I();if("]"==e)break;if(n)if(","==e){e=I();"]"==e&&C()}else C();","==e&&C();i.push(E(e))}return i}if("{"==e){for(i={};;n||(n=t)){e=I();if("}"==e)break;if(n)if(","==e){e=I();"}"==e&&C()}else C();(","==e||"string"!=typeof e||"@"!=(f?e.charAt(0):e[0])||":"!=I())&&C();i[e.slice(1)]=E(I())}return i}C()}return e},k=function(t,e,i){i=j(t,e,i);i===r?delete t[e]:t[e]=i},j=function(t,e,i){var n=t[e],a;if("object"==typeof n&&n)if("[object Array]"==s.call(n))for(a=n.length;a--;)k(n,a,i);else o(n,function(t){k(n,t,i)});return i.call(t,e,n)};d.parse=function(t,i){var n,a;w=0;S=""+t;n=E(I());"$"!=I()&&C();w=S=e;return i&&"[object Function]"==s.call(i)?j((a={},a[""]=n,a),"",i):n}}}_&&define(function(){return d})}(this);return JSON}();I$("46dfd353578b16fda05c3de4513f70b8",function(_m,_p,_o,_f,_r){if("trident"===_m._$KERNEL.engine&&"2.0"==_m._$KERNEL.release)I$("2e64cd406d565447db914497af12ad3a",function(){JSON.parse=function(){var _isSafeJSON=function(t){return!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(t.replace(/"(\\.|[^"\\])*"/g,""))};return JSON.parse._$aop(function(_event){var _str=_event.args[0]||"";if(_str.length>=5e5){_event.stopped=!0;_event.value=eval("("+_str+")")}})}()});return JSON},"e7be6ff9122e14c2be65196e9dffe066");I$("dbf5521d3d1c3fc354b111366f669416",function(){return JSON},"46dfd353578b16fda05c3de4513f70b8");I$("526c1ee2a753e0d8f6a18b9128a93e08",function(t,e,i,n,s,a,o,r,_,d,c,l){var f;_._$$ProxyAbstract=t._$klass();f=_._$$ProxyAbstract._$extend(a._$$EventTarget);f.__reset=function(t){this.__super(t);this.__request=e._$fetch({url:"",sync:!1,cookie:!1,type:"text",method:"GET",timeout:6e4},t);var i=n._$get("csrf");if(i.cookie&&i.param){var a=encodeURIComponent(i.param)+"="+encodeURIComponent(o._$cookie(i.cookie)||""),r=this.__request.url.indexOf("?")<0?"?":"&";this.__request.url+=r+a}this.__headers=t.headers||{};var _=this.__headers[s._$HEAD_CT];if(null==_)this.__headers[s._$HEAD_CT]=s._$HEAD_CT_FORM};f.__destroy=function(){this.__super();delete this.__rkey;delete this.__request;delete this.__headers};f.__onLoadRequest=function(t){var e=t.status;if(e!=-1)if(0==(""+e).indexOf("2"))this._$dispatchEvent("onload",i._$text2type(t.result,this.__request.type));else this._$dispatchEvent("onerror",{data:e,result:t.result,code:s._$CODE_ERRSERV,message:"服务器返回异常状态["+e+"]!"});else this._$dispatchEvent("onerror",{code:s._$CODE_TIMEOUT,message:"请求["+this.__request.url+"]超时！"})};f.__doSendRequest=c;f.__getResponseHeader=c;f._$send=function(t){var e=this.__request.url;if(e)try{this.__request.data=null==t?null:t;var i={request:this.__request,headers:this.__headers};try{this._$dispatchEvent("onbeforerequest",i)}catch(n){console.error(n.message);console.error(n.stack)}this.__doSendRequest(i)}catch(a){this._$dispatchEvent("onerror",{code:s._$CODE_ERRSERV,message:"请求["+e+"]失败:"+a.message+"！"})}else this._$dispatchEvent("onerror",{code:s._$CODE_NOTASGN,message:"没有输入请求地址！"})};f._$abort=c;f._$header=function(t){if(!e._$isArray(t))return this.__getResponseHeader(t)||"";var i={};e._$forEach(t,function(t){i[t]=this._$header(t)},this);return i};return _},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","5fb495f256a5dcde2a92e5fe919a6422","c9ad5ec4461d887e3ff2709e526c3857","e9f3264f172f0455b684b5c08503be9e","e32a3e597220aa11cee4e5c41da1a3ff","948cfd3d7899a2b3fc0e88dc2e0d1a90","dbf5521d3d1c3fc354b111366f669416");I$("3de5b654d1e9976c497b9fadfd2acb3a",function(t,e,i,n){t.__getXMLHttpRequest=function(){return new XMLHttpRequest};return t});I$("364c4b78dbebbf550630ad88c6261bef",function(t,e,i,n,s,a,o){if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="2.0")I$("1e3bdb41ba9ae78f5613d33d32067c59",function(){e.__getXMLHttpRequest=function(){var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.5.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];return function(){var e=null;i._$forIn(t,function(t){try{e=new ActiveXObject(t);return!0}catch(i){}
});return e}}()});return e},"e7be6ff9122e14c2be65196e9dffe066","3de5b654d1e9976c497b9fadfd2acb3a","fbbf6ddc0634989027d138f4ffd4b78b");I$("b8f95236f29ac5710b2a279946beed15",function(t,e,i,n,s,a,o,r,_){var d;a._$$ProxyXHR=i._$klass();d=a._$$ProxyXHR._$extend(t._$$ProxyAbstract);d.__destroy=function(){this.__super();window.clearTimeout(this.__timer);delete this.__timer;try{this.__xhr.onreadystatechange=r;this.__xhr.abort()}catch(t){}delete this.__xhr};d.__doSendRequest=function(){var t=function(t,e){this.__xhr.setRequestHeader(e,t)};var i=function(t){var i=[];e._$reverseEach(t.getElementsByTagName("input"),function(t){if("file"==t.type)if(t.name){if(t.files.length>1){e._$forEach(t.files,function(e){i.push({name:t.name,file:e})});t.parentNode.removeChild(t)}}else t.parentNode.removeChild(t)});return i.length>0?i:null};return function(a){var o=a.request,r=a.headers;this.__xhr=s.__getXMLHttpRequest();if(r[n._$HEAD_CT]===n._$HEAD_CT_FILE){delete r[n._$HEAD_CT];this.__xhr.upload.onprogress=this.__onStateChange._$bind(this,1);if("FORM"===o.data.tagName){var _=i(o.data);o.data=new FormData(o.data);e._$forEach(_,function(t){var i=t.file;o.data.append(t.name||i.name||"file-"+e._$uniqueID(),i)})}}this.__xhr.onreadystatechange=this.__onStateChange._$bind(this,2);if(0!==o.timeout)this.__timer=window.setTimeout(this.__onStateChange._$bind(this,3),o.timeout);this.__xhr.open(o.method,o.url,!o.sync);e._$loop(r,t,this);if(this.__request.cookie&&"withCredentials"in this.__xhr)this.__xhr.withCredentials=!0;if(!(r[n._$HEAD_CT]!==n._$HEAD_CT_FORM||window.FormData&&o.data instanceof window.FormData))o.data=e._$object2string(o.data,"&");this.__xhr.send(o.data)}}();d.__onStateChange=function(t){switch(t){case 1:this._$dispatchEvent("onuploading",arguments[1]);break;case 2:if(4==this.__xhr.readyState)this.__onLoadRequest({status:this.__xhr.status,result:this.__xhr.responseText||""});break;case 3:this.__onLoadRequest({status:-1})}};d.__getResponseHeader=function(t){return!this.__xhr?"":this.__xhr.getResponseHeader(t)};d._$abort=function(){this.__onLoadRequest({status:0})};return a},"526c1ee2a753e0d8f6a18b9128a93e08","fbbf6ddc0634989027d138f4ffd4b78b","e4f0b0b7857ed3c1e2d0a46ba5b670d6","e9f3264f172f0455b684b5c08503be9e","364c4b78dbebbf550630ad88c6261bef");I$("46d2c840d197bd3d5930f75cb1489a53",function(t,e,i,n,s){var a=this,o=t._$KERNEL.prefix.pro,r=t._$is("desktop")?80:t._$is("ios")?50:30;e.__requestAnimationFrame=function(){var e=t._$is("android")?null:a.requestAnimationFrame||a[o+"RequestAnimationFrame"];return function(){if(!e)e=function(t){return window.setTimeout(function(){try{t(+new Date)}catch(e){}},1e3/r)};return e.apply(this,arguments)}}();e.__cancelAnimationFrame=function(){var e=t._$is("android")?null:a.cancelAnimationFrame||a[o+"CancelAnimationFrame"];return function(){if(!e)e=function(t){window.clearTimeout(t)};return e.apply(this,arguments)}}();return e},"e7be6ff9122e14c2be65196e9dffe066");I$("ab159910bce08196b991c9c82d13619e",function(t,e){return t},"46d2c840d197bd3d5930f75cb1489a53","e7be6ff9122e14c2be65196e9dffe066");I$("424f8506ac4d9ad6d34fecf84130c1b2",function(t,e,i,n,s,a){i.requestAnimationFrame=function(){e.__requestAnimationFrame.apply(null,arguments)};i.cancelAnimationFrame=function(){e.__cancelAnimationFrame.apply(null,arguments)};if(!0){if(!this.requestAnimationFrame)this.requestAnimationFrame=i.requestAnimationFrame;if(!this.cancelAnimationFrame)this.cancelAnimationFrame=i.cancelAnimationFrame}return i},"e7be6ff9122e14c2be65196e9dffe066","ab159910bce08196b991c9c82d13619e");I$("6b0c9f13d4500d146ea20d45ae929ac0",function(t,e,i,n,s){e.__canFlashEventBubble=function(t){return"transparent"!=(t||"").toLowerCase()};return e},"e7be6ff9122e14c2be65196e9dffe066");I$("76c4709f5d05f9660c4136c43947b2ee",function(t,e,i,n,s,a){if("trident"===e._$KERNEL.engine)I$("ec0e4fb2d45a9d1696cbccac0553e2d9",function(){t.__canFlashEventBubble=function(t){return!0}});if("webkit"===e._$KERNEL.engine)I$("8e87226c274d7cc44cd3a11197df3602",function(){t.__canFlashEventBubble=function(t){return!0}});return t},"6b0c9f13d4500d146ea20d45ae929ac0","e7be6ff9122e14c2be65196e9dffe066");I$("ca9bcb80b6f18355174156e809d314fa",'{var hide  = defined("hidden")&&!!hidden}\n{var param = defined("params")&&params||NEJ.O}\n{var width = !hide?width:"1px",height = !hide?height:"1px"}\n{if hide}<div style="position:absolute;top:0;left:0;width:1px;height:1px;z-index:10000;overflow:hidden;">{/if}\n<object classid = "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"\n        codebase = "http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"\n        width = "${width|default:"100px"}"\n        height = "${height|default:"100px"}" id="${id}">\n    <param value="${src}" name="movie">\n    {for x in param}\n    <param value="${x}" name="${x_key}"/>\n    {/for}\n    <embed src="${src}" name="${id}"\n           width="${width|default:"100px"}"\n           height="${height|default:"100px"}"\n           pluginspage="http://www.adobe.com/go/getflashplayer"\n           type="application/x-shockwave-flash"\n           {for x in param}${x_key}="${x}" {/for}></embed>\n</object>\n{if hide}</div>{/if}');I$("93f767e8b0f06b4a7264b40af6116cb6",function(t,e,i,n,s,a,o,r,_,d,c,l){var f=s._$add(r);_._$flash=function(){var r={},_,d=/^(?:mouse.*|(?:dbl)?click)$/i;window.onflashevent=function(t){var e=decodeURIComponent(t.target),i=t.type.toLowerCase();var n=r[e+"-tgt"];if(n&&d.test(i))l(n,t);var s=r[e+"-on"+i];if(s){var a="";try{a=s(t)}catch(o){}return a}};var c=function(t){_=document.title;var i=e._$get(t.parent)||document.body,n=s._$get(f,t);i.insertAdjacentHTML(!t.hidden?"beforeEnd":"afterBegin",n)};var l=function(t,e){var n=e.type.toLowerCase();a.requestAnimationFrame(function(){i._$dispatchEvent(t,n)})};var u=function(t){return!!t&&!!t.inited&&!!t.inited()};var h=function(t){var i=[document.embeds[t],e._$get(t),document[t],window[t]],s=n._$forIn(i,u),a=i[s],o=t+"-count";r[o]++;if(!(a||r[o]>100))window.setTimeout(h._$bind(null,t),300);else{if(_){document.title=_;_=null}r[t](a);delete r[t];delete r[o]}};var p=function(t){var i=t.id,s=t.params;if(!s){s={};t.params=s}var a=s.flashvars||"";a+=(!a?"":"&")+("id="+i);if(!t.hidden&&(t.target||o.__canFlashEventBubble(s.wmode))){var _=e._$id(t.target)||e._$id(t.parent);r[i+"-tgt"]=_}s.flashvars=a;n._$loop(t,function(t,e){if(n._$isFunction(t)&&"onready"!=e)r[i+"-"+e]=t})};return function(e){e=t.X({},e);if(e.src){var i="_"+n._$uniqueID();e.id=i;p(e);c(e);if(e.onready){r[i]=e.onready;r[i+"-count"]=0;h(i)}}}}();if(!0)t.copy(t.P("nej.e"),_);return _},"a2e1fe5ad329e35f3966d36c90672926","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","2a0f6f00e8af2a07d5b9a7c4620f5b4e","424f8506ac4d9ad6d34fecf84130c1b2","76c4709f5d05f9660c4136c43947b2ee","ca9bcb80b6f18355174156e809d314fa");I$("900b04be23b57893068127726819b651",function(t,e,i,n,s,a,o,r,_){var d,c={},l=n._$uniqueID();this["ld"+l]=function(t,e){var i=c[t];if(i){delete c[t];i.__onLoadRequest({status:200,result:e})}};this["er"+l]=function(t,e){var i=c[t];if(i){delete c[t];i.__onLoadRequest({status:e||0})}};a._$$ProxyFlash=e._$klass();d=a._$$ProxyFlash._$extend(t._$$ProxyAbstract);d.__doSendRequest=function(t){var e=c.flash;if(!n._$isArray(e))if(e){this.__rkey=n._$uniqueID();c[this.__rkey]=this;var a=n._$fetch({url:"",data:null,method:"GET"},t.request);a.key=this.__rkey;a.headers=t.headers;a.onerror="cb.er"+l;a.onloaded="cb.ld"+l;var o=i._$getFlashProxy(a.url);if(o)a.policyURL=o;e.request(a)}else{c.flash=[this.__doSendRequest._$bind(this,t)];s._$flash({hidden:!0,src:i._$get("ajax.swf"),onready:function(t){if(t){var e=c.flash;c.flash=t;n._$reverseEach(e,function(t,e,i){try{t()}catch(n){}})}}})}else e.push(this.__doSendRequest._$bind(this,t))};d._$abort=function(){delete c[this.__rkey];this.__onLoadRequest({status:0})};return a},"526c1ee2a753e0d8f6a18b9128a93e08","e4f0b0b7857ed3c1e2d0a46ba5b670d6","c9ad5ec4461d887e3ff2709e526c3857","fbbf6ddc0634989027d138f4ffd4b78b","93f767e8b0f06b4a7264b40af6116cb6");I$("79269dd9b645771518c98ebdbb1e783a",function(t,e,i,n){t.__formatOrigin=function(){var t=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(e){e=e||"";if(t.test(e))return RegExp.$1;else return"*"}}();t.__formatPassData=function(t){return t};t.__postMessage=function(i,n){if(i.postMessage){n=n||e;i.postMessage(t.__formatPassData(n.data),t.__formatOrigin(n.origin))}};return t});I$("9b6003140fd9b3e3be3596d1848a7866",function(t,e,i,n,s,a,o,r){if("trident"===t._$KERNEL.engine&&t._$KERNEL.release>="4.0"&&t._$KERNEL.release<="5.0")I$("4bb8ea67d3e6a4e416f4cbd218678871",function(){e.__formatPassData=function(t){return JSON.stringify(t)}});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="3.0")I$("25cafd8cfc94842b99c2812162539391",function(t){var s="MSG|",o=[];var r=function(){var t=unescape(window.name||"").trim();if(t&&0==t.indexOf(s)){window.name="";var a=i._$string2object(t.replace(s,""),"|"),o=(a.origin||"").toLowerCase();if(!o||"*"==o||0==location.href.toLowerCase().indexOf(o))n._$dispatchEvent(window,"message",{data:JSON.parse(a.data||"null"),source:window.frames[a.self]||a.self,origin:e.__formatOrigin(a.ref||document.referrer)})}};var _=function(){var t;var e=function(e,n,s){if(i._$indexOf(t,e.w)<0){t.push(e.w);s.splice(n,1);e.w.name=e.d}};return function(){t=[];i._$reverseEach(o,e);t=null}}();e.__postMessage=function(){var t=function(t){var e={};t=t||a;e.origin=t.origin||"";e.ref=location.href;e.self=t.source;e.data=JSON.stringify(t.data);return s+i._$object2string(e,"|",!0)};return function(e,i){o.unshift({w:e,d:escape(t(i))})}}();t._$$CustomEvent._$allocate({element:window,event:"message"});setInterval(_,100);setInterval(r,20)},"5f75dc6bf6467f0a29ae4a457d2e9c8c","dbf5521d3d1c3fc354b111366f669416");return e},"e7be6ff9122e14c2be65196e9dffe066","79269dd9b645771518c98ebdbb1e783a","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a");I$("462a792928c20d57bde43183b9298d69",function(t,e,i,n,s,a,o,r){s._$postMessage=function(){var t=window.name||"_parent",s={
_top:window.top,_self:window,_parent:window.parent};return function(o,r){if(e._$isString(o)){o=s[o]||window.frames[o]||(i._$get(o)||a).contentWindow;if(!o)return}var _=e._$fetch({data:null,origin:"*",source:t},r);n.__postMessage(o,_)}}();if(!0)t.copy(t.P("nej.j"),s);return s},"a2e1fe5ad329e35f3966d36c90672926","fbbf6ddc0634989027d138f4ffd4b78b","5fb495f256a5dcde2a92e5fe919a6422","9b6003140fd9b3e3be3596d1848a7866");I$("7e80ac58174a019ac3b2fe9170a126c6",function(t,e,i,n,s,a,o,r,_,d,c){var l,f={};r._$$ProxyFrame=i._$klass();l=r._$$ProxyFrame._$extend(t._$$ProxyAbstract);l.__init=function(){var t="NEJ-AJAX-DATA:",e=!1;var i=function(e){var i=e.data;if(0==i.indexOf(t)){i=JSON.parse(i.replace(t,""));var n=f[i.key];if(n){delete f[i.key];i.result=decodeURIComponent(i.result||"");n.__onLoadRequest(i)}}};var s=function(){if(!e){e=!0;n._$addEvent(window,"message",i)}};return function(){this.__super();s()}}();l.__doSendRequest=function(t){var i=t.request,r=s._$getFrameProxy(i.url),_=f[r];if(!e._$isArray(_))if(_){this.__rkey=e._$uniqueID();f[this.__rkey]=this;var d=e._$fetch({url:"",data:null,timeout:0,method:"GET"},i);d.key=this.__rkey;d.headers=t.headers;o._$postMessage(f[r],{data:d})}else{f[r]=[this.__doSendRequest._$bind(this,t)];a._$createXFrame({src:r,visible:!1,onload:function(t){var i=f[r];f[r]=n._$getElement(t).contentWindow;e._$reverseEach(i,function(t){try{t()}catch(e){}})}})}else _.push(this.__doSendRequest._$bind(this,t))};l._$abort=function(){delete f[this.__rkey];this.__onLoadRequest({status:0})};return r},"526c1ee2a753e0d8f6a18b9128a93e08","fbbf6ddc0634989027d138f4ffd4b78b","e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","c9ad5ec4461d887e3ff2709e526c3857","5fb495f256a5dcde2a92e5fe919a6422","462a792928c20d57bde43183b9298d69");I$("efb9b357bdd6a467f6e537e56c0805d2",function(t,e,i,n,s,a,o,r,_,d,c,l){var f,u={},h="NEJ-UPLOAD-RESULT:";_._$$ProxyUpload=e._$klass();f=_._$$ProxyUpload._$extend(t._$$ProxyAbstract);f.__init=function(){var t=!1;var e=function(t){var e=t.data;if(0==e.indexOf(h)){e=JSON.parse(e.replace(h,""));var i=u[e.key];if(i){delete u[e.key];i.__onLoadRequest(decodeURIComponent(e.result))}}};var i=function(){if(!t){t=!0;n._$addEvent(window,"message",e)}};return function(){this.__super();i()}}();f.__destroy=function(){this.__super();s._$remove(this.__frame);delete this.__frame;window.clearTimeout(this.__timer);delete this.__timer};f.__onLoadRequest=function(t){try{var e=s._$text2type(t,this.__request.type);this._$dispatchEvent("onload",e)}catch(i){this._$dispatchEvent("onerror",{code:a._$CODE_ERREVAL,message:t})}};f.__doSendRequest=function(){var t=function(){var t,e;try{var t=this.__frame.contentWindow.document.body,e=(t.innerText||t.textContent||"").trim();if(e.indexOf(h)>=0||t.innerHTML.indexOf(h)>=0)return}catch(i){return}this.__onLoadRequest(e)};var e=function(t,i,n){o._$request(t,{type:"json",method:"POST",cookie:n,mode:parseInt(i)||0,onload:function(s){if(this.__timer){this._$dispatchEvent("onuploading",s);this.__timer=window.setTimeout(e._$bind(this,t,i,n),1e3)}}._$bind(this),onerror:function(s){if(this.__timer)this.__timer=window.setTimeout(e._$bind(this,t,i,n),1e3)}._$bind(this)})};return function(o){var r=o.request,_=o.headers,c=r.data,l=i._$uniqueID();u[l]=this;c.target=l;c.method="POST";c.enctype=a._$HEAD_CT_FILE;c.encoding=a._$HEAD_CT_FILE;var f=c.action||"",h=f.indexOf("?")<=0?"?":"&";c.action=f+h+"_proxy_=form";this.__frame=s._$createXFrame({name:l,onload:function(i){var s=n._$getElement(i);n._$addEvent(s,"load",t._$bind(this));c.submit();var a=(c.nej_query||d).value;if(a){var o=(c.nej_mode||d).value,r="true"===(c.nej_cookie||d).value;this.__timer=window.setTimeout(e._$bind(this,a,o,r),100)}}._$bind(this)})}}();f._$abort=function(){this._$dispatchEvent("onerror",{code:a._$CODE_ERRABRT,message:"客户端终止文件上传"})};return _},"526c1ee2a753e0d8f6a18b9128a93e08","e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","e9f3264f172f0455b684b5c08503be9e","2f42bd4202bba1781886820b65db2a46","462a792928c20d57bde43183b9298d69");I$("25ada28a8325522b1cc1fb1c4fbc0e16",function(t,e,i,n,s,a,o,r){s.__getProxyByMode=function(s,a,o){var r=a?{2:n._$$ProxyUpload}:{2:i._$$ProxyFrame,3:e._$$ProxyFlash};return(r[s]||t._$$ProxyXHR)._$allocate(o)};return s},"b8f95236f29ac5710b2a279946beed15","900b04be23b57893068127726819b651","7e80ac58174a019ac3b2fe9170a126c6","efb9b357bdd6a467f6e537e56c0805d2");I$("a723f3c957a97e10aa25743e9aead20a",function(t,e,i,n,s,a){if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="5.0")I$("a0db7cf9efb1094fe789447a2e7eb2b9",function(){e.__getProxyByMode=function(){var t={0:2,1:3};return e.__getProxyByMode._$aop(function(e){var i=e.args,n=i[0]||0;i[0]=i[1]?2:t[n]||n})}()});return e},"e7be6ff9122e14c2be65196e9dffe066","25ada28a8325522b1cc1fb1c4fbc0e16");I$("2f42bd4202bba1781886820b65db2a46",function(t,e,i,n,s,a,o,r,_,d){var c={},l=_;o._$abort=function(t){var e=c[t];if(e)e.req._$abort()};o._$filter=function(t){l=t||_};o._$request=function(){var t=(location.protocol+"//"+location.host).toLowerCase();var n=function(e){var n=i._$url2origin(e);return!!n&&n!=t};var o=function(t){return(t||r)[e._$HEAD_CT]==e._$HEAD_CT_FILE};var d=function(t){var e=o(t.headers);if(!n(t.url)&&!e)return s._$$ProxyXHR._$allocate(t);else return a.__getProxyByMode(t.mode,e,t)};var f=function(t,e){var i={data:e};var n=t.result.headers;if(n)i.headers=t.req._$header(n);return i};var u=function(t){var e=c[t];if(e){if(e.req)e.req._$recycle();delete c[t]}};var h=function(t,e){var i=c[t];if(i){var n=arguments[2];if("onload"==e&&i.result)n=f(i,n);u(t);var s={type:e,result:n};l(s);if(!s.stopped)(i[e]||_)(s.result)}};var p=function(t,e){h(t,"onload",e)};var m=function(t,e){h(t,"onerror",e)};var g=function(t,e){var n=t.indexOf("?")<0?"?":"&",e=e||"";if(i._$isObject(e))e=i._$object2query(e);if(e)t+=n+e;return t};return function(t,e){e=e||{};var n=i._$uniqueID(),s={result:e.result,onload:e.onload||_,onerror:e.onerror||_};c[n]=s;e.onload=p._$bind(null,n);e.onerror=m._$bind(null,n);if(e.query)t=g(t,e.query);var a=e.method||"";if((!a||/get/i.test(a))&&e.data){t=g(t,e.data);e.data=null}e.url=t;s.req=d(e);s.req._$send(e.data);return n}}();o._$upload=function(t,s){t=n._$get(t);if(!t)return"";var a=i._$fetch({mode:0,type:"json",query:null,cookie:!1,headers:{},onload:null,onerror:null,onuploading:null,onbeforerequest:null},s);a.data=t;a.method="POST";a.timeout=0;a.headers[e._$HEAD_CT]=e._$HEAD_CT_FILE;return o._$request(t.action,a)};if(!0)t.copy(t.P("nej.j"),o);return o},"a2e1fe5ad329e35f3966d36c90672926","e9f3264f172f0455b684b5c08503be9e","fbbf6ddc0634989027d138f4ffd4b78b","5fb495f256a5dcde2a92e5fe919a6422","b8f95236f29ac5710b2a279946beed15","a723f3c957a97e10aa25743e9aead20a");I$("590e1b935b2cc3b0ac69d097d56e5a32",function(t,e,i,n,s,a,o,r){var _;s._$$LoaderText=e._$klass();_=s._$$LoaderText._$extend(t._$$LoaderAbstract);_.__getRequest=function(){return null};_.__doRequest=function(){n._$request(this.__url,{method:"GET",type:"text",onload:this.__onLoaded._$bind(this),onerror:this.__onError._$bind(this)})};_.__onLoaded=function(t){this.__doCallback("onload",{url:this.__url,content:t})};return s},"1861e36d9953d297b72b4879b198cb59","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","2f42bd4202bba1781886820b65db2a46");I$("90199f76aee44aa39eebbc96f195355c",function(t,e,i,n,s){e.__removeIFrameKeepHistory=function(e){t._$remove(e)};return e},"5fb495f256a5dcde2a92e5fe919a6422");I$("99e57f6342fb6324d0bb14b61be34825",function(t,e,i,n,s,a,o){if("trident"===i._$KERNEL.engine&&i._$KERNEL.release<="2.0")I$("92ead5c1a0448259eb4a610f569028f9",function(){t.__removeIFrameKeepHistory=function(t){e._$setStyle(t,"display","none");try{t.contentWindow.document.body.innerHTML="&nbsp;"}catch(i){}}});return t},"90199f76aee44aa39eebbc96f195355c","5fb495f256a5dcde2a92e5fe919a6422","e7be6ff9122e14c2be65196e9dffe066");I$("14bfa44a0c4da7cf6ebe385fab6af48f",function(t,e,i,n,s,a,o,r){var _;s._$$LoaderHtml=e._$klass();_=s._$$LoaderHtml._$extend(t._$$LoaderAbstract);_.__getRequest=function(){var t=i._$create("iframe");t.width=0;t.height=0;t.style.display="none";return t};_.__doRequest=function(t){try{document.body.appendChild(t);t.src=this.__url}catch(e){console.log(t);console.error(e)}};_.__onError=function(t){var e=(this.__getLoadData(this.__url)||a).request;this.__doCallback("onerror",t);n.__removeIFrameKeepHistory(e)};_.__onLoaded=function(){var t=null,e=(this.__getLoadData(this.__url)||a).request;try{if(e.src!=this.__url)return;t=e.contentWindow.document.body}catch(i){}this.__doCallback("onload",t);n.__removeIFrameKeepHistory(e)};return s},"1861e36d9953d297b72b4879b198cb59","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","99e57f6342fb6324d0bb14b61be34825");I$("1f5cac5921d892cb8abea84f50b303b7",function(t,e,i,n,s,a,o){var r;n._$$LoaderStyle=e._$klass();r=n._$$LoaderStyle._$extend(t._$$LoaderAbstract);r.__getRequest=function(){return i._$create("link")};r.__doRequest=function(t){t.href=this.__url;document.head.appendChild(t)};return n},"1861e36d9953d297b72b4879b198cb59","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422");I$("2edd1c17cd9707fbf8b8977f5120d54b",function(t,e,i,n,s,a,o){var r;n._$$LoaderScript=e._$klass();r=n._$$LoaderScript._$extend(t._$$LoaderAbstract);r.__reset=function(t){this.__super(t);this.__async=t.async;this.__charset=t.charset;this.__qopt.async=!1;this.__qopt.charset=this.__charset};r.__getRequest=function(){var t=i._$create("script");if(null!=this.__async)t.async=!!this.__async;if(null!=this.__charset)t.charset=this.__charset;return t};r.__doClearRequest=function(t){i._$remove(t)};return n},"1861e36d9953d297b72b4879b198cb59","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422");I$("10b61f5e8cde9864a0c2f183fe725ea2",function(t,e,i,n,s,a,o,r,_){a._$loadScript=function(t,e){s._$$LoaderScript._$allocate(e)._$load(t)};a._$queueScript=function(t,e){s._$$LoaderScript._$allocate(e)._$queue(t);
};a._$loadStyle=function(t,e){n._$$LoaderStyle._$allocate(e)._$load(t)};a._$queueStyle=function(t,e){n._$$LoaderStyle._$allocate(e)._$queue(t)};a._$loadHtml=function(t,e){i._$$LoaderHtml._$allocate(e)._$load(t)};a._$loadText=function(t,i){e._$$LoaderText._$allocate(i)._$load(t)};if(!0)t.copy(t.P("nej.j"),a);return a},"a2e1fe5ad329e35f3966d36c90672926","590e1b935b2cc3b0ac69d097d56e5a32","14bfa44a0c4da7cf6ebe385fab6af48f","1f5cac5921d892cb8abea84f50b303b7","2edd1c17cd9707fbf8b8977f5120d54b");I$("d252039c36767cb4f534ca3f91188796",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u){var h={},p="ntp-"+ +new Date+"-";c.tpl=function(){return h};c._$parseTemplate=function(){var t=0;var d=function(){if(!(t>0)){t=0;i._$dispatchEvent(document,"templateready");i._$clearEvent(document,"templateready")}};var f=function(t,i){var s=n._$dataset(t,"src");if(s){i=i||l;var a=i.root;if(!a)a=t.ownerDocument.location.href;else a=e._$absolute(a);s=s.split(",");e._$forEach(s,function(t,i,n){n[i]=e._$absolute(t,a)});return s}};var u=function(t){if(s._$is("mac")&&"safari"===s._$KERNEL.browser)return e._$unescape(t.innerHTML);else return t.value||t.innerText||""};var h=function(t,e){if(t){var i=f(t,e);if(i)r._$queueStyle(i,{version:n._$dataset(t,"version")});n._$addStyle(t.value)}};var p=function(e){t--;n._$addScript(e);d()};var m=function(e,i){if(e){var s=f(e,i),a=e.value;if(!s)n._$addScript(a);else{t++;var i={version:n._$dataset(e,"version"),onload:p._$bind(null,a)};window.setTimeout(r._$queueScript._$bind(r,s,i),0)}}};var g=function(e){t--;c._$parseTemplate(e);d()};var b=function(e,i){if(e){var s=f(e,i)[0];if(s){t++;var i={version:n._$dataset(e,"version"),onload:g};window.setTimeout(r._$loadHtml._$bind(r,s,i),0)}}};var v=function(e,i){t--;c._$addTextTemplate(e,i||"");d()};var $=function(e,i){if(e&&e.id){var s=e.id,a=f(e,i)[0];if(a){t++;var o=a+(a.indexOf("?")<0?"?":"&")+(n._$dataset(e,"version")||""),i={type:"text",method:"GET",onload:v._$bind(null,s)};window.setTimeout(_._$request._$bind(_,o,i),0)}}};var y=function(t,e){var i=t.name.toLowerCase();switch(i){case"jst":a._$addTemplate(u(t),t.id);return;case"txt":c._$addTextTemplate(t.id,u(t));return;case"ntp":c._$addNodeTemplate(u(t),t.id);return;case"js":m(t,e);return;case"css":h(t,e);return;case"html":b(t,e);return;case"res":$(t,e);return}};o._$$CustomEvent._$allocate({element:document,event:"templateready",oneventadd:d});return function(t,i){t=n._$get(t);if(t){var s="TEXTAREA"==t.tagName?[t]:e._$object2array(t.getElementsByTagName("textarea"));e._$forEach(s,function(t){y(t,i)});n._$remove(t,!0)}d()}}();c._$addTextTemplate=function(t,e){if(null!=h[t]&&typeof h[t]==typeof e){console.warn("text template overwrited with key "+t);console.debug("old template content: "+h[t].replace(/\n/g," "));console.debug("new template content: "+e.replace(/\n/g," "))}h[t]=e||""};c._$getTextTemplate=function(t){return h[t]||""};c._$addNodeTemplate=function(t,i){i=i||e._$uniqueID();t=n._$get(t)||t;c._$addTextTemplate(p+i,t);if(!e._$isString(t))n._$removeByEC(t);return i};c._$getNodeTemplate=function(t){if(!t)return null;t=p+t;var i=c._$getTextTemplate(t);if(!i)return null;var s;if(e._$isString(i)){i=n._$html2node(i);var a=i.getElementsByTagName("textarea");if(!("TEXTAREA"==i.tagName||a&&a.length))c._$addTextTemplate(t,i);else s=i}if(!s)s=i.cloneNode(!0);n._$removeByEC(s);return s};c._$getItemTemplate=function(){var t=function(t,e){return"offset"==e||"limit"==e};return function(i,n,s){var a=[];if(!i||!i.length||!n)return a;s=s||l;var o=i.length,r=parseInt(s.offset)||0,_=Math.min(o,r+(parseInt(s.limit)||o)),d={total:i.length,range:[r,_]};e._$merge(d,s,t);for(var c=r,f;c<_;c++){d.index=c;d.data=i[c];f=n._$allocate(d);var u=f._$getId();h[u]=f;f._$recycle=f._$recycle._$aop(function(t,e){delete h[t];delete e._$recycle}._$bind(null,u,f));a.push(f)}return a}}();c._$getItemById=function(t){return h[t]};c._$parseUITemplate=function(){var t=/#<(.+?)>/g;return function(i,s){s=s||{};i=(i||"").replace(t,function(t,i){var n=s[i];if(!n){n="tpl-"+e._$uniqueID();s[i]=n}return n});c._$parseTemplate(n._$html2node(i));return s}}();d._$merge({_$parseTemplate:c._$parseTemplate,_$addNodeTemplate:c._$addNodeTemplate});if(!0)t.copy(t.P("nej.e"),c);return c},"a2e1fe5ad329e35f3966d36c90672926","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","e7be6ff9122e14c2be65196e9dffe066","2a0f6f00e8af2a07d5b9a7c4620f5b4e","5f75dc6bf6467f0a29ae4a457d2e9c8c","10b61f5e8cde9864a0c2f183fe725ea2","2f42bd4202bba1781886820b65db2a46","b8b996468e25a07cbdc7f02ea79cb525");I$("8fe733a225a830dc6b1da5866dcaf23c",function(t,e,i,n,s,a,o,r,_,d){var c;o._$$Abstract=e._$klass();c=o._$$Abstract._$extend(s._$$EventTarget);c.__init=function(){this.__super();i._$dumpCSSText();this.__initXGui();this.__initNode()};c.__reset=function(t){this.__super(t);this.__doInitClass(t.clazz);this.__doInitDataset(t.dataset);this._$appendTo(t.parent)};c.__destroy=function(){this.__super();this.__doDelParentClass();this.__doDelParentDataset();delete this.__parent;i._$removeByEC(this.__body);i._$delClassName(this.__body,this.__class);delete this.__class};c.__initXGui=_;c.__initNode=function(){if(!this.__seed_html)this.__initNodeTemplate();this.__body=a._$getNodeTemplate(this.__seed_html);if(!this.__body)this.__body=i._$create("div",this.__seed_css);i._$addClassName(this.__body,this.__seed_css)};c.__initNodeTemplate=_;c.__doInitClass=function(t){this.__class=t||"";i._$addClassName(this.__body,this.__class)};c.__doInitDataset=function(t){this.__datamap=n._$merge({},t);i._$dataset(this.__body,this.__datamap)};c.__doDelParentDataset=function(){n._$forIn(this.__datamap,function(t,e){i._$dataset(this.__body,e,"")},this)};c.__doAddParentClass=function(){if(this.__seed_css){var t=this.__seed_css.split(/\s+/);i._$addClassName(this.__parent,t.pop()+"-parent")}};c.__doDelParentClass=function(){if(this.__seed_css){var t=this.__seed_css.split(/\s+/);i._$delClassName(this.__parent,t.pop()+"-parent")}};c._$getBody=function(){return this.__body};c._$appendTo=function(t){if(this.__body){this.__doDelParentClass();if(n._$isFunction(t))this.__parent=t(this.__body);else{this.__parent=i._$get(t);if(this.__parent)this.__parent.appendChild(this.__body)}this.__doAddParentClass()}};c._$show=function(){if(this.__parent&&this.__body&&this.__body.parentNode!=this.__parent)this.__parent.appendChild(this.__body)};c._$hide=function(){i._$removeByEC(this.__body)};if(!0)t.copy(t.P("nej.ui"),o);return o},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","e32a3e597220aa11cee4e5c41da1a3ff","d252039c36767cb4f534ca3f91188796");I$("93ba69fe65b52e35b866746078a8ebb7",function(t,e,i,n,s,a,o){var r;n._$$Item=e._$klass();r=n._$$Item._$extend(i._$$Abstract);r.__init=function(){this.__id=this.__genId();this.__super()};r.__reset=function(t){this.__super(t);this.__index=t.index;this.__total=t.total;this.__range=t.range;this._$refresh(t.data)};r.__destroy=function(){this.__super();delete this.__data;delete this.__index;delete this.__total;delete this.__range};r.__doRefresh=a;r.__genId=function(){var t=+new Date;return function(){return"itm-"+ ++t}}();r._$getId=function(){return this.__id};r._$getData=function(){return this.__data};r._$refresh=function(t){this.__data=t||{};this.__doRefresh(this.__data)};if(!0)t.copy(t.P("nej.ui"),n);return n},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","8fe733a225a830dc6b1da5866dcaf23c");I$("bf763f3d3d8c52fb77577cc983c38f70",function(t,e,i,n,s,a,o){var r;n._$$ListItem=e._$klass();r=n._$$ListItem._$extend(i._$$Item);r.__reset=function(t){this.__pkey=t.pkey||"id";this.__prefix=t.prefix||"";this.__super(t)};r.__onDelete=function(t){this._$dispatchEvent("ondelete",{ext:t,id:this._$getId(),data:this._$getData(),body:this._$getBody()})};r.__onUpdate=function(t){this._$dispatchEvent("onupdate",{ext:t,id:this._$getId(),data:this._$getData(),body:this._$getBody()})};r._$refresh=function(t){this.__super(t);var e=this.__data[this.__pkey];this.__id=this.__prefix+e||this.__genId()};if(!0)t.copy(t.P("nej.ui"),n);return n},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","93ba69fe65b52e35b866746078a8ebb7");I$("e3f548c4f08fd4a420db2210e83eff36",".#<uispace>{font-size:12px;line-height:160%;}\n.#<uispace> a{margin:0 2px;padding:2px 8px;color:#333;border:1px solid #aaa;text-decoration:none;}\n.#<uispace> .js-disabled{cursor:default;}\n.#<uispace> .js-selected{cursor:default;background-color:#bbb;}");I$("b16b9e4bd3d311b22c4cf737bfa8687e",function(t,e,i,n,s,a,o,r,_,d,c){var l;r._$$AbstractPager=e._$klass();l=r._$$AbstractPager._$extend(s._$$Abstract);l.__reset=function(t){this.__bopt=n._$merge({},t);this.__popt=n._$merge({},t);delete this.__bopt.onchange;this.__popt.onchange=this.__onChange._$bind(this);this.__super(t);this.__doResetNumber(t)};l.__destroy=function(){if(this.__page){this.__page._$recycle();delete this.__page}this.__super();delete this.__bopt;delete this.__popt;this._$unbind();this.__body.innerHTML="&nbsp;"};l.__initXGui=function(){var t=i._$pushCSSText(o);return function(){this.__seed_css=t}}();l.__doResetNumber=function(t){var e=t.label||_;if(!t.noprv){this.__popt.pbtn=i._$create("a","zbtn zprv",this.__body);this.__popt.pbtn.innerHTML=e.prev||"上一页"}var n=[];for(var s=1,a=t.number;s<=a;s++)n.push(i._$create("a","zpgi zpg"+s,this.__body));this.__popt.list=n;if(!t.nonxt){this.__popt.nbtn=i._$create("a","zbtn znxt",this.__body);this.__popt.nbtn.innerHTML=e.next||"下一页"}};l.__onChange=function(t){if(!this.__flag){var e=t.index,i=t.total;this.__flag=!0;this._$updatePage(e,i);n._$forEach(this.__binders,function(t){t._$updatePage(e,i)});this.__flag=!1;this._$dispatchEvent("onchange",t)}};l._$bind=function(t){t=i._$get(t);if(t){var e=n._$merge({},this.__bopt);e.parent=t;e.index=this._$getIndex();e.total=this._$getTotal();var s=this.constructor._$allocate(e);s._$setEvent("onchange",this.__popt.onchange);if(!this.__binders)this.__binders=[];this.__binders.push(s);
}};l._$unbind=function(){var t=function(t,e,i){t._$recycle();i.splice(e,1)};return function(){n._$reverseEach(this.__binders,t)}}();l._$setIndex=function(t){if(this.__page)this.__page._$setIndex(t)};l._$getIndex=function(){if(!this.__page)return 1;else return this.__page._$getIndex()};l._$getTotal=function(){if(!this.__page)return 1;else return this.__page._$getTotal()};l._$updatePage=function(t,e){if(this.__page)this.__page._$updatePage(t,e)};l._$updateTotal=function(t){if(this.__page)this.__page._$updateTotal(t)};if(!0)t.copy(t.P("nej.ui"),r);return r},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","2a0f6f00e8af2a07d5b9a7c4620f5b4e","e3f548c4f08fd4a420db2210e83eff36");I$("f28c7a3d74cfe21e72bf28a413d3518d",function(t,e,i,n,s,a,o,r,_,d){var c;o._$$PageAbstract=e._$klass();c=o._$$PageAbstract._$extend(a._$$EventTarget);c.__reset=function(t){this.__super(t);this.__pbtn=t.pbtn;this.__nbtn=t.nbtn;this.__sbtn=t.sbtn;this.__ebtn=t.ebtn;this.__name=t.event||"click";this.__parented=!!t.parented;this.__selected=t.selected||"js-selected";this.__disabled=t.disabled||"js-disabled";this.__doPageListCheck(t.list);this.__limit=t.limit||1/0;this._$updatePage(t.index||1,t.total||1)};c.__destroy=function(){this.__super();delete this.__list;delete this.__name;delete this.__pbtn;delete this.__nbtn;delete this.__sbtn;delete this.__ebtn;delete this.__last;delete this.__total;delete this.__index;delete this.__extdata;delete this.__selected;delete this.__disabled};c.__getSelectNode=function(t){return!this.__parented?t:t.parentNode};c.__doPageListCheck=function(){var t=function(t){this.__list.push(t);this.__doInitDomEvent([[t,this.__name,this.__onClick._$bind2(this,0)]])};return function(e){this.__list=[];this.__doInitDomEvent([[this.__pbtn,"click",this.__onClick._$bind2(this,-1)],[this.__nbtn,"click",this.__onClick._$bind2(this,1)],[this.__sbtn,"click",this.__onClick._$bind2(this,-2)],[this.__ebtn,"click",this.__onClick._$bind2(this,2)]]);i._$forEach(e,t,this)}}();c.__doSetNodeIndex=function(t,e){var i=this.__getSelectNode(t);if(null==e){t.innerText="";n._$setStyle(t,"display","none");n._$delClassName(i,this.__selected)}else{t.innerText=e;n._$setStyle(t,"display","");e==this.__index?n._$addClassName(i,this.__selected):n._$delClassName(i,this.__selected)}};c.__doSyncBtnState=function(){if(this.__index<=1){n._$addClassName(this.__pbtn,this.__disabled);n._$addClassName(this.__sbtn,this.__disabled)}else{n._$delClassName(this.__pbtn,this.__disabled);n._$delClassName(this.__sbtn,this.__disabled)}if(this.__index>=this.__total){n._$addClassName(this.__nbtn,this.__disabled);n._$addClassName(this.__ebtn,this.__disabled)}else{n._$delClassName(this.__nbtn,this.__disabled);n._$delClassName(this.__ebtn,this.__disabled)}};c.__doRefreshPage=_;c.__doChangeIndex=function(){this.__doRefreshPage();this.__doSyncBtnState();this._$dispatchEvent("onchange",{last:this.__last,total:this.__total,index:this.__index,ext:this.__extdata})};c.__doSaveIndex=function(t){t=parseInt(t);if(isNaN(t)||null==this.__total)return!1;t=Math.max(1,Math.min(t,this.__total));this.__last=this.__index;this.__index=t;return!0};c.__doSaveTotal=function(t){t=parseInt(t);if(isNaN(t)||t<1)return!1;this.__total=Math.min(t,this.__limit);return!0};c.__onClick=function(t,e){s._$stopDefault(t);var i=s._$getElement(t),a=n._$hasClassName(this.__getSelectNode(i),this.__selected),o=n._$hasClassName(i,this.__disabled);if(i&&!a&&!o){var r=i.innerText;switch(e){case 1:case-1:r=this.__index+e;break;case 2:r=this.__total;break;case-2:r=1}this._$setIndex(r)}};c._$getIndex=function(){return this.__index};c._$setIndex=function(t){var e=this.__index;this.__doSaveIndex(t);if(e!=this.__index)this.__doChangeIndex()};c._$getTotal=function(){return this.__total};c._$setTotal=function(t){if(this.__doSaveTotal(t)&&null!=this.__index){this.__index=1;this.__doChangeIndex()}};c._$updateTotal=function(t){if(this.__doSaveTotal(t)){this.__doRefreshPage();this.__doSyncBtnState()}};c._$updatePage=function(t,e){if(this.__doSaveTotal(e)&&this.__doSaveIndex(t))this.__doChangeIndex()};if(!0)t.P("nej.ut")._$$AbstractPage=o._$$PageAbstract;return o},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","e32a3e597220aa11cee4e5c41da1a3ff");I$("3714bf792247facddc9baf9fc6c14bb0",function(t,e,i,n,s,a,o,r,_){var d;a._$$PageFragment=e._$klass();d=a._$$PageFragment._$extend(s._$$PageAbstract);d.__init=function(){this.__ndot=[];this.__super()};d.__destroy=function(){this.__super();this.__doRecycleDotNode()};d.__doRecycleDotNode=function(){var t=function(t,e,n){i._$remove(t);n.splice(e,1)};return function(){n._$reverseEach(this.__ndot,t)}}();d.__doRefreshPage=function(){this.__extdata={last:!1,first:!1,list:this.__list};this.__doRecycleDotNode();this.__doSetNodeIndex(this.__list[0],1);var t=1,e=this.__list.length;if(!(this.__total<e)){if(this.__index>1){var n=Math.floor((e-2)/2),s=this.__total-e+2,a=Math.max(2,this.__index-n);if(this.__total>=e)a=Math.min(a,s);if(a>2){var o=i._$create("span","zdot");this.__ndot.push(o);o.innerText="...";this.__list[0].insertAdjacentElement("afterEnd",o);this.__extdata.first=!0}for(var r;;t++){r=a+t-1;if(r>this.__index)break;this.__doSetNodeIndex(this.__list[t],r)}}if(this.__index<this.__total){var r,a=this.__index+1;for(var _=0,d=e-2;;_++,t++){r=a+_;if(t>d||r>this.__total)break;this.__doSetNodeIndex(this.__list[t],r)}if(r<this.__total){var o=i._$create("span","zdot");this.__ndot.push(o);o.innerText="...";this.__list[t].insertAdjacentElement("beforeBegin",o);this.__extdata.last=!0}if(r<=this.__total)this.__doSetNodeIndex(this.__list[t++],this.__total)}for(;t<e;t++)this.__doSetNodeIndex(this.__list[t])}else for(var c;t<e;t++){c=t+1;this.__doSetNodeIndex(this.__list[t],c>this.__total?null:c)}};if(!0)t.P("nej.ut")._$$Page=a._$$PageFragment;return a},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","f28c7a3d74cfe21e72bf28a413d3518d");I$("50ad5b2f10be0423aeff7ebcdce1ddac",function(t,e,i,n,s,a,o,r,_){var d;a._$$Pager=e._$klass();d=a._$$Pager._$extend(n._$$AbstractPager);d.__reset=function(t){t.number=parseInt(t.number)||9;this.__super(t);this.__page=s._$$PageFragment._$allocate(this.__popt)};d.__onChange=function(t){if(this.__bopt.noend){var e=t.ext||o,n=e.list||_;if(e.last)i._$setStyle(n[n.length-1],"display","none")}this.__super(t)};if(!0)t.copy(t.P("nej.ui"),a);return a},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","b16b9e4bd3d311b22c4cf737bfa8687e","3714bf792247facddc9baf9fc6c14bb0");I$("a8c2f3124e989b689d6050d2eaa83c0b",function(t,e,i,n){t.__getItemInStorage=function(t){return localStorage.getItem(t)};t.__setItemToStorage=function(t,e){localStorage.setItem(t,e)};t.__removeItemFromStorage=function(t){localStorage.removeItem(t)};t.__clearStorage=function(){localStorage.clear()};t.__initStorage=function(){(document.onstorageready||i)()};t.__isStorageReady=function(){return!0};return t});I$("779e72dae600405c4e5a33590408a128",function(t,e,i,n,s,a,o){if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="3.0")I$("d8f1dfe77c42a3e7cec14fd01600fd30",function(t,n){var s;var a=function(){if(!s)n._$flash({hidden:!0,src:t._$get("storage.swf"),params:{AllowScriptAccess:"sameDomain"},onready:function(t){if(!t)console.log("flash for localStorage unavailable");else{s=t;s.initStorage("nej-storage")}e._$dispatchEvent(document,"storageready")}})};i.__getItemInStorage=function(t){if(s)return s.getItem(t)};i.__setItemToStorage=function(t,e){if(s)s.setItem(t,e)};i.__removeItemFromStorage=function(t){if(s)s.removeItem(t)};i.__clearStorage=function(){if(s)s.clear()};i.__initStorage=function(){a()};i.__isStorageReady=function(){return!!s}},"c9ad5ec4461d887e3ff2709e526c3857","93f767e8b0f06b4a7264b40af6116cb6");return i},"e7be6ff9122e14c2be65196e9dffe066","be567474249a271e4786c144ccf5f75a","a8c2f3124e989b689d6050d2eaa83c0b");I$("e607504d49ae0f86fa0923247aef5419",function(t,e,i,n,s,a,o,r,_){var d={};a._$setDataInStorage=function(t,e){var i=JSON.stringify(e);try{s.__setItemToStorage(t,i)}catch(n){console.error(n.message);console.error(n)}if(i!=s.__getItemInStorage(t))d[t]=e};a._$getDataInStorage=function(t){var e=JSON.parse(s.__getItemInStorage(t)||"null");return null==e?d[t]:e};a._$getDataInStorageWithDefault=function(t,e){var i=a._$getDataInStorage(t);if(null==i){i=e;a._$setDataInStorage(t,i)}return i};a._$delDataInStorage=function(t){delete d[t];s.__removeItemFromStorage(t)};a._$clearDataInStorage=function(){var t=function(t,e,i){delete i[e]};return function(){e._$loop(d,t);s.__clearStorage()}}();n._$$CustomEvent._$allocate({element:document,event:"storageready",oneventadd:function(){if(s.__isStorageReady())i._$dispatchEvent(document,"storageready")}});var c=function(){var t=function(t,e,i){s.__setItemToStorage(e,JSON.stringify(t));delete i[e]};return function(){e._$loop(d,t)}}();i._$addEvent(document,"storageready",c);s.__initStorage();if(!0)t.copy(t.P("nej.j"),a);return a},"a2e1fe5ad329e35f3966d36c90672926","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","5f75dc6bf6467f0a29ae4a457d2e9c8c","779e72dae600405c4e5a33590408a128");I$("ffc174dc227f12bb2e38ed08e754323f",function(t,e,i,n,s,a,o,r,_){var d,c="dat-"+ +new Date;a._$$CacheAbstract=e._$klass();d=a._$$CacheAbstract._$extend(n._$$EventTarget);d.__init=function(){this.__super();this.__cache=this.constructor[c];if(!this.__cache){this.__cache={};this.__cache[c+"-l"]={};this.constructor[c]=this.__cache}};d.__getDataInCache=function(t){return this.__cache[t]};d.__setDataInCache=function(t,e){this.__cache[t]=e};d.__getDataInCacheWithDefault=function(t,e){var i=this.__getDataInCache(t);if(null==i){i=e;this.__setDataInCache(t,i)}return i};d.__delDataInCache=function(t){if(null==t)i._$loop(this.__cache,function(t,e){
if(e!=c+"-l")this.__delDataInCache(e)},this);else delete this.__cache[t]};d.__delDataInStorage=function(t){return s._$delDataInStorage(t)};d.__getDataInStorage=function(t){return s._$getDataInStorage(t)};d.__setDataInStorage=function(t,e){s._$setDataInStorage(t,e)};d.__getDataLocalWithDefault=function(t,e){var i=this.__getDataLocal(t);if(null==i){i=e;this.__setDataLocal(t,i)}return i};d.__getDataLocal=function(t){var e=this.__getDataInCache(t);if(null!=e)return e;e=this.__getDataInStorage(t);if(null!=e)this.__setDataInCache(t,e);return e};d.__setDataLocal=function(t,e){this.__setDataInStorage(t,e);this.__setDataInCache(t,e)};d.__delDataLocal=function(t){if(null==t)i._$loop(this.__cache,function(t,e){if(e!=c+"-l")this.__delDataLocal(e)},this);else{delete this.__cache[t];s._$delDataInStorage(t)}};d._$clearDataLocal=function(){this.__delDataLocal()};d.__doCallbackRequest=function(t){var e=this.__cache[c+"-l"],n=_.slice.call(arguments,1);i._$forEach(e[t],function(t){try{t.apply(this,n)}catch(e){if(!1)throw e;console.error(e.message);console.error(e.stack)}});delete e[t]};d.__doQueueRequest=function(t,e){e=e||r;var i=this.__cache[c+"-l"][t];if(!i){i=[e];this.__cache[c+"-l"][t]=i;return!1}i.push(e);return!0};d.__doClearReqQueue=function(t){delete this.__cache[c+"-l"][t]};d.__hasFragment=function(t,e,i){if(!t)return!1;e=parseInt(e)||0;i=parseInt(i)||0;if(!i){if(!t.loaded)return!1;i=t.length}if(t.loaded)i=Math.min(i,t.length-e);for(var n=0;n<i;n++)if(!t[e+n])return!1;return!0};d._$isFragmentFilled=function(t,e,i){return this.__hasFragment(this._$getListInCache(t),e,i)};if(!0)t.P("nej.ut")._$$Cache=a._$$CacheAbstract;return a},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","e32a3e597220aa11cee4e5c41da1a3ff","e607504d49ae0f86fa0923247aef5419");I$("5bf37a641a2cfd8443765a178fbd8a82",function(t,e,i,n,s,a,o,r){var _;s._$$CacheList=e._$klass();_=s._$$CacheList._$extend(n._$$CacheAbstract);_.__reset=function(t){this.__super(t);this.__key=t.key||"id";this.__data=t.data||a;this.__auto=!!t.autogc;this.__doSwapCache(t.id)};_.__destroy=function(){this.__super();if(this.__timer)this.__doGCAction()};_.__doSwapCache=function(t){var e;if(t){e=this.__cache[t];if(!e){e={};this.__cache[t]=e}}e=e||this.__cache;e.hash=e.hash||{};this.__lspl=e};_.__doGCAction=function(){this.__timer=window.clearTimeout(this.__timer);var t={};i._$loop(this.__lspl,function(e,n){if("hash"!=n)if(i._$isArray(e))i._$forEach(e,function(e){if(e)t[e[this.__key]]=!0},this)},this);i._$loop(this.__getHash(),function(e,i,n){if(!t[i])delete n[i]})};_.__doGCSchedule=function(){if(this.__timer)this.__timer=window.clearTimeout(this.__timer);this.__timer=window.setTimeout(this.__doGCAction._$bind(this),150)};_.__doSaveItemToCache=function(t,e){if(!i._$isArray(t)){t=this.__doFormatItem(t,e)||t;if(!t)return null;var n=t[this.__key];if(null!=n){var s=this.__getHash()[n];if(s)t=i._$merge(s,t);this.__getHash()[n]=t}delete t.__dirty__;return t}var a=[];i._$forEach(t,function(t){a.push(this.__doSaveItemToCache(t,e))},this);return a};_.__doRemoveItemFromList=function(t,e){var n=null,s=this.__key;if(!i._$isArray(e)){var n=null,s=this.__key;e=e[s]||e;var a=this._$getListInCache(t),o=i._$indexOf(a,function(t){return!!t&&t[s]==e});if(o>=0){n=a[o];a.splice(o,1)}return n}var n=[];i._$reverseEach(e,function(e){n.unshift(this.__doRemoveItemFromList(t,e))},this);return n};_.__doFormatItem=o;_.__doUnshiftToList=function(t,e){if(e)if(i._$isArray(e))i._$reverseEach(e,function(e){this.__doUnshiftToList(t,e)});else{var n=this._$getListInCache(t),e=this.__doSaveItemToCache(e,t);if(e)n.unshift(e)}};_._$setTotal=function(t,e){var i=this._$getListInCache(t);i.length=Math.max(i.length,e);this._$setLoaded(t)};_._$getTotal=function(t){return this._$getListInCache(t).length};_._$setLoaded=function(t,e){this._$getListInCache(t).loaded=e!==!1};_._$isLoaded=function(t){return!!this._$getListInCache(t).loaded};_._$setListInCache=function(t,e){this._$clearListInCache(t);this.__getList({key:t,offset:0,limit:e.length+1},{list:e,total:e.length})};_._$getListInCache=function(){var t=function(t){return(t||"")+(!t?"":"-")+"list"};return function(e){var e=t(e),i=this.__lspl[e];if(!i){i=[];this.__lspl[e]=i}return i}}();_.__getHash=function(){var t=this.__lspl.hash;if(!t){t={};this.__lspl.hash=t}return t};_._$pullRefresh=function(){var t=function(t){return"r-"+t.key};return function(e){var n=i._$merge({},e),s=t(n),a=this._$dispatchEvent._$bind(this);if(!this.__doQueueRequest(s,a)){n.rkey=s;n.onload=this.__pullRefresh._$bind(this,n);this._$dispatchEvent("dopullrefresh",n)}}}();_.__pullRefresh=function(t,e){var i=t.key,n=parseInt(e.total),s=e.list||e.result;this.__doUnshiftToList(i,s||e);if(!isNaN(n)&&s){this._$getListInCache(i).length=n;this._$setLoaded(i)}this.__doCallbackRequest(t.rkey,"onpullrefresh",t)};_._$getList=function(){var t=function(t){return"r-"+t.key+"-"+t.offset+"-"+t.limit};return function(e){e=e||a;var i={key:""+e.key||"",ext:e.ext||null,data:e.data||null,offset:parseInt(e.offset)||0,limit:parseInt(e.limit)||0},n=this._$getListInCache(i.key),s=this.__hasFragment(n,i.offset,i.limit);if(!s){var o=t(i),r=this._$dispatchEvent._$bind(this);if(!this.__doQueueRequest(o,r)){i.rkey=o;i.onload=this.__getList._$bind(this,i);this._$dispatchEvent("doloadlist",i)}}else this._$dispatchEvent("onlistload",i)}}();_.__getList=function(){var t=function(t,e,i){if(t)return!0;i.splice(e,1)};return function(e,n){e=e||a;if(n){var s=e.key,o=e.offset,r=this._$getListInCache(s);var _=n||[];if(!i._$isArray(_)){_=n.result||n.list||[];var d=parseInt(n.total);if(!isNaN(d)||d>_.length)this._$setTotal(s,d)}i._$forEach(_,function(t,e){r[o+e]=this.__doSaveItemToCache(t,s)},this);if(_.length<e.limit){this._$setLoaded(s);i._$reverseEach(r,t)}this.__doCallbackRequest(e.rkey,"onlistload",e)}else this.__doCallbackRequest(e.rkey,"onlistload",e)}}();_._$clearListInCache=function(){var t=function(t,e,i){i.splice(e,1)};return function(e){if(e){var n=this._$getListInCache(e);i._$reverseEach(n,t);this._$setLoaded(e,!1);if(this.__auto)this.__doGCSchedule()}else i._$loop(this.__lspl,function(t,e){if("hash"!=e&&i._$isArray(t)){e=e.substr(0,e.length-5);this._$clearListInCache(e)}},this)}}();_.__doCheckItemValidity=function(t,e){return!t.__dirty__};_._$getItemInCache=function(t){return this.__getHash()[t]};_._$clearItemInCache=function(t){var e=this._$getItemInCache(t);if(e)e.__dirty__=!0};_._$getItem=function(){var t=function(t){return"r-"+t.key+"-"+t.id};return function(e){e=e||a;var i=e[this.__key],n={id:i,ext:e.ext,data:e.data||{},key:""+e.key||""};_item=this._$getItemInCache(i);n.data[this.__key]=i;if(!_item||!this.__doCheckItemValidity(_item,n.key)){var s=t(n),o=this._$dispatchEvent._$bind(this);if(!this.__doQueueRequest(s,o)){n.rkey=s;n.onload=this.__getItem._$bind(this,n);this._$dispatchEvent("doloaditem",n)}}else this._$dispatchEvent("onitemload",n)}}();_.__getItem=function(t,e){t=t||a;this.__doSaveItemToCache(e,t.key);this.__doCallbackRequest(t.rkey,"onitemload",t)};_._$addItem=function(t){t=i._$merge({},t);t.onload=this.__addItem._$bind(this,t);this._$dispatchEvent("doadditem",t)};_.__addItem=function(t,e){var i=t.key;e=this.__doSaveItemToCache(e,i);if(e){var n=0,s=this._$getListInCache(i);if(!t.push){n=-1;var a=t.offset||0;s.splice(a,0,e)}else if(s.loaded){n=1;s.push(e)}else s.length++}var o={key:i,flag:n,data:e,action:"add",ext:t.ext};this._$dispatchEvent("onitemadd",o);return o};_._$deleteItem=function(t){t=i._$merge({},t);t.onload=this.__deleteItem._$bind(this,t);this._$dispatchEvent("dodeleteitem",t)};_.__deleteItem=function(t,e){var i,n=t.key;if(e){var s=t.id;i=this._$getItemInCache(s)||null;this.__doRemoveItemFromList(n,s)}var a={key:n,data:i,action:"delete",ext:t.ext};this._$dispatchEvent("onitemdelete",a);return a};_._$updateItem=function(t){t=i._$merge({},t);t.onload=this.__updateItem._$bind(this,t);this._$dispatchEvent("doupdateitem",t)};_.__updateItem=function(t,e){var i=t.key;if(e)e=this.__doSaveItemToCache(e,i);var n={key:i,data:e,action:"update",ext:t.ext};this._$dispatchEvent("onitemupdate",n);return n};if(!0)t.P("nej.ut")._$$ListCache=s._$$CacheList;return s},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","ffc174dc227f12bb2e38ed08e754323f");I$("1d358f5a6c8b28e993bf64a45d802e99",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h){var p;l._$$ListModule=e._$klass();p=l._$$ListModule._$extend(r._$$EventTarget);p.__reset=function(t){this.__ropt={};this.__super(t);this.__lbox=s._$get(t.parent);this.__iopt={parent:this.__lbox};this.__limit=parseInt(t.limit)||10;this.__first=parseInt(t.first)||this.__limit;this.__doResetTemplate(t.item);this.__doResetCache(t.cache||f);this.__doResetPager(t.pager||f);this._$refresh()};p.__destroy=function(){this._$dispatchEvent("onbeforerecycle");this.__doClearListBox();this.__super();if(this.__ropt.clear)this.__cache._$clearListInCache(this.__ropt.key);this.__cache._$recycle();if(this.__pager){this.__pager._$recycle();delete this.__pager}delete this.__pkls;delete this.__popt;delete this.__pulling;delete this.__cache;delete this.__lbox;delete this.__ikls;delete this.__iopt;delete this.__iext;delete this.__ropt};p.__getItemBodyId=function(t){return this.__getItemId(t)+_._$seed()};p.__getItemId=function(t){var e=(this.__iopt||f).prefix||"";return e+t};p.__getPageInfo=function(t,e,i,n){var s={index:1,total:1};if(e>=t)s.index=Math.floor((e-t)/i)+2;if(n>t)s.total=Math.ceil((n-t)/i)+1;return s};p.__doResetJSTTemplate=function(t){delete this.__ikls;this.__ikey=t;this.__doInitDomEvent([[this.__lbox,"click",this.__onCheckAction._$bind(this)]])};p.__doResetTemplate=function(t){if(!i._$isString(t)){i._$merge(this.__iopt,t);this.__iext=i._$merge({},t,function(t){return!i._$isFunction(t)});var e=this.__iopt.klass;delete this.__iopt.klass;if(!i._$isString(e)){delete this.__ikey;this.__ikls=e;this.__iopt.ondelete=this._$dispatchEvent._$bind(this,"ondelete");this.__iopt.onupdate=this._$dispatchEvent._$bind(this,"onupdate");
}else this.__doResetJSTTemplate(e)}else this.__doResetJSTTemplate(t)};p.__doResetCache=function(t){var e=t.klass,n=i._$merge({},t);this.__ropt.key=n.lkey;this.__ropt.ext=n.ext;this.__ropt.data=n.data||{};this.__ropt.clear=!!n.clear;this.__iopt.pkey=n.key||"id";n.onerror=this._$dispatchEvent._$bind(this,"onerror");n.onlistload=this.__cbListLoad._$bind(this);n.onpullrefresh=this.__cbPullRefresh._$bind(this);if(e&&"onlistchange"in e)this.__doInitDomEvent([[e,"listchange",this.__cbListChange._$bind(this)]]);else{n.onitemadd=this.__cbItemAdd._$bind(this);n.onitemdelete=this.__cbItemDelete._$bind(this);n.onitemupdate=this.__cbItemUpdate._$bind(this)}this.__cache=(e||c._$$CacheList)._$allocate(n);if(null!=t.total)this.__cache._$setTotal(this.__ropt.key,t.total);if(t.list)this.__cache._$setListInCache(this.__ropt.key,t.list)};p.__doResetPager=function(t){this.__pkls=t.klass||o._$$Pager;this.__popt=i._$merge({},t);if(i._$isArray(t.parent)){this.__popt.parent=t.parent[0];this.__pbid=t.parent.slice(1);if(!this.__pbid||!this.__pbid.length)delete this.__pbid}delete this.__popt.klass};p.__doClearListBox=function(){var t=/^(?:table|tr|tbody|ul|ol|select)$/i;return function(){this._$dispatchEvent("onbeforelistclear",{parent:this.__lbox});if(this.__items&&this.__items.length>0){this.__items=this.__ikls._$recycle(this.__items);delete this.__items}if(t.test(this.__lbox.tagName))s._$clearChildren(this.__lbox);else this.__lbox.innerHTML=""}}();p.__doSwitchPagerShow=function(t){if(!this.__popt.fixed){s._$setStyle(this.__popt.parent,"display",t);i._$forEach(this.__pbid,function(e){s._$setStyle(e,"display",t)},this)}};p.__doRefreshByPager=function(){var t=this.__popt.index||1;delete this.__popt.index;if(this.__pager)t=this.__pager._$getIndex();this.__doChangePage({last:t,index:t})};p.__doChangePage=function(t){this._$dispatchEvent("onpagechange",t)};p.__doChangeOffset=function(t){this.__ropt.offset=t;this.__doLoadList()};p.__doGenRequestOpt=function(t){return t};p.__doLoadList=function(){this.__doBeforeListLoad();var t=this.__ropt.data;t.offset=this.__ropt.offset;var e=0==t.offset;t.total=e;this.__ropt.limit=e?this.__first:this.__limit;t.limit=this.__ropt.limit;this.__cache._$getList(this.__doGenRequestOpt(i._$merge({},this.__ropt)))};p.__cbListLoad=function(t){if(t.key==this.__ropt.key&&t.offset==this.__ropt.offset){this.__doBeforeListShow();var e=this.__cache._$getListInCache(t.key);if(!e||!e.length){if(!this._$cache()._$isLoaded(t.key))this._$dispatchEvent("onlistloaderror",{parent:this.__lbox});else this.__doShowEmpty();return!0}var i=t.limit,n=t.offset;if(!this.__cache._$isFragmentFilled(t.key,n,i)){this._$dispatchEvent("onlistloaderror",{parent:this.__lbox});return!0}if(!this.__doBeforeListRender(e,n,i)){this._$dispatchEvent("onbeforelistrender",{list:e,limit:i,offset:n,parent:this.__lbox,total:this.__cache._$getTotal(t.key)});if(this.__ikey){this.__iopt.xlist=e;this.__iopt.beg=n;this.__iopt.end=Math.min(e.length,n+i)-1;this.__iopt.act="list";var s=_._$get(this.__ikey,this.__iopt,this.__iext);this.__doShowListByJST(s)}else{this.__iopt.limit=i;this.__iopt.offset=n;var a=d._$getItemTemplate(e,this.__ikls,this.__iopt);this.__doShowListByItem(a)}this._$dispatchEvent("onafterlistrender",{list:e,limit:i,offset:n,parent:this.__lbox,total:this.__cache._$getTotal(t.key)})}}};p.__cbPullRefresh=function(t){if(this.__pulling){delete this.__pulling;this.__doBeforeListShow("onafterpullrefresh");this._$refresh()}};p.__doSyncPager=function(t,e){if(this.__pager){if((this.__popt||f).limit>0)e=Math.min(e,this.__popt.limit);var n=this.__pager._$getIndex(),s=this.__pager._$getTotal();if(n>e||e!=s){this.__pager._$recycle();delete this.__pager;this.__doChangePage({last:n,index:Math.min(t,e)});return!0}}else{this.__popt.index=t;this.__popt.total=e;this.__pager=this.__pkls._$allocate(this.__popt);this.__pager._$setEvent("onchange",this.__doChangePage._$bind(this));i._$forEach(this.__pbid,function(t){this.__pager._$bind(t)},this)}};p.__doFormatData=function(){var t=+new Date;return function(e){var i=e[this.__iopt.pkey];if(!i){e["dirty-data"]=!0;e[this.__iopt.pkey]="dirty-"+t++}return e}}();p.__doSplitDirty=function(t){var e=t[this.__iopt.pkey];if(t["dirty-data"]){delete t["dirty-data"];delete t[this.__iopt.pkey]}return e};p.__doInsertOneItem=function(){var t=function(t,e){this.__lbox.insertAdjacentElement(t,e)};return function(e,n){var s=[n];if(this.__ikey){var s=this.__cache._$getListInCache(this.__ropt.key),a=i._$indexOf(s,n);if(a<0){a=0;s=[n]}this.__iopt.xlist=s;this.__iopt.beg=a;this.__iopt.end=a;this.__iopt.act="add";this.__doShowListByJST(_._$get(this.__ikey,this.__iopt,this.__iext),e)}else{this.__iopt.limit=1;this.__iopt.offset=0;this.__iopt.parent=t._$bind(this,e);var o=d._$getItemTemplate(s,this.__ikls,this.__iopt);this.__iopt.parent=this.__lbox;this.__doShowListByItem(o)}this._$dispatchEvent("onafterinsert",{pos:e,msg:n,nodeId:this.__getItemBodyId(n.id)})}}();p.__doBeforeListLoad=u;p.__doBeforeListShow=function(t){var e={parent:this.__lbox};this._$dispatchEvent(t||"onafterlistload",e);if(!e.stopped)s._$removeByEC(this.__ntip)};p.__doBeforeListRender=u;p.__doRenderMessage=function(t,e){if(i._$isString(t)){if(!this.__ntip)this.__ntip=s._$create("div");this.__ntip.innerHTML=t}else this.__ntip=t;this.__lbox.insertAdjacentElement(e||"beforeEnd",this.__ntip)};p.__doShowMessage=function(t,e,i){var n={parent:this.__lbox};if(t)this._$dispatchEvent(t,n);if(!n.stopped)this.__doRenderMessage(n.value||e,i)};p.__doShowEmpty=u;p.__doShowListByJST=u;p.__doShowListByItem=u;p.__onCheckAction=function(){var t=/^(?:delete|update)$/;return function(e){var i=n._$getElement(e,"d:action");if(i){var a=s._$dataset(i,"action");if(t.test(a)){var o=s._$dataset(i,"id");if(o){var r=this.__cache._$getItemInCache(o);if(r){n._$stop(e);this._$dispatchEvent("on"+a,{data:r,id:r[this.__iopt.pkey],body:s._$get(this.__getItemBodyId(o))})}}}}}}();p.__cbItemAdd=u;p.__doDeleteItem=function(t){var e=t.data||{},i={data:e,key:this.__ropt.key,id:e[this.__iopt.pkey]};this._$dispatchEvent("onbeforedelete",i);this.__cache._$deleteItem(i)};p.__cbItemDelete=u;p.__doUpdateItem=function(t){var e=t.data||{},i={data:e,key:this.__ropt.key};this._$dispatchEvent("onbeforeupdate",i);this.__cache._$updateItem(i)};p.__cbItemUpdate=function(t){this.__doCheckResult(t,"onafterupdate");if(!t.stopped){var e=t.data[this.__iopt.pkey];if(this.__items){var n=d._$getItemById(this.__getItemId(e));if(n)n._$refresh(t.data)}else{var a=this._$getItemBody(e);if(!a)return;var o=this.__cache._$getListInCache(t.key),r=i._$indexOf(o,t.data);if(r<0)return;this.__iopt.xlist=o;this.__iopt.beg=r;this.__iopt.end=r;this.__iopt.act="update";var c=_._$get(this.__ikey,this.__iopt,this.__iext);a.insertAdjacentHTML("afterEnd",c);s._$remove(a)}this._$dispatchEvent("onafterupdaterender",{data:t.data,parent:this.__lbox,node:this._$getItemBody(e)})}};p.__doCheckResult=function(t,e){var i=t.data;if(!i||null==i[this.__iopt.pkey]){this._$dispatchEvent("onerror",t);t.stopped=!0}if(!t.stopped)this._$dispatchEvent(e,t)};p.__cbAppendList=u;p.__cbUnshiftList=u;p.__cbListChange=function(t){if(t.key==this.__ropt.key)switch(t.action){case"add":this.__cbItemAdd(t);break;case"delete":this.__cbItemDelete(t);break;case"update":this.__cbItemUpdate(t);break;case"refresh":this._$refresh();break;case"unshift":this.__cbUnshiftList(t.offset,t.limit);break;case"append":this.__cbAppendList(t.offset,t.limit)}};p._$update=function(t){this.__doUpdateItem({data:t})};p._$delete=function(t){this.__doDeleteItem({data:t})};p._$add=function(t){this.__cache._$addItem({data:t,key:this.__ropt.key})};p._$cache=function(){return this.__cache};p._$unshift=function(t){this.__doInsertOneItem("afterBegin",this.__doFormatData(t));return this.__doSplitDirty(t)};p._$append=function(t){this.__doInsertOneItem("beforeEnd",this.__doFormatData(t));return this.__doSplitDirty(t)};p._$refresh=function(){this.__doClearListBox();this.__doRefreshByPager()};p._$refreshWithClear=function(){this.__cache._$clearListInCache(this.__ropt.key);this._$refresh()};p._$pullRefresh=function(){if(!this.__pulling){this.__pulling=!0;this.__doShowMessage("onbeforepullrefresh","列表刷新中...","afterBegin");this.__cache._$pullRefresh({key:this.__ropt.key,data:this.__ropt.data})}};p._$getTotal=function(){return this.__cache._$getTotal(this.__ropt.key)};p._$getPager=function(){return this.__pager};p._$items=function(){return this.__items};p._$getItemBody=function(t){if(this.__ikey)return s._$get(this.__getItemBodyId(t));else{var e=d._$getItemById(this.__getItemId(t));if(e)return e._$getBody()}};p._$isLoaded=function(){return this.__cache._$isLoaded(this.__ropt.key)};p._$showMessage=function(t){this.__doClearListBox();this.__doShowMessage(null,t)};p._$nextPage=function(){if(this.__pager){var t=this.__pager._$getIndex()+1,e=this.__pager._$getTotal();t=Math.max(1,Math.min(t,e));this._$pageTo(t);return t<e}};p._$prevPage=function(){if(this.__pager){var t=this.__pager._$getIndex()-1,e=this.__pager._$getTotal();t=Math.max(1,Math.min(t,e));this._$pageTo(t);return t<=1}};p._$pageTo=function(t){if(this.__pager){var e=this.__pager._$getTotal();t=Math.max(1,Math.min(t,e));this.__pager._$setIndex(t)}};if(!0)t.copy(t.P("nej.ut"),l);return l},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","bf763f3d3d8c52fb77577cc983c38f70","50ad5b2f10be0423aeff7ebcdce1ddac","e32a3e597220aa11cee4e5c41da1a3ff","2a0f6f00e8af2a07d5b9a7c4620f5b4e","d252039c36767cb4f534ca3f91188796","5bf37a641a2cfd8443765a178fbd8a82");I$("d99f29446b4a4cf86c6084cb99df7ab0",function(t,e,i,n,s,a,o,r,_,d,c){var l;r._$$ListModuleWF=e._$klass();l=r._$$ListModuleWF._$extend(o._$$ListModule);l.__reset=function(t){this.__doResetMoreBtn(t.more);this.__sbody=n._$get(t.sbody);this.__doInitDomEvent([[this.__sbody,"scroll",this.__onCheckScroll._$bind(this)]]);var e=t.delta;if(null==e)e=30;this.__delta=Math.max(0,e);var i=parseInt(t.count)||0;this.__count=Math.max(0,i);
var s=parseInt(t.number)||0;if(s>1&&s<=i)this.__number=s;this.__super(t)};l.__destroy=function(){this.__super();delete this.__nmore;delete this.__sbody;delete this.__endskr;delete this.__nexting};l.__getPageInfo=function(t,e){var i=this.__first+(this.__count-1)*this.__limit,n=this.__count*this.__limit;return this.__super(i,t,n,e)};l.__doResetMoreBtn=function(t){this.__nmore=n._$get(t);this.__doInitDomEvent([[this.__nmore,"click",this._$next._$bind(this)]])};l.__doCheckScroll=function(t){if(!this.__endskr&&t&&this.__lbox.clientHeight){if(!t.scrollHeight)t=n._$getPageBox();var e=n._$offset(this.__lbox,this.__sbody),i=e.y+this.__lbox.offsetHeight-t.scrollTop-t.clientHeight,s=t.scrollHeight<=t.clientHeight;if(i<=this.__delta||s&&!this.__endskr)window.setTimeout(this._$next._$bind(this),0)}};l.__onCheckScroll=function(t){if(!this.__endskr){var e=i._$getElement(t);if(!e)e=n._$getPageBox();this.__doCheckScroll(e)}};l.__doChangePage=function(t){this.__super(t);if(!t.stopped){this.__doClearListBox();var e=0;if(t.index>1)e=this.__first+((t.index-1)*this.__count-1)*this.__limit;this.__offset=e;this._$next()}};l.__doGenRequestOpt=function(t){if(this.__number){var e=t.offset>0?this.__limit:this.__first,i=e+this.__limit*(this.__number-1);this.__offset=t.offset+i;t.data.limit=i;t.limit=i;delete this.__number}return t};l.__cbListLoad=function(t){delete this.__nexting;if(!this.__super(t))this._$resize()};l.__cbListChange=function(t){if(!t.key||t.key==this.__ropt.key){switch(t.action){case"refresh":case"append":delete this.__nexting}this.__super(t)}};l.__doBeforeListLoad=function(){this.__doShowMessage("onbeforelistload","");n._$setStyle(this.__nmore,"display","none")};l.__doBeforeListRender=function(t,e,i){var s=t.length,a=t.loaded?e+i>=s:e+i>s;this.__offset=Math.min(this.__offset,s);n._$setStyle(this.__nmore,"display",a?"none":"");if(a)this.__endskr=!0;if(this.__count>0){var o=this.__getPageInfo(e,t.length);if(this.__doSyncPager(o.index,o.total))return!0;var r=this.__first-this.__limit,_=this.__count*this.__limit;this.__endskr=(e+i-r)%_==0||a;n._$setStyle(this.__nmore,"display",this.__endskr?"none":"");this.__doSwitchPagerShow(this.__endskr&&o.total>1?"":"none")}};l.__doShowEmpty=function(){this.__offset=0;this.__endskr=!0;this.__doShowMessage("onemptylist","没有列表数据！")};l.__doShowListByJST=function(t,e){this.__lbox.insertAdjacentHTML(e||"beforeEnd",t)};l.__doShowListByItem=function(t){this.__items=this.__items||[];if(s._$isArray(t))c.push.apply(this.__items,t);else this.__items.push(t)};l.__cbItemAdd=function(t){n._$removeByEC(this.__ntip);this.__doCheckResult(t,"onafteradd");var e=t.flag;if(!t.stopped&&e)if(!(this.__count>0)){this.__offset+=1;e==-1?this._$unshift(t.data):this._$append(t.data)}else this.__doRefreshByPager()};l.__cbItemDelete=function(t){this.__doCheckResult(t,"onafterdelete");if(!t.stopped)if(!(this.__count>0)){var e=t.data[this.__iopt.pkey];if(this.__items){var i=a._$getItemById(this.__getItemId(e)),o=s._$indexOf(this.__items,i);if(o>=0){this.__items.splice(o,1);this.__offset-=1}if(i)i._$recycle()}else{var r=this._$getItemBody(e);if(r)this.__offset-=1;n._$remove(r)}if(this.__offset<=0)this._$next()}else this.__doRefreshByPager()};l.__cbAppendList=function(t,e){if(t==this.__offset)if(this._$isLoaded()){this.__endskr=!1;this._$resize()}};l.__cbUnshiftList=function(t,e){if(0==t){var i=this.__cache._$getListInCache(this.__ropt.key);for(var n=e-1;n>=0;n--)this._$unshift(i[n])}};l._$resize=function(){var t=this.__sbody;if(t&&!this.__endskr)this.__doCheckScroll(this.__sbody)};l._$refresh=function(){delete this.__endskr;this.__super()};l._$next=function(){if(!this.__nexting){this.__nexting=!0;var t=this.__offset;this.__offset+=0==t?this.__first:this.__limit;this.__doChangeOffset(t)}};if(!0)t.copy(t.P("nej.ut"),r);return r},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","d252039c36767cb4f534ca3f91188796","1d358f5a6c8b28e993bf64a45d802e99");I$("d8694785278ea23e9444192ffae00916",function(t,e,i,n,s){var a=8;var o=function(t,e){return t<<e|t>>>32-e};var r=function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i};var _=function(t,e,i,n){if(t<20)return e&i|~e&n;if(t<40)return e^i^n;if(t<60)return e&i|e&n|i&n;else return e^i^n};var d=function(t){if(t<20)return 1518500249;if(t<40)return 1859775393;if(t<60)return-1894007588;else return-899497514};var c=function(){var t=function(t){return t%32},e=function(t){return 32-a-t%32};return function(i,n){var s=[],o=(1<<a)-1,r=n?t:e;for(var _=0,d=i.length*a;_<d;_+=a)s[_>>5]|=(i.charCodeAt(_/a)&o)<<r(_);return s}}();var l=function(){var t="0123456789abcdef",e=function(t){return t%4},i=function(t){return 3-t%4};return function(n,s){var a=[],o=s?e:i;for(var r=0,_=4*n.length;r<_;r++)a.push(t.charAt(n[r>>2]>>8*o(r)+4&15)+t.charAt(n[r>>2]>>8*o(r)&15));return a.join("")}}();var f=function(){var t=function(t){return t%32},e=function(t){return 32-a-t%32};return function(i,n){var s=[],o=(1<<a)-1,r=n?t:e;for(var _=0,d=32*i.length;_<d;_+=a)s.push(String.fromCharCode(i[_>>5]>>>r(_)&o));return s.join("")}}();var u=function(){var t="=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(t){return t%4},n=function(t){return 3-t%4};return function(s,a){var o=[],r=a?i:n;for(var _=0,d;_<4*s.length;_+=3){d=(s[_>>2]>>8*r(_)&255)<<16|(s[_+1>>2]>>8*r(_+1)&255)<<8|s[_+2>>2]>>8*r(_+2)&255;for(var c=0;c<4;c++)o.push(8*_+6*c>32*s.length?t:e.charAt(d>>6*(3-c)&63))}return o.join("")}}();var h=function(t,e,i,n,s,a){return r(o(r(r(e,t),r(n,a)),s),i)};var p=function(t,e,i,n,s,a,o){return h(e&i|~e&n,t,e,s,a,o)};var m=function(t,e,i,n,s,a,o){return h(e&n|i&~n,t,e,s,a,o)};var g=function(t,e,i,n,s,a,o){return h(e^i^n,t,e,s,a,o)};var b=function(t,e,i,n,s,a,o){return h(i^(e|~n),t,e,s,a,o)};var v=function(t,e){t[e>>5]|=128<<e%32;t[(e+64>>>9<<4)+14]=e;var i=1732584193,n=-271733879,s=-1732584194,a=271733878;for(var o=0,_=t.length,d,c,l,f;o<_;o+=16){d=i;c=n;l=s;f=a;i=p(i,n,s,a,t[o+0],7,-680876936);a=p(a,i,n,s,t[o+1],12,-389564586);s=p(s,a,i,n,t[o+2],17,606105819);n=p(n,s,a,i,t[o+3],22,-1044525330);i=p(i,n,s,a,t[o+4],7,-176418897);a=p(a,i,n,s,t[o+5],12,1200080426);s=p(s,a,i,n,t[o+6],17,-1473231341);n=p(n,s,a,i,t[o+7],22,-45705983);i=p(i,n,s,a,t[o+8],7,1770035416);a=p(a,i,n,s,t[o+9],12,-1958414417);s=p(s,a,i,n,t[o+10],17,-42063);n=p(n,s,a,i,t[o+11],22,-1990404162);i=p(i,n,s,a,t[o+12],7,1804603682);a=p(a,i,n,s,t[o+13],12,-40341101);s=p(s,a,i,n,t[o+14],17,-1502002290);n=p(n,s,a,i,t[o+15],22,1236535329);i=m(i,n,s,a,t[o+1],5,-165796510);a=m(a,i,n,s,t[o+6],9,-1069501632);s=m(s,a,i,n,t[o+11],14,643717713);n=m(n,s,a,i,t[o+0],20,-373897302);i=m(i,n,s,a,t[o+5],5,-701558691);a=m(a,i,n,s,t[o+10],9,38016083);s=m(s,a,i,n,t[o+15],14,-660478335);n=m(n,s,a,i,t[o+4],20,-405537848);i=m(i,n,s,a,t[o+9],5,568446438);a=m(a,i,n,s,t[o+14],9,-1019803690);s=m(s,a,i,n,t[o+3],14,-187363961);n=m(n,s,a,i,t[o+8],20,1163531501);i=m(i,n,s,a,t[o+13],5,-1444681467);a=m(a,i,n,s,t[o+2],9,-51403784);s=m(s,a,i,n,t[o+7],14,1735328473);n=m(n,s,a,i,t[o+12],20,-1926607734);i=g(i,n,s,a,t[o+5],4,-378558);a=g(a,i,n,s,t[o+8],11,-2022574463);s=g(s,a,i,n,t[o+11],16,1839030562);n=g(n,s,a,i,t[o+14],23,-35309556);i=g(i,n,s,a,t[o+1],4,-1530992060);a=g(a,i,n,s,t[o+4],11,1272893353);s=g(s,a,i,n,t[o+7],16,-155497632);n=g(n,s,a,i,t[o+10],23,-1094730640);i=g(i,n,s,a,t[o+13],4,681279174);a=g(a,i,n,s,t[o+0],11,-358537222);s=g(s,a,i,n,t[o+3],16,-722521979);n=g(n,s,a,i,t[o+6],23,76029189);i=g(i,n,s,a,t[o+9],4,-640364487);a=g(a,i,n,s,t[o+12],11,-421815835);s=g(s,a,i,n,t[o+15],16,530742520);n=g(n,s,a,i,t[o+2],23,-995338651);i=b(i,n,s,a,t[o+0],6,-198630844);a=b(a,i,n,s,t[o+7],10,1126891415);s=b(s,a,i,n,t[o+14],15,-1416354905);n=b(n,s,a,i,t[o+5],21,-57434055);i=b(i,n,s,a,t[o+12],6,1700485571);a=b(a,i,n,s,t[o+3],10,-1894986606);s=b(s,a,i,n,t[o+10],15,-1051523);n=b(n,s,a,i,t[o+1],21,-2054922799);i=b(i,n,s,a,t[o+8],6,1873313359);a=b(a,i,n,s,t[o+15],10,-30611744);s=b(s,a,i,n,t[o+6],15,-1560198380);n=b(n,s,a,i,t[o+13],21,1309151649);i=b(i,n,s,a,t[o+4],6,-145523070);a=b(a,i,n,s,t[o+11],10,-1120210379);s=b(s,a,i,n,t[o+2],15,718787259);n=b(n,s,a,i,t[o+9],21,-343485551);i=r(i,d);n=r(n,c);s=r(s,l);a=r(a,f)}return[i,n,s,a]};var $=function(t,e){var i=c(t,!0);if(i.length>16)i=v(i,t.length*a);var n=Array(16),s=Array(16);for(var o=0;o<16;o++){n[o]=909522486^i[o];s[o]=1549556828^i[o]}var r=v(n.concat(c(e,!0)),512+e.length*a);return v(s.concat(r),640)};var y=function(t,e){t[e>>5]|=128<<24-e%32;t[(e+64>>9<<4)+15]=e;var i=Array(80),n=1732584193,s=-271733879,a=-1732584194,c=271733878,l=-1009589776;for(var f=0,u=t.length,h,p,m,g,b;f<u;f+=16){h=n;p=s;m=a;g=c;b=l;for(var v=0;v<80;v++){i[v]=v<16?t[f+v]:o(i[v-3]^i[v-8]^i[v-14]^i[v-16],1);var $=r(r(o(n,5),_(v,s,a,c)),r(r(l,i[v]),d(v)));l=c;c=a;a=o(s,30);s=n;n=$}n=r(n,h);s=r(s,p);a=r(a,m);c=r(c,g);l=r(l,b)}return[n,s,a,c,l]};var x=function(t,e){var i=c(t);if(i.length>16)i=y(i,t.length*a);var n=Array(16),s=Array(16);for(var o=0;o<16;o++){n[o]=909522486^i[o];s[o]=1549556828^i[o]}var r=y(n.concat(c(e)),512+e.length*a);return y(s.concat(r),672)};e._$hmacsha12hex=function(t,e){return l(x(t,e))};e._$hmacsha12b64=function(t,e){return u(x(t,e))};e._$hmacsha12str=function(t,e){return f(x(t,e))};e._$hmacmd52hex=function(t,e){return l($(t,e),!0)};e._$hmacmd52b64=function(t,e){return u($(t,e),!0)};e._$hmacmd52str=function(t,e){return f($(t,e),!0)};e._$sha12hex=function(t){return l(y(c(t),t.length*a))};e._$sha12b64=function(t){return u(y(c(t),t.length*a))};e._$sha12str=function(t){return f(y(c(t),t.length*a))};e._$md52hex=function(t){return l(v(c(t,!0),t.length*a),!0)};e._$md52b64=function(t){return u(v(c(t,!0),t.length*a),!0)};e._$md52str=function(t){return f(v(c(t,!0),t.length*a),!0)};e._$str2hex=function(t,e){return l(c(t,!e),!e)};if(!0)t.copy(t.P("nej.u"),e);return e},"a2e1fe5ad329e35f3966d36c90672926");I$("9e07459e62a4073031ead15e8b2bc7b2",function(t,e){var i=t._$uniqueID(),n=new RegExp("\\["+i+"\\](.+?)\\[\\/"+i+"\\]","gi"),s=new RegExp("((?:(http|https|rtsp):\\/\\/(?:(?:[a-zA-Z0-9\\$\\-\\_\\.\\+\\!\\*\\'\\(\\)\\,\\;\\?\\&\\=]|(?:\\%[a-fA-F0-9]{2})){1,64}(?:\\:(?:[a-zA-Z0-9\\$\\-\\_\\.\\+\\!\\*\\'\\(\\)\\,\\;\\?\\&\\=]|(?:\\%[a-fA-F0-9]{2})){1,25})?\\@)?)?(?:(([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9]){0,1}\\.)+[a-zA-Z]{2,63}|((25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9])\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[0-9]))))(?:\\:\\d{1,5})?)(\\/(?:(?:[a-zA-Z0-9¡-퟿豈-﷏ﷰ-￯\\;\\/\\?\\:\\@\\&\\=\\#\\~\\-\\.\\+\\!\\*\\'\\(\\)\\,\\_])|(?:\\%[a-fA-F0-9]{2}))*)?(?:\\b|$)","gi");
e._$encode=function(t){return(t||"").replace(s,function(t){return"["+i+"]"+t+"[/"+i+"]"})};e._$decode=function(t){RegExp.lastIndex=-1;return(t||"").replace(n,function(t,e){var i=e||"";if(i.indexOf("://")<0)i="http://"+i;return'<a target="_blank" href="'+i+'">'+e+"</a>"})};e._$complete=function(i){return e._$decode(t._$escape(e._$encode(i)))}},"fbbf6ddc0634989027d138f4ffd4b78b");I$("4d3be81e509943f25257cbc97abc448d",function(t,e,i){i._$parse=function(e){var n=[],s=JSON.parse(e.answer_list||"null")||[],a=e.answer_label,o=e.evaluation;if(a||s.length>1){if(s.length>0&&e.answer_type)s.forEach(function(t){t.answer_type=e.answer_type});if(e.evaluation_content)n.push({list:s,type:"qa-list",origin:e.question,label:e.answer_label||"",evaluation:e.evaluation||0,evalcontent:e.evaluation_content,evaluation_reason:e.evaluation_reason||0,evaluation_guide:e.evaluation_guide||"感谢你的评价，请填写具体原因供我们改进"});else n.push({list:s,type:"qa-list",origin:e.question,label:e.answer_label||"",evaluation:e.evaluation||0,evaluation_reason:e.evaluation_reason||0,evaluation_guide:e.evaluation_guide||"感谢你的评价，请填写具体原因供我们改进"})}else if(1==s.length)if(e.evaluation_content)n.push({type:"qa",content:(s[0]||{}).answer||"",evaluation:e.evaluation||0,evalcontent:e.evaluation_content,evaluation_reason:e.evaluation_reason||0,evaluation_guide:e.evaluation_guide||"感谢你的评价，请填写具体原因供我们改进"});else n.push({type:"qa",content:(s[0]||{}).answer||"",evaluation:e.evaluation||0,evaluation_reason:e.evaluation_reason||0,evaluation_guide:e.evaluation_guide||"感谢你的评价，请填写具体原因供我们改进"});if(1==e.operator_hint){var r=t._$uniqueID(),_=2==e.answer_flag||3==e.answer_flag?!0:!1;n.push({id:r,idClient:r,msgIdClient:r,type:"rich",action:"kefu",content:i._$action(id,e.operator_hint_desc||"",_)})}return n};i._$action=function(){var i=t._$uniqueID(),n=new RegExp("\\["+i+"(.+?)"+i+"\\]","gi"),s=/<a\s+href\s*=\s*('|")qiyu:\/\/action.qiyukf.com\?command=(.+?)\1\s*>(.+?)<\/a>/gi,a={applyHumanStaff:"kefu"};return function(o,r,_){var d={};r=(r||"").replace(s,function(e,n,s,r){var _=a[s];if(!_)return e;var c=t._$uniqueID();d[c]='<a href="#" data-id="'+o+'" data-name="'+_+'">'+r+"</a>";return"["+i+c+i+"]"});if(_)r=e._$decode(r);else r=e._$complete(r);return r.replace(n,function(t,e){return d[e]||t})}}()},"fbbf6ddc0634989027d138f4ffd4b78b","9e07459e62a4073031ead15e8b2bc7b2");I$("e8a9b25c7b2ee99eea6d6673fffb2fda",function(){function t(t,e,o){var r,_;if(arguments.length<3)return i(t,e);else{if(S(e))_=s(t,e,o);else{r=typeof e;if("string"===r){if("function"==typeof t[e])_=n(t,e,o)}else if("function"===r)_=s(t,e(t),o);else _=a(t,e,o)}return _}}function e(t,e){var i,n,s;this.target=t;this.func=e;this.aspects={};i=this.orig=t[e];n=this;s=this.advised=function(){function t(t){var e=d(t);n._callSimpleAdvice("on",o,t);return e}function a(t,e){n._callSimpleAdvice(t,o,e)}var o,r,_,d,l;if(this instanceof s){o=I(i.prototype);d=function(t){return c(i,o,t)}}else{o=this;d=function(t){return i.apply(o,t)}}_=w.call(arguments);l="afterReturning";r=h({target:o,method:e,args:_});try{n._callSimpleAdvice("before",o,_);try{r.result=n._callAroundAdvice(o,e,_,t)}catch(f){r.result=r.exception=f;l="afterThrowing"}_=[r.result];a(l,_);a("after",_);if(r.exception)throw r.exception;return r.result}finally{p()}};C(s,"_advisor",{value:n,configurable:!0})}function i(t,e){var i,s;i=t.name||"_";s={};s[i]=t;n(s,i,e);return s[i]}function n(t,i,n){var s=e.get(t,i);return s&&s.add(n)}function s(t,e,i){var s,a,r,_;s=[];_=0;for(;r=e[_++];){a=n(t,r,i);a&&s.push(a)}return o(s)}function a(t,e,i){var s=[];for(var a in t)if("function"==typeof t[a]&&e.test(a))s.push(n(t,a,i));return o(s)}function o(t){return{remove:function(){for(var e=t.length-1;e>=0;--e)t[e].remove()}}}function r(e){return function(i,n,s){var a={};if(2===arguments.length){a[e]=n;return t(i,a)}else{a[e]=s;return t(i,n,a)}}}function _(t,e){var i,n,s;for(i in x){n=e[i];if(n){s=t[i];if(!s)t[i]=s=[];s.push({aspect:e,advice:n})}}}function d(t,e){var i,n,s;s=0;for(i in x){n=t[i];if(n){s+=n.length;for(var a=n.length-1;a>=0;--a)if(n[a].aspect===e){n.splice(a,1);--s;break}}}return s}function c(t,e,i){try{C(e,"constructor",{value:t,enumerable:!1})}catch(n){}t.apply(e,i);return e}function l(t,e){for(var i=0,n=t.length;i<n;i++)e(t[i])}function f(t,e){for(var i=t.length-1;i>=0;--i)e(t[i])}function u(){return g}function h(t){b.push(g);return g=t}function p(){return g=b.pop()}function m(){try{return"x"in Object.defineProperty({},"x",{})}catch(t){}}t.before=r("before");t.around=r("around");t.on=r("on");t.afterReturning=r("afterReturning");t.afterThrowing=r("afterThrowing");t.after=r("after");t.joinpoint=u;t.add=function(){return t.apply(null,arguments)};e.prototype={_callSimpleAdvice:function(t,e,i){var n,s;s=this.aspects[t];if(s){n=x[t];n(this.aspects[t],function(t){var n=t.advice;n&&n.apply(e,i)})}},_callAroundAdvice:function(t,e,i,n){function s(t,e){return t<0?n(e):a(r[t].advice,t,e)}function a(i,n,a){function o(){return c}function r(){return d(arguments.length>0?w.call(arguments):a)}function _(t){return d(t||a)}function d(t){c++;return s(n-1,t)}var c,l;c=0;l=h({target:t,method:e,args:a,proceed:r,proceedApply:_,proceedCount:o});try{return i.call(t,l)}finally{p()}}var o,r;r=this.aspects.around;o=r?r.length:0;return s(o-1,i)},add:function(t){var e,i;e=this;i=e.aspects;_(i,t);return{remove:function(){var n=d(i,t);if(!n)e.remove()}}},remove:function(){delete this.advised._advisor;this.target[this.func]=this.orig}};e.get=function(t,i){if(i in t){var n,s;s=t[i];if("function"!=typeof s)throw new Error("Advice can only be applied to functions: "+i);n=s._advisor;if(!n){n=new e(t,i);t[i]=n.advised}return n}};var g,b,v,$,y,x,w,S,C,I;b=[];v=Array.prototype;$=v.unshift;y=v.push;w=v.slice;S=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)};C=m()?Object.defineProperty:function(t,e,i){t[e]=i.value};I=Object.create||function(){function t(){}return function(e){t.prototype=e;var i=new t;t.prototype=null;return i}}();x={before:f,around:!1};x.on=x.afterReturning=x.afterThrowing=x.after=l;return t});I$("c016c209845c99608f6b8fbdad4ee39b",function(t,e,i,n,s,a,o,r,_,d,c){c=t._$klass();d=c._$extend(n._$$EventTarget);var l={terminal:"WEB",project:"webapi",version:window.logSetting&&window.logSetting.version||"",type:"network",appkey:"",clientid:"",channel:"",attachment:"",platform:navigator.userAgent,extra:"",message:"",timestamp:"",sign:"",ver:""};var f={samplingRate:1,debugNums:Number(window.localStorage.getItem("debugNums"))||0};var u=[];var h=[];d.__init=function(t){this.__super(t);this.__initConfig();this.__initDebug()};d._$config=function(t){i._$merge(l,t)};d._$info=function(t,e){if(this.__checkSimple()){var i=500;var n=this.__handleInfoMsg("info",t,e);u.unshift(n);if(u.length>i)u.splice(u.length-1,1)}};d._$error=function(t,e,i){if(i||this.__checkSimple()){var n=this.__handleLogError("error",t,e);this.__sendLog(n,1)}};d._$debug=function(t){var t="[DEBUG] ["+i._$format(+new Date,"yyyy-MM-dd HH:mm:ss.ms")+"] "+t+"\n";h.unshift(t);if(h.length>=f.debugNums){var e=i._$merge({},l,{appkey:window.setting&&window.setting.appkey,clientid:window.setting&&window.setting.device,message:h.join("\n"),timestamp:+new Date,level:"DEBUG"});i._$merge(e,this.__createHash(e));this.__sendLog(e,1);h.length=0}};d._$batch=function(t,e,n){if(this.__checkSimple()){var s=this;var a=function(){var t=[].slice.call(arguments),e=null,n=t[0],a=t.slice(1);var o={};for(var r=0;r<a.length;r++){var e=a[r];if(i._$isObject(e))i._$merge(o,e);else o[r]=e}s._$info(n,o)};for(var o=0;o<e.length;o++)if("after"==n)r.after(t,e[o],a._$bind(this,e[o]));else r.before(t,e[o],a._$bind(this,e[o]))}};d._$getLogCache=function(){return u};d.__handleLogError=function(t,e,n){try{if(i._$isObject(n))n=JSON.stringify(n)}catch(n){}var s=+new Date;var a="["+t.toUpperCase()+"] ["+i._$format(s,"yyyy-MM-dd HH:mm:ss.ms")+"] "+e+": "+n+"\n";var o=i._$merge({},l,{appkey:window.setting&&window.setting.appkey,clientid:window.setting&&window.setting.device,message:a,timestamp:s,level:t});i._$merge(o,this.__createHash(o));u=[];return o};d.__handleInfoMsg=function(t,e,n){var s=[],a="",o=+new Date;n=n||{};for(var r in n)if(n.hasOwnProperty(r))s.push(r+":"+JSON.stringify(n[r]||""));var a="["+t.toUpperCase()+"] ["+i._$format(o,"yyyy-MM-dd HH:mm:ss.ms")+"] "+e+": "+s.join(";");return a};d.__sendLog=function(t,e){if(window.logSetting){var i=window.logSetting.serverAddr;for(var n in t)t[n]=encodeURIComponent(t[n]);o._$request(i+"/swallow/log",{type:"json",method:"POST",data:t,onload:this.__cbLoad._$bind(this),onerror:this.__cbError._$bind(this,t,e)})}};d.__createHash=function(t){var e=a._$md52hex("ysf"+t.terminal+t.version+t.type+t.appkey+t.timestamp+"qykf");return{sign:e,ver:1}};d.__cbLoad=function(t){};d.__cbError=function(t,e){var i=1e3*e,n=3;if(!(e>n)){clearTimeout(this.__timer);this.__timer=setTimeout(function(){this.__sendLog(t,e+1)}._$bind(this),i)}};d.__initDebug=function(){function t(t){var e=[];return"\n"+JSON.stringify(t,function(t,i){if("object"==typeof i&&null!==i){if(e.indexOf(i)!==-1)return;e.push(i)}return i})}function e(t){return t}function i(t){return Number(t)}var n={o:t,O:t,s:e,d:i,j:t};if(window.debug)if(f.debugNums){window.debug.log=this._$debug._$bind(this);window.debug.formatArgs=function(t){t[0]=this.namespace+" "+t[0]};window.debug.formatters=n}};d.__initConfig=function(){var t=this;var e=window.logSetting.serverAddr;o._$request(e+"/swallow/config",{type:"json",data:{t:"web",p:"sdk"},method:"GET",type:"json",onload:function(t){i._$merge(f,t)}})};d.__checkSimple=function(){var t=Math.floor(100*Math.random()),e=Math.floor(100*f.samplingRate);return t<e?!0:!1};var p=c._$allocate();window.onerror=function(){p._$error("jsloaderror",[].slice.call(arguments),!0)};return p},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","e32a3e597220aa11cee4e5c41da1a3ff","5f75dc6bf6467f0a29ae4a457d2e9c8c","d8694785278ea23e9444192ffae00916","2f42bd4202bba1781886820b65db2a46","e8a9b25c7b2ee99eea6d6673fffb2fda");
I$("73e5ca48507e6f77ddc64dc3fc1781f1",function(t,e,i,n,s,a,o){var r;n._$$CacheListAbstract=e._$klass();r=n._$$CacheListAbstract._$extend(i._$$CacheList);r.__reset=function(t){this.__super(t);this._$batEvent({doloadlist:this.__doLoadList._$bind(this),doloaditem:this.__doLoadItem._$bind(this),doadditem:this.__doAddItem._$bind(this),dodeleteitem:this.__doDeleteItem._$bind(this),doupdateitem:this.__doUpdateItem._$bind(this),dopullrefresh:this.__doPullRefresh._$bind(this)})};r.__doLoadList=a;r.__doPullRefresh=a;r.__doLoadItem=a;r.__doAddItem=a;r.__doDeleteItem=a;r.__doUpdateItem=a;if(!0)t.P("nej.ut")._$$AbstractListCache=n._$$CacheListAbstract;return n},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5bf37a641a2cfd8443765a178fbd8a82");I$("0a031608798084dd303ad76241dcc09c",function(t,e,i,n,s,a,o){var r={};a._$$Cache=t._$klass();o=a._$$Cache._$extend(n._$$CacheListAbstract);o.__doSendRequest=function(t,n){var a=r[t];if(a){if(e._$isFunction(a.filter))a.filter.call(this,n);var o=function(t){var i=!1,o=n.onerror||a.onerror||"onerror";s._$error("httpRequestError",e._$merge({url:a.url},n,t));if(e._$isFunction(o))i=o.call(this,t,n);if(!i&&e._$isString(o))this._$dispatchEvent(o,t,n)};var _=function(t){if(t&&0===(""+t.code).indexOf("2")){if(e._$isFunction(a.format))a.format.call(this,t,n);var i=n.onload||a.onload;if(e._$isFunction(i))i.call(this,t.result);else if(e._$isString(i))this._$dispatchEvent(i,t.result);if(e._$isFunction(a.finaly))a.finaly.call(this,n,t.result)}else o.call(this,t)};var d=e._$merge({},n,{cookie:!0,type:"json",method:a.method||"POST",onload:_._$bind(this),onerror:o._$bind(this)});var c=function(t){var e=[];for(var i in t)if(t.hasOwnProperty(i))e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")};if("POST"==d.method&&2==window.setting.dialogMobileStyle&&window!=top&&!(a.url.indexOf("?")>-1)){a.url=a.url+"?"+c(d.data);d.data={}}if(a.domain)a.__url=a.domain+a.url;i._$request(a.__url||a.url,d)}else console.error("not found request config for "+t)};o._$hasItem=function(t){return!!this._$getItemInCache(t)};a._$config=function(t){e._$forIn(t,function(t,e){if("string"==typeof t)t={url:t};r[e]=t})};a._$do=function(t,i){if(e._$isFunction(i)){var n=t._$allocate(),s=i.call(null,n);n._$recycle();return s}}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","2f42bd4202bba1781886820b65db2a46","73e5ca48507e6f77ddc64dc3fc1781f1","c016c209845c99608f6b8fbdad4ee39b");I$("f5da7bdddddad5f42b7c73b364e10a1f",function(t,e,i,n,s,a){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={},_={};for(var d=0,c=o.length,l;d<c;d++){l=o.charAt(d);r[d]=l;_[l]=d}var f=function(t){var e=0,i,n=[];for(;e<t.length;){i=t[e];if(i<128){n.push(String.fromCharCode(i));e++}else if(i>191&&i<224){n.push(String.fromCharCode((31&i)<<6|63&t[e+1]));e+=2}else{n.push(String.fromCharCode((15&i)<<12|(63&t[e+1])<<6|63&t[e+2]));e+=3}}return n.join("")};var u=function(){var t=/\r\n/g;return function(e){e=e.replace(t,"\n");var i=[],n=String.fromCharCode(237);if(n.charCodeAt(0)<0)for(var s=0,a=e.length,o;s<a;s++){o=e.charCodeAt(s);o>0?i.push(o):i.push(256+o>>6|192,256+o&63|128)}else for(var s=0,a=e.length,o;s<a;s++){o=e.charCodeAt(s);if(o<128)i.push(o);else if(o>127&&o<2048)i.push(o>>6|192,63&o|128);else i.push(o>>12|224,o>>6&63|128,63&o|128)}return i}}();var h=function(t){var e=0,i=[],n=t.length%3;if(1==n)t.push(0,0);if(2==n)t.push(0);for(;e<t.length;){i.push(r[t[e]>>2],r[(3&t[e])<<4|t[e+1]>>4],r[(15&t[e+1])<<2|t[e+2]>>6],r[63&t[e+2]]);e+=3}if(1==n)i[i.length-1]=i[i.length-2]="=";if(2==n)i[i.length-1]="=";return i.join("")};var p=function(){var t=/\n|\r|=/g;return function(e){var i=0,n=[];e=e.replace(t,"");for(var s=0,a=e.length;s<a;s+=4)n.push(_[e.charAt(s)]<<2|_[e.charAt(s+1)]>>4,(15&_[e.charAt(s+1)])<<4|_[e.charAt(s+2)]>>2,(3&_[e.charAt(s+2)])<<6|_[e.charAt(s+3)]);var o=n.length,r=e.length%4;if(2==r)n=n.slice(0,o-2);if(3==r)n=n.slice(0,o-1);return n}}();i._$b642str=function(t){return f(p(t))};i._$str2b64=function(t){try{return window.btoa(t)}catch(e){return h(u(t))}};if(!0)t.copy(t.P("nej.u"),i);return i},"a2e1fe5ad329e35f3966d36c90672926","fbbf6ddc0634989027d138f4ffd4b78b");I$("9103350b1b0ee4a4741e83045ad0fcff",function(t,e,i,n,s,a,o){var r;n._$$Media=e._$klass();r=n._$$Media._$extend(i._$$EventTarget);r.__reset=function(t){this.__state=0;this._$source(t.url);if(null!=t.volume)this._$volume(t.volume);this.__super(t)};r.__destroy=function(){this.__super();this._$stop()};r.__doPlay=a;r.__doPause=a;r.__doStop=a;r.__onStop=function(){this.__doStateChange(4);this.__doStateChange(0)};r.__doError=function(){this.__state=0};r.__setCurrentTime=a;r.__getCurrentTime=a;r.__setVolume=a;r.__getVolume=a;r.__doStateChange=function(t){if(t!=this.__state){this.__state=t;this._$dispatchEvent("onstatechange",{state:this.__state})}};r.__onVolumeChange=function(){this._$dispatchEvent("onvolumechange",{volume:this._$volume()})};r._$duration=a;r._$source=function(t){t=t||"";if(t){this._$stop();this.__source=t}};r._$play=function(){if(0==this.__state||3==this.__state)this.__doPlay()};r._$pause=function(){if(1==this.__state||2==this.__state)this.__doPause()};r._$stop=function(){if(0!=this.__state)this.__doStop()};r._$seek=function(t){if(null!=t)this.__setCurrentTime(t);return this.__getCurrentTime()};r._$volume=function(t){if(null!=t){var t=Math.max(0,Math.min(t,100));this.__setVolume(t/100)}return 100*this.__getVolume()};if(!0)t.copy(t.P("nej,ut"),n);return n},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","e32a3e597220aa11cee4e5c41da1a3ff");I$("121f9ab3b6146ea8e4ab918fb69ce567",function(t,e,i,n,s,a,o){var r;n._$$MediaAudio=e._$klass();r=n._$$MediaAudio._$extend(i._$$Media);r.__reset=function(t){this.__audio=new Audio;this.__doInitDomEvent([[this.__audio,"loadstart",this.__onLoading._$bind(this)],[this.__audio,"timeupdate",this.__onPlaying._$bind(this)],[this.__audio,"pause",this.__onPause._$bind(this)],[this.__audio,"volumechange",this.__onVolumeChange._$bind(this)],[this.__audio,"ended",this.__onStop._$bind(this)],[this.__audio,"error",this.__onError._$bind(this)]]);this.__super(t)};r.__destroy=function(){this.__super();delete this.__audio};r.__doPlay=function(){if(this.__audio.src!=this.__source){this.__audio.src=this.__source;this.__source=this.__audio.src}this.__audio.play()};r.__doPause=function(){this.__audio.pause()};r.__doStop=function(){this.__stopped=!0;this.__doPause();if(3==this.__state)this.__onPause()};r.__onLoading=function(){if(!this.__audio.paused)this.__doStateChange(1)};r.__onPause=function(){var t=!this.__stopped?3:0;this.__stopped=!1;this.__doStateChange(t);if(0==t)this.__audio&&this.__audio.removeAttribute("src")};r.__onPlaying=function(){var t=this.__audio.duration;if(!this.__audio.paused&&!isNaN(t)){this.__doStateChange(2);this._$dispatchEvent("ontimeupdate",{duration:this.__audio.duration,current:this.__audio.currentTime})}};r.__onError=function(t){this.__doError();var e=this.__audio.error;this._$dispatchEvent("onerror",{code:e.code})};r.__setCurrentTime=function(t){if(1!=this.__state)this.__audio.currentTime=t||0};r.__getCurrentTime=function(){return this.__audio.currentTime};r.__setVolume=function(t){this.__audio.volume=t};r.__getVolume=function(){return this.__audio.volume};r._$duration=function(){return!this.__audio?0:this.__audio.duration};if(!0)t.copy(t.P("nej.ut"),n);return n},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","9103350b1b0ee4a4741e83045ad0fcff");I$("63d0599437131063630547edac7f353a",function(t,e,i,n,s){e.__getAudioInst=function(e){return t._$$MediaAudio._$allocate(e)};return e},"121f9ab3b6146ea8e4ab918fb69ce567");I$("f8baf0ff9a923ec262d4a7cc92f4930c",function(t,e,i,n,s,a,o,r,_){var d;a._$$MediaFlash=e._$klass();d=a._$$MediaFlash._$extend(s._$$Media);d.__init=function(){var t=function(t){this.__audio=t;if(this.__action){this.__action.call(this);delete this.__action}};return function(){this.__super();n._$flash({hidden:!0,src:i._$get("audio.swf"),onready:t._$bind(this),onended:this.__onStop._$bind(this),onpause:this.__onPause._$bind(this),onseeking:this.__onLoading._$bind(this),onprogress:this.__onLoading._$bind(this),ontimeupdate:this.__onPlaying._$bind(this),onvolumechange:this.__onVolumeChange._$bind(this),onerror:this.__onError._$bind(this)})}}();d.__destroy=function(){this.__super();delete this.__action};d.__doPlay=function(){if(this.__audio){if(this.__source){this.__audio.nej_setSrc(this.__source);delete this.__source}this.__audio.nej_play()}else this.__action=this.__doPlay};d.__doPause=function(){if(this.__audio)this.__audio.nej_pause();else this.__action=this.__doPause};d.__doStop=function(){if(this.__audio){this.__audio.nej_stop();this.__doStateChange(0)}else this.__action=this.__doStop};d.__onLoading=function(){this.__doStateChange(1)};d.__onPause=function(){this.__doStateChange(3)};d.__onPlaying=function(t){this.__doStateChange(2);this._$dispatchEvent("ontimeupdate",{duration:t.duration,current:t.currentTime});if(null!=this.__dtvol){var e=this.__dtvol;delete this.__dtvol;this.__setVolume(e)}};d.__onError=function(t){this.__doError();this._$dispatchEvent("onerror",{code:t.code})};d.__setCurrentTime=function(t){if(1!=this.__state)this.__audio.nej_seek(t||0)};d.__getCurrentTime=function(){return this.__audio.nej_flash_get_currentTime()};d.__setVolume=function(t){if(this.__audio)try{this.__audio.nej_flash_set_volume(t)}catch(e){this.__dtvol=t}else this.__dtvol=t};d.__getVolume=function(){if(this.__audio)return this.__audio.nej_flash_get_volume()};d._$duration=function(){return!this.__audio?0:this.__audio.nej_flash_get_duration()};if(!0)t.copy(t.P("nej.ut"),a);return a},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","c9ad5ec4461d887e3ff2709e526c3857","93f767e8b0f06b4a7264b40af6116cb6","9103350b1b0ee4a4741e83045ad0fcff");I$("bc57b1de2dd7ed37c7be19254bc6d55c",function(t,e,i,n,s,a){if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="4.0")I$("7ce5f3799de07cc556612d7cada65d16",function(t){
e.__getAudioInst=function(e){return t._$$MediaFlash._$allocate(e)}},"f8baf0ff9a923ec262d4a7cc92f4930c");return e},"e7be6ff9122e14c2be65196e9dffe066","63d0599437131063630547edac7f353a");I$("295e0344e178c08801d7bce1d9676dd0",function(t,e,i,n,s,a,o){n._$audio=function(t){return i.__getAudioInst(t)};n._$play=function(){var t={};var s=function(e,i,n,s){var o=t[e];if(o){var r=o.conf,_=r[i]||a,d=r.extra;if(s)delete t[e];n.data=d;_(n)}};var o=function(t,e){s(t,"onstatechange",{state:e},0==e)};var r=function(t,e){s(t,"onerror",{code:e},!0)};var _=function(t,e){s(t,"ontimeupdate",e)};var d=function(t,e){if(0==e.state)l(t);o(t,e.state)};var c=function(e){var n=t[e];if(n){n.audio=i.__getAudioInst({url:n.url,onerror:f._$bind(null,e),ontimeupdate:_._$bind(null,e),onstatechange:d._$bind(null,e)});n.audio._$play()}};var l=function(e){var i=t[e];if(i){if(i.audio)i.audio=i.audio._$recycle();if(i.timer)i.timer=window.clearTimeout(i.timer)}};var f=function(e,i){var n=t[e];if(n){l(e);var s=n.conf;if(s.retry>0){s.retry--;n.timer=window.setTimeout(c._$bind(null,e),s.interval||500)}else r(e,i.code)}};n._$stop=function(e){var i=t[e||"auto-audio"];if(i)i.audio._$stop()};return function(i,n){if(i){var s=e._$merge({},n),a=s.key||"auto-audio",r=t[a];if(r){l(a);o(a,0)}t[a]={url:i,conf:s};c(a)}}}();if(!0){var r=t.P("nej.e");r._$audio=n._$audio;r._$playBgSound=n._$play;r._$stopBgSound=n._$stop}return n},"a2e1fe5ad329e35f3966d36c90672926","fbbf6ddc0634989027d138f4ffd4b78b","bc57b1de2dd7ed37c7be19254bc6d55c");I$("35df4ef4567b6cd0275a1b849d2bea8c",function(t,e,i,n,s,a,o){o.CONFIG={nosHost:"nos.netease.com",cdnHost:"nosdn.127.net"};o.TransferRgType={entry:30,qaMsg:38,rgMsg:39};o._$extend=function(t,e,i){for(var n in e)if(i||void 0===t[n]||null===t[n])t[n]=e[n];return t};o._$now=function(){return new Date(+new Date+((setting||{}).delta||0))};o._$datetime=function(t){var e=new Date(t);var n=o._$now();if(e.getFullYear()===n.getFullYear()){if(e.getMonth()===n.getMonth()){var s=n.getDate()-e.getDate();if(1===s)return"昨天"+i._$format(e," HH:mm");else if(0===s)return i._$format(e," HH:mm");else return i._$format(e,"MM-dd HH:mm")}return i._$format(e,"MM-dd HH:mm")}return i._$format(e,"yyyy-MM-dd HH:mm")};o._$fileSizeFormat=function(t,e){e=e&&e.toUpperCase();switch(e){case"GB":return(t/Math.pow(1024,3)).toFixed(1);case"MB":return(t/Math.pow(1024,2)).toFixed(1);case"KB":return Math.round(t/1024);case"B":return t;default:if(t>=Math.pow(1024,3))return(t/Math.pow(1024,3)).toFixed(1)+" GB";else if(t>=Math.pow(1024,2))return(t/Math.pow(1024,2)).toFixed(1)+" MB";else if(t>=1024)return Math.round(t/1024)+" KB";else return t+" B"}};o._$spliceSuffix=function(t){var e=t.split("."),i={bmp:"imgflag",png:"imgflag",jpg:"imgflag",jpeg:"imgflag",gif:"imgflag",exif:"imgflag",pdf:"pdf",txt:"doc",doc:"doc",docx:"doc",xls:"excel",xlsx:"excel",csv:"excel",zip:"zip",rar:"zip","7z":"zip",ppt:"ppt",pptx:"ppt",key:"key",mp3:"audio",wma:"audio",ape:"audio",flac:"audio",wav:"audio",aac:"audio",ogg:"audio",avi:"video",mov:"video",mkv:"video",rmvb:"video",wmv:"video","3gp":"video",flv:"video",mp4:"video",mpg:"video"},n=i[e[e.length-1].toLowerCase()];if(!n)return"unknown";else return n};o._$getListModuleConfig=function(e){var s=e||{},a=t._$html2node(n._$getTextTemplate("resource-status-empty")),o=t._$html2node(n._$getTextTemplate("resource-status-loading")),r=t._$html2node(n._$getTextTemplate("resource-status-error"));var _=function(e,i){var n=(t._$getByClassName(e,"j-flag")||[])[0];n.innerText=i||""};if(!i._$isFunction(s.onemptylist))s.onemptylist=function(t){t.value=a};else s.onemptylist=s.onemptylist._$aop(function(t){t.args[0].value=a});if(!i._$isFunction(s.onbeforelistload))s.onbeforelistload=function(t){t.value=o};else s.onbeforelistload=s.onbeforelistload._$aop(function(t){t.args[0].value=o});if(!i._$isFunction(s.onlistloaderror))s.onlistloaderror=function(t){_(r);t.value=r};else s.onlistloaderror=s.onlistloaderror._$aop(function(t){_(r);t.args[0].value=r});if(!i._$isFunction(s.onerror))s.onerror=function(t){_(r);this._$showMessage(r)};else{var d=s.onerror;s.onerror=function(t){d.call(this,t);if(!t.stopped){var e=t.content||"错误提示："+(t.data||t.code)+"，"+t.message;_(r,e);this._$showMessage(r)}}}return s};o._$delegate=function(n,s,a){e._$addEvent(s,"click",function(s){try{var o=e._$getElement(s,"d:action")}finally{if(!o)return;var r=t._$dataset(o,"action"),_=(a||{})[r];if(i._$isFunction(_)){e._$stopDefault(s);_.call(n||this,o,s)}}})};o._$delegateWithStopEvent=function(n,s,a){e._$addEvent(s,"click",function(s){try{var o=e._$getElement(s,"d:action")}finally{if(!o)return;var r=t._$dataset(o,"action"),_=(a||{})[r];if(i._$isFunction(_))_.call(n||this,o,s)}})};o._$copy=function(t){return JSON.parse(JSON.stringify(t))};o._$replaceRichAndUnescape=function(t){var e=/<img[^>]+>/g;t=t.replace(e,"[图片]");var n=/<\/?[^>]*>/g;t=t.replace(n,"");return i._$unescape(t)};o._$escapeWithoutSpace=function(){var t=/<br\/?>$/,e={r:/\<|\>|\&|\r|\n|\'|\"/g,"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;","\n":"<br/>","\r":""};return function(n){n=i._$encode(e,n);return n.replace(t,"<br/><br/>")}}();o._$trim=function(t){t=t||"";return t.trim()};o._$avatorClip=function(t){if(!t)return"";t+="?imageView&type=png%7CimageView&thumbnail=76y76&axis=5";if(t.indexOf("://")>=0)return t;else return appConfig.path.sdk+t};o._$throttle=function(t,e){var e=e||0;var i,n;var s=0;var a;var o=function(){s=+new Date;a=null;t.apply(i,n);i=n=null};return function(){var t=+new Date;var r=e-(t-s);i=this;n=arguments;if(r<=0||r>e){clearTimeout(a);o()}else if(!a)a=setTimeout(o,r)}};o._$debounce=function(t,e){var i;return function(){clearTimeout(i);context=this;args=arguments;i=setTimeout(function(){t.apply(context,args)},e)}};o._$transNosToCdn=function(t,e){var i=o.CONFIG.nosHost+"/"+e,n=e+"."+o.CONFIG.cdnHost;return t.replace(i,n)};o._$getFirstAncestorByClass=function(e,i){if(e==document.body)return null;else{var n=e.parentNode;if(t._$hasClassName(n,i))return n;else return this._$getFirstAncestorByClass(n,i)}};o._$formatTrashWords=function(t){var e=t.trashWords;if(e){var i=e.join(",");var n=0,s=15;for(var a=0,o=i.length;a<o;a++)if(n>s){i=i.slice(0,a)+"...";break}else if(","!=i[a])n++;return'消息包含违禁词"'+i+'"，发送失败'}else return"消息包含违禁信息，发送失败"};o._$isMobilePlatform=function(){if(/(iPhone|iPod|iOS|Android)/i.test(navigator.userAgent))return!0;else return!1};o._$isMobilePlatformType=function(){if(/(iPhone|iPod|iOS)/i.test(navigator.userAgent))return"ios";if(/(Android)/i.test(navigator.userAgent))return"Android";else;};o._$isIphoneX=function(){var t=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&3===window.devicePixelRatio&&375===window.screen.width&&812===window.screen.height;var e=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&2===window.devicePixelRatio&&375===window.screen.width&&812===window.screen.height;var i=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&3===window.devicePixelRatio&&414===window.screen.width&&896===window.screen.height;var n=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&2===window.devicePixelRatio&&414===window.screen.width&&896===window.screen.height;return t||i||n||e};o._$isFrameModule=function(){if(this._$isMobilePlatform()&&2==window.setting.dialogMobileStyle)return"mobileFrame";else if(!this._$isMobilePlatform()&&(1==window.setting.winType||1==window.setting.dialogStyle))return"webFrame";else!1};o._$isWX=function(){var t=window.navigator.userAgent.toLowerCase();if("micromessenger"==t.match(/MicroMessenger/i)){this._isWX=!0;return this._isWX}};o._$isApple=function(){if(/(iPhone|iPad|iOS|mini)/i.test(navigator.userAgent)||navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")==-1)return!0;else return!1};o._$getOriginImageUrl=function(t){return t.replace(/&thumbnail=\d+x\d+/,"")}},"5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","295e0344e178c08801d7bce1d9676dd0");I$("4e09e3c278408cd8001c7779e34c93e9",function(t,e,i,n,s,a,o,r,_,d,c,l,u,h,p){p=e._$klass();h=p._$extend(d._$$Cache);var m=-1;var g=3e3;var b={};var v={};d._$config({"user-create":{url:"/webapi/user/create.action",format:function(t,e){var i=t.info;t.result={token:i.token,account:i.accid,exchange:i.exchange,bid:i.bid};this.__setRemoteStorage(i.storage,e.data.appKey)},onerror:function(t,e){var i="";if(1002==t.code||1003==t.code||1001==t.code||1004==t.code){switch(t.code){case 1001:i="企业Appkey不存在";break;case 1002:i="帐户不合法";break;case 1003:i="系统错误";break;case 1004:i=t.desc}this._$dispatchEvent("onusererror",{code:t.code,msg:i});_._$error("user-create",t)}else this.__cbCreateYXUser(e.data.appKey,null);return!0}}});var $={NULL:0,INIT:1,CONNECTED:2};h.__init=function(t){this.__state=$.NULL;this.__nopt={db:!1,debug:window.MIN_DEBUG_MODE,syncTeams:!1,syncFriends:!1,syncRoamingMsgs:!1,syncRelations:!1,syncTeamMembers:!1,syncFilter:!0,lbsUrl:window.MIN_LBS,onmsg:this.__cbReceiveMessage._$bind(this),onerror:this.__onConnectError._$bind(this),onconnect:this.__cbConnect2Yunxin._$bind(this),ondisconnect:this.__onDisConnect._$bind(this),oncustomsysmsg:this.__onReceiveInstr._$bind(this),onofflinefiltermsgs:function(t){t.sort(function(t,e){return t.time>e.time});n._$forEach(t,function(t){this.__cbReceiveMessage(t,!0)},this)}._$bind(this)};this.__floatingLayerMark=n._$uniqueID();this.__splitmsgCache={};this.__heartbeatCycle=window.globalSetting.heartbeatCycle||8e3;this.__hearbeatSwitch=!1;this.__super(t)};h.__formatMsg=function(t){var e=t.idClient.split("#")[0];if(!e){console.error("msg idClient without #",t.idClient,t);return t}return n._$merge(t,{id:t.idClient,bid:t.from,sessionid:e})};h.__formatBroadcastMsg=function(t,e){var i={image:"file",audio:"file",video:"file",file:"file",evaluate:"evaluate",robot:"robot"};return n._$merge(e,{type:t.type,fromUser:1,content:i[t.type]?t.attach:t.attach.msg})};h.__onConnectError=function(){
var t={302:function(){this._$dispatchEvent("onusererror")}};return function(e){var i=t[e.code];_._$error("__onConnectError",e);if(n._$isFunction(i))i.call(this);else if(n._$isString(i))t[i].call(this)}}();h.__doCreateYXUser=function(t){var e=this.__getUserInfo()||{};var i={deviceid:this._$getDeviceID(),appKey:t,token:setting.uuid||""};if(setting.fid)n._$merge(i,{foreignid:setting.fid});if(!l._$isApple()&&e.authToken)n._$merge(i,{authtoken:e.authToken});this.__doSendRequest("user-create",{data:i,onload:this.__cbCreateYXUser._$bind(this,t)})};h.__cbCreateYXUser=function(t,e){if(e){this.__setYunxinUser(e);e.appKey=t;this.__setDataInCache("corp-appkey",t);this._$dispatchEvent("lifecyclecreated",e);e=n._$merge({},e,this.__nopt);window.nim=this.__nim=new NIM(e)}else window.setTimeout(this.__doCreateYXUser._$bind(this,t),g)};h.__onDisConnect=function(t){_._$error("__onDisConnect",t);this.__state=$.NULL;if("kicked"==t.code)this._$dispatchEvent("onkickout");else this._$dispatchEvent("ondisconnect")};h.__cbConnect2Yunxin=function(t){if(t.ip)this.__setYunxinUser({ip:t.ip});_._$info("__cbConnect2Yunxin",t);this.__state=$.CONNECTED;this._$sendKefuHeart();this._$dispatchEvent("lifecycleconnected")};h.__applyKefu=function(t,e){var i=t,s=this.__getDataInCache("yunxin-user"),a=this.__getUserInfo()||{};var o={staffid:setting.staffid||0,groupid:setting.groupid||0};shuntInfo=e.shuntInfo||o;var r=n._$query2object(location.search.substr(1));var _=r.t?decodeURIComponent(r.t):r.t;this.__sendCustomSysMsg({bid:i,content:{cmd:1,deviceid:a.fid||this._$getDeviceID(),exchange:i,foreignid:a.fid||setting.fid||"",msgToken:e.msgHistorySeq,fromTitle:a.title||_||"未知页面名称",fromPage:a.referrer||document.referrer,fromType:"WEB",fromIp:s.ip,fromSubType:[navigator.platform||"",navigator.userAgent||""].join(" - "),version:window.globalSetting.version,stafftype:e.stafftype||0,staffid:shuntInfo.staffid||0,groupid:shuntInfo.groupid||0,entryid:shuntInfo.entryid||0,level:a.level||0,qtype:setting.qtype||0,authToken:a.authToken||0,robotShuntSwitch:setting.robotShuntSwitch||0,robotId:setting.robotId||0,templateId:setting.templateId||0,landPage:a.landPage||"",landPageTitle:a.landPageTitle||"",landPageReferrer:a.landPageReferrer||"",sessionInfo:a.sessionInfo,transferRgType:e.transferRgType,forceChangeEntrance:e.forceChangeEntrance||0},done:function(t,i){if(!t);else window.setTimeout(this.__cbConnect2Yunxin._$bind(this,e),g)}._$bind(this)})};h.__saveShuntInfo=function(t,e){v[t]=e};h.__getShuntInfo=function(t){return v[t]};h.__cbReceiveMessage=function(){var t={image:"file",audio:"file",video:"file"};var e={60:!0,90:!0,95:!0,72:!0,200:!0,65:!0,203:!0,121:!0,59:!0};return function(i,s){i=this.__formatMsg(i);_._$info("__cbReceiveMessage",i);if("custom"!=i.type)this._$dispatchEvent("onmessage",n._$merge(i,{content:i[t[i.type]||i.type],reallyType:i.type}));else{i.isOffline=s;this.__onReceiveInstr(i,e)}}}();h.__getUserInfo=function(){var t=this.__getDataInCache("yunxin-user")||{};if(window.localStorage){var e="X-"+this._$getAppkey().toUpperCase()+"-YSF-INFO",i=localStorage.getItem(e);if(!i)return;var s=n._$query2object(i);if(s.uid)t.fid=s.uid;s.source=i;return s}};h.__getForeignInfo=function(t){var e={email:"email",real_name:"name",mobile_phone:"mobile",avator:"avator"},i=JSON.parse(t.profile||"null")||[];n._$forEach(i,function(i){var n=e[i.key];if(n){delete e[i.key];i.value=i.value||t[n]||setting[n]||""}});n._$loop(e,function(e,n){var s=t[e]||setting[e];if(null!=s)i.unshift({key:n,value:s})});return i};h.__onReceiveInstr=function(){var t={"-1000":function(t,e){this.__sendCustomSysMsg({content:t,done:function(t,e){if(t);}})},2:function(t,e){t=n._$merge({shop:{id:-1}},t);this.__hearbeatSwitch=!0;this._$dispatchEvent("onsession",t,e);this._$sendKefuSettingAction({sessionid:t.sessionid,bid:t.shop.id})},90:function(t,e){t=n._$merge({shop:{id:-1}},t);if(!t.shop.setting)t.shop.setting={};if(t.entries)this._$dispatchEvent("onshuntentries",t,e)},6:function(t,e){t.isSysClose=0==t["close_reason"]?!1:!0;t.isClientClose=7==t["close_reason"]?!1:!0;t=n._$merge({time:e.time},t);if(!window.setting.tradeTag)this.__hearbeatSwitch=!1;this._$dispatchEvent("onfinish",t,e);if(1==t.evaluate)this._$dispatchEvent("oneval",t,e)},15:function(t,e){if(200==t.code)this._$dispatchEvent("onqueuechange",t,e);else if(302==t.code||303==t.code){this._$dispatchEvent("onqueuefail",t,e);this._$doClearQueueCheck(t.bid)}},17:function(t,e){},60:function(t,e){var i=r._$parse(t);if(!e.msgIdClient&&e.idClient)e.msgIdClient=e.idClient;e.transferRgType=t.transferRgType;n._$forEach(i,function(t){this._$dispatchEvent("onmessage",n._$merge({},e,t))},this)},70:function(t,e){this._$dispatchEvent("onovertime",t,e)},95:function(t,e){this._$dispatchEvent("ontransferresult",t,e)},72:function(t,e){if(!t.attach.floating_layer_mark||t.attach.floating_layer_mark!=this.__floatingLayerMark){var e=this.__formatBroadcastMsg(t,e);this._$dispatchEvent("onbroadcastmsg",e)}},203:function(t,e){var i=this.__formatMsg(e);this._$dispatchEvent("onmessage",n._$merge(i,{content:t,type:"bot"}))},205:function(t,e){var i=t.template.id;if("order_list"==i||"card_layout"==i||"bubble_list"==i||"drawer_list"==i)this._$dispatchEvent("onmorebotlist",null,t,e);else if("pair"==i)this._$dispatchEvent("onmorebotdetail",null,t,e)},104:function(t){var e=this.__getDataInCache("yunxin-user");if(t.fromIp==e.ip)this._$dispatchEvent("oncansendfile",{timestamp:t.timestamp,result:t.result})},65:function(t,e){this._$dispatchEvent("onmessage",n._$merge(e,t,{type:"rich"}))},57:function(t,e){n._$merge(t,{bid:e.from});this._$dispatchEvent("onconfig",t)},23:function(t,e){var i={bid:e.from,type:"input_assciation_permisson",config:{"switch":t["switch"],sendingRate:t.sendingRate}};this._$dispatchEvent("onconfig",i)},25:function(t,e){t.bid=e.from;this._$dispatchEvent("oninputassociation",t)},50:function(t,e){this._$dispatchEvent("oneval",t,e)},55:function(t,e){this._$dispatchEvent("onevalsuccess",t,e)},1002:function(t,e){this._$dispatchEvent("onhidenaudio",t,e)},405:function(t,e){var i=t.split_index;var s=t.split_id;var a=t.split_content||"";var o=t.msg_id||"";if(!this.__splitmsgCache[s])this.__splitmsgCache[s]={};this.__splitmsgCache[s][i]=a;if(t.split_count==n._$objectSize(this.__splitmsgCache[s])){var r="";for(var _=0;_<t.split_count;_++){var d=this.__splitmsgCache[s][_]?this.__splitmsgCache[s][_]:"";r+=d}var l=e;l.content=c._$b642str(r);l.bid=e.from;l.idClient=o;l.id=o;this.__onReceiveInstr(l);delete this.__splitmsgCache[s]}},42:function(t,e){this._$dispatchEvent("onmsgtrashed",t,e)},87:function(t,e){this._$dispatchEvent("onleaveresult",t,e)},121:function(t,e){this._$dispatchEvent("onmessage",n._$merge(e,t,{type:"productinfo"}))},211:function(t,e){this._$dispatchEvent("onbotentry",t,e)},34:function(t,e){this._$dispatchEvent("onkefusetting",t,e)},11036:function(t,e){this._$dispatchEvent("ongetworksheetinfo",t,e)},11038:function(t,e){this._$dispatchEvent("onmessage",n._$merge(e,t,{type:"text",bid:e.from,fromUser:1,id:t.id}))},9:function(t){this._$dispatchEvent("onmessagereceipt",t)},28:function(t,e){t.sessionId=t.sessionid;t.msgIdClient=t.msgidClient;this._$dispatchEvent("onmsgwithdraw",t,e)},41:function(t){var e=t.message;if(0==t.result){this._$dispatchEvent("onusererror",{msg:e});this.__nim&&this.__nim.disconnect()}},108:function(t){this._$dispatchEvent("roundnumbeshowevaluation",t)},59:function(t){this._$dispatchEvent("onkfinput",t)}};t["17"]=t["6"];return function(e,i,s){_._$info("__onReceiveInstr",e);var a=e.content||"";try{a=JSON.parse(a);if(i&&!i[a.cmd]&&!s)return}catch(o){}var r=t[a.cmd||s];if(n._$isFunction(r))r.call(this,a,e)}}();h._$sendMessage=function(){var t=function(t){var e={c:t.content.file,m:"sendFile"};var i=t.content.file;if(n._$isString(i))if(0===i.indexOf("data:image"))e.r="dataURL";else{e.r="file";e.c={url:i,size:1,md5:i,ext:"png",w:1,h:1}}else if("INPUT"===i.tagName)e.r="fileInput";else if(i.md5)e.r="file";else e.r="blob";return e};var e=function(t){var e={productinfo:121,bot:202,rich:65};if(65==e[t.type])var i={m:"sendCustomMsg",r:"content",c:JSON.stringify({cmd:e[t.type],content:t.content})};else{n._$merge(t.content,{cmd:e[t.type]});var i={m:"sendCustomMsg",r:"content",c:JSON.stringify(t.content)}}return i};var i={image:t,audio:t,video:t,file:t,geo:{m:"sendGeo",r:"geo"},text:{m:"sendText",r:"text"},productinfo:e,bot:e,rich:e};return function(t,e){if(this._$canSendMessage()){var s=i[e.type];if(n._$isFunction(s))s=s.call(this,e);if(s){var a=n._$merge({cc:!0,filter:!0,scene:"p2p",to:t||m,done:function(t,e){if(t)console.error("send message error",t)}},e);_._$info("_$sendMessage",a);a[s.r]=s.c||a.content;if("content"!=s.r)delete a.content;return this.__nim[s.m](a)}else(e.done||f)({code:-2,message:"消息类型不支持"})}else(e.done||f)({code:-1,message:"长连接未建立"})}}();h.__sendCustomSysMsg=function(t){this.__nim.sendCustomSysMsg({to:t.bid||m,cc:!0,filter:!0,scene:"p2p",content:JSON.stringify(t.content),done:t.done})};h.__sendWxAudioMsg=function(t,e){this.__sendCustomSysMsg({bid:t,content:{cmd:1001,sessionid:e.sessionid,mediaId:e.mediaId,wxAppId:e.wxAppId},done:function(i,n){if(i)setTimeout(this.__sendWxAudioMsg._$bind(this,t,e),TIMEOUT)}._$bind(this)})};h.__setYunxinUser=function(t){var e=this.__getDataInCache("yunxin-user");if(!e)this.__setDataInCache("yunxin-user",t);else n._$merge(e,t)};h.__setRemoteStorage=function(e,i){var s={userInfo:function(){var s=t._$text2type(e.userInfo,"json");s=n._$object2query(s);var a="X-"+i.toUpperCase()+"-YSF-INFO";window.localStorage.setItem(a,s)},orderInfo:function(){var s=t._$text2type(e.orderInfo,"json");s=n._$object2query(s);var a="X-"+i.toUpperCase()+"-YSF-PRODUCT";window.localStorage.setItem(a,s)},analyticInfo:function(){var s=t._$text2type(e.analyticInfo,"json");s=n._$object2query(s);var a="X-"+i.toUpperCase()+"-YSF-WEBANALYTICS";window.localStorage.setItem(a,s)}};if(e&&window.localStorage)n._$loop(e,function(t,e){var i=s[e];if(i&&n._$isFunction(i))i.apply(this)}._$bind(this))};h._$getDeviceID=function(){return setting.fid||setting.device;
};h._$getAppkey=function(){return setting.appkey};h._$canSendMessage=function(){return this.__state===$.CONNECTED};h._$connect=function(t){if(t.appkey){if(this.__state===$.NULL){this.__state=$.INIT;this.__doCreateYXUser(t.appkey)}}else console.error("config data appkey not exist",t)};h._$applyRGKefuByBid=function(t,e){this.__applyKefu(t,{stafftype:1,msgHistorySeq:e.msgHistorySeq,transferRgType:e.transferRgType,forceChangeEntrance:e.forceChangeEntrance||0})};h._$applyNormalKefuByBid=function(t,e){this.__applyKefu(t,{stafftype:0,msgHistorySeq:e.msgHistorySeq})};h._$sendEvaluate=function(t,e){var i=1e3;this.__sendCustomSysMsg({bid:t,content:{cmd:51,fromType:"web",sessionid:e.sessionid,remarks:e.remarks,tagList:JSON.stringify(e.tagList),evaluation:e.evaluation,evaluation_resolved:e.evaluation_resolved},done:function(n,s){if(n)setTimeout(this._$sendEvaluate._$bind(this,t,e),i)}._$bind(this)})};h._$sendKefuSettingAction=function(t){var e=1e3;this.__sendCustomSysMsg({bid:t.bid,content:{cmd:33,sessionid:t.sessionid,templateId:setting.templateId,fromType:"web"},done:function(i,n){if(i)setTimeout(this._$sendKefuSettingAction._$bind(this,bid,t),e)}._$bind(this)})};h._$sendFinishSession=function(t,e){var i=1e3;this.__sendCustomSysMsg({bid:t,content:{cmd:26,sessionid:e.sessionId},done:function(n,s){if(n)setTimeout(this._$sendFinishSession._$bind(this,t,e),i)}._$bind(this)})};h._$getWorksheetInfo=function(t,e){var i=1e3;this.__sendCustomSysMsg({bid:t,content:{cmd:11035,templateId:e.worksheetId},done:function(n,s){if(n)setTimeout(this._$getWorksheetInfo._$bind(this,t,e),i)}._$bind(this)});this._$dispatchEvent("ongetworksheetinfo",e)};h._$showWorksheet=function(t){this._$dispatchEvent("ongetworksheetinfo",t)};h._$submitKefuWorksheetForm=function(t,e){this.__sendCustomSysMsg({bid:t,content:{cmd:11037,sessionId:e.sessionId,params:e.params,id:e.id,forms:e.customFields,template:{id:e.id,forms:e.customFields}},done:function(i,n){if(i)setTimeout(this._$submitKefuWorksheetForm._$bind(this,t,e),TIMEOUT)}._$bind(this)})};h._$sendLeaveMsg=function(t,e){var i=1e3;var s=[];if(e.customFields)n._$forEach(e.customFields,function(t){if(t.fieldId!=-1)s.push(t)});this.__sendCustomSysMsg({bid:t,content:{cmd:83,deviceid:this._$getDeviceID(),bid:t,message:e.message||"",mobile:e.mobile||"",email:e.email||"",customFields:s},done:function(n,s){if(n)setTimeout(this._$sendLeaveMsg._$bind(this,t,e),i)}._$bind(this)})};h._$sendKefuHeart=function(){var t=this;var e=function(){if(t.__hearbeatSwitch)t.__sendCustomSysMsg({content:{cmd:-1e3,deviceid:t._$getDeviceID()}});if(t.__timeout)clearTimeout(t.__timeout);t.__timeout=setTimeout(function(){e()},t.__heartbeatCycle)};e()};h._$doCheckQueue=function(t){var e=this._$getQueueTimer(t),i=1e4;if(t){if(e)clearInterval(e);e=setInterval(function(){this.__sendCustomSysMsg({bid:t,content:{cmd:16,deviceid:this._$getDeviceID()},done:function(t,e){}})}._$bind(this),i);this._$setQueueTimer(t,e)}};h._$doClearQueueCheck=function(t){var e=this._$getQueueTimer(t);clearInterval(e)};h._$getQueueTimer=function(t){return b[t]};h._$setQueueTimer=function(t,e){b[t]=e};h._$clearUnreadMsg=function(t,e){var i=this,n=1e3;var s=(new Date).getTime();var a="YSF-CLEARTIME-"+t;window.localStorage.setItem(a,s);this.__sendCustomSysMsg({bid:t,content:{cmd:500,sessionid:e},done:function(t,e){if(t)_._$error("_$clearUnreadMessage",t)}._$bind(this)})};h._$reportUserInfo=function(t){var e=this.__getUserInfo();if(e)if(this.__last!=e.source){this.__last=e.source;var i=this.__getDataInCache("yunxin-user");this.__sendCustomSysMsg({bid:t,content:{cmd:52,foreignid:e.uid,userinfo:JSON.stringify(this.__getForeignInfo(e)),authToken:e.authToken||0},done:function(t,e){}})}};h._$syncRobotEx=function(t,e){var i={matched_question:"question",id:"questionid"};var s=function(t){var e={};for(var n in t)if(i[n])e[i[n]]=t[n];else e[n]=t[n];return e};if(this._$canSendMessage()){var a=this.__getDataInCache("yunxin-user"),o=t.msgIdClient,r=n._$merge({cmd:63},s(t),{msgIdClient:o});this.__sendCustomSysMsg({bid:e,content:r,done:function(i,n){if(!i);else setTimeout(this._$syncRobotEx._$bind(this,t,e),1e4)}._$bind(this)})}};h._$sendSelectShunt=function(t,e){n._$merge(t,{stafftype:1});this.__applyKefu(e,t)};h._$checkCanSendFile=function(t){var e=this.__getDataInCache("yunxin-user");this.__sendCustomSysMsg({content:{cmd:103,fromIp:e.ip,timestamp:t.timestamp},done:function(t){if(!t);else console.log(t)}._$bind(this)})};h._$sendInputContent=function(t){this.__sendCustomSysMsg({bid:t.bid,content:{cmd:58,sessionid:t.sessionId,msgType:"text",content:t.content,editTime:+new Date,sendingRate:t.sendingRate},done:function(t){if(!t);else _._$error("sendInputContent",n._$merge({cmd:58},t))}._$bind(this)})};h._$assoSendInputContent=function(t){this.__sendCustomSysMsg({bid:t.bid,content:{cmd:24,sessionid:t.sessionId,content:t.content,msgType:"text"},done:function(t){if(!t);else _._$error("sendInputContent",n._$merge({cmd:58},t))}._$bind(this)})};h._$sendThirdOrder=function(t){if("qiyu_template_goods"==t.content.template.id)this._$dispatchEvent("onmessage",t);else if("qiyu_template_text"==t.content.template.id)this._$dispatchEvent("onmessage",{sessionid:t.sessionid,content:t.content.template.label,type:"text"});this.__sendCustomSysMsg({bid:t.bid,content:{cmd:202,params:t.params,target:t.target,template:t.content.template},done:function(t){if(!t);else _._$error("sendThirdOrder",n._$merge({cmd:202},t))}._$bind(this)})};h._$getMoreThirdOrder=function(t){this.__sendCustomSysMsg({bid:t.bid,content:{cmd:204,target:t.template.action.target,params:t.template.action.params,content:t.template},done:function(t){if(!t);else{this._$dispatchEvent("onmorethirdorder",t);_._$error("getMoreThirdOrder",n._$merge({cmd:204},t))}}._$bind(this)})};h._$getMoreBotList=function(t,e){this.__sendCustomSysMsg({bid:t,content:{cmd:204,templateId:e.template.id,target:e.template.action.target,params:e.template.action.params},done:function(t){if(!t);else{this._$dispatchEvent("onmorebotlist",t,e);_._$error("getMoreBotList",n._$merge({cmd:204},t))}}._$bind(this)})};h._$getMoreBotDetail=function(t,e){this.__sendCustomSysMsg({bid:t,content:{cmd:204,target:e.target,params:e.params},done:function(t){if(!t);else{this._$dispatchEvent("onmorebotdetail",t,{template:{id:"pair"}});_._$error("getMoreBotDetail",n._$merge({cmd:204},t))}}._$bind(this)})};h._$evalRobotAnswer=function(t,e){this.__sendCustomSysMsg({bid:t,content:{cmd:64,msgidClient:e.id,evaluation:e.evaluation,floating_layer_mark:this.__floatingLayerMark},done:function(t){if(t);}._$bind(this)})};h._$evaluationContent=function(t,e){this.__sendCustomSysMsg({bid:t,content:{cmd:66,msgidClient:e.id,evaluation_content:e.evalcontent,floating_layer_mark:this.__floatingLayerMark},done:function(t){if(t);if(""!==e.evalcontent)this._$dispatchEvent("onrobotevalcontentDone",e.id)}._$bind(this)})};h._$quitQueue=function(t,e){this.__sendCustomSysMsg({bid:t,content:{cmd:26,sessionid:e},done:function(t,e){}})};var y=p._$allocate();_._$batch(y,["__init","__applyKefu","__sender3rdProductsInfo","_$checkCanSendFile","_$syncRobotEx","_$sendSelectShunt","_$reportUserInfo","_$clearUnreadMsg","_$doCheckQueue","_$sendLeaveMsg","_$sendEvaluate","_$sendInputContent"]);_._$batch(y,["_$getDeviceID","_$getAppkey","__getCurrentShopID","__getUserInfo","__getForeignInfo","__getProductInfo"],"after");return y},"5fb495f256a5dcde2a92e5fe919a6422","e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","d8694785278ea23e9444192ffae00916","dbf5521d3d1c3fc354b111366f669416","948cfd3d7899a2b3fc0e88dc2e0d1a90","4d3be81e509943f25257cbc97abc448d","c016c209845c99608f6b8fbdad4ee39b","0a031608798084dd303ad76241dcc09c","f5da7bdddddad5f42b7c73b364e10a1f","35df4ef4567b6cd0275a1b849d2bea8c");I$("aa835e6c54cfdee711ae8d0d1296fa57",function(t,e,i,n,s,a,o,r,_,d){var c={};var l={};d=t._$klass();_=d._$extend(n._$$EventTarget);_.SHOPID=-1;_.mainShopId=-1;_.isLayerOpen=0;_.__init=function(t){this.__super(t)};_._$isExistMessage=function(){var t="id";return function(e){if(!e[t])return!1;if(c[e[t]])return!0;else{c[e[t]]=!0;return!1}}}();_._$isExistSession=function(t){var t=ysfCache.session._$getItemInCache(t.id);if(t)return!0;else return!1};_._$getCurrentSessionId=function(){return this._$getSessionId(this.SHOPID)};_._$getSessionId=function(t){var e=this._$getSessionByBid(t);if(e&&e.id)return e.id;else return-1};_._$getRobotSessionId=function(t){var e=this._$getSessionByBid(t);if(e&&e.robotSessionId)return e.robotSessionId;else return-1};_._$getSessionById=function(t){try{var e=window.ysfCache.session,i=e._$getItemInCache(t);return i}catch(n){console.error("get session when process eventbus",n)}return null};_._$getSessionByBid=function(t){var e=window.ysfCache.session._$getListInCache("ses-online"),n=null;i._$forEach(e,function(e){if(e.shop){if(e.shop.id==t)n=e}else console.error("why session without shop",e)});return n};_._$getMsgListByBid=function(t){return window.ysfCache.message._$getListInCache("msg-session-"+t)};_._$getMsgById=function(t){return window.ysfCache.message._$getItemInCache(t)};_._$getShopByBid=function(t){var e=this._$getSessionByBid(t);if(e)return e.shop};_._$getState=function(t){var e=this._$getSessionByBid(t),i=ysfCache.message._$getListInCache("msg-session-"+t);return{session:e,msgList:i}};_._$getUnreadTotal=function(){var t=ysfCache.session._$getListInCache("ses-online");var e=0;i._$forEach(t,function(t){if(t.unread)e+=t.unread});return e};_._$getRobotItem=function(t){return ysfCache.message.__getDataInCacheWithDefault("robot-qa-list",{})[t]};_._$getReceptInfo=function(t,e){var i="",n=t.welcome||"",s=t.groupname||"",a=t.staffname||"";stafftype=t.stafftype;var i=n;if(1==stafftype&&a)i=n+" "+a+"为您服务";return i};_._$getFinishInfo=function(){var t={"-1":"会话已断开",0:"客服已关闭会话",1:"由于您长时间不在线，会话已结束",2:"本次会话已超时结束",4:"客服离开，会话已结束",7:"会话已结束"};return function(e){var i=t[e.close_reason]||"会话已断开";if(0==e.close_reason||2==e.close_reason)i=e.richmessage||e.message||t[e.close_reason];var n=this._$getSessionById(e.sessionid);
if(n&&n.kefu.isRobot&&1==e.close_reason)i="本次会话已超时结束";return i}}();_._$getConfig=function(t){if(t)return l[t];else return l};_._$setConfig=function(t,e){if(t&&e)l[t]=e};_._$isYXConnected=function(){return a._$canSendMessage()};_._$getAppkey=function(){return a._$getAppkey()};_._$getDeviceId=function(){return a._$getDeviceID()};_._$canSendMessage=function(t){if(!this._$isYXConnected())return!1;var e=this._$getSessionByBid(t||this.SHOPID);if(!e)return!1;var i=e.sessionStatus.status;if(200==i||203==i||201==i)return!0;else return!1};_._$cacheEditorContent=function(t,e){var i=this._$getShopByBid(t);if(i)i.editorContent=e};_._$cacheReportInput=function(t,e){var i=this._$getShopByBid(t);if(i)i.lastReportInput=e};_._$getSeqOfHistoryLoad=function(){var t=window.setting.appkey.toUpperCase(),e="YSF-"+t+"-HISTORY-SEQ",n=localStorage.getItem(e);try{n=JSON.parse(n)}catch(a){n=null}if(!n||window.setting.fid&&n.relatedFid&&n.relatedFid!=window.setting.fid){n={value:s._$md52hex(i._$uniqueID()+"-"+ +new Date),relatedFid:window.setting.fid};localStorage.setItem(e,JSON.stringify(n))}else if(n&&!n.relatedFid&&window.setting.fid){n.relatedFid=window.setting.fid;localStorage.setItem(e,JSON.stringify(n))}return n.value};_._$isMsgListLoaded=function(t){return window.ysfCache.message._$isLoaded("msg-session-"+t)};_._$isHistoryMsgLoaded=function(t){var e=this._$getMsgListByBid(t);if(e.historyLoaded)return!0;else return!1};return d._$allocate()},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","e32a3e597220aa11cee4e5c41da1a3ff","d8694785278ea23e9444192ffae00916","4e09e3c278408cd8001c7779e34c93e9","35df4ef4567b6cd0275a1b849d2bea8c");I$("d71f74fd4d6ef418ec6c4fba5856346b",'<textarea name="ntp" id="#<bfBody>">\n  <div class="m-bottomConfirm">\n      <div class="u-mask"></div>\n      <div class="u-content">\n        <div class="u-title j-flag"></div>\n        <div class="u-footer">\n          <div class="u-cancel j-flag">取消</div>\n          <div class="u-confirm j-flag">确认</div>\n        </div>\n      </div>\n  </div>\n</textarea>');I$("615935a06ea2baf55cca2025d87df4c1",function(t,e,i,n,s,a,o,r,_){r._$$Modal=t._$klass();_=r._$$Modal._$extend(s._$$Abstract);_.__init=function(t){this.__btnopt={confirmText:"确定",cancelText:"取消"};this.__super(t)};_.__reset=function(t){this.__super(t);this.__doInitDomEvent([[this.__confirm,"click",this.__onConfirm._$bind(this)],[this.__cancel,"click",this.__onCancel._$bind(this)]]);this.__title.innerHTML=t.title||"标题";this.__cancel.innerHTML=t.cancelText||"取消";this.__confirm.innerHTML=t.confirmText||"确认"};_.__destroy=function(){this._$dispatchEvent("onbeforedestroy");this.__super()};_.__initXGui=function(){var t=a._$parseUITemplate(o);return function(){this.__seed_html=t.bfBody}}();_.__initNode=function(){this.__super();var t=e._$getByClassName(this.__body,"j-flag");this.__title=t[0];this.__cancel=t[1];this.__confirm=t[2];var i=this;setTimeout(function(){var t=e._$getByClassName(i.__body,"u-mask")[0];var n=e._$getByClassName(i.__body,"u-content")[0];t.classList.add("z-active");n.classList.add("z-active")},100)};_.__onConfirm=function(t){var e={};this._$dispatchEvent("onConfirm",e);this.__recycle()};_.__onCancel=function(t){this._$dispatchEvent("onCancel");this.__recycle()};_.__recycle=function(){var t=e._$getByClassName(this.__body,"u-mask")[0];var i=e._$getByClassName(this.__body,"u-content")[0];t.classList.remove("z-active");i.classList.remove("z-active");setTimeout(function(){d._$recycle()},300)};var d,c={parent:document.querySelector("#ysf-client"),onbeforedestroy:function(){d=null}};r._$confirm=function(t){r._$hide();d=r._$$Modal._$allocate(n._$merge({clazz:""},c,t))};r._$hide=function(){if(d)d._$recycle()}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","d71f74fd4d6ef418ec6c4fba5856346b");I$("d67add781b37b82c1816b8c159701e56",function(t,e,n,s,a,o,r,_,d,c){var l=1e3,f=5e3;d._$$EventBus=t._$klass();c=d._$$EventBus._$extend(s._$$EventTarget);c.__init=function(){var t=!1;return function(e){if(!t){t=!0;n._$loop({onmessage:this.__onMessage._$bind(this),onbroadcastmsg:this.__onBroadcastMsg._$bind(this),onmorebotlist:this.__onMoreBotList._$bind(this),onmorebotdetail:this.__onMoreBotDetail._$bind(this),onmsgtrashed:this.__onMsgTrashed._$bind(this),onmessagereceipt:this.__onMessageReceipt._$bind(this),onmsgwithdraw:this.__onMsgWithdraw._$bind(this),onsession:this.__onsession._$bind(this),oneval:this.__onEval._$bind(this),onevalsuccess:this.__onEvalSuccess._$bind(this),onovertime:this.__onOvertime._$bind(this),onfinish:this.__onFinish._$bind(this),onqueuechange:this.__onQueueChange._$bind(this),onqueuefail:this.__onQueueFail._$bind(this),ontransferresult:this.__onTransferResult._$bind(this),onshuntentries:this.__onShuntEntries._$bind(this),onleaveresult:this.__onLeaveResult._$bind(this),onbotentry:this.__onBotEntry._$bind(this),onkefusetting:this.__onKefuSetting._$bind(this),onusererror:this.__onUserError._$bind(this),onkickout:this.__onKickout._$bind(this),lifecyclecreated:this.__cbLifeCycleCreated._$bind(this),lifecycleconnected:this.__cbLifeCycleConnected._$bind(this),onconfig:this.__onConfig._$bind(this),oncansendfile:this.__onCanSendFile._$bind(this),oninputassociation:this.__onInputAssociation._$bind(this),roundnumbeshowevaluation:this.__roundNumbeShowEvaluation._$bind(this),onkfinput:this.__onkfInput._$bind(this),onhidenaudio:this.__onHidenAudio._$bind(this),ongetworksheetinfo:this.__onGetWorkSheetInfo._$bind(this)},function(t,e){r._$addEvent(e,t)})}this.__super(e)}}();c.__onsession=function(t,e){var i=e.from,n=o._$getSessionByBid(i),s=o._$getSessionById(t.sessionid);if(s&&s.realStaffid==-1)s=null;if(1==t.stafftype)t.message="";this._$dispatchEvent("onsession",t,n,s);this.__applyTimer&&clearTimeout(this.__applyTimer)};c.__onEval=function(t,e){this.__dispatch(e.from,"oneval",t)};c.__onkfInput=function(t,e){this.__dispatch(e,"onkfinput",t)};c.__onOvertime=function(t,e){this.__dispatch(e.from,"onovertime",t)};c.__onFinish=function(t,e){var i=e.from,n=o._$getSessionId(i);this.__clearPrdStorage(n,i);if(t.sessionid==n)this.__dispatch(i,"onfinish",t)};c.__onMessage=function(t){var e=o._$getSessionByBid(t.bid);if(e)if(!o._$isExistMessage(t)){t=n._$merge(t,{fromUser:t.fromUser||0});if(!t.fromUser&&o.SHOPID==e.shop.id)this.__readStateToServer(e,t);this._$dispatchEvent("onmessage",t)}};c.__readStateToServer=function(t,e){if(!document.hidden)if(_._$isFrameModule()){if(o.isLayerOpen)this._$clearUnreadMsg(t.shop.id);else if(_._$isMobilePlatform()&&window==top)this._$clearUnreadMsg(t.shop.id)}else this._$clearUnreadMsg(t.shop.id)};c._$onshowtip=function(t){this._$dispatchEvent("onshowtip",t)};c.__onBroadcastMsg=function(){var t={text:function(t){this.__onMessage(t)},evaluate:function(t){var e=o._$getSessionByBid(t.bid);if(e&&e.sessionStatus.hasEvaluation)var i={sessionid:t.sessionid,evaluation:t.content.evaluation,name:t.content.evaluationName,messageThanks:t.content.messageThanks}},question:function(t){n._$merge(t,{id:t.msgidclient,type:"text"});this.__onMessage(t)},robot:function(t){var e=o._$getSessionById(t.content.sessionid);if(e&&e.shop.id){var i={bid:e.shop.id,id:t.content.msgidClient,evaluation:t.content.evaluation};if(t.evaluation_content)i.evalcontent=t.evaluation_content;this._$dispatchEvent("onevalRobotAnswer",i)}}};t["image"]=t["file"]=t["text"];return function(e){var i=t[e.type];if(n._$isFunction(i))i.call(this,e)}}();c.__onMoreBotList=function(t,e,i){this.__dispatch(i.from,"onmorebotlist",{error:t,body:e})};c.__onMoreBotDetail=function(t,e,i){this.__dispatch(i.from,"onmorebotdetail",{error:t,body:e})};c.__onTransferResult=function(t,e){this.__dispatch(e.from,"ontransferresult",t)};c.__onUserError=function(t,e){this.__applyTimer&&clearTimeout(this.__applyTimer);this._$dispatchEvent("onusererror",t,e)};c.__onKickout=function(t){this._$dispatchEvent("onkickout",t)};c.__onQueueChange=function(t,e){this.__dispatch(e.from,"onqueuechange",t)};c.__onQueueFail=function(t,e){this.__dispatch(e.from,"onqueuefail",t)};c.__onShuntEntries=function(t,e){this.__dispatch(e.from,"onshuntentries",t);this.__applyTimer&&clearTimeout(this.__applyTimer)};c.__cbLifeCycleCreated=function(t){o.mainShopId=t.bid;this.__timerTask=setInterval(function(){this.__setLayerOpenAck(window.setting.appkey)}._$bind(this),2e3);this._$dispatchEvent("lifecyclecreated")};c.__cbLifeCycleConnected=function(){this._$applyKefu(o.SHOPID);setInterval(function(){this._$reportUserInfo(o.SHOPID)}._$bind(this),l)};c.__onConfig=function(t){if(t.bid)this._$dispatchEvent("onshopconfig",t);else{o._$setConfig(t.type,t.config);this._$dispatchEvent("onconfig",t)}};c.__onInputAssociation=function(t){if(t.bid)this._$dispatchEvent("oninputassociation",t)};c.__onCanSendFile=function(t){this._$dispatchEvent("oncansendfile",t)};c.__onMsgTrashed=function(t,e){var i=n._$merge({bid:e.from},t);this._$dispatchEvent("onmsgtrashed",i)};c.__onMessageReceipt=function(t){this._$dispatchEvent("onmessagereceipt",t)};c.__onUpdateReadStateFromqueue=function(t){this._$dispatchEvent("onupdateReadStateFromQueue",t)};c.__onLeaveResult=function(t,e){if(t.auditResult)var i={trashWords:t.trashWords};this._$dispatchEvent("onleaveresult",{bid:e.from,error:i})};c.__onBotEntry=function(t,e){this.__dispatch(e.from,"onbotentry",t)};c.__onKefuSetting=function(t,e){this.__dispatch(e.from,"onkefusetting",t)},c.__onMsgWithdraw=function(t,e){this.__dispatch(e.from,"onmsgwithdraw",t)};c.__roundNumbeShowEvaluation=function(t){this._$dispatchEvent("roundnumbeshowevaluation",t)};c._$goEvaluate=function(t){this._$dispatchEvent("goEvaluate",t)};c.__dispatch=function(t,e,i){n._$merge(i,{bid:t});var s=o._$getState(t);this._$dispatchEvent(e,i,s)};c.__setLayerOpenAck=function(t){if(window.localStorage){var e="YSF-"+t+"-LAYER-ACK";if(!document.hidden&&1==o.isLayerOpen)window.localStorage.setItem(e,+new Date);
}};c.__getPrdKey=function(t){var e=r.__getDataInCache("yunxin-user").appKey.toUpperCase(),i="X-"+e+"-"+t+"-YSF-PRODUCT",n="X-"+e+"-YSF-PRODUCT";if(t==-1)return n;else return i};c.__getProductInfo=function(){var t=o._$getSessionByBid(o.SHOPID);if(t)if(window.localStorage){var e=this.__getPrdKey(t.shop.id),i=localStorage.getItem(e);var s="YSF-PRODUCT-"+t.id+"-last",a=localStorage.getItem(s);if(i){var r=n._$query2object(i);return r}}};c.__clearPrdStorage=function(t,e){var i=this.__getPrdKey(e);if(t!=-1)window.localStorage.removeItem(i);var n=/^YSF-PRODUCT-(\d+)-last$/;for(var s in window.localStorage){var a=s.match(n);if(a&&a[1]<=t)window.localStorage.removeItem(s)}};c._$reportUserInfo=function(t){r._$reportUserInfo(t||o.SHOPID)};c._$getUserInfo=function(t){var e=r.__getUserInfo();return e};c._$getAvatarUrl=function(){var t=this._$getUserInfo();if(t&&t.profile){var e=JSON.parse(t.profile);for(i=0;i<e.length;i++)if("avatar"==e[i].key)return e[i].value;return t&&t.avatar}};c._$doCheckQueue=function(t){r._$doCheckQueue(t)};c._$doClearQueueCheck=function(t){r._$doClearQueueCheck(t)};c._$sendMessage=function(t,e){var i=o._$getSessionByBid(t);var s=50;if(i){if(e.content){if("image"===e.type)if(!e.content.file){this._$dispatchEvent("invalidimage",t);return}if("video"===e.type){if(!e.content.file){this._$dispatchEvent("invalidVideo",t);return}if(e.content.file.size>s*Math.pow(1024,2)){this._$dispatchEvent("invalidVideo",t,s);return}}var a;if(!e.id){a=n._$merge({state:1,id:"auto-"+n._$uniqueID(),time:+new Date,bid:t,fromUser:1,read:0},e);this._$dispatchEvent("onmessage",a)}else{a=n._$merge({},e);this._$dispatchEvent("onresendmessage",{bid:t,id:a.id})}e.beginupload=function(e){this._$dispatchEvent("onmsgbeginupload",{id:a.id,bid:t,upload:e})}._$bind(this),e.uploadprogress=function(e){this._$dispatchEvent("onmsguploadprogress",{id:a.id,bid:t,progress:e})}._$bind(this);e.uploaddone=function(e,i){this._$dispatchEvent("onmsguploaddone",{id:a.id,bid:t,error:e,file:i})}._$bind(this);if(!e.done)e.done=function(e,i){if(i)n._$merge(i,{id:i.idClient});if(e||!o._$isExistMessage(i))this._$dispatchEvent("onmsgdone",{id:a.id,bid:t,error:e,res:i})}._$bind(this);r._$sendMessage(t,e)}}else console.error("session not exist when sendmessage",t,e)};c._$sendWxAudioMessage=function(t,e){var i;var s=this;var a=o._$getSessionByBid(t);if(!e.id){i=n._$merge({state:1,id:"auto-"+n._$uniqueID(),time:+new Date,bid:t,fromUser:1,read:0},e);this._$dispatchEvent("onmessage",i)}else s._$dispatchEvent("onwxaudiouploading",{id:e.id,bid:t,error:null});wx.uploadVoice({localId:e.content.localId,isShowProgressTips:"ios"==_._$isMobilePlatformType()?0:1,success:function(n){var o=n.serverId;s._$dispatchEvent("onwxaudiouploaddone",{id:i.id,bid:t,error:null});r.__sendWxAudioMsg(t,{mediaId:o,sessionid:a.sessionid,wxAppId:e.content.wxAppId})},fail:function(e){s._$dispatchEvent("onwxaudiouploaddone",{id:i.id,bid:t,error:e.errMsg})}})};c._$reSendMessage=function(t,e){var i="msg-session-"+t;var s=o._$getMsgById(e);if(s){var a={id:s.id,type:s.type,content:s.content,reallyType:s.reallyType};if("video"==s.reallyType)a.type="video";if("audio"!=s.type||!s.content.localId){if(s.idClient)n._$merge(a,{resend:!0,idClient:s.idClient});this._$sendMessage(t,a)}else this._$sendWxAudioMessage(t,a)}};c._$closeLeave=function(t){this._$dispatchEvent("onleaveclose",{bid:o.SHOPID,customFields:t})};c._$showLeaveMsg=function(t){this._$dispatchEvent("onleavemsg",{bid:o.SHOPID,msg:t})};c._$sendRobotMessage=function(t,e){if(e){var i=o._$getSessionByBid(t),s=n._$uniqueID();r._$syncRobotEx({original_question:e.origin,matched_question:e.question,answer:e.answer,id:e.randomId?"":e.id,msgIdClient:s,questionMsgidClient:e.questionMsgidClient},i.shop.id);var a;if(e.question)a={id:s,type:"text",sessionid:i.id,bid:i.shop.id,content:e.question,fromUser:1,time:+new Date};else if(e.answer)a={id:s,type:"text",sessionid:i.id,bid:i.shop.id,content:e.answer,fromUser:1,time:+new Date};this._$dispatchEvent("onmessage",a)}};c._$sendEvaluate=function(t,e){var i=o._$getSessionById(e.sessionid);i.evaluateResultModify=e;r._$sendEvaluate(t,e)};c._$sendFinishSession=function(t,e){r._$sendFinishSession(t,e)};c._$getWorksheetInfo=function(t,e){r._$getWorksheetInfo(t,e)};c._$showWorksheet=function(t){r._$showWorksheet(t)};c._$submitKefuWorksheetForm=function(t,e){r._$submitKefuWorksheetForm(t,e)};c.__onEvalSuccess=function(t,e){if(414==t.body)this._$onshowtip("不能评价");else if(412==t.body)this._$onshowtip("评价已超时，无法进行评价");else{var i=o._$getSessionById(t.sessionid);i.evaluateResult=i.evaluateResultModify;i.evaluateResult.messageThanks=t.message;this._$dispatchEvent("onevaluate",{bid:o.SHOPID,param:i.evaluateResult})}};c.__onHidenAudio=function(t){this._$dispatchEvent("onhidenaudio",{bid:o.SHOPID,param:t})};c._$sendLeaveMsg=function(t,e){r._$sendLeaveMsg(t,e);this._$dispatchEvent("onsendleavemsg",{bid:t,param:e})};c.__onGetWorkSheetInfo=function(t){this._$dispatchEvent("ongetworksheetinfo",t)};c._$updateMessage=function(t,e){this._$dispatchEvent("onupdatemessage",{bid:t,msg:e})};c._$delMessageById=function(t,e){this._$dispatchEvent("ondelmessage",{bid:t,messageId:e})};c._$updateLastMessage=function(t){this._$dispatchEvent("onupdatelastmessage",{msg:t})};c._$clearUnreadMsg=function(t){var e=o._$getSessionByBid(t);if(e){r._$clearUnreadMsg(t,e.id);this._$dispatchEvent("clearunreadmsg",t)}else console.warn("why session not exist when process clearUnreadMsg",t)};c._$applyRGKefu=function(t,e){var i=o._$getSessionByBid(t);if(i&&i.kefu.isRobot||e.forceChangeEntrance){var s=o._$getSeqOfHistoryLoad();r._$applyRGKefuByBid(t,n._$merge({msgHistorySeq:s},e))}};c._$applyKefu=function(t){var e=o._$getSeqOfHistoryLoad();r._$applyNormalKefuByBid(t,{msgHistorySeq:e});this.__applyTimer=setTimeout(function(){if(t==o.SHOPID)this._$dispatchEvent("onapplytimeout")}._$bind(this),f)};c._$sendSelectShunt=function(t,e,i){var n=o._$getSeqOfHistoryLoad();r._$sendSelectShunt({shuntInfo:t,msgHistorySeq:n},e);this._$dispatchEvent("onsendshunt",{bid:e,mid:i})};c._$sendPrdMsg=function(t){var e=o._$getSessionByBid(t);if(e)if(window.localStorage){var i=this.__getPrdKey(t),s=localStorage.getItem(i);var a="YSF-PRODUCT-"+e.id+"-last",r=localStorage.getItem(a);if(s){var _=n._$query2object(s);if(_.pageId==setting.pageId)if("1"==_.sendByUser){var d=this.__getPreproductMsg(t,e.id);if(d)return;var c={id:n._$uniqueID(),bid:t,sessionid:e.id,type:"pre-product",content:_,fromUser:1,time:+new Date};this._$dispatchEvent("onmessage",c)}else{if(s==r)return;this._$sendPrdMsgToServer(_)}}}};c.__getPreproductMsg=function(t,e){var i=o._$getMsgListByBid(t);if(!i||!i.length)return null;for(var n=i.length-1;n>=0;n--){var s=i[n];if(s.sessionid!=e)break;if("pre-product"==s.type)return s}return null};c._$sendPrdMsgToServer=function(t){var e=o.SHOPID,i=o._$getCurrentSessionId(),s="YSF-PRODUCT-"+i+"-last";var a={id:n._$uniqueID(),type:"productinfo",content:_._$copy(t)};a.done=function(o,r){if(o);else{window.localStorage.setItem(s,n._$object2string(t,"&",!0));if(1==t.show){var _={id:a.id,bid:e,sessionid:i,type:"productinfo",content:t,time:+new Date,fromUser:1};if(0==t.auto)a.read=0;this._$dispatchEvent("onmessage",_)}}}._$bind(this);r._$sendMessage(e,a)};c._$sendInputContent=function(t){r._$sendInputContent(t)};c._$assoSendInputContent=function(t){r._$assoSendInputContent(t)};c._$getMoreBotList=function(t){r._$getMoreBotList(o.SHOPID,t)};c._$getMoreBotDetail=function(t){r._$getMoreBotDetail(o.SHOPID,t)};c._$submitBotForm=function(t,e,i){this._$sendMessage(t,e);this._$dispatchEvent("onsubmitBotForm",{bid:t,originMsg:i})};c._$submitWorksheetForm=function(t,e,i){this._$sendMessage(t,e)};c._$abortFileTrans=function(t,e,i){this._$dispatchEvent("onabortFileTrans",{bid:t,mid:e,byUser:i})};c._$evalRobotAnswer=function(t,e){this._$dispatchEvent("onevalRobotAnswer",{bid:t,id:e.id,evaluation:e.evaluation,needFocus:e.needFocus});r._$evalRobotAnswer(t,e)};c._$evaluationContent=function(t,e){this._$dispatchEvent("onevaluationcontent",{bid:t,id:e.id,evalcontent:e.evalcontent,needFocus:e.needFocus});r._$evaluationContent(t,e)};c._$getHistoryMsg=function(t){this._$dispatchEvent("ongetHistoryMsg",{bid:t})};c._$startQueue=function(t){this._$dispatchEvent("onqueuestart",t)};c._$quitQueue=function(t,e){this._$doClearQueueCheck(t);var e=o._$getSessionByBid(t);r._$quitQueue(t,e.id);this._$dispatchEvent("onquitqueue",{bid:t,session:e})};c._$quitQueueStatus=function(t){this._$dispatchEvent("onquitqueuestatus",{bid:t.shop.id,session:t})};c._$showMoreBotBubbleNode=function(t,e){this._$dispatchEvent("onshowmorebotbubblenode",{bid:t,msgId:e})};d._$do=function(t){if(n._$isFunction(t)){var e=d._$$EventBus._$allocate(),i=t.call(null,e);e._$recycle();return i}};return d._$$EventBus._$allocate()},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","e32a3e597220aa11cee4e5c41da1a3ff","5f75dc6bf6467f0a29ae4a457d2e9c8c","aa835e6c54cfdee711ae8d0d1296fa57","4e09e3c278408cd8001c7779e34c93e9","35df4ef4567b6cd0275a1b849d2bea8c");I$("e4a45dc3cf399bf73004ce111fd4b206",function(t,e,i,n,s,a,o,r,_,d,c,l,f){window.ysfCache=window.ysfCache||{};cachedShopConfig={};l._$$Cache=t._$klass();f=l._$$Cache._$extend(c._$$Cache);c._$config({"ses-online":{method:"POST",url:"/webapi/user/platform/session.action",format:function(t,e){var i=t.result;this.__parseSessionList(i);t.result={list:i,total:i.length}}}});f.__init=function(){var t=!1;return function(e){if(!t){t=!0;i._$loop({onsession:this.__onSession._$bind(this),onmessage:this.__cbReceiveMessage._$bind(this),onshuntentries:this.__onShuntEntries._$bind(this),onovertime:this.__onOverTime._$bind(this),onfinish:this.__onFinish._$bind(this),ontransferresult:this.__cbTransferResult._$bind(this),oneval:this.__onEval._$bind(this),onevaluate:this.__onEvaluate._$bind(this),onhidenaudio:this.__onHidenAudio._$bind(this),onqueuechange:this.__onQueueChange._$bind(this),onqueuefail:this.__onQueueFail._$bind(this),onquitqueue:this.__onQuitQueue._$bind(this),onsendleavemsg:this.__onSendLeaveMsg._$bind(this),
onleaveresult:this.__onLeaveResult._$bind(this),clearunreadmsg:this.__cbClearUnreadMsg._$bind(this),onupdatelastmessage:this.__onUpdateLastMessage._$bind(this),onshopconfig:this.__onShopConfig._$bind(this),onmsgtrashed:this.__onMsgTrashed._$bind(this),onmsgdone:this.__onMsgDone._$bind(this),onbotentry:this.__onBotEntry._$bind(this),onkefusetting:this.__onKefuSetting._$bind(this),onmsgwithdraw:this.__onMsgWithdraw._$bind(this),roundnumbeshowevaluation:this.__onInitShowEvaluation._$bind(this)},function(t,e){d._$addEvent(e,t)})}this.__botCache={};this.__kefuSettingCache={};this.__super(e)}}();f.__reset=function(t){this.__super(t);this._$addEvent("onlistload",this.__onListLoad._$bind(this))};f.__onSession=function(){var t=function(t,e){var n=i._$merge({shop:{id:-1,name:"",logo:""}},e,{id:e.sessionid,sessionStatus:{status:e.code,hasKefuEntry:1==e.operator_enable,hasEvaluation:e.evaluation_enable,initShowEvaluation:e.shop.setting.show_evaluation_button},kefu:{staffname:e.staffname,groupname:e.groupname,staffid:e.staffid,groupid:e.groupid,entryid:e.entryid||0,isRobot:1==e.stafftype||1==e.robotInQueue,iconurl:e.iconurl},clientIconUrl:d._$getAvatarUrl(),token:e.session_token,unread:0,evaluation:JSON.parse(e.evaluation||"{}"),lastMessage:{},message:e.message||""});if(n.id==-1)n.id=i._$uniqueID();return n};var e={200:function(t,e,i){if(t.entranceChanged)o._$confirm({title:"您有会话正在进行中，是否结束会话发起新的咨询？",onCancel:function(){},onConfirm:function(){d._$applyRGKefu(_.SHOPID,{forceChangeEntrance:1})}});if(!i||200!=i.sessionStatus.status){if(!t.shop.setting||t.shop.setting.session_transfer_robot_switch||1!=t.related_session_type){var n={bid:t.shop.id,type:"success",content:_._$getReceptInfo({welcome:t.message,groupname:t.kefu.groupname,staffname:t.kefu.staffname},t.shop.setting),time:+(new Date).getTime()};this._$updateLastMessage(n)}}else if(!t.stafftype&&t.shop.setting.staffReadSwitch){var s={sid:t.id,time:+(new Date).getTime()};d.__onUpdateReadStateFromqueue(s)}},201:function(t){var e={bid:t.shop.id,type:"success",content:t.message};this._$updateLastMessage(e)},203:function(t){if(t.entranceChanged)o._$confirm({title:"您已在另一个入口排队，是否退出排队发起新的咨询？",onCancel:function(){},onConfirm:function(){d._$applyRGKefu(_.SHOPID,{forceChangeEntrance:1})}});d._$doCheckQueue(t.shop.id);if(t.shop.id==_.SHOPID)n._$dispatchEvent(this.constructor,"onqueuestart",t);t.shop.setting.staffReadSwitch=0},205:function(t,e){var i={bid:e.shop.id,type:"success",content:"当前客服不在线"};this._$updateLastMessage(i)}};return function(n,s,a){if(this.__botCache&&this.__botCache.length>0)i._$merge(n,{bot:this.__botCache});var o=t(s,n);d._$doClearQueueCheck(n.shop.id);if(!s)this.__onAddSession(o);else{if(s.entranceSetting)s.entranceSetting=null;this.__onSessionChange(s,o)}var r=e[n.code];if(i._$isFunction(r))r.call(this,o,s,a);else console.error("why session code error")}}();f.__onAddSession=function(t){if(!_._$isExistSession(t)){this.__addSessionItem(t);var e=t.shop.id;if(cachedShopConfig[e]){i._$forEach(cachedShopConfig[e],function(t){this.__onShopConfig(t)}._$bind(this));delete cachedShopConfig[e]}if(e==_.SHOPID)n._$dispatchEvent(this.constructor,"onsession",t)}};f.__onSessionChange=function(t,e){if(t.lastMessage)i._$merge(e,{lastMessage:t.lastMessage});if(t.shop.setting)e.shop.setting=i._$merge({},t.shop.setting,e.shop.setting);if(e.robotInQueue){var s=_._$getSessionById(e.robotSessionId);if(s&&s.bot)i._$merge(e,{bot:s.bot})}e=this.__doSaveItemToCache(e);var a=this._$getListInCache("ses-online");var o=a.indexOf(t);if(o!=-1){a.splice(o,1,e);n._$dispatchEvent(this.constructor,"listchange",{key:"ses-online",action:"refresh"});if(e.shop.id==_.SHOPID)n._$dispatchEvent(this.constructor,"onsession",e)}};f.__cbReceiveMessage=function(t){if("pre-product"!=t.type){var e=_._$getSessionByBid(t.bid);if(e){if(e.shop.id!=_.SHOPID&&"finish"!==t.type&&"success"!==t.type&&"overtime"!==t.type&&"transferresult"!==t.type)e.unread++;t=r._$copy(t);this._$updateLastMessage(t)}}};f.__onMsgDone=function(t){if(!t.error){var e=t.res;var n=_._$getSessionByBid(t.bid);if(n)i._$merge(n.lastMessage,{id:e.idClient})}};f.__onShuntEntries=function(t,e){var n=e.session;var s={id:i._$uniqueID(),kefu:{},lastMessage:{},sessionStatus:{status:200,hasEvaluation:0,hasKefuEntry:0},startTime:+new Date,isShunt:!0};if(!n){i._$merge(s,{shop:t.shop,unread:0});this.__onAddSession(s)}else{i._$merge(s,{shop:n.shop});this.__onSessionChange(n,s)}var a={type:"shunt",bid:t.shop.id,content:t.message,time:+new Date};this._$updateLastMessage(a)};f.__onOverTime=function(t){var e=this._$getItemInCache(t.sessionid);if(e){var i={bid:e.shop.id,type:"overtime",content:t.message,time:+(new Date).getTime()};this._$updateLastMessage(i)}else console.error("why session not exist when overitme",t)};f.__onFinish=function(t){var e=this._$getItemInCache(t.sessionid);if(e){e.closeTime=t.time;d._$doClearQueueCheck(e.shop.id);i._$merge(e.sessionStatus,{status:206});var n=_._$getFinishInfo(t);var s={bid:e.shop.id,type:"finish",content:n+"，如需继续咨询请重新连接客服",time:+(new Date).getTime()};this._$updateLastMessage(s)}else console.error("why session not exist when finish",t)};f.__onEval=function(t){var e=_._$getSessionById(t.sessionid);if(e){if(e.shop.id!=_.SHOPID)e.unread++;var i=e.evaluation.messageInvite||"感谢您的咨询，请对我们的服务做出评价";var n={bid:e.shop.id,type:"eval-show",content:i,time:+(new Date).getTime()};this._$updateLastMessage(n)}else console.error("why session not exist when receive eval",t)};f.__onEvaluate=function(t){var e=t.param.sessionid,s=this._$getItemInCache(e);s.evaluateResult=t.param;i._$merge(s.sessionStatus,{hasEvaluation:0});i._$merge(s.sessionStatus,{initShowEvaluation:!1});if(e==s.id){var a=t.param.messageThanks||"你对我们的服务评价为";var o={bid:s.shop.id,type:"eval-show",content:a+"："+t.param.name,time:+(new Date).getTime()};this._$updateLastMessage(o);if(s.shop.id==_.SHOPID)n._$dispatchEvent(this.constructor,"onevaluate",s)}};f.__onHidenAudio=function(t){n._$dispatchEvent(this.constructor,"onhidenaudio")};f.__cbTransferResult=function(t){var e=this._$getItemInCache(t.old_sessionid);if(!e)console.error("why oldSession not exist when transfer",t);var n={id:t.sessionid,kefu:i._$merge({},e.kefu,{staffid:t.staffid,staffname:t.staffname,iconurl:t.iconurl}),lastMessage:{type:"transferresult",content:"会话转接给"+t.staffname,time:t.time},sessionStatus:{status:200,hasEvaluation:1,hasKefuEntry:0},shop:e.shop,startTime:+new Date,unread:e.unread,evaluation:e.evaluation,editmoresetting:e.editmoresetting,entranceSetting:e.entranceSetting};this.__onSessionChange(e,n)};f.__onQueueChange=function(t){var e=_._$getSessionById(t.sessionid);if(e){i._$merge(e.sessionStatus,{status:203});e.before=t.before;if(e.shop.id==_.SHOPID)n._$dispatchEvent(this.constructor,"onqueuechange",e)}else console.error("why session not exist when queuechange",t)};f.__onQueueFail=function(t){var e=_._$getSessionByBid(t.bid);if(e){i._$merge(e,{message:t.message});if(302==t.code)i._$merge(e.sessionStatus,{status:201});else if(303==t.code)i._$merge(e.sessionStatus,{status:205});if(e.shop.id==_.SHOPID)n._$dispatchEvent(this.constructor,"onqueuefail",e)}else console.error("why session not exist when queuefail",t)};f.__onQuitQueue=function(t){var e=t.bid;var n=_._$getSessionByBid(e);i._$merge(n.sessionStatus,{status:206})};f.__onSendLeaveMsg=function(t){};f.__onLeaveResult=function(t){var e=t.bid,i=t.error;var n=this;var s=_._$getSessionByBid(e);if(s){var a={bid:e,type:"leave-result",time:+(new Date).getTime()};if(i)a.content="本次留言发送失败";else a.content="本次留言发送成功";this._$updateLastMessage(a);if(s.cLeave)s.cLeave.$emit("sendDone",t)}};f.__onCancelLeave=function(){if(1!=window.setting.tradeTag||r._$isMobilePlatform())window.close()};f.__cbClearUnreadMsg=function(t){var e=_._$getSessionByBid(t);e.unread=0;this.__updateSessionItem(e)};f.__onShopConfig=function(t){var e=_._$getShopByBid(t.bid);if(e){var i=t.type,s=t.config;if(i&&s){switch(i){case"client_input":e.setting.inputSwitch=s["switch"];e.setting.sendingRate=s["sendingRate"];break;case"input_assciation_permisson":e.setting.inputAssociationSwitch=s["switch"];e.setting.inputAssociationSendingRate=s.sendingRate}if(t.bid==_.SHOPID)n._$dispatchEvent(this.constructor,"onshopconfig",t)}}else this.__cacheShopConfig(t)};f.__onUpdateLastMessage=function(t){if(t.mdg){var e=r._$copy(t.msg);this._$updateLastMessage(e)}};f.__onMsgTrashed=function(t){var e=t.bid,n=_._$getSessionByBid(e);var s=t.msgIdClient.split("#")[1];if(n.lastMessage.id==s){n.lastMessage.ext=n.lastMessage.ext||{};i._$merge(n.lastMessage.ext,{auditResult:t.auditResult,trashWords:t.trashWords});this._$updateLastMessage(n.lastMessage)}};f.__onBotEntry=function(t){var e=t.bid,i=_._$getSessionByBid(e);this.__botCache=t.bot||[];if(i){i.bot=t.bot;if(i.shop.id==_.SHOPID)n._$dispatchEvent(this.constructor,"onbotentry")}};f.__onKefuSetting=function(t){var e=t.bid,i=_._$getSessionByBid(e);this.__kefuSettingCache=t;if(i){i.entranceSetting=t.entranceSetting;i.editmoresetting=t.actionSetting;if(i.shop.id==_.SHOPID){n._$dispatchEvent(this.constructor,"onkefusetting");n._$dispatchEvent(this.constructor,"editmoresetting",{editMoreSetting:t.actionSetting})}}};f.__onMsgWithdraw=function(t){var e=t.msgIdClient;sessionId=t.sessionId,session=_._$getSessionById(sessionId);if(session)if(e==session.lastMessage.id){var n=i._$merge(session.lastMessage,{status:2});this._$updateLastMessage(n)}};f.__onInitShowEvaluation=function(t){var e=_._$getSessionByBid(_.SHOPID);if(e){i._$merge(e.sessionStatus,{initShowEvaluation:!0});n._$dispatchEvent(this.constructor,"onevaluate",e)}};f.__onListLoad=function(t){if("ses-online"==t.key){var e=this._$getListInCache("ses-online");i._$forEach(e,function(t){if(203==t.sessionStatus.status)d._$doCheckQueue(t.shop.id)})}};f.__parseSessionList=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(201==i.sessionStatus.status)t.splice(e--,1);else this.__parseSessionItem(i)}};f.__parseSessionItem=function(t){if(!t.shop.setting)t.shop.setting={};var e=t.sessionStatus.status,n=t.lastMessage;switch(e){case 206:
i._$merge(n,{type:"text",content:"[会话已结束，如需继续咨询请重新连接客服]"})}if(!n)i._$merge(t,{lastMessage:{type:"text",content:"[您正在和"+t.kefu.staffname+"对话]",time:+new Date}});this.__formatLastMessage(t.lastMessage)};f.__formatLastMessage=function(){var t={file:function(t){i._$merge(t,{content:e._$text2type(t.content,"json")})},qa:function(t){},"qa-list":function(t){t.content=t.label},richtext:function(t){i._$merge(t,{type:"rich",content:e._$text2type(t.content,"json").content})},gfw:function(t){var n=e._$text2type(t.content,"json")||{};i._$merge(t,{content:n.content,auditResult:n.auditResult,trashWords:n.trashWords});if(0==n.type)i._$merge(t,{type:"text"});else i._$merge(t,{type:"rich"})},workflow:function(t){i._$merge(t,{type:"bot",content:e._$text2type(t.content,"json")})}};return function(n){if("qa"==n.type)try{var s=e._$text2type(n.content,"json"),o=a._$parse(s);i._$merge(n,o[0])}catch(r){}var _=t[n.type];if(i._$isFunction(_))_.call(this,n)}}();f.__doFormatItem=function(t){var e=t.lastMessage;if(2==e.status)i._$merge(e,{type:"sys",content:t.kefu.staffname+" 撤回了一条消息"});return t};f.__parseSameQuestion=function(t){var e=t.label;return e};f.__doLoadList=function(t){t.data=t.data||{};i._$merge(t.data,{u:_._$getDeviceId(),appKey:_._$getAppkey()});this.__doSendRequest("ses-online",t)};f._$updateLastMessage=function(t){var e=_._$getSessionByBid(t.bid);if(e){t.id=t.id||i._$uniqueID();e.lastMessage=t;this.__updateSessionItem(e)}};f.__addSessionItem=function(t){var e="ses-online";var i=this._$getListInCache(e),t=this.__doSaveItemToCache(t);i.push(t);if(this._$isLoaded(e))n._$dispatchEvent(this.constructor,"listchange",{key:"ses-online",action:"add",data:t,flag:1})};f.__updateSessionItem=function(t){t=this.__doSaveItemToCache(t);n._$dispatchEvent(this.constructor,"listchange",{data:t,action:"update",key:"ses-online"})};f.__cacheShopConfig=function(t){var e=t.bid;if(!cachedShopConfig[e])cachedShopConfig[e]=[t];else cachedShopConfig[e].push(t)};l._$do=c._$do._$bind(null,l._$$Cache);s._$$CustomEvent._$allocate({element:l._$$Cache,event:["listchange","onsession","onqueuestart","onqueuechange","onqueuefail","onevaluate","onhidenaudio","onshopconfig","onleavefieldsload","onleavefieldsloaderr","onbotentry","onkefusetting","editmoresetting"]});l._$$instrance=l._$$Cache._$allocate();i._$merge(window.ysfCache,{session:l._$$instrance})},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","5f75dc6bf6467f0a29ae4a457d2e9c8c","4d3be81e509943f25257cbc97abc448d","615935a06ea2baf55cca2025d87df4c1","35df4ef4567b6cd0275a1b849d2bea8c","aa835e6c54cfdee711ae8d0d1296fa57","d67add781b37b82c1816b8c159701e56","0a031608798084dd303ad76241dcc09c");I$("9531d121cb4951680b01e0baab61bd6c",function(t,e,i,n,s){var a=1;var o=function(){var t=window.navigator.userAgent;if(/SE 2.X MetaSr 1.0/gi.test(t))return!0;else return!1};s._$permission=function(){var t=!1;return function(){if(!t){t=!0;if(window.Notification&&!o())Notification.requestPermission(function(t){a="denied"!==t})}}}();var r;var _=function(e){var i=t._$merge({category:"winfocus"},e);parent.postMessage("pkg:"+JSON.stringify(i),"*")};var d=function(t,i){var s=e._$get("notify-sound-url");if(s)n._$play(s.src,{key:"ysf-message-sound"});if(!window.Notification||a)if(window.Notification&&!o()){var _={id:i.id,notify:new Notification(t,i)};if(r){r.notify.close();r=void 0}r=_;_.notify.onclick=function(){window.focus();_.notify.close()};_.notify.onclose=function(){window.clearTimeout(_.timer)};_.timer=window.setTimeout(function(){_.notify.close()},2e4)}};s._$closeBySessionId=function(t){if((!t||t==r.id)&&r)r.notify.close()};s._$notifyMessage=function(){var e={image:function(t){return"[图片]"},audio:function(t){return"[音频]"},file:function(t){return"[文件] "+t.content.name},rich:function(t){return i._$replaceRichAndUnescape(t.content)},"qa-list":function(t){return t.label},bot:function(t){return"[查询消息]"},productinfo:function(t){return"[商品链接]"}};return function(i,n){var a=window.setting||{},o=e[i.type],r=i.content||"",n="客服"+(n||"");if(t._$isFunction(o))r=o.call(this,i);if(1!=setting.dialogStyle){s._$permission();d(n+"说：",{body:r,tag:"ysf",icon:appConfig.path.sdk+"res/img/notification.png"})}else _({notify:n+"说:",body:r,tag:"ysf",icon:appConfig.path.sdk+"res/img/notification.png"})}}()},"fbbf6ddc0634989027d138f4ffd4b78b","5fb495f256a5dcde2a92e5fe919a6422","35df4ef4567b6cd0275a1b849d2bea8c","295e0344e178c08801d7bce1d9676dd0");I$("f0b1d7ff05e74da750d6bb82da881934",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u){window.ysfCache=window.ysfCache||{};f._$$Cache=t._$klass();u=f._$$Cache._$extend(c._$$Cache);c._$config({"msg-session":{method:"POST",url:window.setting.tradeTag?"/webapi/user/platform/message.action":"/webapi/user/message.action",format:function(t,e){var i=e.data.bid,n=t.result;n.sort(function(t,e){return t.time>e.time?1:-1});this.__formatMsgList(i,n)}},"msg-session-history":{method:"POST",url:"/webapi/user/message/history.action",format:function(t,e){var n=e.data.bid;var s=t.result;i._$forEach(s,function(t){if(!t.fromUser)t.from={};t.msgIdClient=t.msgIdClient||i._$uniqueID()});if(s.length){var a=s[s.length-1];for(var o=s.length-1;o>=0;o--)if(s[o].id!=-1){a=s[o];break}s.push({id:i._$uniqueID(),type:"historySplit",content:{mid:a.id,sid:a.sessionId}});if(e.isFirst)s.unshift({id:i._$uniqueID(),type:"messageSplit",content:"以上为历史消息"});s=this.__formatHistoryMsgList(n,s)}}}});u.__init=function(){var t=!1;return function(e){if(!t){t=!0;i._$loop({onmessage:this.__cbReceiveMessage._$bind(this),onshowtip:this.__onShowTip._$bind(this),onmsgdone:this.__onMsgDone._$bind(this),onmsgbeginupload:this.__onMsgBeginUpload._$bind(this),onmsguploadprogress:this.__onMsgUploadProgress._$bind(this),onmsguploaddone:this.__onMsgUploadDone._$bind(this),onupdatemessage:this.__onUpdateMessage._$bind(this),ondelmessage:this.__onDelMessage._$bind(this),onsendshunt:this.__cbSendShunt._$bind(this),onresendmessage:this.__onResendMessage._$bind(this),onmorebotlist:this.__onMoreBotList._$bind(this),onmorebotdetail:this.__onMoreBotDetail._$bind(this),onsubmitBotForm:this.__onSubmitBotMsg._$bind(this),onabortFileTrans:this.__onAbortFileTrans._$bind(this),onevalRobotAnswer:this.__onEvaluationUpdate._$bind(this),onevaluationcontent:this.__onEvaluationUpdate._$bind(this),ongetHistoryMsg:this.__onGetHistoryMsg._$bind(this),invalidimage:this.__onInvalidImage._$bind(this),invalidVideo:this.__onInvalidVideo._$bind(this),oneval:this.__onEval._$bind(this),onevaluate:this.__cbEvaluate._$bind(this),ontransferresult:this.__cbTransferResult._$bind(this),onshuntentries:this.__cbShuntEntries._$bind(this),onfinish:this.__cbFinish._$bind(this),onovertime:this.__cbOverTime._$bind(this),onsession:this.__cbOnSession._$bind(this),onkickout:this.__onKickout._$bind(this),onmsgtrashed:this.__onMsgTrashed._$bind(this),onmessagereceipt:this.__cbMessageReceipt._$bind(this),onupdateReadStateFromQueue:this.__cbupdateReadStateFromqueue._$bind(this),onmsgwithdraw:this.__onMsgWithdraw._$bind(this),onkfinput:this.__onkfInput._$bind(this),onwxaudiouploaddone:this.__onWxAudioUploadDone._$bind(this),onwxaudiouploading:this.__onWxAudioUploading._$bind(this),onleaveclose:this.__onLeaveClose._$bind(this),onleavemsg:this.__onLeaveMsg._$bind(this),onqueuestart:this.__onstartQueue._$bind(this),onquitqueue:this.__onquitQueue._$bind(this),onquitqueuestatus:this.__onquitQueueStatus._$bind(this),onshowmorebotbubblenode:this.__onShowMoreBotBubbleNode._$bind(this),ongetworksheetinfo:this.__onGetWorkSheetInfo._$bind(this)},function(t,e){l._$addEvent(e,t)})}this.__super(e)}}();u.__reset=function(t){this.__super(t);this._$addEvent("onlistload",this.__onListLoad._$bind(this))};u.__cbOnSession=function(t,e,n){var s=t.shop.id;if(s){if(!n||200!=n.sessionStatus.status)if("200"==t.code)if(this._$isLoaded("msg-session-"+s))if(!t.shop.setting||t.shop.setting.session_transfer_robot_switch||1!=t.related_session_type){var a={id:i._$uniqueID(),type:"success",content:d._$getReceptInfo({welcome:t.message,groupname:t.groupname,staffname:t.staffname,stafftype:t.stafftype},t.shop.setting),bid:s,sessionid:t.sessionid,time:+(new Date).getTime()};this.__addSessionMessage(s,a)}}else console.error("why the shopid of session not exist",t)};u.__onShowTip=function(t){n._$dispatchEvent(this.constructor,"onmessageshowtip",{text:t})};u.__cbReceiveMessage=function(t){var e=t.bid,s=d._$getSessionByBid(e);if(s){i._$merge(t,{kefu:s.kefu,clientIconUrl:s.clientIconUrl});if(1==window.setting.winType){if(!t.fromUser&&this.__checkLayerOpenAckTimeout(setting.appkey))setTimeout(function(){this.__sendMsgToSDK(e,t);if(localStorage&&null==localStorage.getItem("YSF-MSGID-"+t.id)){localStorage.setItem("YSF-MSGID-"+t.id,1);r._$notifyMessage(t,s.kefu.staffname)}}._$bind(this),100*setting.dvcTimer)}else if(!t.fromUser&&document.hidden)r._$notifyMessage(t,s.kefu.staffname);this.__addSessionMessage(t.bid,t);if("bot"==t.type){var a=s.id;if(203==s.sessionStatus.status)a=s.robotSessionId||s.id;n._$dispatchEvent(this.constructor,"onbotmsg",{msg:t,sid:a})}}else console.error("session not exist when receivemessagePkg")};u.__onGetWorkSheetInfo=function(t){n._$dispatchEvent(this.constructor,"ongetworksheetinfo",t)};u.__onMsgDone=function(t){var e=this._$getItemInCache(t.id),i=t.bid,n=t.error,s=t.res;if(n){if(!s){console.error(n.message);return}e.idClient=s.idClient;if("NotAnImage"===n.code){this.__onInvalidImage(i);this.__deleteSessionMessage(i,e);return}}else{e.state=0;e.idClient=s.idClient;if(s&&s.time)e.time=s.time;var a=e.content.url;if("image"==e.type&&a){var o=new Image;o.onload=function(){this.__updateSessionMessage(i,e)}._$bind(this);o.onerror=this.__updateSessionMessage._$bind(this,i,e);o.src=a;return}if("file"==e.type&&"video"==e.reallyType&&a){var o=new Image;e.content.preLoading=!0;o.onload=function(){e.content.preLoading=!1;this.__updateSessionMessage(i,e)}._$bind(this);o.onerror=function(){e.content.preLoading=!1;this.__updateSessionMessage(i,e)}._$bind(this);o.src=a+"&vframe";
return}}this.__updateSessionMessage(i,e)};u.__onMsgBeginUpload=function(t){var e=t.id,i=t.bid,n=t.upload,s=this._$getItemInCache(e);if("file"==s.type){s.uploadObj=n;this.__updateSessionMessage(i,s)}};u.__onMsgUploadProgress=function(t){var e=t.id,i=t.bid,s=t.progress,a=this._$getItemInCache(e);if("file"==a.type&&"video"!=a.reallyType){a.progressObj=s;n._$dispatchEvent(this.constructor,"fileuploadprogress",{bid:i,msg:a})}};u.__onMsgUploadDone=function(t){var e=t.id,i=t.bid,n=t.error,s=t.file,a=this._$getItemInCache(e);delete a.uploadObj;if(!n){s.url=_._$transNosToCdn(s.url,"nim");a.content=s;this.__doFormatItem(a)}else{a.state=-1;a.error=n;this.__updateSessionMessage(i,a)}};u.__onWxAudioUploadDone=function(t){var e=t.id,i=t.bid,n=t.error,s=this._$getItemInCache(e);if(!n){s.state=0;this.__updateSessionMessage(i,s)}else{s.state=-1;s.error=n;this.__updateSessionMessage(i,s)}};u.__onWxAudioUploading=function(t){var e=t.id,i=t.bid,n=this._$getItemInCache(e);n.state=1;this.__updateSessionMessage(i,n)};u.__onMoreBotList=function(t){var e={content:t.body};if(!t.error&&t.body)this.__doParseBotMsg(e);n._$dispatchEvent(this.constructor,"onmorebotlist",{error:t.error,content:e.content})};u.__onMoreBotDetail=function(t){var e={content:t.body};if(!t.error&&t.body)this.__doParseBotMsg(e);n._$dispatchEvent(this.constructor,"onmorebotdetail",{error:t.error,content:e.content})};u.__onResendMessage=function(t){var e=t.id,i=t.bid,n=this._$getItemInCache(e);n.state=1;this.__updateSessionMessage(i,n)};u.__onInvalidImage=function(t){if(t==d.SHOPID)n._$dispatchEvent(this.constructor,"invalidimage",{code:"NotAnImage",message:"NotAnImage(请求对象不是合法图片)(上传文件失败)"})};u.__onInvalidVideo=function(t,e){if(e){if(t==d.SHOPID)n._$dispatchEvent(this.constructor,"invalidVideo",{code:"overVideoSize",message:"视频文件超过"+e+"M，无法发送"})}else n._$dispatchEvent(this.constructor,"invalidVideo",{code:"NotAnVideo",message:"NotAnVideo请求对象不是合法视频)(上传文件失败)"})};u.__onEval=function(t){var e=d._$getSessionById(t.sessionid);if(e){var s={id:i._$uniqueID(),fromUser:0,kefu:e.kefu,sid:e.id,category:e.evaluation.type,type:"eval-show",sessionid:e.id,time:+(new Date).getTime(),messageInvite:6==t.cmd?t.messageInvite:t.message,evaluationTimes:t.evaluationTimes};n._$dispatchEvent(this.constructor,"oneval",{msg:s,autoPopup:t["evaluation_auto_popup"]});this.__addSessionMessage(e.shop.id,s)}else console.error("why session not exist when receive eval",t)};u.__onkfInput=function(t){var e=d._$getSessionById(t.sessionid);if(e){var s={id:i._$uniqueID(),sid:e.id,type:"kf-input",sessionid:e.id,time:+(new Date).getTime(),content:t.message};n._$dispatchEvent(this.constructor,"onkfinput",{msg:s})}else console.error("why session not exist when receive eval",t)};u.__cbEvaluate=function(t){var e=this._$getListInCache("msg-session-"+t.bid),n=d._$getSessionByBid(t.bid);var s=t.param.messageThanks;var a=n.shop.setting&&n.shop.setting.enable_evaluation_muttimes||!1;if(!t.param.id)for(var o=e.length-1;o>=0;o--){var r=e[o];if("eval-show"==r.type&&r.sid==n.id){t.param.id=r.id;break}}if(!t.param.id){t.param.id=i._$uniqueID();this.__addSessionMessage(t.bid,i._$merge({type:"text",content:t.param.name,id:i._$uniqueID(),fromUser:1,kefu:{isRobot:0}}));this.__addSessionMessage(t.bid,i._$merge(t.param,{evaluated:!0,type:"eval-show",fromUser:0,kefu:n.kefu,sessionid:n.id,messageThanks:s,enable_evaluation_muttimes:a}))}else{this.__addSessionMessage(t.bid,i._$merge({type:"text",content:t.param.name,id:i._$uniqueID(),fromUser:1,kefu:{isRobot:0}}));this.__updateSessionMessage(t.bid,i._$merge(t.param,{type:"eval-show",fromUser:0,kefu:n.kefu,enable_evaluation_muttimes:a,btnUnDisabled:!0}));this.__addSessionMessage(t.bid,i._$merge({id:i._$uniqueID(),evaluated:!0,type:"eval-show",sessionid:n.id,fromUser:0,kefu:n.kefu,messageThanks:s,enable_evaluation_muttimes:a}))}};u.__cbOverTime=function(t){var e=d._$getSessionById(t.sessionid);if(e){var t={fromUser:0,kefu:e.kefu,id:i._$uniqueID(),sessionid:e.id,bid:e.shop.id,type:"overtime",content:t.richmessage||t.message,time:+(new Date).getTime()};this.__addSessionMessage(e.shop.id,t)}else console.error("why session not exist when overitme",t)};u.__cbFinish=function(t){if(t.sessionid){var e=d._$getSessionById(t.sessionid);if(e){this.__abortShopFileTrans(e.shop.id);var n={id:i._$uniqueID(),fromUser:0,bid:e.shop.id,kefu:e.kefu,sessionid:e.id,type:"finish",content:d._$getFinishInfo(t),time:+(new Date).getTime()};var s={id:i._$uniqueID(),fromUser:0,bid:e.shop.id,kefu:e.kefu,sessionid:e.id,type:"sys",content:"您退出了咨询",time:+(new Date).getTime()};if(7!=t["close_reason"]&&1!=t["close_reason"]){if(e.shop.setting.session_end_switch)this.__addSessionMessage(e.shop.id,n)}else this.__addSessionMessage(e.shop.id,s)}else console.error("why session not exist when finish",t)}};u.__cbTransferResult=function(t){var e=d._$getSessionById(t.old_sessionid);if(!e)console.error("why oldSession not exist when transfer",t);t.message=t.message||"";var n={id:i._$uniqueID(),sessionid:t.sessionid,bid:e.shop.id,type:"transferresult",content:t.message,kefu:e.kefu,time:+(new Date).getTime()};if(e.shop.setting.session_transfer_switch)this.__addSessionMessage(e.shop.id,n)};u.__cbShuntEntries=function(t){var e=t.shop.id;if(e){var s=JSON.parse(t.entries);var a=i._$merge(t,{id:i._$uniqueID(),type:"shunt",entries:s,label:t.message,from:{portrait:t.iconurl}});this.__addSessionMessage(e,a);n._$dispatchEvent(this.constructor,"onshuntentries",{msg:a})}else console.error("why the shopid of session not exist",session,a)};u.__onLeaveClose=function(t){var e=t.bid;var n=t.customFields;if(e){var s=i._$merge(t,{id:i._$uniqueID(),fromUser:1,kefu:{isRobot:0},type:"leaveInfo",customFields:n,content:"我的留言表单:"});this.__addSessionMessage(e,s);var a=i._$merge(t,{id:i._$uniqueID(),fromUser:0,kefu:{isRobot:0},type:"text",content:"您的留言已收到，我们会尽快处理"});this.__addSessionMessage(e,a)}else console.error("why the shopid of session not exist",session,a)};u.__onLeaveMsg=function(t){var e=d._$getSessionByBid(d.SHOPID);var n={id:i._$uniqueID(),fromUser:0,bid:e.shop.id,kefu:e.kefu,sessionid:e.id,type:"leavemsg",content:t.msg,time:+(new Date).getTime()};this.__addSessionMessage(e.shop.id,n)};u.__onstartQueue=function(t){var e="您好，当前正在排队，请先简单描述您的问题...";if(t.showNum)e="排队中，您排在第"+t.before+"位，排到将自动接入。";else{var i=t.inqueueNotify||"您好，当前正在排队，请先简单描述您的问题...";e=i+" "}var n={id:"queuemessage-"+t.id,fromUser:0,bid:t.shop.id,kefu:t.kefu,sessionid:t.id,type:"queue",content:e,quitQueueStu:!1,time:+(new Date).getTime()};if(this.__preSessionId==t.id)this.__updateSessionMessage(t.shop.id,n);else{this.__addSessionMessage(t.shop.id,n);this.__preSessionId=t.id}};u.__onquitQueue=function(t){var e=t.session;var n={id:i._$uniqueID(),bid:t.bid,type:"sys",content:"您退出了咨询",time:+(new Date).getTime()};var n={id:"queuemessage-"+e.id,bid:t.bid,quitQueueStu:!0};this.__updateSessionMessage(t.bid,n)};u.__onquitQueueStatus=function(t){var e=t.session;var i={id:"queuemessage-"+e.id,bid:t.bid,quitQueueStu:!0};this.__updateSessionMessage(t.bid,i)};u.__cbSendShunt=function(t){var e=this._$getItemInCache(t.mid);if(e)this.__updateSessionMessage(t.bid,i._$merge(e,{disabled:1}))};u.__onUpdateMessage=function(t){var e=t.bid,i=t.msg;this.__updateSessionMessage(e,i)};u.__onDelMessage=function(t){var e="msg-session-"+t.bid;var s=t.messageId;var a=this._$getListInCache(e);var o=this._$getItemInCache(s);var r=i._$indexOf(a,o);if(!o)console.error("message cache can not get message.");this._$clearItemInCache(s);if(r>-1)a.splice(r,1);n._$dispatchEvent(this.constructor,"listchange",{key:e,action:"delete",data:o})};u.__onKickout=function(t){this.__cbFinish({close_reason:"-1"})};u.__onSubmitBotMsg=function(t){var e=t.bid,i=t.originMsg;var n=i.content.template;n.submitted=1;this.__updateSessionMessage(e,i)};u.__onAbortFileTrans=function(t){var e=t.bid,i=t.mid,n=t.byUser;var s=this._$getItemInCache(i);if(s){if(n)this.__deleteSessionMessage(e,s);else{s.state=-1;this.__updateSessionMessage(e,s)}s.uploadObj.abort()}};u.__onEvalRobotAnswer=function(t){var e=this._$getItemInCache(t.id);i._$merge(e,{evaluation:t.evaluation});this.__updateSessionMessage(t.bid,e)};u.__onEvaluationContent=function(t){var e=this._$getItemInCache(t.id);i._$merge(e,{evalcontent:t.evalcontent});this.__updateSessionMessage(t.bid,e)};u.__onEvaluationUpdate=function(t){var e=this._$getItemInCache(t.id);i._$merge(e,t);this.__updateSessionMessage(t.bid,e)};u.__onGetHistoryMsg=function(t){this.__getHistory(t.bid)};u.__onMsgTrashed=function(t){var e=t.bid,n=this._$getListInCache("msg-session-"+e);var s;var a=t.msgIdClient.split("#")[1];for(var o=n.length-1;o>=0;o--)if(n[o].idClient==a){s=n[o];break}if(s){i._$merge(s.ext,{auditResult:t.auditResult,trashWords:t.trashWords});this.__updateSessionMessage(e,s)}};u.__onMsgWithdraw=function(t){var e=t.msgIdClient,i=this._$getItemInCache(e);if(i){var n=t.sessionId,s=d._$getSessionById(n);if(s){i.status=2;this.__updateSessionMessage(t.bid,i)}}};u.__onShowMoreBotBubbleNode=function(t){var e=t.msgId,i=this._$getItemInCache(e);if(i){i.content.showMore=!0;this.__updateSessionMessage(t.bid,i)}};u.__onListLoad=function(t,e){};u.__onListRequestLoad=function(t,e){var i=t.data.bid;this.__getHistory(i);var n=this.__appendTempList(i,e);this.__addExtMsg(i,n);var s;for(var a=n.length-1;a>=0;a--){var o=n[a];if("productinfo"!=o.type||"0"!=o.content.show){s=o;break}else;}l._$updateLastMessage(s);return n};u.__onHistoryLoad=function(t,e){var i=t.bid;if(e.length){this.__unshiftMsgToList(i,e);var s=this._$getListInCache("msg-session-"+i);s.historyLoaded=!0;i==d.SHOPID&&n._$dispatchEvent(this.constructor,"onhistorylistload")}else i==d.SHOPID&&n._$dispatchEvent(this.constructor,"onhistorylistend")};u.__onHistoryLoadErr=function(t,e){t.bid==d.SHOPID&&n._$dispatchEvent(this.constructor,"onhistorylistloaderr")};u.__appendTempList=function(t,e){var i=this._$getListInCache("msg-temp-"+t);var n=[];var s=0,a=0;for(;s<i.length&&a<e.length;){var o=i[s],r=e[a];if(o.id==r.id){n.push(r);s++;a++}else if(o.time<r.time){n.push(o);s++}else{
n.push(r);a++}}if(s<i.length)for(var _=s;_<i.length;_++)n.push(i[_]);if(a<e.length)for(var _=a;_<e.length;_++)n.push(e[_]);return n};u.__addExtMsg=function(t,e){var n=d._$getSessionByBid(d.SHOPID);if(n&&!n.isShunt){var s=n.sessionStatus.status;if(200==s||206==s){var a=d._$getReceptInfo({welcome:n.message,groupname:n.kefu.groupname,staffname:n.kefu.staffname,stafftype:n.stafftype},n.shop.setting);if(a){var o={id:i._$uniqueID(),bid:t,type:"success",content:d._$getReceptInfo({welcome:n.message,groupname:n.kefu.groupname,staffname:n.kefu.staffname,stafftype:n.stafftype},n.shop.setting),kefu:n.kefu,sessionid:n.id,time:+new Date};e.unshift(o)}}if(206==s){if(n.sessionStatus.hasEvaluation){var r={id:i._$uniqueID(),sid:n.id,fromUser:0,kefu:n.kefu,category:n.evaluation.type,type:"eval-show",sessionid:n.id,time:+(new Date).getTime(),messageInvite:n.evaluation.messageInvite};e.push(r)}var _={fromUser:0,kefu:n.kefu,id:i._$uniqueID(),bid:n.shop.id,sessionid:n.id,type:"finish",content:"会话已结束",time:+(new Date).getTime()};e.push(_)}}};u.__doFilterTrashMsg=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(1!=i.fromUser){if(i.ext.auditResult)t.splice(e--,1)}else;}};u.__deduplicateMsg=function(t){for(var e=0;e<t.length;e++)if(d._$isExistMessage(t[e]))t.splice(e--,1)};u.__formatMsgList=function(){var t={image:function(t){try{var e=JSON.parse(t.content);t.content=e}catch(i){}},richtext:function(t){var i=e._$text2type(t.content,"json").content;t.content=i;if(!t.content)t.type="empty";else t.type="rich"},workflow:function(t){var i=e._$text2type(t.content,"json");t.content=i;if(!t.content)t.type="empty";else t.type="bot"}};t["video"]=t["audio"]=t["productinfo"]=t["file"]=t["image"];return function(i,n){this.__doSplitQAList(n);this.__doParseCustomList(n);n.forEach(function(n){n.id=n.msgIdClient;n.bid=i;n.sessionid=n.sessionId;var s=d._$getSessionById(n.sessionId);if(s&&s.kefu)n.kefu=s.kefu;else n.kefu={};if(s&&s.clientIconUrl)n.clientIconUrl=s.clientIconUrl;else n.clientIconUrl=l._$getAvatarUrl();n.ext=e._$text2type(n.ext,"json")||{};if(t[n.type])t[n.type](n)}._$bind(this));this.__doFilterTrashMsg(n);this.__deduplicateMsg(n)}}();u.__formatHistoryMsgList=function(t,i){this.__formatMsgList(t,i);for(var n=0;n<i.length;n++){var s=i[n];var a=s.sessionid||s.sid;var o=d._$getSessionByBid(d.SHOPID);if(a!=d._$getSessionId(d.SHOPID)&&a!=d._$getRobotSessionId(d.SHOPID))s.ishistory=!0;if(o&&!o.kefu.isRobot)s.ishistory=!0;if("custom"==s.type){var r=e._$text2type(s.content,"json"),_=r.staffinfo?JSON.parse(r.staffinfo):{},c=r.oldStaffInfo?JSON.parse(r.oldStaffInfo):{},l=r.newStaffInfo?JSON.parse(r.newStaffInfo):{};var f=r.cmd;switch(parseInt(f)){case 3:if(0==r.type)if(s.push)i.splice(n--,1);else{if(_.nickname)s.content="客服 "+_.nickname+" 为您服务";else s.content="客服为您服务";s.type="success"}else if(2==r.type){s.content="留言开始";s.type="sys"}else if(3==r.type){s.content="进入排队";s.type="sys"}break;case 84:if(2==r.type){s.content="留言结束";s.type="sys"}else i.splice(n--,1)}}else;}};u.__doSplitQAList=function(t){i._$reverseEach(t,function(t,e,n){if("qa"==t.type){var s=JSON.parse(t.content||"null"),a=o._$parse(s);t.transferRgType=s.transferRgType;i._$forEach(a,function(e,n,s){s[n]=i._$merge({},t,e)});a.unshift(e,1);n.splice.apply(n,a)}})};u.__doParseCustomList=function(t){var e,n={121:"productinfo"};i._$forEach(t,function(t,s){if("custom"==t.type){e=null;try{e=JSON.parse(t.content);if(e&&n[e.cmd])t=i._$merge(t,{type:n[e.cmd]})}catch(a){}}},this)};u.__doParseProductItem=function(t){var e,n=[],s;try{s=JSON.parse(t.content)}catch(a){s=t.content}if(s){if(s.showCustomMsg){s.show=1;if(s.price)s.note=s.price;if(!s.template&&s.orderId)s.template="order"}if(s&&s.tags){if(i._$isArray(s.tags))e=s.tags;else try{e=JSON.parse(s.tags)}catch(a){}if(i._$isArray(e)){if(e.length>3)e=e.slice(0,3);i._$forEach(e,function(t){if(t.label){if(t.label.length>8)t.label=t.label.substr(0,8);if(t.data)t.data=JSON.stringify(t.data);n.push(t)}},this)}}t.content=s}};u.__doFormatItem=function(){var t={image:function(t){var e=t.content.url||"";if((e.indexOf("nos.netease.com")>=0||e.indexOf("nosdn.127.net")>=0)&&e.indexOf("?")<0){t.content.origin=e;t.content.url=e+"?imageView&thumbnail=1500x850";t.content.thumb=e+"?imageView&thumbnail=120x120";if("webp"==t.content.ext){t.content.url=e+"?type=png&imageView&thumbnail=1500x850";t.content.thumb=e+"?type=png&imageView&thumbnail=120x120"}}},video:function(t){t.type="video";t.reallyType="video";var e=t.content.url;if(e.indexOf("?")<0&&e.indexOf("blob")<0)t.content.url=e+"?download="+t.content.name},"qa-list":function(t){this.__doMapRobotQA(t.list,t.origin)},bot:function(t){this.__doParseBotMsg(t)},productinfo:function(t){this.__doParseProductItem(t)}};var e=function(t){var e=d._$getSessionByBid(t.bid);if(e){t.readState=e.shop.setting.staffReadSwitch||0;if(1==t.push)t.readState=0}};return function(n){if(n){var s=d._$getSessionById(n.sessionId);if(2==n.status){var o=n.kefu||s.kefu;var r=o.staffname||"";n.type="sys";n.content=r+" 撤回了一条消息"}n.ext=n.ext||{};e(n);var _;if("file"==n.type&&"video"==n.reallyType)_=t[n.reallyType];else _=t[n.type];if(i._$isFunction(_))_.call(this,n);var c=n.content;if(i._$isString(c))n.richContent=a._$encode(c)}}}();u.__doMapRobotQA=function(){var t=/<a\s(.*?)>/gi;var e=function(e){return(e||"").replace(t,'<a target="_blank" $1>')};return function(t,n){var s=this.__getDataInCacheWithDefault("robot-qa-list",{});i._$forEach(t,function(t){var a=t.id;if(!a){a=i._$uniqueID();t.id=a;t.randomId=!0}s[a]=t;t.origin=n;t.answer=e(t.answer)})}}();u.__doParseBotMsg=function(){var t=function(t){var e=[];if(t.width)e.push("width:"+t.width);if(t.color)e.push("color:"+t.color);if(t.align)e.push("text-align:"+t.align);var n=["display:inline-block;white-space:nowrap;word-wrap:normal","text-decoration:underline","font-style:italic","font-weight:bold"];if(t.flag){var s=[];var a=parseInt(t.flag).toString(2);a=new Array(n.length-a.length+1).join("0")+a;var o=a.split("");i._$forEach(a,function(t,e){if("1"==t)s.push(n[e])})}var r=e.join(";"),_=s.join(";");if(r)t.style=r;if(_)t.innerStyle=_};var e={qiyu_template_text:function(t){t.type="text";t.content=t.content.template.label},bot_form:function(t){i._$forEach(t.content.template.forms,function(t){t.required=parseInt(t.required);t.key=t.id;t.rules=[];if(t.required)t.rules.push({name:"required",value:t.required});if("image"==t.type)t.accept="image/jpg,image/jpeg,image/png,image/bmp,image/gif";else if("input"==t.type)t.forbidden=["&"]})},error_msg:function(t){t.content.template.label=o._$action(i._$uniqueID(),t.content.template.label)},card_layout:function(e){var n=e.content.template;i._$forEach(n.list,function(e){i._$forEach(e.list,function(e){i._$forEach(e,function(i){i.width=100/e.length+"%";t(i)})})})},detail_view:function(e){var n=e.content.template;i._$forEach(n.thumbnail.list,function(e){i._$forEach(e,function(i){i.width=100/e.length+"%";t(i)})});i._$forEach(n.detail.list,function(e){i._$forEach(e,function(e){t(e.left);t(e.right)})})},pair:function(e){var n=e.content.template;i._$forEach(n.list,function(e){i._$forEach(e,function(e){t(e.left);t(e.right)})})},static_union:function(t){var e=t.content.template;i._$forEach(e.unions,function(t){if("richText"==t.type)t.detail.label=o._$action(i._$uniqueID(),t.detail.label,!0)})},bubble_node_list:function(t){var e=4;var i=t.content.template;i.showList=i.list||[];if(!t.content.showMore)i.showList=i.showList.slice(0,e)},bubble_list:function(t){if(!t.isSelectedBotItem){var e=4;var i=t.content.template;if(!(i.tabList&&i.tabList.length>0)){i.list=i.list||[];i.tab_id="1";i.tabList=[];var n={tab_id:"1",list:i.list,showList:i.list.slice(0,e)};if(i.list.length>=e)n.action=i.action;i.tabList.push(n);i.hideTabNav=!0;delete i.action;delete i.list}}}};return function(t){t.transferRgType=t.content.transferRgType;var n=t.content.template.id;switch(t.content.type){case"01":t.type="text";t.content=t.content.template;break;case"02":case"03":break;default:t.type="bot";var s=e[n];if(i._$isFunction(s))s.call(this,t)}}}();u.__doLoadList=function(t){var e=this;t.onerror=function(e){t.onload&&t.onload([])};var n=t.onload;t.onload=function(i){i=e.__onListRequestLoad(t,i);n(i)};t.data=i._$merge(t.data,{appKey:d._$getAppkey(),u:d._$getDeviceId(),bid:t.data.id});var s=(t.key||"").split("-");this.__doSendRequest(s[0]+"-"+s[1],t)};u.__updateSessionMessage=function(t,e){var e=this.__doSaveItemToCache(e);n._$dispatchEvent(this.constructor,"listchange",{key:"msg-session-"+t,action:"update",data:e});if("video"==e.reallyType){var i=this;window.setTimeout(function(){n._$dispatchEvent(i.constructor,"onscrollbottom")},100)}};u.__addSessionMessage=function(t,e){var i="msg-session-"+t;var s=this._$getListInCache(i),e=this.__doSaveItemToCache(e);if(this._$isLoaded(i)){s.push(e);n._$dispatchEvent(this.constructor,"listchange",{key:i,action:"add",data:e,flag:1})}else if(t==d.SHOPID){var a=this._$getListInCache("msg-temp-"+t);a.push(e);return}};u.__deleteSessionMessage=function(t,e){var s="msg-session-"+t,a=this._$getListInCache(s),o=i._$indexOf(a,e);if(0!==a.length){if(o>-1)a.splice(o,1);n._$dispatchEvent(this.constructor,"listchange",{key:s,action:"delete",data:e})}else console.error("list is empty when process deleteSessionMessage",t)};u.__unshiftMsgToList=function(t,e){var s="msg-session-"+t;i._$forEach(e,function(t){if(!t.id||t.id==-1)t.id=i._$uniqueID();this.__doUnshiftToList(s,t)}._$bind(this));n._$dispatchEvent(this.constructor,"listchange",{flag:1,key:s,offset:0,limit:e.length,action:"unshift"})};u.__sendMsgToSDK=function(t,e){var e=i._$merge({category:"notify"},e);parent.postMessage("pkg:"+JSON.stringify(e),"*")};u.__checkLayerOpenAckTimeout=function(t){if(window.localStorage){var e="YSF-"+t+"-LAYER-ACK",i=parseInt(window.localStorage.getItem(e)),n=+new Date;if(Math.abs(n-i)>2100)return!0;else return!1}};u._$getAudioURL=function(t,e){e=e||function(){};var i=this._$getItemInCache(t);if(i)if(!i.content.localId){var n=i.content.url||"";if(!(n.indexOf("nos.netease.com")>=0||n.indexOf("nosdn.127.net")>=0))this.__doSendRequest("msg-audio",{
query:{id:t},onload:function(t){if(200!=t.code)e();else{i.content.url=t.result;e(t.result)}},onerror:function(t){e()}});else e(n)}else e(i.content.localId,"wxAudio");else e()};u.__abortShopFileTrans=function(t){var e=this._$getListInCache("msg-session-"+t);i._$forEach(e,function(e){if("file"==e.type&&e.uploadObj)this.__onAbortFileTrans(t,e.id)}._$bind(this))};u.__cbMessageReceipt=function(t){var e=d._$getSessionById(t.sessionid);if(e){var n=e.shop.id;var s=this._$getListInCache("msg-session-"+n);i._$forEach(s,function(e){if(0==e.read&&e.time<=t.timestamp){e.read=1;if("file"==e.type&&"video"==e.relayType&&e.content.preLoading)return;this.__updateSessionMessage(n,e)}}._$bind(this))}};u.__cbupdateReadStateFromqueue=function(t){var e=d._$getSessionById(t.sid);var n=e.shop.id;var s=this._$getListInCache("msg-session-"+n);i._$forEach(s,function(t){if(!t.ishistory)t.read=0}._$bind(this));var a={sessionid:t.sid,timestamp:t.time};this.__cbMessageReceipt(a)};u.__getHistory=function(t){var e=!d._$isHistoryMsgLoaded(t);var i={appKey:setting.appkey,bid:t,token:d._$getSeqOfHistoryLoad(),limit:20,timestamp:+new Date};var n=d._$getSessionId(t);if(n)i.currentSid=n;var s=this._$getListInCache("msg-session-"+t);if(!e&&s&&s.length){i.mid=s[0].content.mid;i.sid=s[0].content.sid}this.__doSendRequest("msg-session-history",{data:i,isFirst:e,onload:this.__onHistoryLoad._$bind(this,i),onerror:this.__onHistoryLoadErr._$bind(this,i)})};f._$do=c._$do._$bind(null,f._$$Cache);s._$$CustomEvent._$allocate({element:f._$$Cache,event:["listchange","onscrollbottom","oneval","onshuntentries","onmessageshowtip","onkfinput","fileuploadprogress","invalidimage","invalidvideo","onbotmsg","onmorebotlist","onmorebotdetail","onhistorylistload","onhistorylistend","onhistorylistloaderr","ongetworksheetinfo"]});f._$$instrance=f._$$Cache._$allocate();i._$merge(window.ysfCache,{message:f._$$instrance})},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","5f75dc6bf6467f0a29ae4a457d2e9c8c","9e07459e62a4073031ead15e8b2bc7b2","4d3be81e509943f25257cbc97abc448d","9531d121cb4951680b01e0baab61bd6c","35df4ef4567b6cd0275a1b849d2bea8c","aa835e6c54cfdee711ae8d0d1296fa57","0a031608798084dd303ad76241dcc09c","d67add781b37b82c1816b8c159701e56");I$("afcb0696d4ff8679cda8ce504cf09a85",function(t,e,i,n,s,a){i.__handleFileLabelClick=function(){};return i});I$("9ab017081cbe2863900a94b08a15e1f9",function(t,e,i,n,s,a,o){if("gecko"===t._$KERNEL.engine)I$("ed6668f229d1c4f5bde9c6d7038942a6",function(){i.__handleFileLabelClick=function(){var t=function(t){e._$stop(t);e._$getElement(t,"t:label").control.click()};return function(i){e._$addEvent(i,"click",t)}}()});return i},"e7be6ff9122e14c2be65196e9dffe066","be567474249a271e4786c144ccf5f75a","afcb0696d4ff8679cda8ce504cf09a85");I$("9733787c25ceca396cb6e8dcce07ee63",function(t,e,i,n,s,a,o,r,_,d){var c={},l=e._$pushCSSText(".#<uispace>{position:absolute;width:0;height:0;overflow:hidden;}");o._$bind=function(){var t=function(t){var e=c[t];if(!e){e={};c[t]=e}return e};var a=function(t,e){if(e){var i=[];n._$loop(e,function(t,e){i.push('<input type="hidden" name="'+e+'" value="'+t+'">')});t.insertAdjacentHTML("afterBegin",i.join(""))}};var o=function(t,i,n,s,o){var r,_=c[t],d=l+" "+(n||"");i=e._$get(i);if(i){r=e._$create("div",d);i.appendChild(r);e._$dataset(i,"id",t);a(i,s)}else{r=e._$create("form",d);e._$dataset(r,"id",t);a(r,s);(o||document.body).appendChild(r)}_.pid=e._$id(r)};var d=function(t,n){var s=n.accept||"";if(s)s='accept="'+s+'"';var a="";if(n.multiple)a='multiple="true"';var n=c[t],o=t+"-"+n.nmb,r=e._$html2node('<input type="file" '+a+" "+s+' contenteditable="false" id="'+o+'"/>');n.nmb++;e._$get(n.pid).appendChild(r);i._$addEvent(r,"change",f);return o};var f=function(t){var n=i._$getElement(t),s=n.id,a=s.split("-"),o=c[a[0]];if(n.value){if(o.multiple)e._$get(o.lab).htmlFor=d(a[0],o);if(!n.name){var r="";n.name=o.name+r}o.onchange({id:s,form:n.form,target:e._$get(o.lab)})}};return function(i,a){i=e._$get(i);if(i&&"LABEL"==i.tagName){e._$dumpCSSText();var c=n._$uniqueID(),l=t(c);a=a||r;o(c,a.form,a.clazz,a.param,e._$get(a.parent));l.nmb=0;l.name=a.name||"file";l.lab=e._$id(i);l.accept=a.accept||"";l.multiple=!!a.multiple;l.onchange=a.onchange||_;i.htmlFor=d(c,l);s.__handleFileLabelClick(i);return c}}}();o._$get=function(t){var i=c[t];if(i){var n=e._$get(i.pid);if(n){if("FORM"!=n.tagName)n=n.parentNode;return n}}};o._$unbind=function(t){var i=c[t];if(i){e._$remove(i.pid);delete c[t]}};o._$selectable=function(){var t;return function(){if(null==t){var e=document.createElement("input");e.type="file";t=!e.disabled}return t}}();a._$merge({_$bind:o._$bind});if(!0){var a=t.P("nej.e");a._$file=o._$bind;a._$getFileForm=o._$get;a._$removeFileForm=o._$unbind}return o},"a2e1fe5ad329e35f3966d36c90672926","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","9ab017081cbe2863900a94b08a15e1f9","b8b996468e25a07cbdc7f02ea79cb525");I$("5a8b8119c6868b61245ce3b62030a8bd",function(t,e,i,n,s,a){i.__setCursorPosition=function(t,e){t.selectionEnd=e.end||0;t.selectionStart=e.start||0;t.focus()};i.__getCursorPosition=function(t){t.focus();return{end:t.selectionEnd,start:t.selectionStart}};i.__getCursorPXPosition=function(e){var i=document.createElement("div");t._$style(i,{position:"absolute",visibility:"hidden",whiteSpace:"pre-wrap",appearance:"textarea",font:t._$getStyle(e,"font"),display:t._$getStyle(e,"display"),padding:t._$getStyle(e,"padding"),wordWrap:t._$getStyle(e,"wordWrap"),textAlign:t._$getStyle(e,"textAlign"),letterSpacing:t._$getStyle(e,"letterSpacing"),top:0,left:0,width:e.clientWidth+"px",height:e.clientHeight+"px"});i.innerText=e.value;var n=document.createElement("span");i.appendChild(n);document.body.appendChild(i);var s={width:0,top:n.offsetTop,left:n.offsetLeft,height:n.offsetHeight};t._$remove(i);return s};return i},"5fb495f256a5dcde2a92e5fe919a6422","e7be6ff9122e14c2be65196e9dffe066");I$("1161570bc698f1579fd47d12292520bd",function(t,e,i,n,s,a,o){if("trident"===e._$KERNEL.engine)I$("258568c598823a5f768a0f4059b47613",function(){t.__getCursorPXPosition=function(t){t.focus();var e=document.selection.createRange(),n=i._$getPageBox(),s=i._$offset(t);return{top:e.boundingTop-s.y+n.scrollTop,left:e.boundingLeft-s.x+n.scrollLeft,width:e.boundingWidth,height:e.boundingHeight}}});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="4.0")I$("8812b41ca6bbd9a12069e5fa57a62ea7",function(){t.__setCursorPosition=function(t,e){var i=t.createTextRange();i.collapse(!0);i.moveStart("character",e.start);i.moveEnd("character",e.end-e.start);i.select();t.focus()};t.__getCursorPosition=function(t){var e=document.selection.createRange();var i=t.createTextRange();i.moveToBookmark(e.getBookmark());var n=t.createTextRange();n.collapse(!0);n.setEndPoint("EndToStart",i);var s=n.text.length;return{start:s,end:s+e.text.length}}});return t},"5a8b8119c6868b61245ce3b62030a8bd","e7be6ff9122e14c2be65196e9dffe066","5fb495f256a5dcde2a92e5fe919a6422");I$("b8c452dcf5e5dd56a4db87471ce5da65",function(t,e,i,n,s,a,o,r,_){var d={};a._$cursor=d._$cursor=function(t,n){t=e._$get(t);if(!t)return{start:0,end:0};if(i._$isNumber(n))n={start:n,end:n};if(null!=n){if(null==n.end)n.end=n.start||0;s.__setCursorPosition(t,n)}else n=s.__getCursorPosition(t);return n};a._$coordinate=d._$coordinate=function(t){t=e._$get(t);if(!t)return{top:0,left:0,width:0,height:0};else return s.__getCursorPXPosition(t)};n._$merge(d);if(!0)t.copy(t.P("nej.e"),a);return a},"a2e1fe5ad329e35f3966d36c90672926","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","b8b996468e25a07cbdc7f02ea79cb525","1161570bc698f1579fd47d12292520bd");I$("fff431d0af35316869574e6c43d8f13e",function(t,e,i,n,s,a,o,r,_,d){a._$$Draggable=e._$klass();d=a._$$Draggable._$extend(s._$$EventTarget);d.__reset=function(t){this.__super(t);this.__overflow=!!t.overflow;this.__body=i._$get(t.body);this.__mbar=i._$get(t.mbar)||this.__body;this.__view=i._$get(t.view)||i._$getPageBox();this.__direction=parseInt(t.direction)||0;this.__doInitDomEvent([[document,"mouseup",this.__onDragEnd._$bind(this)],[document,"mousemove",this.__onDragging._$bind(this)],[this.__mbar,"mousedown",this.__onDragStart._$bind(this)]])};d.__destroy=function(){this.__super();delete this.__body;delete this.__mbar;delete this.__view};d.__getMaxRange=function(){return{x:this.__view.clientWidth-this.__body.offsetWidth,y:this.__view.clientHeight-this.__body.offsetHeight}};d.__onDragStart=function(t){n._$stop(t);if(!this.__offset){this.__offset={x:n._$pageX(t),y:n._$pageY(t)};this.__maxbox=this.__getMaxRange()}};d.__onDragging=function(t){if(this.__offset){n._$stop(t);var e={x:n._$pageX(t),y:n._$pageY(t)};var s=e.x-this.__offset.x,a=e.y-this.__offset.y,o=parseInt(i._$getStyle(this.__body,"top"))||0,r=parseInt(i._$getStyle(this.__body,"left"))||0,_={top:o+a,left:r+s};this.__offset=e;this._$setPosition(_)}};d.__onDragEnd=function(t){if(this.__offset){delete this.__maxbox;delete this.__offset;this._$dispatchEvent("ondragend",this._$getPosition())}};d._$setPosition=function(t){if(!this.__overflow){var e=this.__maxbox||this.__getMaxRange();t.top=Math.min(e.y,Math.max(0,t.top));t.left=Math.min(e.x,Math.max(0,t.left))}t.top=Math.round(t.top);t.left=Math.round(t.left);this._$dispatchEvent("onbeforechange",t);var i=this.__body.style;if(0==this.__direction||2==this.__direction)i.top=t.top+"px";if(0==this.__direction||1==this.__direction)i.left=t.left+"px";this._$dispatchEvent("onchange",t)};d._$getPosition=function(){return{left:parseInt(i._$getStyle(this.__body,"left"),10)||0,top:parseInt(i._$getStyle(this.__body,"top"),10)||0}};a._$$Dragger=a._$$Draggable;if(!0)t.copy(t.P("nej.ut"),a);return a},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","e32a3e597220aa11cee4e5c41da1a3ff");I$("92e10803b2ec5004ac74b53d700235ef",function(t,e,i,n,s,a,o,r){var _;s._$$Animation=e._$klass();
_=s._$$Animation._$extend(i._$$EventTarget);_.__reset=function(t){this.__super(t);this.__end=t.to||a;this.__begin=t.from||{};this.__delay=Math.max(0,parseInt(t.delay)||0)};_.__destroy=function(){this.__super();this._$stop();if(this.__dtime){window.clearTimeout(this.__dtime);delete this.__dtime}delete this.__end;delete this.__begin};_.__onAnimationFrame=function(t){if(this.__begin){if((""+t).indexOf(".")>=0)t=+new Date;if(!this.__doAnimationFrame(t))this.__timer=n.requestAnimationFrame(this.__onAnimationFrame._$bind(this));else this._$stop()}};_.__doAnimationFrame=o;_._$play=function(){var t=function(){this.__dtime=window.clearTimeout(this.__dtime);this.__begin.time=+new Date;this.__timer=n.requestAnimationFrame(this.__onAnimationFrame._$bind(this))};return function(){this.__dtime=window.setTimeout(t._$bind(this),this.__delay)}}();_._$stop=function(){this.__timer=n.cancelAnimationFrame(this.__timer);this._$dispatchEvent("onstop")};if(!0)t.copy(t.P("nej.ut"),s);return s},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","e32a3e597220aa11cee4e5c41da1a3ff","424f8506ac4d9ad6d34fecf84130c1b2");I$("5ef8c80997fb8b1f484cf4623791769c",function(t,e,i,n,s,a,o,r){var _;s._$$AnimBezier=e._$klass();_=s._$$AnimBezier._$extend(n._$$Animation);_.__reset=function(t){this.__super(t);this.__duration=t.duration||200;this.__epsilon=1/(200*this.__duration);this.__doParseTiming(t.timing);this.__doCalPolynomialCoefficients()};_.__destroy=function(){this.__super();delete this.__pointer;delete this.__coefficient};_.__doParseTiming=function(){var t=/^cubic\-bezier\((.*?)\)$/i,e=/\s*,\s*/i,n={linear:[0,0,1,1],ease:[.25,.1,.25,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[0,0,.58,1]};var s=function(t,e,i){i[e]=parseFloat(t)};return function(a){a=(a||"").toLowerCase();this.__pointer=n[a];if(t.test(a)){this.__pointer=RegExp.$1.split(e);i._$forEach(this.__pointer,s)}if(!this.__pointer)this.__pointer=n.ease}}();_.__doCalPolynomialCoefficients=function(){var t=this.__pointer,e=3*t[0],i=3*(t[2]-t[0])-e,n=1-e-i,s=3*t[1],a=3*(t[3]-t[1])-s,o=1-s-a;this.__coefficient={ax:n,ay:o,bx:i,by:a,cx:e,cy:s}};_.__doCalCubicBezierAtTime=function(){var t=function(t,e){return((e.ax*t+e.bx)*t+e.cx)*t};var e=function(t,e){return((e.ay*t+e.by)*t+e.cy)*t};var i=function(t,e){return(3*e.ax*t+2*e.bx)*t+e.cx};var n=function(e,n,s){var a,o,r,_,d,c;for(r=e,c=0;c<8;c++){_=t(r,s)-e;if(Math.abs(_)<n)return r;d=i(r,s);if(Math.abs(d)<1e-6)break;r-=_/d}a=0;o=1;r=e;if(r<a)return a;if(r>o)return o;for(;a<o;){_=t(r,s);if(Math.abs(_-e)<n)return r;if(e>_)a=r;else o=r;r=.5*(o-a)+a}return r};return function(t){return e(n(t/this.__duration,this.__epsilon,this.__coefficient),this.__coefficient)}}();_.__doAnimationFrame=function(t){var e=t-this.__begin.time,n=this.__doCalCubicBezierAtTime(e),s=i._$fixed(this.__begin.offset*(1-n)+this.__end.offset*n,2),a=!1;if(e>=this.__duration){s=this.__end.offset;a=!0}this._$dispatchEvent("onupdate",{offset:1*s});return a};_._$stop=function(){this._$dispatchEvent("onupdate",{offset:this.__end.offset});this.__super()};if(!0)t.copy(t.P("nej.ut"),s);return s},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","92e10803b2ec5004ac74b53d700235ef");I$("dc0cab8a60aa93e957862f1630512b15",function(t,e,i,n,s,a,o,r){var _;s._$$AnimEaseInOut=e._$klass();_=s._$$AnimEaseInOut._$extend(n._$$AnimBezier);_.__reset=function(t){t=i._$merge({},t);t.timing="easeinout";this.__super(t)};if(!0)t.copy(t.P("nej.ut"),s);return s},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","5ef8c80997fb8b1f484cf4623791769c");I$("49ac074958f5a8b389bc9d25cc2789c4",function(t){t.__getOverflowParent=function(t){return t}});I$("f4d68ba12369b9853785ed74485a3ea4",function(t,e){if("trident"===t._$KERNEL.engine)I$("361db6e97f42244e4f3856bb7dfb4bc6",function(){e.__getOverflowParent=function(t){var e=t;if("BODY"==e.tagName)e=e.ownerDocument.documentElement;return e}});return e},"e7be6ff9122e14c2be65196e9dffe066","49ac074958f5a8b389bc9d25cc2789c4");I$("89c31541315e0ecb70cdfbc8c34c3d55",function(t,e,i,n,s,a,o,r,_,d,c,l,f){var u;d._$$SimpleScroll=e._$klass();u=d._$$SimpleScroll._$extend(a._$$EventTarget);u.__init=function(){this.__aopt={to:{},from:{},duration:500,onstop:this.__doStopBarOpacity._$bind(this),onupdate:this.__doUpdateBarOpacity._$bind(this)};this.__dopt={x:{direction:1,ondragend:this.__onUpdateBarEnd._$bind(this,"x"),onbeforechange:this.__onBeforeUpdateBar._$bind(this,"x")},y:{direction:2,ondragend:this.__onUpdateBarEnd._$bind(this,"y"),onbeforechange:this.__onBeforeUpdateBar._$bind(this,"y")}};this.__dragger={};this.__super()};u.__reset=function(){var e={x:{min:0,speed:1,step:50,interval:50,left:0,right:0,hover:"js-hover",sb:"scrollWidth",cb:"clientWidth",ob:"offsetWidth",sr:"scrollLeft",ss:"width",sp:"left",dr:"right"},y:{min:0,speed:1,interval:50,step:50,top:0,bottom:0,hover:"js-hover",sb:"scrollHeight",cb:"clientHeight",ob:"offsetHeight",sr:"scrollTop",ss:"height",sp:"top",dr:"bottom"}};var n=function(n,s){if(!(s||c).body)s={body:s};var a=t.X(t.X({},e[n]),s);a.body=i._$get(a.body);if(a.body&&a.track){if(":parent"==a.track)a.track=a.body.parentNode;a.track=i._$get(a.track)}if(!a.min)a.min=!a.body?10:a.body[a.ob]||10;return a};var s=function(t,e){if(e){var i=this.__dopt[t];i.body=e;i.view=this.__parent;this.__dragger[t]=o._$$Dragger._$allocate(i)}};return function(t){this.__super(t);this.__bar={x:n("x",t.xbar),y:n("y",t.ybar)};this.__parent=i._$get(t.parent);this.__doInitDomEvent([[this.__parent,"mousewheel",this.__onMouseWheel._$bind(this)],[this.__parent,"scroll",this.__doSyncScrollBar._$bind(this)],[this.__parent,"mouseover",this.__doFixScrollBar._$bind(this)],[this.__bar.x.track,"mousedown",this.__onTrackDown._$bind(this,"x")],[this.__bar.y.track,"mousedown",this.__onTrackDown._$bind(this,"y")],[this.__bar.x.track,"mousewheel",this.__onMouseWheel._$bind(this)],[this.__bar.y.track,"mousewheel",this.__onMouseWheel._$bind(this)]]);var e=i._$get(t.trigger);if(e){this.__doInitDomEvent([[t.trigger,"mouseenter",this.__onMouseEnter._$bind(this)],[t.trigger,"mouseleave",this.__onMouseLeave._$bind(this)]]);this.__doUpdateBarOpacity({offset:0})}else this._$resize();s.call(this,"x",this.__bar.x.body);s.call(this,"y",this.__bar.y.body)}}();u.__destroy=function(){var t=function(t,e,i){t._$recycle();delete i[e];var n=this.__dopt[e];delete n.view;delete n.body};var e=function(t,e,n){if(t.body){var s={};s[t.ss]="";s[t.sp]="";i._$style(t.body,s);delete t.body}};return function(){this.__super();delete this.__isout;delete this.__parent;delete this.__dragging;this.__doStopBarOpacity();s._$loop(this.__dragger,t._$bind(this));s._$loop(this.__bar,e._$bind(this));delete this.__bar}}();u.__getOverflowParent=function(){return _.__getOverflowParent(this.__parent)};u.__doResetBarSize=function(t){var e=this.__getOverflowParent(),n=e[t.sb],s=e[t.cb],a=n-s,s=s-t[t.sp]-t[t.dr],o=n-s,r={},_={};if(a<=0){t.ratio=0;_.visibility="hidden";r[t.ss]=s+"px"}else{var d=Math.ceil(Math.max(t.min,s-s/n*o));_.visibility="visible";r[t.ss]=d+"px";t.max=Math.ceil(s-d+t[t.sp]);t.ratio=(s-d)/o}t.delta=0;if(t.body)t.delta=t.body[t.ob]-t.body[t.cb];i._$style(t.track||t.body,_);i._$style(t.body,r)};u.__doResetBarPosition=function(t,e){var n=this.__getOverflowParent();if(0!=e)n[t.sr]-=e*t.speed;if(t.body){var s=n[t.sr],a=Math.ceil(s*t.ratio)-t.delta+t[t.sp];i._$setStyle(t.body,t.sp,a+"px")}};u.__doSyncScrollBar=function(){if(!this.__dragging)this._$resize()};u.__doUpdateScrollBar=function(t,e){this.__doResetBarPosition(this.__bar.y,e);this.__doResetBarPosition(this.__bar.x,t)};u.__doAnimScrollBar=function(){this.__doStopBarOpacity();var t=this.__bar.y,e=t.track||t.body;if(!e){t=this.__bar.x;e=t.track||t.body}this.__aopt.from.offset=i._$getStyle(e,"opacity");this.__anim=r._$$AnimEaseInOut._$allocate(this.__aopt);this.__anim._$play()};u.__doUpdateBarOpacity=function(t){var e=t.offset;i._$setStyle(this.__bar.x.track||this.__bar.x.body,"opacity",e);i._$setStyle(this.__bar.y.track||this.__bar.y.body,"opacity",e)};u.__doStopBarOpacity=function(){if(this.__anim){this.__anim._$recycle();delete this.__anim}};u.__onMouseWheel=function(t){var e=this.__getOverflowParent(),i=e.scrollTop,s=e.scrollLeft;this.__doUpdateScrollBar(t.wheelDeltaX||0,t.wheelDeltaY||t.wheelDelta||0);i=e.scrollTop!=i;s=e.scrollLeft!=s;if(i||s)n._$stop(t)};u.__onMouseEnter=function(t){this.__isout=!1;this._$resize();this.__aopt.delay=0;this.__aopt.to.offset=.6;this.__doAnimScrollBar()};u.__onMouseLeave=function(t){this.__isout=!0;if(!this.__dragging){this.__aopt.delay=500;this.__aopt.to.offset=0;this.__doAnimScrollBar()}};u.__onTrackDown=function(){var t={x:function(t){this.__doUpdateScrollBar(t,0)},y:function(t){this.__doUpdateScrollBar(0,t)}};var e,s,a;var o=function(t){a=1;s=null;e=window.clearTimeout(e);n._$delEvent(t.track,"mouseup",s)};var r=function(_,d,c){var l=this.__bar[_],f=parseInt(i._$getStyle(l.body,l.sp)),u=f+c;if(!(f<=d&&d<=u)){if(!s){s=o._$bind(this,l);n._$addEvent(l.track,"mouseup",s)}t[_].call(this,(d<f?1:-1)*l.step*a);e=window.setTimeout(r._$bind(this,_,d,c),l.interval);a++}else o(l)};return function(t,e){var s=this.__bar[t],a=i._$offset(s.track)[t],_=n._$page(e)[t],d=s.body[s.ob];o(s);r.call(this,t,_-a,d)}}();u.__onBeforeUpdateBar=function(t,e){this.__dragging=!0;var n=this.__getOverflowParent(),s=this.__bar[t],a=s[s.sp],o=Math.max(a,Math.min(s.max,e[s.sp]));n[s.sr]=Math.ceil((o-a)/s.ratio);e[s.sp]=o;i._$addClassName(s.track,s.hover)};u.__onUpdateBarEnd=function(t){this.__dragging=!1;if(this.__isout)this.__onMouseLeave();var e=this.__bar[t];i._$delClassName(e.track,e.hover)};u.__doFixScrollBar=function(t){this._$resize()};u._$resize=function(){this.__doResetBarSize(this.__bar.x);this.__doResetBarSize(this.__bar.y);this.__doUpdateScrollBar(0,0)};u._$show=function(){this.__onMouseEnter()};u._$hide=function(){this.__onMouseLeave()};if(!0)t.copy(t.P("nej.ut"),d);return d},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","e32a3e597220aa11cee4e5c41da1a3ff","fff431d0af35316869574e6c43d8f13e","dc0cab8a60aa93e957862f1630512b15","f4d68ba12369b9853785ed74485a3ea4");
I$("d6a513a193e04832841bbb3ed29f5ee9",".#<uispace>-parent{position:relative;}\n");I$("c968cae49ff162b7845bbb5f3d454cb0",'<textarea name="ntp" id="#<sbBody>">\n  <div class="u-scrollbar"><span class="thumb">&nbsp;</span></div>\n</textarea>');I$("c711308f00adca75206c9dc3966a29d2",function(t,e,i,n,s,a,o,r,_){r._$$Scrollbar=t._$klass();_=r._$$Scrollbar._$extend(s._$$Abstract);_.__init=function(){this.__sopt={ybar:{}};this.__super()};_.__reset=function(t){var n=e._$get(t.parent);if(n){var s=t.container||n.parentNode;this.__super({parent:s,clazz:"m-scrollbar"});this.__sopt.parent=n;this.__scrollbar=i._$$SimpleScroll._$allocate(this.__sopt);setTimeout(function(){if(this.__scrollbar)this.__scrollbar._$resize()}._$bind(this),1e3);this.__doInitDomEvent([[t.sbody||this.__sopt.parent,"scroll",this.__doShowScrollBar._$bind(this)]])}};_.__destroy=function(){delete this.__sopt.parent;delete this.__sopt.trigger;this.__doClearComponent();this.__super()};_.__initXGui=function(){var t=e._$pushCSSText(a),i=n._$parseUITemplate(o);return function(){this.__seed_css=t;this.__seed_html=i.sbBody}}();_.__initNode=function(){this.__super();this.__sopt.ybar.track=this.__body;this.__sopt.ybar.body=e._$getChildren(this.__body)[0]};_.__doShowScrollBar=function(){if(this.__stimer)window.clearTimeout(this.__stimer);if(this.__scrollbar)this.__scrollbar._$show()};_.__doHideScrollBar=function(){this.__stimer=window.clearTimeout(this.__stimer);if(this.__scrollbar)this.__scrollbar._$hide()};_._$resize=function(){if(this.__scrollbar)this.__scrollbar._$resize()}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","89c31541315e0ecb70cdfbc8c34c3d55","d252039c36767cb4f534ca3f91188796","8fe733a225a830dc6b1da5866dcaf23c","d6a513a193e04832841bbb3ed29f5ee9","c968cae49ff162b7845bbb5f3d454cb0");!function(t,e,i){function n(t){t=t||{};if(t.macros)this._macros=t.macros;this._links={};this._rules={};this.TRUNK=null;this.cache=q(t.maxCache||200);this.cache.set("",[[]])}function s(t){return rt.parse(t)}function a(t,e){return e?t.nodeName===e:1===t.nodeType}function o(t,e){var t=t.firstChild;return!t||a(t,e)?t:d(t,e)}function r(t,e){var t=t.lastChild;return!t||a(t,e)?t:_(t,e)}function _(t,e){for(;t=t.previousSibling;)if(a(t,e))return t;return t}function d(t,e){for(;t=t.nextSibling;)if(a(t,e))return t;return t}function c(t,e){var i=dt[e];if(i)return"function"==typeof i?i(t):t[i];if(lt)return t.getAttribute(e);var n=t.getAttributeNode(e);return"boolean"==typeof t[e]?t[e]?e:null:n&&n.specified?n.value:null}function l(t){for(var e=t.length;e--;){var i=t[e];t.splice(e,1,null);if(~t.indexOf(i))t.splice(e,1);else t.splice(e,1,i)}return t}function f(t,e){if(t&&e){var i=t.nextSibling;for(;i;){if(i===e)return-1;i=i.nextSibling}}return t?1:-1}function u(t){return l(t.sort(ft))}function h(t,e){var i,n,s,a;if(t){s=e?"type":"child";i=d;n=_;a=o}else{s="last"+(e?"type":"child");n=d;i=_;a=r}return function(t,o){var r=ht[s];if(t===_t)return!1;var _=ut(t),d=t.parentNode,c=o.step>0?i:n,l=o.step,f=o.start,u=e&&t.nodeName;if(null===l)return!1;if(!r[_]){var h=a(d,u),p=0;do{r[ut(h)]=++p;ht.length++}while(h=i(h,u))}var m=r[_];if(0===l)return m===f;else return(m-f)/l>=0&&(m-f)%l===0}}function p(){if(ht.length)ht={child:{},lastchild:{},type:{},lasttype:{},length:0}}function m(t,e,i){var n;for(var s in e)if(i!==s&&(n=mt[s])&&!n(t,e[s]))return!1;return!0}function g(t,e,i){var n=e.length,s=e[n-1];if(!m(t,s,i))return!1;else{if(1==n)return!0;var a=e[n-2],o=gt.combos[a.combo],r=bt[n-2],_=o(t,r);if(_)return!0;else return!1}}function b(t){return function(i){if(i==_t||null==i||i==e)return null;else return g(i,t)}}function v(t){var e=[];for(var i=0,n=t.length;i<n;i++)e.push(b(t.slice(0,i+1)));return e}function $(t,e,i){if(!e.length)return t;var n=bt;bt=v(e);for(var s=t.length;s--;)if(!g(t[s],e,i))t.splice(s,1);bt=n;return t}function y(t,e){var i,n,s=t[t.length-1];if(s.id){i=pt.byId(s.id);n="id"}else if(s.classList&&s.classList.length&&pt.byClassName){i=pt.byClassName(s.classList,e);n="classList"}else{i=pt.byTagName(s.tag||"*",e);n="tag"}if(!i.length)return i;else return $(i,t,n)}function x(t,e){if(!t[0][0])return[];var i=[],n=0;for(var s=0,a=t.length;s<a;s++){var o=t[s],r=o.length,_=o[r-1],d=y(o,e);if(d&&d.length)n++;if(!i)i=d;else i=i.concat(d)}p();if(n>1)u(i);return i}function w(t,i){var n=s(t);var a=x(n,i||e);return a}function S(t,i){var n;if(vt&&!j.debug)try{n=(i||e).querySelector(t)}catch(s){n=w(t,i)[0]}else n=w(t,i)[0];return n}function C(t,i){var n;if(vt&&!j.debug)try{n=A((i||e).querySelectorAll(t))}catch(s){n=w(t,i)}else n=w(t,i);return n}function I(t,e){if(!t||1!==t.nodeType)return!1;var i=s(e),n=i.length;if(!i[n-1][0])return!1;for(;n--;)if(E(t,i[n]))return!0;return!1}function E(t,e){var i=e.length;if(!m(t,e[i-1]))return!1;else return 1===$([t],e.slice(0)).length}function k(t){return function(e,i){var n=i.split(/\s+of\s+/);if(n.length<2)throw Error("no 'of' keyword in nth-match\"s selector");var s=nt(n[0]),a=n[1],o=e.parentNode[t?"firstChild":"lastChild"],r=t?"nextSibling":"previousSibling",_=s.step,d=s.start,c=0;if(!I(e,a))return!1;if(null===_)return!1;do{if(1===o.nodeType&&j.matches(o,a))c++;if(o===e)break}while(o=o[r]);if(0===_)return c===d;else return(c-d)/_>=0&&(c-d)%_===0}}var j=function(t,e){return C(t,e)},T={};var M=Array.prototype,N=Object.prototype,L=String.prototype,D=Function.prototype,B=M.slice,O=e.body,P=e.createElement("div"),A=function(t){return B.call(t)},R=function(t){return null==t?String(t):N.toString.call(t).slice(8,-1).toLowerCase()},F=function(t,e,i){for(var n in e)if(null==t[n]||i)t[n]=e[n]},q=function(t){var e=[],n={};return{set:function(t,i){if(e.length>this.length)delete n[e.shift()];n[t]=i;e.push(t);return i},get:function(t){if(t===i)return n;else return n[t]},length:t,len:function(){return e.length}}},H=function(t){return function(e,i){if("object"==R(e))for(var n in e)t.call(this,n,e[n]);else t.call(this,e,i);return this}},U=function(t){try{return t()}catch(e){return!1}finally{P=document.createElement("div")}};try{B.call(e.getElementsByTagName("body"))}catch(z){A=function(t){var e=[],i=t.length;for(var n=0;n<i;n++)e.push(t[n]);return e}}var W=/^\s+|\s+$/g;L.trim=L.trim||function(){return this.replace(W,"")};D.bind=D.bind||function(t,e){e=B.call(arguments,1);var i=this;return function(){return i.apply(t,e.concat(B.call(arguments)))}};M.indexOf=M.indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(t===this[e])return e;return-1};var K=/\(\?\!|\(\?\:/,V=function(t){var e=0,i=0,n=t.length,s=t.split(K).length-1;for(;n--;){var a=t.charAt(n);if(0===n||"\\"!==t.charAt(n-1)){if("("===a)e++;if(")"===a)i++}}if(e!==i)throw t+"中的括号不匹配";else return e-s},G=/\\(\d+)/g,J=function(t,e){return t},X=Object.keys||function(t){var e=[];for(var i in t)if(t.hasOwnProperty(i))e.push(i);return e},Y=function(t){var e=t.reg;if("regexp"===R(e))e=e.toString().slice(1,-1);t.regexp=e.replace(Z,function(t,e){if(e in st)return st[e];else throw new Error('can"t replace undefined macros:'+e)});return t},Q=function(t){for(var e in t)if(t.hasOwnProperty(e))Y(t[e]);return t};F(n.prototype,{parse:function(t){t=clean(t);if(e=this.cache.get(t))return e;var e=this.parsed=[[null]];var i=this.input=t;var n=this.TRUNK;var s;for(;s!=(i=i.replace(n,this._process.bind(this)));)s=i;if(""!==i)this.error(i);return this.cache.set(t,e)},on:function(t){if("string"===R(t)){var e={};e[t]=arguments[1];t=e}for(var n in t){var s=t[n];if("object"!==R(s))s={regexp:s};var a=s.regexp;if("regexp"===R(a))s.regexp=a.toString().slice(1,-1);if(s.order===i)s.order=1;this._rules[n]=s}this.setup();return this},off:function(t){if("array"===R(t))for(var e=t.length;e--;)this.off(t[e]);else if(this._rules[t])delete this._rules[t];return this},current:function(){var t=this.parsed;var e=t[t.length-1],i=e.length;return e[i-1]||(e[i-1]={tag:"*"})},error:function(t){throw Error("输入  "+this.input+"  含有未识别语句:"+t||"")},clone:function(t){return(new n).on(this._rules)},_process:function(){var t=this._links,e=this._rules,i=B.call(arguments);for(var n in t){var s=t[n],a=s[1],o=parseInt(s[0]);if(i[o]&&(rule=e[n])){rule.action.apply(this,i.slice(o,o+a));return""}}return""},setup:function(){Q(this._rules);var t=1,e=[],i=this._rules,n=this._links,s=X(i).sort(function(t,e){return i[t].order>=i[e].order}),a=s.length;for(;a--;){var o=s[a],r=i[o],_=V(r.regexp)+1;if(r.filter&&!mt[o])mt[o]=r.filter;n[o]=[t,_];var d=J(r.regexp,t-1);t+=_;e.push(d)}this.TRUNK=new RegExp("^(?:("+e.join(")|(")+"))");return this}});var Z=/\{\{([^\}]*)\}\}/g,tt=/^(?:(\d+)|([+-]?\d*)?n([+-]\d+)?)$/,et=/^(nth)[\w-]*(-of-type|-child)/,it=q(100),nt=function(t){var e,i,n;if(!t||!(t=t.replace(/\s+/g,"")))return{start:1,step:0};if(n=it.get(t))return n;if("even"==t){i=2;e=2}else if("odd"==t){e=2;i=1}else{n=t.match(tt);if(!n)e=null;else if(n[1]){e=0;i=parseInt(n[1])}else{if("-"==n[2])n[2]="-1";e=n[2]?parseInt(n[2]):1;i=n[3]?parseInt(n[3]):0}}if(i<1)if(e<1)e=null;else i=- -i%e+e;return it.set(t,{start:i,step:e})};var st={split:"\\s*,\\s*",operator:"[*^$|~!]?=",combo:"[>\\s+~](?!=)",word:"[\\\\\\w\\u00A1-\\uFFFF-]"},at={split:{reg:"{{split}}",action:function(t){this.parsed.push([null])},order:0},id:{reg:"#({{word}}+)",action:function(t,e){this.current().id=e}},tag:{reg:"\\*|[a-zA-Z-]\\w*",action:function(t){this.current().tag=t.toLowerCase()}},classList:{reg:"\\.({{word}}+)",action:function(t,e){var i=this.current(),n=i.classList||(i.classList=[]);n.push(e)}},pesudos:{reg:":({{word}}+)(?:\\(([^\\(\\)]*|(?:\\([^\\)]+\\)|[^\\(\\)]*)+)\\))?",action:function(t,e,i){var n=this.current(),s=n.pesudos||(n.pesudos=[]),e=e.toLowerCase(),a={name:e};if(i)i=i.trim();if(et.test(e))i=nt(i);if(i)a.param=i;s.push(a)}},attributes:{reg:"\\[\\s*({{word}}+)(?:({{operator}})['\"]?([^'\"\\[]+)['\"]?)?\\s*\\]",action:function(t,e,i,n){var s=this.current(),a=s.attributes||(s.attributes=[]);var o={};a.push({key:e,operator:i,value:n})}},combo:{reg:"\\s*({{combo}})\\s*",action:function(t,e){var i=this.parsed,n=i[i.length-1];this.current().combo=e;n.push(null)},order:0}};var ot=new RegExp("\\s*(,|"+st.combo+"|"+st.operator+")\\s*","g");
clean=function(t){return t.trim().replace(/\s+/g," ").replace(ot,"$1")};var rt=new n;rt.on(at);var _t=e.documentElement||e;var dt={"for":"htmlFor",href:function(t){return"href"in t?t.getAttribute("href",2):t.getAttribute("href")},type:function(t){return"type"in t?t.getAttribute("type"):t.type}};var ct=U(function(){P.appendChild(e.createComment(""));return!P.getElementsByTagName("*").length||"number"!=typeof e.getElementsByTagName("input").length});var lt=U(function(){P.innerHTML="<select></select>";var t=R(P.lastChild.getAttribute("multiple"));return"boolean"!==t&&"string"!==t});var ft=e.compareDocumentPosition?function(t,e){if(!t.compareDocumentPosition||!e.compareDocumentPosition)return 0;else return 4&t.compareDocumentPosition(e)?-1:t===e?0:1}:"sourceIndex"in e?function(t,e){if(!t.sourceIndex||!e.sourceIndex)return 0;else return t.sourceIndex-e.sourceIndex}:function(t,i){var n=0,s=[t],a=[i],o=t.parentNode,r=i.parentNode,_=o;if(t===e)return-1;else if(i===e)return 1;else if(!o&&!r)return 0;else if(!r)return-1;else if(!o)return 1;else if(o===r)return f(t,i);for(;_;){s.unshift(_);_=_.parentNode}_=r;for(;_;){a.unshift(_);_=_.parentNode}for(;s[n]===a[n];)n++;return f(s[n],a[n])};var ut=function(t){var e=0;return function(i){return i._uid||(i._uid=t+e++)}}("nes_"+(+new Date).toString(36));var ht={length:1};p();var pt={byId:function(t){var i=e.getElementById(t);return i?[i]:[]},byClassName:e.getElementsByClassName?function(t,i){t=t.join(" ");return A((i||e).getElementsByClassName(t))}:null,byTagName:ct?function(t,i){var n=(i||e).getElementsByTagName(t);return A(n)}:function(t,i){var n=(i||e).getElementsByTagName(t);var s,a=[],o=0;for(;s=n[o];o++)if(1===s.nodeType)a.push(s);return a}};var mt={id:function(t,e){return t.id===e},classList:function(t,e){var i=e.length,n=" "+t.className+" ";for(;i--;)if(n.indexOf(" "+e[i]+" ")===-1)return!1;return!0},tag:function(t,e){if("*"==e)return!0;else return t.tagName.toLowerCase()===e},pesudos:function(t,e){var i=e.length,n=gt["pesudos"];for(;i--;){var s=e[i],a=s.name,o=n[a];if(!o)throw Error("不支持的伪类:"+a);if(!o(t,s.param))return!1}return!0},attributes:function(t,e){var i=e.length,n=gt["operators"];for(;i--;){var s=e[i],a=s["operator"],o=n[a],r=c(t,s.key);if(null!==r)if(a){if(!o)throw Error("不支持的操作符:"+a);if(!o(s.value,r+""))return!1}else;else if("!="!==a)return!1}return!0}};var gt={combos:{">":function(t,e){var i=t.parentNode;if(e(i))return i},"~":function(t,e){var i=_(t);for(;i;){if(e(i))return i;i=_(i)}}," ":function(t,e){var i=t.parentNode;for(;i;){var n=e(i);if(n)return i;if(null===n)return null;i=i.parentNode}return null},"+":function(t,e){var i=_(t);if(i&&e(i))return i}},operators:{"^=":function(t,e){if(null==e)return!1;else return 0===e.indexOf(t)},"=":function(t,e){return e===t},"~=":function(t,e){if(null==e)return!1;else return~(" "+e+" ").indexOf(t)},"$=":function(t,e){return e.substr(e.length-t.length)===t},"|=":function(t,e){return~("-"+e+"-").indexOf("-"+t+"-")},"*=":function(t,e){return~e.indexOf(t)},"!=":function(t,e){return e!==t}},pesudos:{not:function(t,e){return!I(t,e)},matches:function(t,e){return I(t,e)},"nth-child":h(!0,!1),"nth-last-child":h(!1,!1),"nth-of-type":h(!0,!0),"nth-last-of-type":h(!1,!0),"first-child":function(t){return!_(t)},"last-child":function(t){return!d(t)},"last-of-type":function(t){return!d(t,t.nodeName)},"first-of-type":function(t){return!_(t,t.nodeName)},"only-child":function(t){return!_(t)&&!d(t)},"only-of-type":function(t){return!_(t,t.nodeName)&&!d(t,t.nodeName)},contains:function(t,e){return~(t.innerText||t.textContent||"").indexOf(e)},checked:function(t){return!!t.checked||!!t.selected},selected:function(t){return t.selected},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},empty:function(t){var e;t=t.firstChild;for(;t;){if(t.nodeName>"@"||3===(e=t.nodeType)||4===e)return!1;t=t.nextSibling}return!0},focus:function(t){return t===e.activeElement&&(!e.hasFocus||e.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},target:function(t,e){var i=t.id||t.name;if(!i)return!1;else return"#"+i===location.hash}}};var bt=null;var vt=!!e.querySelector;!function $t(t,e){for(var i in t)j[i]=function(i){var n=t[i];return H(function(t,s){n[t]=s;if(i in e)e[i](t,s)})}(i)}(gt,{operators:function(t){var e=st.operator.split("]");e.splice(1,0,t.charAt(0)+"]");st.operator=e.join("");rt.setup()},combos:function(t){var e=st.combo.split("]");e.splice(1,0,t+"]");st.combo=e.join("");rt.setup()}});j.debug=!1;j._nthCache=it;j.parser=rt;j.parse=s;j._find=x;j._get=w;j.one=S;j.all=C;j.matches=I;j._uniqueSort=u;j._cleanSelector=clean;j._getUid=ut;if("object"==typeof exports)module.exports=j;else if("function"==typeof define&&define.amd)define(function(){return j});else t.nes=j;j.pesudos({"nth-match":k(!0),"nth-last-match":k(!1),"local-link":function(t,e){if(e)e=parseInt(e)}})}(window,document,void 0);I$("f061a0e64e7e8ff38ae3be9ffaffc57d",function(t,e,i,n,s,a){i._$all=function(){try{return nes.all.apply(nes,arguments)}catch(t){return null}};i._$one=function(){try{return nes.one.apply(nes,arguments)}catch(t){return null}};i._$g=nes._get;if(!0)t.copy(t.P("nej.e"),i);return i},"a2e1fe5ad329e35f3966d36c90672926","dfa79c5b65f149a15264b3e8072366de");I$("3e346f2b6313e57a75f5ee9b603c4b65",function(t,e,i,n,s,a,o,r){Array.prototype.repeat=function(t,e){for(;e;)this[--e]=t;return this};a._$empty=function(t){t=e._$get(t);if(t)for(;t.firstChild;)e._$remove(t.firstChild)};a._$format=function(t,e){function i(t){t=""+(String(t)||"");return t.length<=1?"0"+t:t}var n={yyyy:function(t){return t.getFullYear()},MM:function(t){return i(t.getMonth()+1)},dd:function(t){return i(t.getDate())},HH:function(t){return i(t.getHours())},mm:function(t){return i(t.getMinutes())},ss:function(t){return i(t.getSeconds())}};var s=new RegExp(Object.keys(n).join("|"),"g");t=t||"yyyy-MM-dd HH:mm";e=new Date(e||+new Date);return t.replace(s,function(t){return n[t]?n[t](e):""})};a._$highlight=function(t,e){try{if(e&&t)t=t.replace(new RegExp(e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$&"),"ig"),function(t){return"<mark>"+t+"</mark>"})}catch(i){}return t};a._$array2map=function(e,i){if(t._$isArray(e)){var n={};i=i||"id";for(var s=0,a,o=e.length;s<o;s++){a=e[s];n[a[i]]=a}return n}};a._$arrayMax=function(t){var e=0;t.forEach(function(t){if(t>e)e=t});return e};a._$array2unique=function(e){var i={};var n=[];t._$forEach(e,function(t){if(!i[t])i[t]=t});t._$forIn(i,function(t){n.push(t)});return n};a._$extend=function(t,e,i){for(var n in e)if(i||void 0===t[n]||null===t[n])t[n]=e[n];return t};var _=function(t){t=t||new Date;t.setHours(0,0,0,0);return{time:+t,unit:864e5}};var d=function(t){t=t||new Date;t.setHours(23,59,59,999);return{time:+t,unit:864e5}};a._$today=function(t){var e=d(t);return{startTime:e.time-e.unit+1,endTime:e.time}};a._$tomorrow=function(t){var e=d(t);return{startTime:e.time+1,endTime:e.time+e.unit}};a._$futureWeek=function(t){var e=_(t);return{startTime:e.time,endTime:e.time+7*e.unit-1}};a._$currentWeek=function(t){var e=d(t);return{startTime:e.time-7*e.unit+1,endTime:e.time}};a._$currentMonth=function(t){var e=d(t);return{startTime:e.time-30*e.unit+1,endTime:e.time}};a._$latestDay=function(t){var e=_(t);return{startTime:e.time-e.unit,endTime:e.time-1}};a._$latestWeek=function(t){var e=_(t);return{startTime:e.time-7*e.unit,endTime:e.time-1}};a._$latestMonth=function(t){var e=_(t);return{startTime:e.time-30*e.unit,endTime:e.time-1}};a._$typeOf=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()};a._$walkDiff=function(e,i,n){var s=!1;var o=function(e,i){if("string"!=a._$typeOf(e)&&"number"!=a._$typeOf(e)&&void 0!=a._$typeOf(e))t._$forIn(e,function(t,n,s){o(e[n],i[n])});else{if(void 0===i)i="";if(e!==i)s=!0}};o(e,i);return s||n};a._$walkDiff2=function(e,i,n){var s=!1;var o=function(e,i){if("string"!=a._$typeOf(e)&&"number"!=a._$typeOf(e)&&void 0!=a._$typeOf(e))t._$forIn(e,function(t,n,s){o(e[n],i[n])});else{if(void 0===i)i="";if(e.toString()!==i.toString())s=!0}};o(e,i);return s||n};a._$isDiff=function(e,i){var n=!1;var s=function(e,i){if("function"!=a._$typeOf(e))if("string"!=a._$typeOf(e)&&"number"!=a._$typeOf(e)&&void 0!=a._$typeOf(e)){var o=t._$isArray(e),r=t._$isArray(i),_;if(o){if(o!=r||e.length!=i.length){n=!0;return}for(_=0;_<e.length;_++)s(e[_],i[_])}else{var d=0,c=0;t._$forIn(e,function(t,a,o){d++;if(!n)s(e[a],i[a])});t._$forIn(i,function(t,e,i){c++});if(d!=c){n=!0;return}}}else{if(void 0===i)i="";if(e.toString()!==i.toString())n=!0}else if("function"==a._$typeOf(i))n=e!=i;else n=!0};try{s(e,i)}catch(o){n=!0;console.log("_p._$isDiff 执行出错："+o.message)}return n};a._$doFormatCategory=function(e){if(e&&e.length){var i={};var n={};t._$forEach(e,function(t){t.name=t.realname||t.name;n[t.id]=t;var e=(t.pinyin||"").trim().toUpperCase()[0];e=e&&e>="A"&&e<="Z"?e:"#";i[e]=i[e]||[];i[e].push(t)},this);var s=[];t._$loop(i,function(t,e){s.push({letter:e,child:t})});s.sort(function(t,e){return t.letter>e.letter?1:-1});return s}};a._$groupKefu=function(e){if(!e||!e.length)return[];var i={};t._$forEach(e,function(t){var e={};e.label=t.realname||t.name;e.value=t.id;var n=(t.pinyin||"").toUpperCase()[0];n=n&&n>="A"&&n<="Z"?n:"#";i[n]=i[n]||[];i[n].push(e)},this);var n=[];t._$loop(i,function(t,e){n.push({group:e,list:t})});n.sort(function(t,e){return t.group>e.group?1:-1});return n};a._$groupSatisfaction=function(e){if(!e||!e.length)return[];var i={};t._$forEach(e,function(e){var n=e.title;var s=e.type;var a=[];t._$forEach(e.list,function(e){var i={};i.label=e.name||"";i.value=e.value;i.type=s;i.tagList=[{isEmpty:!0,name:"无标签"}];t._$forEach(e.tagList,function(t){i.tagList.push({name:t})});a.push(i)},this);i[n]=a||[]},this);var n=[];t._$loop(i,function(t,e){n.push({group:e,list:t})});return n};a._$groupCustomField=function(e){if(!e||!e.length)return[];var i={};t._$forEach(e,function(t){t.label=t.realname||t.name;t.value=t.id;var e=(t.pinyin||"").trim().toUpperCase()[0];e=e&&e>="A"&&e<="Z"?e:"#";i[e]=i[e]||[];i[e].push(t)},this);var n=[];t._$loop(i,function(t,e){
n.push({group:e,list:t})});n.sort(function(t,e){return t.group>e.group?1:-1});return n};a._$groupRole=function(t){var e={2:"超级管理员",1:"管理者",0:"普通客服","-1":"工单客服","-2":"呼叫客服"};var i={};var n=[];t.forEach(function(t){var s=i[t.role];if(null==s||void 0==s){s=i[t.role]=n.length;n.push({id:t.role,group:e[t.role],list:[]})}var a=n[s];a.list.push({groupId:a.id,groupName:a.group,label:t.name,value:t.id})});return n};a._$doBuildRankCategory=function(t){var e=function(t){t.sort(function(t,e){return e.rank-t.rank});t.forEach(function(t){t.child&&e(t.child)})};e(t);return t};a._$doFormatCategory2=function(e){var i=[],n={};var s=function(e){var i=n[e.id];if(i)i=t._$merge(i,e);else{i=e;n[e.id]=i}return i};t._$forEach(e,function(t){s(t);if(!t.parent)i.push(s(t));else{var e=n[t.parent]||{id:t.parent};e.child=e.child||[];e.child.push(t);n[t.parent]=e}});return i};a._$formatWorksheetCategory=function(t){var e=this._$doFormatCategory2(t);e=e.map(function(t){var e={label:t.name,value:t.id};if(t.child)e.child=t.child.map(function(t){return{label:t.name,value:t.id}});return e});return e};a._$isShiftKey=function(t){var t=t||window.event,e=t.keyCode||t.which||t.charCode,i=t.shiftKey||16==e||!1;if(e>=65&&e<=90&&i)return!0;else return!1};a._$isCharKeydown=function(t){var e=t||window.event,i=e.keyCode||e.which||e.charCode,n=e.shiftKey||16==i||!1,s=e.ctrlKey||17==i||!1;if(i>=65&&i<=90&&!n&&!s)return 1;else if(i>=65&&i<=90&&n&&!s)return 2;else return 0};a._$mix=function(t,e,i){var n=i/100,s=0,a=2*n-1,o=((a*s==-1?a:(a+s)/(1+a*s))+1)/2,r=1-o,_=[parseInt(t[0]*o+e[0]*r),parseInt(t[1]*o+e[1]*r),parseInt(t[2]*o+e[2]*r)];return _};a._$rgb=function(t){t="#"===t.charAt(0)?t.slice(1):t;var e;if(6===t.length)e=[parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16)];else{var i=t.substr(0,1);var n=t.substr(1,1);var s=t.substr(2,1);e=[parseInt(i+i,16),parseInt(n+n,16),parseInt(s+s,16)]}return e};a._$formSubmit=function(t,e,n,s){var a="js-formSubmit",o=i._$one(a);if(!o){o=document.createElement("form");o.id=a;o.method=n||"POST";o.target=s||"_self";o.style.display="none";document.body.appendChild(o)}o.innerHTML="";if("object"==typeof e){var r;for(key in e){r=document.createElement("input");r.type="hidden";r.name=key;r.value=e[key];o.appendChild(r)}}o.action=t;o.submit()};a._$copy=function(t){return JSON.parse(JSON.stringify(t))};a._$trans2map=function(t,e){if("array"==a._$typeOf(t))t.forEach(function(t){a._$trans2map(t,e)});else if("object"==a._$typeOf(t))for(var i in e){var n=t[i];t[e[i]]=n;delete t[i]}return t};a._$doBuildCategory=function(e){var i=[],n={};var s=function(e){var i=n[e.id];if(i)i=t._$merge(i,e);else{i=e;i.child=i.child||[];n[e.id]=i}return i};t._$forEach(e,function(t){s(t);if(!t.parent)i.push(s(t));else{var e=n[t.parent]||{id:t.parent};e.child=e.child||[];e.child.push(t);n[t.parent]=e}});return i};a._$startsWith=function(t,e){return t.slice(0,e.length)==e};a._$throttle=function(t,e,i,n){var s=+new Date,a=0,o=0,r=null,_,d,c,l=function(){o=s;t.apply(d,c)};return function(){s=+new Date;d=this,c=arguments,_=s-(n?a:o)-e;clearTimeout(r);if(n){if(i)r=setTimeout(l,e);else if(_>=0)l()}else if(_>=0)l();else if(i)r=setTimeout(l,-_);a=s}};a._$offsetLeft=function(t){var e=t.offsetLeft;for(;t.offsetParent;){e+=t.offsetParent.offsetLeft;t=t.offsetParent}return e};a._$delegate=function(i,s,a,o){n._$addEvent(s,o||"click",function(o){var r;var _=n._$getElement(o,"d:action");if(_)for(;_&&_!==s;){var d=e._$dataset(_,"action");r=(a||{})[d];if(t._$isFunction(r)){n._$stopDefault(o);r.call(i||this,_,o);break}_=_.parentNode}})};a._$closest=function(t,e){return t&&(e(t)?t:a._$closest(t.parentNode,e))};a._$deltaFormat=function(t){var e="",t=parseInt(t),i=864e5,n=36e5,s=6e4,a=1e3;if(t>s){e+=Math.floor(t/s)+"分";t-=s*Math.floor(t/s)}if(t>a){e+=Math.floor(t/a)+"秒";t-=a*Math.floor(t/a)}return e};a._$isEmpty=function(t){return null==t||void 0==t||""==t};a._$objIsEmpty=function(t){for(var e in t)return!1;return!0};a._$parseQueryString=function(t){var e=/(([^?&=]+)(?:=([^?&=]*))*)/g;var i={};var n;var s;var a;for(;n=e.exec(t);){s=n[2];a=n[3]||"";i[s]=decodeURIComponent(a)}return i};a._$isBelongArray=function(e,i){var n=!1;t._$forEach(e,function(t){if(t===i)n=!0},this);return n};a._$removeByItem=function(t,e){t.forEach(function(i,n){if(i.id==e.id){t.splice(n,1);return t}else return t})};a._$debounce=function(t,e,i){var n;return function(){var s=this,a=arguments;var o=function(){n=null;if(!i)t.apply(s,a)};var r=i&&!n;clearTimeout(n);n=setTimeout(o,e);if(r)t.apply(s,a)}};a._$parseTree=function(e,i){var n=i.id||"id",s=i.pid||"pid",a=i.children||"children";var o=[],r=[];t._$forEach(e,function(t){o[t[n]]=t},this);t._$forEach(e,function(t){var e=o[t[s]];if(e){!e[a]&&(e[a]=[]);e[a].push(t)}else r.push(t)},this);return r};a._$isRepeat=function(t){var e={};for(var i in t){if(e[t[i]])return!0;e[t[i]]=!0}return!1};a._$isIEX=function(t){var e=document.createElement("b");e.innerHTML="<!--[if IE "+t+"]><i></i><![endif]-->";return 1===e.getElementsByTagName("i").length};return a},"fbbf6ddc0634989027d138f4ffd4b78b","5fb495f256a5dcde2a92e5fe919a6422","f061a0e64e7e8ff38ae3be9ffaffc57d","be567474249a271e4786c144ccf5f75a","d252039c36767cb4f534ca3f91188796");I$("ccb6b7d0ce45c3548151b739858e96c8",function(t,e,i,n,s,a,o){n._$config({addCustomFace:{rest:!1,method:"POST",url:"/api/emoji/add/emojiPackage",onload:"load_addCF",onerror:"error_addCF"},editCustomFace:{rest:!1,method:"POST",url:"/api/emoji/update/emojiPackage",onload:"load_editCF",onerror:"error_editCF"},getCustomFace:{url:" /webapi/emoji/emojiPackage/get",method:"GET",onload:"load_getCF",onerror:"error_getCF"},mapCustomFace:{url:"/webapi/emoji/emojiPackage/map",method:"GET",onload:"load_mapCF",onerror:"error_mapCF"},delCustomFace:{rest:!1,method:"POST",url:"/api/emoji/delete/emojiPackage",onload:"load_delCF",onerror:"error_delCF"},enableCustomFace:{rest:!1,method:"POST",url:"/api/emoji/enable/emojiPackage",onload:"load_enableCF",onerror:"error_enableCF"},sortCustomFace:{rest:!1,method:"POST",url:"/api/emoji/sort/emojiPackage",onload:"load_sortCF",onerror:"error_sortCF"}});a._$$Cache=t._$klass();o=a._$$Cache._$extend(n._$$Cache);o._$addCF=function(t){this.__doSendRequest("addCustomFace",t)};o._$editCF=function(t){this.__doSendRequest("editCustomFace",t)};o._$delCF=function(t){this.__doSendRequest("delCustomFace",t)};o._$enableCF=function(t){this.__doSendRequest("enableCustomFace",t)};o._$getCF=function(t){this.__doSendRequest("getCustomFace",t)};o._$sortCF=function(t){this.__doSendRequest("sortCustomFace",t)};o._$mapCF=function(t){this.__doSendRequest("mapCustomFace",t)};a._$do=n._$do._$bind(null,a._$$Cache);return a},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","0a031608798084dd303ad76241dcc09c","3e346f2b6313e57a75f5ee9b603c4b65");!function(){"use strict";function t(e,i,n){function s(){n=n||e;i=i||"root";var t=new Error('Failed to require "'+n+'" from "'+i+'"');t.path=n;t.parent=i;t.require=!0;throw t}var a=t.resolve(e);if(null!=a){var o=t.modules[a];if(!o._resolving&&!o.exports){var r={};r.exports={};r.client=r.component=!0;o._resolving=!0;o.call(this,r.exports,t.relative(a),r);delete o._resolving;o.exports=r.exports}return o.exports}else s()}t.modules={};t.aliases={};t.exts=["",".js",".json","/index.js","/index.json"];t.resolve=function(e){if("/"===e.charAt(0))e=e.slice(1);for(var i=0;i<5;i++){var n=e+t.exts[i];if(t.modules.hasOwnProperty(n))return n;if(t.aliases.hasOwnProperty(n))return t.aliases[n]}};t.normalize=function(t,e){var i=[];if("."!=e.charAt(0))return e;t=t.split("/");e=e.split("/");for(var n=0;n<e.length;++n)if(".."===e[n])t.pop();else if("."!=e[n]&&""!=e[n])i.push(e[n]);return t.concat(i).join("/")};t.register=function(e,i){t.modules[e]=i};t.alias=function(e,i){function n(){throw new Error('Failed to alias "'+e+'", it does not exist')}if(t.modules.hasOwnProperty(e))t.aliases[i]=e;else n()};t.relative=function(e){function i(n){var s=i.resolve(n);return t(s,e,n)}var n=t.normalize(e,"..");i.resolve=function(i){var s=i.charAt(0);if("/"===s)return i.slice(1);if("."===s)return t.normalize(n,i);var a=e.split("/");var o=a.length;for(;o--&&"deps"!==a[o];);i=a.slice(0,o+2).join("/")+"/deps/"+i;return i};i.exists=function(e){return t.modules.hasOwnProperty(i.resolve(e))};return i};t.register("regularjs/src/Regular.js",function(t,e,i){var n=e("./env.js");var s=e("./parser/Lexer.js");var a=e("./parser/Parser.js");var o=e("./config.js");var r=e("./util");var _=e("./helper/extend.js");if(n.browser){var d=e("./helper/combine.js");var c=e("./dom.js");var l=e("./walkers.js");var f=e("./group.js")}var u=e("./helper/event.js");var h=e("./helper/watcher.js");var p=e("./helper/parse.js");var m=e("./helper/filter.js");var g=c.doc;var b=function(t,e){var i=n.isRunning;n.isRunning=!0;var s,o;t=t||{};e=e||{};t.data=t.data||{};t.computed=t.computed||{};t.events=t.events||{};if(this.data)r.extend(t.data,this.data);if(this.computed)r.extend(t.computed,this.computed);if(this.events)r.extend(t.events,this.events);r.extend(this,t,!0);if(this.$parent)this.$parent._append(this);this._children=[];this.$refs={};o=this.template;if("string"==typeof o&&o.length<16&&(s=c.find(o)))o=s.innerHTML;if(o&&o.nodeType)o=o.innerHTML;if("string"==typeof o)this.template=new a(o).parse();this.computed=v(this.computed);this.$root=this.$root||this;if(this.events)this.$on(this.events);this.$emit("$config");this.config&&this.config(this.data);if(this._body&&this._body.length){this.$body=r.getCompileFn(this._body,this.$parent,{outer:this,namespace:e.namespace,extra:e.extra,record:!0});this._body=null}if(o){this.group=this.$compile(this.template,{namespace:e.namespace});d.node(this)}if(!this.$parent)this.$update();this.$ready=!0;this.$emit("$init");if(this.init)this.init(this.data);n.isRunning=i};l&&(l.Regular=b);r.extend(b,{_directives:{__regexp__:[]},_plugins:{},_protoInheritCache:["directive","use"],__after__:function(t,e){var i;this.__after__=t.__after__;if(e.name)b.component(e.name,this);if(i=e.template){
var n,s;if("string"==typeof i&&i.length<16&&(n=c.find(i))){i=n.innerHTML;if(s=c.attr(n,"name"))b.component(s,this)}if(i.nodeType)i=i.innerHTML;if("string"==typeof i)this.prototype.template=new a(i).parse()}if(e.computed)this.prototype.computed=v(e.computed);b._inheritConfig(this,t)},directive:function(t,e){if("object"===r.typeOf(t)){for(var i in t)if(t.hasOwnProperty(i))this.directive(i,t[i]);return this}var n=r.typeOf(t);var s=this._directives,a;if(null!=e){if("function"==typeof e)e={link:e};if("string"===n)s[t]=e;else if("regexp"===n){e.regexp=t;s.__regexp__.push(e)}return this}else if("string"===n&&(a=s[t]))return a;else{var o=s.__regexp__;for(var _=0,d=o.length;_<d;_++){a=o[_];var c=a.regexp.test(t);if(c)return a}}},plugin:function(t,e){var i=this._plugins;if(null==e)return i[t];i[t]=e;return this},use:function(t){if("string"==typeof t)t=b.plugin(t);if("function"!=typeof t)return this;t(this,b);return this},config:function(t,e){var i=!1;if("object"==typeof t)for(var n in t){if("END"===n||"BEGIN"===n)i=!0;o[n]=t[n]}if(i)s.setup()},expression:p.expression,Parser:a,Lexer:s,_addProtoInheritCache:function(t,e){if(Array.isArray(t))return t.forEach(b._addProtoInheritCache);var i="_"+t+"s";b._protoInheritCache.push(t);b[i]={};if(!b[t])b[t]=function(n,s){var a=this[i];if("object"==typeof n){for(var o in n)if(n.hasOwnProperty(o))this[t](o,n[o]);return this}if(null==s)return a[n];a[n]=e?e(s):s;return this}},_inheritConfig:function(t,e){var i=b._protoInheritCache;var n=r.slice(i);n.forEach(function(i){t[i]=e[i];var n="_"+i+"s";if(e[n])t[n]=r.createObject(e[n])});return t}});_(b);b._addProtoInheritCache("component");b._addProtoInheritCache("filter",function(t){return"function"==typeof t?{get:t}:t});u.mixTo(b);h.mixTo(b);b.implement({init:function(){},config:function(){},destroy:function(){this.$emit("$destroy");this.group&&this.group.destroy(!0);this.group=null;this.parentNode=null;this._watchers=null;this._children=[];var t=this.$parent;if(t){var e=t._children.indexOf(this);t._children.splice(e,1)}this.$parent=null;this.$root=null;this._handles=null;this.$refs=null},$compile:function(t,e){e=e||{};if("string"==typeof t)t=new a(t).parse();var i=this.__ext__,n=e.record,s;if(e.extra)this.__ext__=e.extra;if(n)this._record();var o=this._walk(t,e);if(n){s=this._release();var r=this;if(s.length)o.ondestroy=function(){r.$unwatch(s)}}if(e.extra)this.__ext__=i;return o},$bind:function(t,e,i){var n=r.typeOf(e);if("expression"===e.type||"string"===n)this._bind(t,e,i);else if("array"===n)for(var s=0,a=e.length;s<a;s++)this._bind(t,e[s]);else if("object"===n)for(var s in e)if(e.hasOwnProperty(s))this._bind(t,s,e[s]);t.$update();return this},$unbind:function(){},$inject:d.inject,$mute:function(t){t=!!t;var e=t===!1&&this._mute;this._mute=!!t;if(e)this.$update();return this},_bind:function(t,e,i){var n=this;if(!(t&&t instanceof b))throw"$bind() should pass Regular component as first argument";if(!e)throw"$bind() should  pass as least one expression to bind";if(!i)i=e;e=p.expression(e);i=p.expression(i);if(i.set){var s=this.$watch(e,function(e){t.$update(i,e)});t.$on("$destroy",function(){n.$unwatch(s)})}if(e.set){var a=t.$watch(i,function(t){n.$update(e,t)});this.$on("$destroy",t.$unwatch.bind(t,a))}i.set(t,e.get(this))},_walk:function(t,e){if("array"===r.typeOf(t)){var i=[];for(var n=0,s=t.length;n<s;n++)i.push(this._walk(t[n],e));return new f(i)}if("string"==typeof t)return g.createTextNode(t);else return l[t.type||"default"].call(this,t,e)},_append:function(t){this._children.push(t);t.$parent=this},_handleEvent:function(t,e,i,n){var s=this.constructor,a="function"!=typeof i?r.handleEvent.call(this,i,e):i,o=s.event(e),_;if(o)_=o.call(this,t,a,n);else c.on(t,e,a);return o?_:function(){c.off(t,e,a)}},_touchExpr:function(t){var e,i=this.__ext__,n={};if("expression"!==t.type||t.touched)return t;e=t.get||(t.get=new Function(r.ctxName,r.extName,r.prefix+"return ("+t.body+")"));n.get=!i?e:function(t){return e(t,i)};if(t.setbody&&!t.set){var s=t.setbody;t.set=function(e,i,n){t.set=new Function(r.ctxName,r.setName,r.extName,r.prefix+s);return t.set(e,i,n)};t.setbody=null}if(t.set)n.set=!i?t.set:function(e,n){return t.set(e,n,i)};r.extend(n,{type:"expression",touched:!0,once:t.once||t.constant});return n},_f_:function(t){var e=this.constructor;var i=e.filter(t);if(!i)throw Error("filter "+t+" is undefined");return i},_sg_:function(t,e,i){if("undefined"!=typeof i){var n=this.computed,s=n[t];if(s){if("expression"===s.type&&!s.get)this._touchExpr(s);if(s.get)return s.get(this);else r.log("the computed '"+t+"' don't define the get function,  get data."+t+" altnately","warn")}}if("undefined"!=typeof e&&"undefined"!=typeof t)return i&&"undefined"!=typeof i[t]?i[t]:e[t]},_ss_:function(t,e,i,n,s){var s=this.computed,n=n||"=",a,o=s?s[t]:null;if("="!==n){a=o?o.get(this):i[t];switch(n){case"+=":e=a+e;break;case"-=":e=a-e;break;case"*=":e=a*e;break;case"/=":e=a/e;break;case"%=":e=a%e}}if(o)if(o.set)return o.set(this,e);else r.log("the computed '"+t+"' don't define the set function,  assign data."+t+" altnately","warn");i[t]=e;return e}});b.prototype.inject=function(){r.log("use $inject instead of inject","error");return this.$inject.apply(this,arguments)};b.filter(m);i.exports=b;var v=function(){function t(t){return function(e){return t.call(e,e.data)}}function e(t){return function(e,i){t.call(e,i,e.data);return i}}return function(i){if(i){var n={},s,a,o;for(var r in i){s=i[r];o=typeof s;if("expression"!==s.type)if("string"===o)n[r]=p.expression(s);else{a=n[r]={type:"expression"};if("function"===o)a.get=t(s);else{if(s.get)a.get=t(s.get);if(s.set)a.set=e(s.set)}}else n[r]=s}return n}}}()});t.register("regularjs/src/util.js",function(t,e,i){e("./helper/shim.js")();var n=i.exports;var s=e("./helper/entities.js");var a=[].slice;var o={}.toString;var r="undefined"!=typeof window?window:global;n.noop=function(){};n.uid=function(){var t=0;return function(){return t++}}();n.extend=function(t,e,i){for(var n in e)if("undefined"==typeof t[n]||i===!0)t[n]=e[n];return t};n.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)if(t.hasOwnProperty(i))e.push(i);return e};n.varName="d";n.setName="p_";n.ctxName="c";n.extName="e";n.rWord=/^[\$\w]+$/;n.rSimpleAccessor=/^[\$\w]+(\.[\$\w]+)*$/;n.nextTick="function"==typeof setImmediate?setImmediate.bind(r):function(t){setTimeout(t,0)};n.prefix="var "+n.varName+"="+n.ctxName+".data;"+n.extName+"="+n.extName+"||'';";n.slice=function(t,e,i){var n=[];for(var s=e||0,a=i||t.length;s<a;s++){var o=t[s];n.push(o)}return n};n.typeOf=function(t){return null==t?String(t):o.call(t).slice(8,-1).toLowerCase()};n.makePredicate=function l(t,e){function i(t){if(1===t.length)return n+="return str === '"+t[0]+"';";n+="switch(str){";for(var e=0;e<t.length;++e)n+="case '"+t[e]+"':";n+="return true}return false;"}if("string"==typeof t)t=t.split(" ");var n="",s=[];t:for(var a=0;a<t.length;++a){for(var o=0;o<s.length;++o)if(s[o][0].length===t[a].length){s[o].push(t[a]);continue t}s.push([t[a]])}if(s.length>3){s.sort(function(t,e){return e.length-t.length});n+="switch(str.length){";for(var a=0;a<s.length;++a){var r=s[a];n+="case "+r[0].length+":";i(r)}n+="}"}else i(t);return new Function("str",n)};n.trackErrorPos=function(){function t(t,e){var i=0;for(var n=0,s=t.length;n<s;n++){var a=(t[n]||"").length;if(i+a>e)return{num:n,line:t[n],start:e-n-i,prev:t[n-1],next:t[n+1]};i+=a}}function e(t,e,i,a){var o=t.length;var r=e-n;if(r<0)r=0;var _=e+s;if(_>o)_=o;var d=t.slice(r,_);var c="["+(i+1)+"] "+(r>0?"..":"");var l=_<o?"..":"";var f=c+d+l;if(a)f+="\n"+new Array(e-r+c.length+1).join(" ")+"^^^";return f}var i=/\r\n|[\n\r\u2028\u2029]/g;var n=20,s=20;return function(n,s){if(s>n.length-1)s=n.length-1;i.lastIndex=0;var a=n.split(i);var o=t(a,s);var r=o.start,_=o.num;return(o.prev?e(o.prev,r,_-1)+"\n":"")+e(o.line,r,_,!0)+"\n"+(o.next?e(o.next,r,_+1)+"\n":"")}}();var _=/\((\?\!|\?\:|\?\=)/g;n.findSubCapture=function(t){var e=0,i=0,n=t.length,s=t.match(_);if(s)s=s.length;else s=0;for(;n--;){var a=t.charAt(n);if(0===n||"\\"!==t.charAt(n-1)){if("("===a)e++;if(")"===a)i++}}if(e!==i)throw"RegExp: "+t+"'s bracket is not marched";else return e-s};n.escapeRegExp=function(t){return t.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(t){return"\\"+t})};var d=new RegExp("&("+n.keys(s).join("|")+");","gi");n.convertEntity=function(t){return(""+t).replace(d,function(t,e){return String.fromCharCode(s[e])})};n.createObject=function(t,e){function i(){}i.prototype=t;var s=new i;if(e)n.extend(s,e);return s};n.createProto=function(t,e){function i(){this.constructor=t}i.prototype=e;return t.prototype=new i};n.clone=function f(t){var e=n.typeOf(t);if("array"===e){var i=[];for(var s=0,a=t.length;s<a;s++)i[s]=t[s];return i}if("object"===e){var i={};for(var s in t)if(t.hasOwnProperty(s))i[s]=t[s];return i}return t};n.equals=function(t,e){var i=typeof t;if("number"===i&&"number"==typeof e&&isNaN(t)&&isNaN(e))return!0;else return t===e};var c=/-([a-z])/g;n.camelCase=function(t){return t.replace(c,function(t,e){return e.toUpperCase()})};n.throttle=function u(t,e){var e=e||100;var i,n,s;var a=null;var o=0;var r=function(){o=+new Date;a=null;s=t.apply(i,n);i=n=null};return function(){var _=+new Date;var d=e-(_-o);i=this;n=arguments;if(d<=0||d>e){clearTimeout(a);a=null;o=_;s=t.apply(i,n);i=n=null}else if(!a)a=setTimeout(r,d);return s}};n.escape=function(){var t=/&/g,e=/</g,i=/>/g,n=/\'/g,s=/\"/g,a=/[&<>\"\']/;return function(o){return a.test(o)?o.replace(t,"&amp;").replace(e,"&lt;").replace(i,"&gt;").replace(n,"&#39;").replace(s,"&quot;"):o}}();n.cache=function(t){t=t||1e3;var e=[],i={};return{set:function(t,n){if(e.length>this.max)i[e.shift()]=void 0;if(void 0===i[t])e.push(t);i[t]=n;return n},get:function(t){if(void 0===t)return i;else return i[t]},max:t,len:function(){return e.length}}};n.handleEvent=function(t,e){var i=this,n;if("expression"===t.type)n=t.get;if(n)return function s(t){i.data.$event=t;var e=n(i);if(e===!1&&t&&t.preventDefault)t.preventDefault();i.data.$event=void 0;
i.$update()};else return function o(){var e=a.call(arguments);e.unshift(t);i.$emit.apply(i,e);i.$update()}};n.once=function(t){var e=0;return function(){if(0===e++)t.apply(this,arguments)}};n.fixObjStr=function(t){if(0!==t.trim().indexOf("{"))return"{"+t+"}";else return t};n.log=function(t,e){if("undefined"!=typeof console)console[e||"log"](t)};n.isVoidTag=n.makePredicate("area base br col embed hr img input keygen link menuitem meta param source track wbr r-content");n.isBooleanAttr=n.makePredicate("selected checked disabled readonly required open autofocus controls autoplay compact loop defer multiple");n.isFalse-function(){return!1};n.isTrue-function(){return!0};n.isExpr=function(t){return t&&"expression"===t.type};n.isGroup=function(t){return t.inject||t.$inject};n.getCompileFn=function(t,e,i){return e.$compile.bind(e,t,i)}});t.register("regularjs/src/walkers.js",function(t,e,i){function n(t,e,i){var n=[];for(var s=0,a=t.length;s<a;s++){var o=this._walk(t[s],{element:e,fromElement:!0,attrs:t,extra:i});if(o)n.push(o)}return n}var s=e("./helper/arrayDiff.js");var a=e("./helper/combine.js");var o=e("./helper/animate.js");var r=e("./parser/node.js");var _=e("./group.js");var d=e("./dom.js");var c=e("./util");var l=i.exports={};l.list=function(t,e){function i(t,e){for(var i=0;i<e;i++){var n=v.children.splice(t+1,1)[0];if(n)n.destroy(!0)}}function n(i,n,s){for(var r=i;r<n;r++){var _=s[r];var d={};d[$]=r;d[y]=_;d=c.createObject(g,d);var l=b.$compile(t.body,{extra:d,namespace:m,record:!0,outer:e.outer});l.data=d;var f=a.last(v.get(r));if(f.parentNode)o.inject(a.node(l),f,"after");v.children.splice(r+1,0,l)}}function r(t,e,i){for(var n=t;n<e;n++){var s=v.get(n+1);s.data[$]=n;s.data[y]=i[n]}}function d(t,e,a){if(!e)e=[];if(!t)t=[];var o=p;var _=0,d=t.length;if(!a&&(0!==d||0!==e.length))a=s(t,e);if(a&&a.length){for(var c=0;c<a.length;c++){var l=a[c];var f=l.index;var u=l.removed;var h=l.add;var m=u.length;if(w&&m&&h){var g=Math.min(m,h);var b=0;for(;b<g;){if(S(t[f],f)!==S(u[0],f)){i(f,1);n(f,f+1,t)}u.shift();h--;f++;b++}m=u.length}r(_,f,t);i(f,m);n(f,f+h,t);_=f+h-m;_=_<0?0:_}if(_<d)for(var c=_;c<d;c++){var y=v.get(c+1);y.data[$]=c}}}function f(t,e){t=t||[];e=e||[];var s=t.length||0;var a=e.length||0;var o=Math.min(s,a);r(0,o,t);if(s<a)i(s,a-s);else if(s>a)n(a,s,t)}function u(t,i,n){var s=t&&t.length;var r=i&&i.length;if(!r&&s&&v.get(1)){var _=v.children.pop();if(_.destroy)_.destroy(!0)}if(w===!0)f(t,i,n);else d(t,i,n);if(!s&&x&&x.length){var c=b.$compile(x,{extra:g,record:!0,outer:e.outer,namespace:m});v.children.push(c);if(p.parentNode)o.inject(a.node(c),p,"after")}}var h=l.Regular;var p=document.createComment("Regular list"),m=e.namespace,g=e.extra;var b=this;var v=new _([p]);var $=t.variable+"_index";var y=t.variable;var x=t.alternate;var w=t.track,S,C;if(w&&w!==!0){w=this._touchExpr(w);C=c.createObject(g);S=function(t,e){C[y]=t;C[$]=e;return w.get(b,C)}}this.$watch(t.sequence,u,{init:!0,indexTrack:w===!0});return v};l.template=function(t,e){var i=t.content,n;var s=document.createComment("inlcude");var n,a=e.namespace,o=e.extra;var r=new _([s]);if(i){var d=this;this.$watch(i,function(t){var i=r.get(1),_=typeof t;if(i){i.destroy(!0);r.children.pop()}if(t){r.push(n="function"==typeof t?t():d.$compile(t,{record:!0,outer:e.outer,namespace:a,extra:o}));if(s.parentNode)n.$inject(s,"before")}},{init:!0})}return r};var f=0;l["if"]=function(t,e){var i=this,n,s,r=e.extra;if(e&&e.element){var d=function(o){if(o){if(s)a.destroy(s);if(t.consequent)n=i.$compile(t.consequent,{record:!0,element:e.element,extra:r})}else{if(n)a.destroy(n);if(t.alternate)s=i.$compile(t.alternate,{record:!0,element:e.element,extra:r})}};this.$watch(t.test,d,{force:!0});return{destroy:function(){if(n)a.destroy(n);else if(s)a.destroy(s)}}}var c,n,s,l;var u=document.createComment("Regular if"+f++);var h=new _;h.push(u);var p=null,m=e.namespace;var d=function(_,d){var c=!!_;if(c!==p){p=c;if(h.children[1]){h.children[1].destroy(!0);h.children.pop()}if(c){if(t.consequent&&t.consequent.length){n=i.$compile(t.consequent,{record:!0,outer:e.outer,namespace:m,extra:r});h.push(n);if(u.parentNode)o.inject(a.node(n),u,"before")}}else if(t.alternate&&t.alternate.length){s=i.$compile(t.alternate,{record:!0,outer:e.outer,namespace:m,extra:r});h.push(s);if(u.parentNode)o.inject(a.node(s),u,"before")}}};this.$watch(t.test,d,{force:!0,init:!0});return h};l.expression=function(t,e){var i=document.createTextNode("");this.$watch(t,function(t){d.text(i,""+(null==t?"":""+t))});return i};l.text=function(t,e){var i=document.createTextNode(c.convertEntity(t.text));return i};var u=/^on-(.+)$/;l.element=function(t,e){var i=t.attrs,s=this,r=this.constructor,_=t.children,f=e.namespace,u=e.extra,h=t.tag,p=r.component(h),m,g,b;if("r-content"===h){c.log("r-content is deprecated, use {#inc this.$body} instead (`{#include}` as same)","warn");return this.$body&&this.$body()}if(p||"r-component"===h){e.Component=p;return l.component.call(this,t,e)}if("svg"===h)f="svg";if(_&&_.length)g=this.$compile(_,{outer:e.outer,namespace:f,extra:u});b=d.create(h,f,i);if(g&&!c.isVoidTag(h))d.inject(a.node(g),b);if(!t.touched){i.sort(function(t,e){var i=r.directive(t.name),n=r.directive(e.name);if(i&&n)return(n.priority||1)-(i.priority||1);if(i)return 1;if(n)return-1;if("type"===e.name)return 1;else return-1});t.touched=!0}var v=n.call(this,i,b,u);return{type:"element",group:g,node:function(){return b},last:function(){return b},destroy:function(t){if(t)o.remove(b,g?g.destroy.bind(g):c.noop);else if(g)g.destroy();if(v.length)v.forEach(function(t){if(t)if("function"==typeof t.destroy)t.destroy();else t()})}}};l.component=function(t,e){var i=t.attrs,n=e.Component,s=this.constructor,o,r=e.extra,d=e.namespace,l,f=this,h;var p={},m;for(var g=0,b=i.length;g<b;g++){var v=i[g];var $=this._touchExpr(void 0===v.value?!0:v.value);if($.constant)$=v.value=$.get(this);if(v.value&&v.value.constant===!0)$=$.get(this);var y=v.name;if(!v.event){var x=y.match(u);if(x)v.event=x[1]}if("cmpl"===v.mdf)$=c.getCompileFn($,this,{record:!0,namespace:d,extra:r,outer:e.outer});if("is"===y&&!n){h=$;var w=this.$get($,!0);n=s.component(w);if("function"!=typeof n)throw new Error("component "+w+" has not registed!")}var S;if(!(S=v.event)){y=v.name=c.camelCase(y);if("expression"!==$.type)p[y]=$;else p[y]=$.get(f);if("ref"===y&&null!=$)l=$;if("isolate"===y){o="expression"===$.type?$.get(f):parseInt($===!0?3:$,10);p.isolate=o}}else{m=m||{};m[S]=c.handleEvent.call(this,$,S)}}var C={data:p,events:m,$parent:2&o?null:this,$root:this.$root,$outer:e.outer,_body:t.children};var e={namespace:d,extra:e.extra};var I=new n(C,e),E;if(l&&this.$refs){E=n.directive("ref").link;this.$on("$destroy",E.call(this,I,l))}if(l&&f.$refs)f.$refs[l]=I;for(var g=0,b=i.length;g<b;g++){var v=i[g];var $=v.value||!0;var y=v.name;if("expression"===$.type&&!v.event){$=f._touchExpr($);if(!(2&o))this.$watch($,function(t,e){this.data[t]=e}.bind(I,y));if($.set&&!(1&o))I.$watch(y,f.$update.bind(f,$),{sync:!0})}}if(h&&"expression"===h.type){var k=new _;k.push(I);this.$watch(h,function(t){var e=s.component(t);if(!e)throw new Error("component "+t+" has not registed!");var i=new e(C);var n=k.children.pop();k.push(i);i.$inject(a.last(n),"after");n.destroy();if(l)f.$refs[l]=i},{sync:!0});return k}return I};l.attribute=function(t,e){var i=t;var n=i.name;var s=i.value||"";var a=s.constant;var o=this.constructor;var r=o.directive(n);var _=e.element;var l=this;s=this._touchExpr(s);if(a)s=s.get(this);if(r&&r.link){var f=r.link.call(l,_,s,n,e.attrs);if("function"==typeof f)f={destroy:f};return f}else{if("expression"===s.type)this.$watch(s,function(t,e){d.attr(_,n,t)},{init:!0});else if(c.isBooleanAttr(n))d.attr(_,n,!0);else d.attr(_,n,s);if(!e.fromElement)return{destroy:function(){d.attr(_,n,null)}}}}});t.register("regularjs/src/env.js",function(t,e,i){var n=e("./util");t.svg=function(){return"undefined"!=typeof document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();t.browser="undefined"!=typeof document&&document.nodeType;t.exprCache=n.cache(1e3);t.isRunning=!1});t.register("regularjs/src/index.js",function(t,e,i){var n=e("./env.js");var s=e("./config");var a=i.exports=e("./Regular.js");var o=a.Parser;var r=a.Lexer;if(n.browser){e("./directive/base.js");e("./directive/animation.js");e("./module/timeout.js");a.dom=e("./dom.js")}a.env=n;a.util=e("./util.js");a.parse=function(t,e){e=e||{};if(e.BEGIN||e.END){if(e.BEGIN)s.BEGIN=e.BEGIN;if(e.END)s.END=e.END;r.setup()}var i=new o(t).parse();return!e.stringify?i:JSON.stringify(i)}});t.register("regularjs/src/dom.js",function(t,e,i){function n(t){return(""+t).replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()})}function s(t,e){return"change"===e&&o.msie<9&&t&&t.tagName&&"input"===t.tagName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)?"click":e}function a(t){t=t||window.event;if(t._fixed)return t;this.event=t;this.target=t.target||t.srcElement;var e=this.type=t.type;var i=this.button=t.button;if(p.test(e)){this.pageX=null!=t.pageX?t.pageX:t.clientX+m.scrollLeft;this.pageY=null!=t.pageX?t.pageY:t.clientY+m.scrollTop;if("mouseover"===e||"mouseout"===e){var n=t.relatedTarget||t[("mouseover"===e?"from":"to")+"Element"];for(;n&&3===n.nodeType;)n=n.parentNode;this.relatedTarget=n}}if("DOMMouseScroll"===e||"mousewheel"===e)this.wheelDelta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3;this.which=t.which||t.keyCode;if(!this.which&&void 0!==i)this.which=1&i?1:2&i?3:4&i?2:0;this._fixed=!0}var o=i.exports;var r=e("./env.js");var _=e("./util");var d=document.createElement("div");var c,l;var f=function(){};var u={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"};o.body=document.body;o.doc=document;o.tNode=d;if(d.addEventListener){c=function(t,e,i){t.addEventListener(e,i,!1)};l=function(t,e,i){t.removeEventListener(e,i,!1)}}else{c=function(t,e,i){t.attachEvent("on"+e,i)};l=function(t,e,i){t.detachEvent("on"+e,i)}}o.msie=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1]);
if(isNaN(o.msie))o.msie=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1]);o.find=function(t){if(document.querySelector)try{return document.querySelector(t)}catch(e){}if(t.indexOf("#")!==-1)return document.getElementById(t.slice(1))};o.inject=function(t,e,i){i=i||"bottom";if(t){if(Array.isArray(t)){var n=t;t=o.fragment();for(var s=0,a=n.length;s<a;s++)t.appendChild(n[s])}var r,_;switch(i){case"bottom":e.appendChild(t);break;case"top":if(r=e.firstChild)e.insertBefore(t,e.firstChild);else e.appendChild(t);break;case"after":if(_=e.nextSibling)_.parentNode.insertBefore(t,_);else e.parentNode.appendChild(t);break;case"before":e.parentNode.insertBefore(t,e)}}};o.id=function(t){return document.getElementById(t)};o.create=function(t,e,i){if("svg"===e){if(!r.svg)throw Error("the env need svg support");e=u.svg}return!e?document.createElement(t):document.createElementNS(e,t)};o.fragment=function(){return document.createDocumentFragment()};var h={"class":function(t,e){"className"in t&&(t.namespaceURI===u.html||!t.namespaceURI)?t.className=e||"":t.setAttribute("class",e)},"for":function(t,e){"htmlFor"in t?t.htmlFor=e:t.setAttribute("for",e)},style:function(t,e){t.style?t.style.cssText=e:t.setAttribute("style",e)},value:function(t,e){t.value=null!=e?e:""}};o.attr=function(t,e,i){if(_.isBooleanAttr(e))if("undefined"!=typeof i)if(i){t[e]=!0;t.setAttribute(e,e);if(o.msie&&o.msie<=7)t.defaultChecked=!0}else{t[e]=!1;t.removeAttribute(e)}else return t[e]||(t.attributes.getNamedItem(e)||f).specified?e:void 0;else if("undefined"!=typeof i)if(h[e])h[e](t,i);else if(null===i)t.removeAttribute(e);else t.setAttribute(e,i);else if(t.getAttribute){var n=t.getAttribute(e,2);return null===n?void 0:n}};o.on=function(t,e,i){var n=e.split(" ");i.real=function(e){var n=new a(e);n.origin=t;i.call(t,n)};n.forEach(function(e){e=s(t,e);c(t,e,i.real)})};o.off=function(t,e,i){var n=e.split(" ");i=i.real||i;n.forEach(function(e){e=s(t,e);l(t,e,i)})};o.text=function(){var t={};if(o.msie&&o.msie<9){t[1]="innerText";t[3]="nodeValue"}else t[1]=t[3]="textContent";return function(e,i){var n=t[e.nodeType];if(null==i)return n?e[n]:"";e[n]=i}}();o.html=function(t,e){if("undefined"==typeof e)return t.innerHTML;else t.innerHTML=e};o.replace=function(t,e){if(e.parentNode)e.parentNode.replaceChild(t,e)};o.remove=function(t){if(t.parentNode)t.parentNode.removeChild(t)};o.css=function(t,e,i){if("object"!==_.typeOf(e))if("undefined"!=typeof i){e=n(e);if(e)t.style[e]=i}else{var s;if(o.msie<=8){s=t.currentStyle&&t.currentStyle[e];if(""===s)s="auto"}s=s||t.style[e];if(o.msie<=8)s=""===s?void 0:s;return s}else for(var a in e)if(e.hasOwnProperty(a))o.css(t,a,e[a])};o.addClass=function(t,e){var i=t.className||"";if((" "+i+" ").indexOf(" "+e+" ")===-1)t.className=i?i+" "+e:e};o.delClass=function(t,e){var i=t.className||"";t.className=(" "+i+" ").replace(" "+e+" "," ").trim()};o.hasClass=function(t,e){var i=t.className||"";return(" "+i+" ").indexOf(" "+e+" ")!==-1};var p=/^(?:click|dblclick|contextmenu|DOMMouseScroll|mouse(?:\w+))$/;var m=document;m=!m.compatMode||"CSS1Compat"===m.compatMode?m.documentElement:m.body;_.extend(a.prototype,{immediateStop:_.isFalse,stop:function(){this.preventDefault().stopPropagation()},preventDefault:function(){if(this.event.preventDefault)this.event.preventDefault();else this.event.returnValue=!1;return this},stopPropagation:function(){if(this.event.stopPropagation)this.event.stopPropagation();else this.event.cancelBubble=!0;return this},stopImmediatePropagation:function(){if(this.event.stopImmediatePropagation)this.event.stopImmediatePropagation()}});o.nextFrame=function(){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){setTimeout(t,16)};var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||function(t){clearTimeout(t)};return function(i){var n=t(i);return function(){e(n)}}}();var g;o.nextReflow=o.msie?function(t){return o.nextFrame(function(){g=document.body.offsetWidth;t()})}:o.nextFrame});t.register("regularjs/src/group.js",function(t,e,i){function n(t){this.children=t||[]}var s=e("./util");var a=e("./helper/combine");var o=s.extend(n.prototype,{destroy:function(t){a.destroy(this.children,t);if(this.ondestroy)this.ondestroy();this.children=null},get:function(t){return this.children[t]},push:function(t){this.children.push(t)}});o.inject=o.$inject=a.inject;i.exports=n});t.register("regularjs/src/config.js",function(t,e,i){i.exports={BEGIN:"{",END:"}"}});t.register("regularjs/src/const.js",function(t,e,i){i.exports={COMPONENT_TYPE:1,ELEMENT_TYPE:2}});t.register("regularjs/src/parser/Lexer.js",function(t,e,i){function n(t){return function(e){return{type:t,value:e}}}function s(t,e){if(d[_.END]){this.markStart=d[_.END];this.markEnd=_.END}this.input=(t||"").trim();this.opts=e||{};this.map=2!==this.opts.mode?c:l;this.states=["INIT"];if(e&&e.expression){this.states.push("JST");this.expression=!0}}function a(t){var e,i={},n;for(var s=0,a=t.length;s<a;s++){e=t[s];n=e[2]||"INIT";(i[n]||(i[n]={rules:[],links:[]})).rules.push(e)}return o(i)}function o(t){function e(t,e){return"string"==typeof f[e]?r.escapeRegExp(f[e]):String(f[e]).slice(1,-1)}var i,s,a,o,_,d,c;for(var l in t){i=t[l];i.curIndex=1;s=i.rules;a=[];for(var u=0,h=s.length;u<h;u++){c=s[u];_=c[0];o=c[1];if("string"==typeof o)o=n(o);if("regexp"===r.typeOf(_))_=_.toString().slice(1,-1);_=_.replace(/\{(\w+)\}/g,e);d=r.findSubCapture(_)+1;i.links.push([i.curIndex,d,o]);i.curIndex+=d;a.push(_)}i.TRUNK=new RegExp("^(?:("+a.join(")|(")+"))")}return t}var r=e("../util.js");var _=e("../config.js");var d={"}":"{","]":"["},c,l;var f={NAME:/(?:[:_A-Za-z][-\.:_0-9A-Za-z]*)/,IDENT:/[\$_A-Za-z][_0-9A-Za-z\$]*/,SPACE:/[\r\n\f ]/};var u=/a|(b)/.exec("a");var h=u&&void 0===u[1]?function(t){return void 0!==t}:function(t){return!!t};var p=s.prototype;p.lex=function(t){t=(t||this.input).trim();var e=[],i,n,s,a,o;this.input=t,this.marks=0;this.index=0;var r=0;for(;t;){r++;o=this.state();i=this.map[o];n=i.TRUNK.exec(t);if(!n)this.error("Unrecoginized Token");s=n[0].length;t=t.slice(s);a=this._process.call(this,n,i,t);if(a)e.push(a);this.index+=s}e.push({type:"EOF"});return e};p.error=function(t){throw Error("Parse Error: "+t+":\n"+r.trackErrorPos(this.input,this.index))};p._process=function(t,e,i){var n=e.links,s=!1,a;for(var o=n.length,r=0;r<o;r++){var _=n[r],d=_[2],c=_[0];if(h(t[c])){s=!0;if(d){a=d.apply(this,t.slice(c,c+_[1]));if(a)a.pos=this.index}break}}if(!s)switch(i.charAt(0)){case"<":this.enter("TAG");break;default:this.enter("JST")}return a};p.enter=function(t){this.states.push(t);return this};p.state=function(){var t=this.states;return t[t.length-1]};p.leave=function(t){var e=this.states;if(!t||e[e.length-1]===t)e.pop()};s.setup=function(){f.END=_.END;f.BEGIN=_.BEGIN;c=a([m.ENTER_JST,m.ENTER_TAG,m.TEXT,m.TAG_NAME,m.TAG_OPEN,m.TAG_CLOSE,m.TAG_PUNCHOR,m.TAG_ENTER_JST,m.TAG_UNQ_VALUE,m.TAG_STRING,m.TAG_SPACE,m.TAG_COMMENT,m.JST_OPEN,m.JST_CLOSE,m.JST_COMMENT,m.JST_EXPR_OPEN,m.JST_IDENT,m.JST_SPACE,m.JST_LEAVE,m.JST_NUMBER,m.JST_PUNCHOR,m.JST_STRING,m.JST_COMMENT]);l=a([m.ENTER_JST2,m.TEXT,m.JST_COMMENT,m.JST_OPEN,m.JST_CLOSE,m.JST_EXPR_OPEN,m.JST_IDENT,m.JST_SPACE,m.JST_LEAVE,m.JST_NUMBER,m.JST_PUNCHOR,m.JST_STRING,m.JST_COMMENT])};var m={ENTER_JST:[/[^\x00<]*?(?={BEGIN})/,function(t){this.enter("JST");if(t)return{type:"TEXT",value:t}}],ENTER_JST2:[/[^\x00]*?(?={BEGIN})/,function(t){this.enter("JST");if(t)return{type:"TEXT",value:t}}],ENTER_TAG:[/[^\x00]*?(?=<[\w\/\!])/,function(t){this.enter("TAG");if(t)return{type:"TEXT",value:t}}],TEXT:[/[^\x00]+/,"TEXT"],TAG_NAME:[/{NAME}/,"NAME","TAG"],TAG_UNQ_VALUE:[/[^\{}&"'=><`\r\n\f ]+/,"UNQ","TAG"],TAG_OPEN:[/<({NAME})\s*/,function(t,e){return{type:"TAG_OPEN",value:e}},"TAG"],TAG_CLOSE:[/<\/({NAME})[\r\n\f ]*>/,function(t,e){this.leave();return{type:"TAG_CLOSE",value:e}},"TAG"],TAG_ENTER_JST:[/(?={BEGIN})/,function(){this.enter("JST")},"TAG"],TAG_PUNCHOR:[/[\>\/=&]/,function(t){if(">"===t)this.leave();return{type:t,value:t}},"TAG"],TAG_STRING:[/'([^']*)'|"([^"]*)\"/,function(t,e,i){var n=e||i||"";return{type:"STRING",value:n}},"TAG"],TAG_SPACE:[/{SPACE}+/,null,"TAG"],TAG_COMMENT:[/<\!--([^\x00]*?)--\>/,function(t){this.leave()},"TAG"],JST_OPEN:["{BEGIN}#{SPACE}*({IDENT})",function(t,e){return{type:"OPEN",value:e}},"JST"],JST_LEAVE:[/{END}/,function(t){if(this.markEnd===t&&this.expression)return{type:this.markEnd,value:this.markEnd};if(!this.markEnd||!this.marks){this.firstEnterStart=!1;this.leave("JST");return{type:"END"}}else{this.marks--;return{type:this.markEnd,value:this.markEnd}}},"JST"],JST_CLOSE:[/{BEGIN}\s*\/({IDENT})\s*{END}/,function(t,e){this.leave("JST");return{type:"CLOSE",value:e}},"JST"],JST_COMMENT:[/{BEGIN}\!([^\x00]*?)\!{END}/,function(){this.leave()},"JST"],JST_EXPR_OPEN:["{BEGIN}",function(t,e){if(t===this.markStart){if(this.expression)return{type:this.markStart,value:this.markStart};if(this.firstEnterStart||this.marks){this.marks++;this.firstEnterStart=!1;return{type:this.markStart,value:this.markStart}}else this.firstEnterStart=!0}return{type:"EXPR_OPEN",escape:!1}},"JST"],JST_IDENT:["{IDENT}","IDENT","JST"],JST_SPACE:[/[ \r\n\f]+/,null,"JST"],JST_PUNCHOR:[/[=!]?==|[-=><+*\/%\!]?\=|\|\||&&|\@\(|\.\.|[<\>\[\]\(\)\-\|\{}\+\*\/%?:\.!,]/,function(t){return{type:t,value:t}},"JST"],JST_STRING:[/'([^']*)'|"([^"]*)"/,function(t,e,i){return{type:"STRING",value:e||i||""}},"JST"],JST_NUMBER:[/(?:[0-9]*\.[0-9]+|[0-9]+)(e\d+)?/,function(t){return{type:"NUMBER",value:parseFloat(t,10)}},"JST"]};s.setup();i.exports=s});t.register("regularjs/src/parser/node.js",function(t,e,i){i.exports={element:function(t,e,i){return{type:"element",tag:t,attrs:e,children:i}},attribute:function(t,e,i){return{type:"attribute",name:t,value:e,mdf:i}},"if":function(t,e,i){return{type:"if",test:t,consequent:e,alternate:i}},list:function(t,e,i,n,s){return{type:"list",sequence:t,alternate:n,variable:e,
body:i,track:s}},expression:function(t,e,i){return{type:"expression",body:t,constant:i||!1,setbody:e||!1}},text:function(t){return{type:"text",text:t}},template:function(t){return{type:"template",content:t}}}});t.register("regularjs/src/parser/Parser.js",function(t,e,i){function n(t,e){e=e||{};this.input=t;this.tokens=new r(t,e).lex();this.pos=0;this.length=this.tokens.length}var s=e("../util.js");var a=e("../config.js");var o=e("./node.js");var r=e("./Lexer.js");var _=s.varName;var d=s.ctxName;var c=s.extName;var l=s.makePredicate("STRING IDENT NUMBER");var f=s.makePredicate("true false undefined null this Array Date JSON Math NaN RegExp decodeURI decodeURIComponent encodeURI encodeURIComponent parseFloat parseInt Object");var u=n.prototype;u.parse=function(){this.pos=0;var t=this.program();if("TAG_CLOSE"===this.ll().type)this.error("You may got a unclosed Tag");return t};u.ll=function(t){t=t||1;if(t<0)t+=1;var e=this.pos+t-1;if(e>this.length-1)return this.tokens[this.length-1];else return this.tokens[e]};u.la=function(t){return(this.ll(t)||"").type};u.match=function(t,e){var i;if(!(i=this.eat(t,e))){i=this.ll();this.error("expect ["+t+(null==e?"":":"+e)+']" -> got "['+i.type+(null==e?"":":"+i.value)+"]",i.pos)}else return i};u.error=function(t,e){t="\n【 parse failed 】 "+t+":\n\n"+s.trackErrorPos(this.input,"number"==typeof e?e:this.ll().pos||0);throw new Error(t)};u.next=function(t){t=t||1;this.pos+=t};u.eat=function(t,e){var i=this.ll();if("string"!=typeof t){for(var n=t.length;n--;)if(i.type===t[n]){this.next();return i}}else if(i.type===t&&("undefined"==typeof e||i.value===e)){this.next();return i}return!1};u.program=function(){var t=[],e=this.ll();for(;"EOF"!==e.type&&"TAG_CLOSE"!==e.type;){t.push(this.statement());e=this.ll()}return t};u.statement=function(){var t=this.ll();switch(t.type){case"NAME":case"TEXT":var e=t.value;this.next();for(;t=this.eat(["NAME","TEXT"]);)e+=t.value;return o.text(e);case"TAG_OPEN":return this.xml();case"OPEN":return this.directive();case"EXPR_OPEN":return this.interplation();default:this.error("Unexpected token: "+this.la())}};u.xml=function(){var t,e,i,n;t=this.match("TAG_OPEN").value;e=this.attrs();n=this.eat("/");this.match(">");if(!n&&!s.isVoidTag(t)){i=this.program();if(!this.eat("TAG_CLOSE",t))this.error("expect </"+t+"> gotno matched closeTag")}return o.element(t,e,i)};u.xentity=function(t){var e=t.value,i,n;if("NAME"===t.type){if(~e.indexOf(".")){var s=e.split(".");e=s[0];n=s[1]}if(this.eat("="))i=this.attvalue(n);return o.attribute(e,i,n)}else{if("if"!==e)this.error("current version. ONLY RULE #if #else #elseif is valid in tag, the rule #"+e+" is invalid");return this["if"](!0)}};u.attrs=function(t){var e;if(!t)e=["NAME","OPEN"];else e=["NAME"];var i=[],n;for(;n=this.eat(e);)i.push(this.xentity(n));return i};u.attvalue=function(t){var e=this.ll();switch(e.type){case"NAME":case"UNQ":case"STRING":this.next();var i=e.value;if(~i.indexOf(a.BEGIN)&&~i.indexOf(a.END)&&"cmpl"!==t){var s=!0;var r=new n(i,{mode:2}).parse();if(1===r.length&&"expression"===r[0].type)return r[0];var _=[];r.forEach(function(t){if(!t.constant)s=!1;_.push(t.body||"'"+t.text.replace(/'/g,"\\'")+"'")});_="["+_.join(",")+"].join('')";i=o.expression(_,null,s)}return i;case"EXPR_OPEN":return this.interplation();default:this.error("Unexpected token: "+this.la())}};u.directive=function(){var t=this.ll().value;this.next();if("function"==typeof this[t])return this[t]();else this.error("Undefined directive["+t+"]")};u.interplation=function(){this.match("EXPR_OPEN");var t=this.expression(!0);this.match("END");return t};u.inc=u.include=function(){var t=this.expression();this.match("END");return o.template(t)};u["if"]=function(t){var e=this.expression();var i=[],n=[];var s=i;var a=!t?"statement":"attrs";this.match("END");var r,_;for(;!(_=this.eat("CLOSE"));){r=this.ll();if("OPEN"===r.type)switch(r.value){case"else":s=n;this.next();this.match("END");break;case"elseif":this.next();n.push(this["if"](t));return o["if"](e,i,n);default:s.push(this[a](!0))}else s.push(this[a](!0))}if("if"!==_.value)this.error("Unmatched if directive");return o["if"](e,i,n)};u.list=function(){var t=this.expression(),e,i,n;var s=[],a=[];var r=s;this.match("IDENT","as");e=this.match("IDENT").value;if(this.eat("IDENT","by"))if(this.eat("IDENT",e+"_index"))n=!0;else{n=this.expression();if(n.constant)n=!0}this.match("END");for(;!(i=this.eat("CLOSE"));)if(this.eat("OPEN","else")){r=a;this.match("END")}else r.push(this.statement());if("list"!==i.value)this.error("expect list got /"+i.value+" ",i.pos);return o.list(t,e,s,a,n)};u.expression=function(){var t;if(this.eat("@(")){t=this.expr();t.once=!0;this.match(")")}else t=this.expr();return t};u.expr=function(){this.depend=[];var t=this.filter();var e=t.get||t;var i=t.set;return o.expression(e,i,!this.depend.length)};u.filter=function(){var t=this.assign();var e=this.eat("|");var i=[],n,a,o="t",r=t.set,_,c="";if(e){if(r)n=[];a="(function("+o+"){";do{c=o+" = "+d+"._f_('"+this.match("IDENT").value+"' ).get.call( "+s.ctxName+","+o;if(this.eat(":"))c+=", "+this.arguments("|").join(",")+");";else c+=");";i.push(c);n&&n.unshift(c.replace(" ).get.call"," ).set.call"))}while(e=this.eat("|"));i.push("return "+o);n&&n.push("return "+o);_=a+i.join("")+"})("+t.get+")";if(n)r=r.replace(s.setName,a+n.join("")+"})("+s.setName+")");return this.getset(_,r)}return t};u.assign=function(){var t=this.condition(),e;if(e=this.eat(["=","+=","-=","*=","/=","%="])){if(!t.set)this.error("invalid lefthand expression in assignment expression");return this.getset(t.set.replace(","+s.setName,","+this.condition().get).replace("'='","'"+e.type+"'"),t.set)}return t};u.condition=function(){var t=this.or();if(this.eat("?"))return this.getset([t.get+"?",this.assign().get,this.match(":").type,this.assign().get].join(""));else return t};u.or=function(){var t=this.and();if(this.eat("||"))return this.getset(t.get+"||"+this.or().get);else return t};u.and=function(){var t=this.equal();if(this.eat("&&"))return this.getset(t.get+"&&"+this.and().get);else return t};u.equal=function(){var t=this.relation(),e;if(e=this.eat(["==","!=","===","!=="]))return this.getset(t.get+e.type+this.equal().get);else return t};u.relation=function(){var t=this.additive(),e;if(e=this.eat(["<",">",">=","<="])||this.eat("IDENT","in"))return this.getset(t.get+e.value+this.relation().get);else return t};u.additive=function(){var t=this.multive(),e;if(e=this.eat(["+","-"]))return this.getset(t.get+e.value+this.additive().get);else return t};u.multive=function(){var t=this.range(),e;if(e=this.eat(["*","/","%"]))return this.getset(t.get+e.type+this.multive().get);else return t};u.range=function(){var t=this.unary(),e,i;if(e=this.eat("..")){i=this.unary();var n="(function(start,end){var res = [],step=end>start?1:-1; for(var i = start; end>start?i <= end: i>=end; i=i+step){res.push(i); } return res })("+t.get+","+i.get+")";return this.getset(n)}return t};u.unary=function(){var t;if(t=this.eat(["+","-","~","!"]))return this.getset("("+t.type+this.unary().get+")");else return this.member()};u.member=function(t,e,i,n){var a,o,r;var f=!1;if(!t){o=this.primary();var u=typeof o;if("string"===u){i=[];i.push(o);e=o;r=c+"."+o;t=d+"._sg_('"+o+"', "+_+", "+c+")";f=!0}else if("this"===o.get){t=d;i=["this"]}else{i=null;t=o.get}}else if("string"==typeof e&&l(e))i.push(e);else{if(i&&i.length)this.depend.push(i);i=null}if(a=this.eat(["[",".","("]))switch(a.type){case".":var h=this.match("IDENT").value;n=t;if("("!==this.la())t=d+"._sg_('"+h+"', "+t+")";else t+="['"+h+"']";return this.member(t,h,i,n);case"[":o=this.assign();n=t;if("("!==this.la())t=d+"._sg_("+o.get+", "+t+")";else t+="["+o.get+"]";this.match("]");return this.member(t,o,i,n);case"(":var p=this.arguments().join(",");t=t+"("+p+")";this.match(")");return this.member(t,null,i)}if(i&&i.length)this.depend.push(i);var m={get:t};if(e)m.set=d+"._ss_("+(e.get?e.get:"'"+e+"'")+","+s.setName+","+(n?n:s.varName)+", '=', "+(f?1:0)+")";return m};u.arguments=function(t){t=t||")";var e=[];do if(this.la()!==t)e.push(this.assign().get);while(this.eat(","));return e};u.primary=function(){var t=this.ll();switch(t.type){case"{":return this.object();case"[":return this.array();case"(":return this.paren();case"STRING":this.next();return this.getset("'"+t.value+"'");case"NUMBER":this.next();return this.getset(""+t.value);case"IDENT":this.next();if(f(t.value))return this.getset(t.value);else return t.value;default:this.error("Unexpected Token: "+t.type)}};u.object=function(){var t=[this.match("{").type];var e=this.eat(["STRING","IDENT","NUMBER"]);for(;e;){t.push("'"+e.value+"'"+this.match(":").type);var i=this.assign().get;t.push(i);e=null;if(this.eat(",")&&(e=this.eat(["STRING","IDENT","NUMBER"])))t.push(",")}t.push(this.match("}").type);return{get:t.join("")}};u.array=function(){var t=[this.match("[").type],e;if(this.eat("]"))t.push("]");else{for(;e=this.assign();){t.push(e.get);if(this.eat(","))t.push(",");else break}t.push(this.match("]").type)}return{get:t.join("")}};u.paren=function(){this.match("(");var t=this.filter();t.get="("+t.get+")";this.match(")");return t};u.getset=function(t,e){return{get:t,set:e}};i.exports=n});t.register("regularjs/src/helper/extend.js",function(t,e,i){function n(t,e,i){return function(){var n=this.supr;this.supr=i[t];var s=e.apply(this,arguments);this.supr=n;return s}}function s(t,e,i){for(var s in e)if(e.hasOwnProperty(s))t[s]=r(e[s])&&r(i[s])&&o.test(e[s])?n(s,e[s],i):e[s]}var a=e("../util.js"),o=/xy/.test(function(){"xy"})?/\bsupr\b/:/.*/,r=function(t){return"function"==typeof t};var _=["events","data","computed"],d=_.length;i.exports=function c(t){function e(){n.apply(this,arguments)}function i(t){var e=d;for(;e--;){var i=_[e];if(t.hasOwnProperty(i)&&o.hasOwnProperty(i)){a.extend(o[i],t[i],!0);delete t[i]}}s(o,t,r);return this}t=t||{};var n=this,o,r=n&&n.prototype||{};if("function"==typeof t){o=t.prototype;t.implement=i;t.extend=c;return t}o=a.createProto(e,r);e.implement=i;e.implement(t);if(n.__after__)n.__after__.call(e,n,t);
e.extend=c;return e}});t.register("regularjs/src/helper/shim.js",function(t,e,i){function n(t,e){for(var i in e)if(void 0===t[i])t[i]=e[i];return e}var s=[].slice;var a={}.toString;i.exports=function(){n(String.prototype,{trim:function(){return this.replace(/^\s+|\s+$/g,"")}});n(Array.prototype,{indexOf:function(t,e){e=e||0;for(var i=e,n=this.length;i<n;i++)if(this[i]===t)return i;return-1},forEach:function(t,e){for(var i=0,n=this.length;i<n;i++)t.call(e,this[i],i,this)},filter:function(t,e){var i=[];for(var n=0,s=this.length;n<s;n++){var a=t.call(e,this[n],n,this);if(a)i.push(this[n])}return i},map:function(t,e){var i=[];for(var n=0,s=this.length;n<s;n++)i.push(t.call(e,this[n],n,this));return i}});n(Function.prototype,{bind:function(t){var e=this;var i=s.call(arguments,1);return function(){var n=i.concat(s.call(arguments));return e.apply(t,n)}}});n(Array,{isArray:function(t){return"[object Array]"===a.call(t)}})}});t.register("regularjs/src/helper/parse.js",function(t,e,i){var n=e("../env").exprCache;var s=e("../util");var a=e("../parser/Parser.js");i.exports={expression:function(t,e){if("string"==typeof t&&(t=t.trim()))t=n.get(t)||n.set(t,new a(t,{mode:2,expression:!0}).expression());if(t)return t},parse:function(t){return new a(t).parse()}}});t.register("regularjs/src/helper/watcher.js",function(t,e,i){function n(){}var s=e("../util.js");var a=e("./parse.js").expression;var o=e("./arrayDiff.js");var r={$watch:function(t,e,i){var n,o,r,_,d=this.__ext__;if(!this._watchers)this._watchers=[];i=i||{};if(i===!0)i={deep:!0};var c=s.uid("w_");if(Array.isArray(t)){var l=[];for(var f=0,u=t.length;f<u;f++)l.push(this.$expression(t[f]).get);var h=[];r=function(t){var e=!0;for(var i=0,n=l.length;i<n;i++){var a=l[i](t,d);if(!s.equals(a,h[i])){e=!1;h[i]=s.clone(a)}}return e?!1:h}}else if("function"==typeof t)n=t.bind(this);else{t=this._touchExpr(a(t));n=t.get;o=t.once}var p={id:c,get:n,fn:e,once:o,force:i.force,notld:i.indexTrack,test:r,deep:i.deep,last:i.sync?n(this):i.last};this._watchers.push(p);_=this._records&&this._records.length;if(_)this._records[_-1].push(c);if(i.init===!0){var m=this.$phase;this.$phase="digest";this._checkSingleWatch(p,this._watchers.length-1);this.$phase=m}return p},$unwatch:function(t){t=t.uid||t;if(!this._watchers)this._watchers=[];if(Array.isArray(t))for(var e=0,i=t.length;e<i;e++)this.$unwatch(t[e]);else{var n=this._watchers,s,a;if(!t||!n||!(a=n.length))return;for(;a--;){s=n[a];if(s&&s.id===t)n.splice(a,1)}}},$expression:function(t){return this._touchExpr(a(t))},$digest:function(){if("digest"!==this.$phase&&!this._mute){this.$phase="digest";var t=!1,e=0;for(;t=this._digest();)if(++e>20)throw Error("there may a circular dependencies reaches");if(e>0&&this.$emit)this.$emit("$update");this.$phase=null}},_digest:function(){var t=this._watchers;var e=!1,i,n,s;if(t&&t.length)for(var a=0,o=t.length;a<o;a++){n=t[a];s=this._checkSingleWatch(n,a);if(s)e=!0}i=this._children;if(i&&i.length)for(var r=0,_=i.length;r<_;r++){var d=i[r];if(d&&d._digest())e=!0}return e},_checkSingleWatch:function(t,e){var i=!1;if(t){var n,a,r,_,d,c;if(!t.test){n=t.get(this);a=t.last;r=s.typeOf(a);_=s.typeOf(n);d=!0,c;if("object"!==_||"object"!==r||!t.deep)if("array"===_&&("undefined"==r||"array"===r)){c=o(n,t.last||[],t.notld);if("array"!==r||c===!0||c.length)i=!0}else{d=s.equals(n,a);if(!d||t.force){t.force=null;i=!0}}else{for(var l in n)if(a[l]!==n[l]){i=!0;break}if(i!==!0)for(var f in a)if(a[f]!==n[f]){i=!0;break}}}else{var u=t.test(this);if(u){i=!0;t.fn.apply(this,u)}}if(i&&!t.test){if("object"===_&&t.deep||"array"===_)t.last=s.clone(n);else t.last=n;t.fn.call(this,n,a,c);if(t.once)this._watchers.splice(e,1)}return i}},$set:function(t,e){if(null!=t){var i=s.typeOf(t);if("string"===i||"expression"===t.type){t=this.$expression(t);t.set(this,e)}else if("function"===i)t.call(this,this.data);else for(var n in t)this.$set(n,t[n])}},$get:function(t,e){if(e&&"string"==typeof t)return t;else return this.$expression(t).get(this)},$update:function(){this.$set.apply(this,arguments);var t=this;do{if(t.data.isolate||!t.$parent)break;t=t.$parent}while(t);t.$digest()},_record:function(){if(!this._records)this._records=[];this._records.push([])},_release:function(){return this._records.pop()}};s.extend(n.prototype,r);n.mixTo=function(t){t="function"==typeof t?t.prototype:t;return s.extend(t,r)};i.exports=n});t.register("regularjs/src/helper/event.js",function(t,e,i){function n(){}var s=[].slice,a=e("../util.js");var o={$on:function(t,e){if("object"==typeof t)for(var i in t)this.$on(i,t[i]);else{var n=this;var s=n._handles||(n._handles={}),a=s[t]||(s[t]=[]);a.push(e)}return this},$off:function(t,e){var i=this;if(i._handles){if(!t)this._handles={};var n=i._handles,s;if(s=n[t]){if(!e){n[t]=[];return i}for(var a=0,o=s.length;a<o;a++)if(e===s[a]){s.splice(a,1);return i}}return i}},$emit:function(t){var e=this;var i=e._handles,n,a,o;if(t){var a=s.call(arguments,1);var o=t;if(!i)return e;if(n=i[o.slice(1)])for(var r=0,_=n.length;r<_;r++)n[r].apply(e,a);if(!(n=i[o]))return e;for(var d=0,_=n.length;d<_;d++)n[d].apply(e,a);return e}},$one:function(){}};a.extend(n.prototype,o);n.mixTo=function(t){t="function"==typeof t?t.prototype:t;a.extend(t,o)};i.exports=n});t.register("regularjs/src/helper/animate.js",function(t,e,i){function n(t){var e=0,i=0,n=0,a=0,o=0,r=5/3,_;if(window.getComputedStyle){_=window.getComputedStyle(t),i=s(_[l+"Duration"])||i;n=s(_[l+"Delay"])||n;a=s(_[f+"Duration"])||a;o=s(_[f+"Delay"])||o;e=Math.max(i+n,a+o)}return 1e3*e*r}function s(t){var e=0,i;if(!t)return 0;t.split(",").forEach(function(t){i=parseFloat(t);if(i>e)e=i});return e}var a=e("../util");var o=e("../dom.js");var r={};var _=e("../env.js");var d="transitionend",c="animationend",l="transition",f="animation";if(!("ontransitionend"in window))if("onwebkittransitionend"in window){d+=" webkitTransitionEnd";l="webkitTransition"}else if("onotransitionend"in o.tNode||"Opera"===navigator.appName){d+=" oTransitionEnd";l="oTransition"}if(!("onanimationend"in window))if("onwebkitanimationend"in window){c+=" webkitAnimationEnd";f="webkitAnimation"}else if("onoanimationend"in o.tNode){c+=" oAnimationEnd";f="oAnimation"}r.inject=function(t,e,i,n){n=n||a.noop;if(Array.isArray(t)){var s=o.fragment();var r=0;for(var _=0,d=t.length;_<d;_++)s.appendChild(t[_]);o.inject(s,e,i);var c=function(){r++;if(r===d)n()};if(d===r)n();for(_=0;_<d;_++)if(t[_].onenter)t[_].onenter(c);else c()}else{o.inject(t,e,i);if(t.onenter)t.onenter(n);else n()}};r.remove=function(t,e){function i(){n++;if(n===a)e&&e()}if(t){var n=0;if(Array.isArray(t)){for(var s=0,a=t.length;s<a;s++)r.remove(t[s],i);return t}if(t.onleave)t.onleave(function(){u(t,e)});else u(t,e)}};var u=function(t,e){o.remove(t);e&&e()};r.startClassAnimate=function(t,e,i,s){var r,l,f,u;if(!c&&!d||_.isRunning)return i();if(4!==s)u=a.once(function h(){if(f)clearTimeout(f);if(2===s)o.delClass(t,r);if(3!==s)o.delClass(t,e);o.off(t,c,u);o.off(t,d,u);i()});else u=a.once(function p(){if(f)clearTimeout(f);i()});if(2===s){o.addClass(t,e);r=e.split(/\s+/).map(function(t){return t+"-active"}).join(" ");o.nextReflow(function(){o.addClass(t,r);l=n(t);f=setTimeout(u,l)})}else if(4===s)o.nextReflow(function(){o.delClass(t,e);l=n(t);f=setTimeout(u,l)});else o.nextReflow(function(){o.addClass(t,e);l=n(t);f=setTimeout(u,l)});o.on(t,c,u);o.on(t,d,u);return u};r.startStyleAnimate=function(t,e,i){var s,r,_;o.nextReflow(function(){o.css(t,e);s=n(t);_=setTimeout(r,s)});r=a.once(function l(){if(_)clearTimeout(_);o.off(t,c,r);o.off(t,d,r);i()});o.on(t,c,r);o.on(t,d,r);return r};i.exports=r});t.register("regularjs/src/helper/combine.js",function(t,e,i){var n=e("../dom.js");var s=e("./animate.js");var a=i.exports={node:function(t){var e,i,n;if(t){if(t.element)return t.element;if("function"==typeof t.node)return t.node();if("number"==typeof t.nodeType)return t;if(t.group)return a.node(t.group);if(e=t.children){if(1===e.length)return a.node(e[0]);n=[];for(var s=0,o=e.length;s<o;s++){i=a.node(e[s]);if(Array.isArray(i))n.push.apply(n,i);else if(i)n.push(i)}return n}}},inject:function(t,e){var i=this;var o=a.node(i.group||i);if(t===!1){s.remove(o);return i}else{if(!o)return i;if("string"==typeof t)t=n.find(t);if(!t)throw Error("injected node is not found");s.inject(o,t,e)}if(i.$emit){i.$emit("$inject",t,e);i.parentNode="after"===e||"before"===e?t.parentNode:t}return i},last:function(t){var e=t.children;if("function"==typeof t.last)return t.last();if("number"==typeof t.nodeType)return t;if(e&&e.length)return a.last(e[e.length-1]);if(t.group)return a.last(t.group);else;},destroy:function(t,e){if(t){if(Array.isArray(t))for(var i=0,s=t.length;i<s;i++)a.destroy(t[i],e);var o=t.children;if("function"==typeof t.destroy)return t.destroy(e);if("number"==typeof t.nodeType&&e)n.remove(t);if(o&&o.length){a.destroy(o,!0);t.children=null}}}};n.element=function(t,e){if(!t)return!e?null:[];var i=a.node(t);if(1===i.nodeType)return e?[i]:i;var n=[];for(var s=0;s<i.length;s++){var o=i[s];if(o&&1===o.nodeType){if(!e)return o;n.push(o)}}return n}});t.register("regularjs/src/helper/arrayDiff.js",function(t,e,i){function n(t,e){var i=t.length;var n=e.length;if(i!==n)return!0;for(var s=0;s<i;s++)if(t[s]!==e[s])return!0;return!1}function s(t,e){return t===e}function a(t,e){var i=t.length;var n=e.length;var a=[];for(var o=0;o<=i;o++)a.push([o]);for(var r=1;r<=n;r++)a[0][r]=r;for(var o=1;o<=i;o++)for(var r=1;r<=n;r++)if(s(t[o-1],e[r-1]))a[o][r]=a[o-1][r-1];else a[o][r]=Math.min(a[o-1][r]+1,a[o][r-1]+1);return a}function o(t,e,i){if(i)return n(t,e);var s=a(e,t);var o=e.length;var r=o;var _=t.length;var d=_;var c=[];var l=s[r][d];for(;r>0||d>0;)if(0!==r)if(0!==d){var f=s[r-1][d-1];var u=s[r-1][d];var h=s[r][d-1];var p=Math.min(h,u,f);if(p===u){c.unshift(2);r--;l=u}else if(p===f){if(f===l)c.unshift(0);else{c.unshift(1);l=f}r--;d--}else{c.unshift(3);d--;l=h}}else{c.unshift(2);r--}else{c.unshift(3);d--}var m=0;var g=3;var b=2;var v=1;var o=0;_=0;var $=[];var y={index:null,add:0,removed:[]};for(var r=0;r<c.length;r++){
if(c[r]>0){if(null===y.index)y.index=_}else if(null!=y.index){$.push(y);y={index:null,add:0,removed:[]}}switch(c[r]){case m:o++;_++;break;case g:y.add++;_++;break;case b:y.removed.push(e[o]);o++;break;case v:y.add++;y.removed.push(e[o]);o++;_++}}if(null!=y.index)$.push(y);return $}i.exports=o});t.register("regularjs/src/helper/entities.js",function(t,e,i){var n={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,fnof:402,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,bull:8226,hellip:8230,prime:8242,Prime:8243,oline:8254,frasl:8260,weierp:8472,image:8465,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,circ:710,tilde:732,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,permil:8240,lsaquo:8249,rsaquo:8250,euro:8364};i.exports=n});t.register("regularjs/src/helper/filter.js",function(t,e,i){var n=i.exports={};n.json={get:function(t){return"undefined"!=typeof JSON?JSON.stringify(t):t},set:function(t){return"undefined"!=typeof JSON?JSON.parse(t):t}};n.last=function(t){return t&&t[t.length-1]};n.average=function(t,e){t=t||[];return t.length?n.total(t,e)/t.length:0};n.total=function(t,e){var i=0;if(t){t.forEach(function(t){i+=e?t[e]:t});return i}}});t.register("regularjs/src/directive/base.js",function(t,e,i){var n=e("../util.js");var s=e("../dom.js");var a=e("../helper/animate.js");var o=e("../Regular.js");var r=e("../const");e("./event.js");e("./form.js");i.exports={"r-class":function(t,e){if("string"==typeof e)e=n.fixObjStr(e);this.$watch(e,function(e){var i=" "+t.className.replace(/\s+/g," ")+" ";for(var n in e)if(e.hasOwnProperty(n)){i=i.replace(" "+n+" "," ");if(e[n]===!0)i+=n+" "}t.className=i.trim()},!0)},"r-style":function(t,e){if("string"==typeof e)e=n.fixObjStr(e);this.$watch(e,function(e){for(var i in e)if(e.hasOwnProperty(i))s.css(t,i,e[i])},!0)},"r-hide":function(t,e){var i=null,n;this.$watch(e,function(e){var s=!!e;if(s!==i){i=s;if(s)if(t.onleave)n=t.onleave(function(){t.style.display="none";n=null});else t.style.display="none";else{if(n)n();t.style.display="";if(t.onenter)t.onenter()}}})},"r-html":function(t,e){this.$watch(e,function(e){e=e||"";s.html(t,e)},{force:!0})},ref:{accept:r.COMPONENT_TYPE+r.ELEMENT_TYPE,link:function(t,e){var i=this.$refs||(this.$refs={});var s;if(n.isExpr(e))this.$watch(e,function(e,n){s=e;if(i[n]===t)i[n]=null;if(s)i[s]=t});else i[s=e]=t;return function(){i[s]=null}}}};o.directive(i.exports)});t.register("regularjs/src/directive/form.js",function(t,e,i){function n(t,e){function i(){e.set(n,this.value);s.last=this.value;n.$update()}var n=this;var s=this.$watch(e,function(e){var i=r.slice(t.getElementsByTagName("option"));i.forEach(function(i,n){if(i.value==e)t.selectedIndex=n})});_.on(t,"change",i);if(void 0===e.get(n)&&t.value)e.set(n,t.value);return function a(){_.off(t,"change",i)}}function s(t,e){var i=this;var n=this.$watch(e,function(e){if(t.value!==e)t.value=null==e?"":""+e});var s=function(t){var s=this;if("cut"===t.type||"paste"===t.type)r.nextTick(function(){var t=s.value;e.set(i,t);n.last=t;i.$update()});else{var a=s.value;e.set(i,a);n.last=a;i.$update()}};if(9!==_.msie&&"oninput"in _.tNode)t.addEventListener("input",s);else{_.on(t,"paste",s);_.on(t,"keyup",s);_.on(t,"cut",s);_.on(t,"change",s)}if(void 0===e.get(i)&&t.value)e.set(i,t.value);return function(){if(9!==_.msie&&"oninput"in _.tNode)t.removeEventListener("input",s);else{_.off(t,"paste",s);_.off(t,"keyup",s);_.off(t,"cut",s);_.off(t,"change",s)}}}function a(t,e){var i=this;var n=this.$watch(e,function(e){_.attr(t,"checked",!!e)});var s=function a(){var t=this.checked;e.set(i,t);n.last=t;i.$update()};if(e.set)_.on(t,"change",s);if(void 0===e.get(i))e.set(i,!!t.checked);return function o(){if(e.set)_.off(t,"change",s)}}function o(t,e){var i=this;var n=this.$watch(e,function(e){if(e==t.value)t.checked=!0;else t.checked=!1});var s=function a(){var t=this.value;e.set(i,t);i.$update()};if(e.set)_.on(t,"change",s);if(void 0===e.get(i))if(t.checked)e.set(i,t.value);return function o(){if(e.set)_.off(t,"change",s)}}var r=e("../util.js");var _=e("../dom.js");var d=e("../Regular.js");var c={text:s,select:n,checkbox:a,radio:o};d.directive("r-model",function(t,e){var i=t.tagName.toLowerCase();var n=i;if("input"===n)n=t.type||"text";else if("textarea"===n)n="text";if("string"==typeof e)e=this.$expression(e);if(c[n])return c[n].call(this,t,e);else if("input"===i)return c.text.call(this,t,e)})});t.register("regularjs/src/directive/animation.js",function(t,e,i){function n(t){var e=[],i=0,n=a.noop;var s;var o={type:t,start:function(t){s=a.uid();if("function"==typeof t)n=t;if(i>0)i=0;else o.step();return o.compelete},compelete:function(){s=null;n&&n();n=a.noop;i=0},step:function(){if(e[i])e[i](o.done.bind(o,s))},done:function(t){if(t===s)if(i<e.length-1){i++;o.step()}else o.compelete()},push:function(t){e.push(t)}};return o}function s(t,e){function i(t){l&&c.push(l);l=n(t)}function s(t,e){if(e)t()}function a(t){return function(){delete t.onenter;delete t.onleave}}var o=this.constructor;e=e.trim();var r=e.split(";"),_,d=this,c=[],l,f=[],p,m,g,b=0,v,$,y=this;for(var x=0,w=r.length;x<w;x++){_=r[x];v=_.split(":");m=v[0]&&v[0].trim();g=v[1]&&v[1].trim();if(m)if(m!==u)if(m!==h){var $=o.animation(m);if($&&l)l.push($.call(this,{element:t,done:l.done,param:g}));else throw Error($?"you should start with `on` or `event` in animation":"undefined animator 【"+m+"】")}else{i(g);if("leave"===g){t.onleave=l.start;f.push(a(t))}else if("enter"===g){t.onenter=l.start;f.push(a(t))}else if("on"+g in t)f.push(this._handleEvent(t,g,l.start));else{this.$on(g,l.start);f.push(this.$off.bind(this,g,l.start))}}else{i("when");this.$watch(g,s.bind(this,l.start))}else;}if(f.length)return function(){f.forEach(function(t){t()})}}var a=e("../util.js"),o=e("../helper/animate.js"),r=e("../dom.js"),_=e("../Regular.js");var d=/^[-\w]+(\s[-\w]+)*$/,c=/[\r\n\f ]*,[\r\n\f ]*(?=\w+\:)/,l=/^\{.*\}$/,f=/\s+/,u="when",h="on",p="then";_._addProtoInheritCache("animation");_.animation({wait:function(t){var e=parseInt(t.param)||0;return function(t){setTimeout(t,e)}},"class":function(t){var e=t.param.split(","),i=e[0]||"",n=parseInt(e[1])||1;return function(e){o.startClassAnimate(t.element,i,e,n)}},call:function(t){var e=this.$expression(t.param).get,i=this;return function(t){e(i);i.$update();t()}},emit:function(t){var e=t.param;var i=e.split(","),n=i[0]||"",s=i[1]?this.$expression(i[1]).get:null;if(!n)throw Error("you shoud specified a eventname in emit command");var a=this;return function(t){a.$emit(n,s?s(a):void 0);t()}},style:function(t){var e={},i=t.param,n=i.split(","),s;n.forEach(function(t){t=t.trim();if(t){var i=t.split(f),n=i.shift(),a=i.join(" ");if(!n||!a)throw Error("invalid style in command: style");e[n]=a;s=!0}});return function(i){if(s)o.startStyleAnimate(t.element,e,i);else i()}}});_.directive("r-animation",s);_.directive("r-anim",s)});t.register("regularjs/src/directive/event.js",function(t,e,i){function n(t,e,i){if(i){var n=t.target,s;for(;n&&n!==i;){for(var a=0,o=e.length;a<o;a++){s=e[a];if(s&&s.element===n)s.fire(t)}n=n.parentNode}}}var s=e("../util.js");var a=e("../dom.js");var o=e("../Regular.js");o._addProtoInheritCache("event");o.directive(/^on-\w+$/,function(t,e,i,n){if(i&&e){var s=i.split("-")[1];return this._handleEvent(t,s,e,n)}});o.directive(/^(delegate|de)-\w+$/,function(t,e,i){function o(t){n(t,_[d],r.parentNode)}var r=this.$root;var _=r._delegates||(r._delegates={});if(i&&e){var d=i.split("-")[1];var c=s.handleEvent.call(this,e,d);if(!_[d]){_[d]=[];if(r.parentNode)a.on(r.parentNode,d,o);else r.$on("$inject",function(t){var e=this.parentNode;if(e)a.off(e,d,o);a.on(t,d,o)});r.$on("$destroy",function(){if(r.parentNode)a.off(r.parentNode,d,o);_[d]=null})}var l={element:t,fire:c};_[d].push(l);return function(){var t=_[d];if(t&&t.length)for(var e=0,i=t.length;e<i;e++)if(t[e]===l)t.splice(e,1)}}})});t.register("regularjs/src/module/timeout.js",function(t,e,i){
function n(t){t.implement({$timeout:function(t,e){e=e||0;return setTimeout(function(){t.call(this);this.$update()}.bind(this),e)},$interval:function(t,e){e=e||1e3/60;return setInterval(function(){t.call(this);this.$update()}.bind(this),e)}})}var s=e("../Regular.js");s.plugin("timeout",n);s.plugin("$timeout",n)});t.alias("regularjs/src/index.js","regularjs/index.js");if("object"==typeof exports)module.exports=t("regularjs");else if("function"==typeof define&&define.amd)define(function(){return t("regularjs")});else window["Regular"]=t("regularjs")}();I$("1aa4f6ab9d68a7f59545fd2b44ae9071",function(t,e){e.format=function(){function t(t){t=""+(String(t)||"");return t.length<=1?"0"+t:t}var e={yyyy:function(t){return t.getFullYear()},MM:function(e){return t(e.getMonth()+1)},dd:function(e){return t(e.getDate())},HH:function(e){return t(e.getHours())},mm:function(e){return t(e.getMinutes())},ss:function(e){return t(e.getSeconds())}};var i=[];for(var n in e)i.push(n);var s=new RegExp(i.join("|"),"g");return function(t,i){if(!t)return"--";i=i||"yyyy-MM-dd HH:mm";t=Number(t);t=new Date(t);return i.replace(s,function(i){return e[i]?e[i](t):""})}}();e.average=function(t,i){t=t||[];return t.length?e.total(t,i)/t.length:0};e.total=function(t,e){var i=0;if(t){t.forEach(function(t){i+=e?t[e]:t});return i}};e.escape=function(t){return(t||"").replace(/</g,"&lt;").replace(/>/g,"&gt;")};e.average=function(t,i){t=t||[];return t.length?e.total(t,i)/t.length:0};e.duration=function(t,e){if(!t)return"--";e=e||"HH小时mm分ss秒";var i=Math.floor(t/36e5);t-=36e5*i;var n=Math.floor(t/6e4);t-=6e4*n;var s=Math.floor(t/1e3);var a={HH:i,mm:n,ss:s};if(e=e.replace(/(HH)|(mm)|(ss)/g,function(t){return a[t]}).match(/[1-9].*/))if(i>0)return e[0].match(/(.*分)/)&&e[0].match(/(.*分)/)[0];else return e&&e[0];return"0秒"};e.sliceWord=function(t,e){e=parseInt(e);return t.slice(0,e)};e.spliceSuffix=function(t){var e=t.split("."),i={bmp:"imgflag",png:"imgflag",jpg:"imgflag",jpeg:"imgflag",gif:"imgflag",exif:"imgflag",pdf:"pdf",txt:"txt",doc:"doc",docx:"doc",xls:"excel",xlsx:"excel",csv:"excel",zip:"zip",rar:"zip","7z":"zip",ppt:"ppt",pptx:"ppt",key:"key",mp3:"audio",wma:"audio",ape:"audio",flac:"audio",wav:"audio",aac:"audio",ogg:"audio",avi:"video",mov:"video",mkv:"video",rmvb:"video",wmv:"video","3gp":"video",flv:"video",mp4:"video",mpg:"video"},n=i[e[e.length-1].toLowerCase()];if(!n)return"unknown";else return n};e.durationSecond=function(t){if(void 0===t)return"-";var e=Math.floor(t/1e3);return e};e.durationMinute=function(t){if(void 0===t)return"-";var e=36e5,i=6e4;t-=Math.floor(t/e)*e;return Math.floor(t/i)};e.durationMSecond=function(t){if(void 0===t)return"-";var e=6e4;t-=Math.floor(t/e)*e;return Math.floor(t/1e3)};e.durationMHour=function(t){if(void 0===t)return"-";var e=864e5,i=36e5;t-=Math.floor(t/e)*e;return Math.floor(t/i)};e.formatDate=function(t){if(void 0===t)return"-";var i=new Date(t),n=new Date,s=new Date(t).setHours(0,0,0,0),a=(new Date).setHours(0,0,0,0),o=864e5;if(a-s==0)return"今天";else if(a-s==o)return"昨天";else if(a-s>o&&i.getYear()==n.getYear())return e.format(i,"MM-dd");else return e.format(i,"yyyy-MM-dd")};e.formatTime=function(t){if(void 0===t)return"-";var i=new Date(t),n=new Date,s=new Date(t).setHours(0,0,0,0),a=(new Date).setHours(0,0,0,0),o=864e5;if(a-s==0)return"今天 "+e.format(i,"HH:mm");else if(a-s==o)return"昨天 "+e.format(i,"HH:mm");else if(Math.abs(a-s)>=o&&i.getYear()==n.getYear())return e.format(i,"MM-dd HH:mm");else return e.format(i,"yyyy-MM-dd HH:mm")};e.ratio=function(t,e){e=e||"-";if(void 0===t||t==-1)return e;else if(100*t>999)return">999";else return(100*t).toFixed(0)};e.ratioPoint=function(t,e){e=e||"--";if(void 0===t||t==-1)return e;else if(100*t>999)return">999%";else return(100*t).toFixed(1)+"%"};e.ratioPoint2=function(t,e){e=e||"--";if(void 0===t||t==-1)return e;else if(100*t>999)return">999%";else return(100*t).toFixed(2)+"%"};e.ratioPect=function(t,e){e=e||"--";if(void 0===t||t==-1)return e;else if(100*t>999)return">999%";else return(100*t).toFixed(0)+"%"};e.toFixed=function(t,e){if(t==-1)return e||"--";var i=t/1e4,n=t%1e4,s=t/1e4/1e3;if(i>=1&&s<1)if(0==n)return i+"万";else return i.toFixed(2)+"万";else if(s>=1)return Math.round(t/1e4)+"万";else return t};e.toFixed1=function(e,i){var n=parseFloat(e,10),s;if(null==i)i=2;if(0==i)return t._$fixed(n,0);if(t._$isNumber(n)){s=t._$fixed(n,2);var a=s.toString();var o=a.indexOf(".");if(o<0){o=a.length;a+="."}for(;a.length<=o+i;)a+="0";return a}else return""};e.kbSize=function(t){t=Number(t);var e=1048576;if(t<1024)return t+"B";else if(t<e)return Math.floor(t/1024)+"KB";var i=Math.floor(t/e),n=/0\.(\d)/.exec((t-i*e)/e)[1];return i+"."+n+"M"};e.filterTag=function(t,e){t=t||"";var i=new RegExp("<"+e+"[^>]*>([\\s\\S]*?)<\\/"+e+">","ig");return t.replace(i,function(t,e){return e})};e.number2string={get:function(t){return void 0==t?"":String(t)},set:function(t){return Number(t)}};e.noEmoji={get:function(t){if(void 0==t)return t;else return t.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,"")},set:function(t){return t.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,"")}};e.digitOnly={get:function(t){if(t)t=t.replace(/\D/g,"");return t},set:function(t){if(t)t=t.replace(/\D/g,"");return t}};e.ellipsis=function(t,e){var i=t.length,n="",s="",a="";if(t.length<=2*e){n=t;return n}else{s=t.slice(0,e);a=t.slice(i-e,i);return s+"..."+a}};e.averageFix=function(t,e){if(t==-1)return"--";else return t.toFixed(e)};return e},"fbbf6ddc0634989027d138f4ffd4b78b");I$("67eadb673949a8d477c88c1332c27489",function(t,e,i,n){var s=Regular.dom;return{enter:function(t,e){function i(t){if(13==t.which){t.preventDefault();t.stopPropagation();e(t)}}s.on(t,"keypress",i);return function n(){s.off(t,"keypress",i)}}}},"3e346f2b6313e57a75f5ee9b603c4b65","9733787c25ceca396cb6e8dcce07ee63","2f42bd4202bba1781886820b65db2a46","a9cc71165a1c61dd7fb256bd90639a7b");I$("0c810e24ee724449ad1873442eab590d",function(t,e,i,n,s,a,o){var r=Regular.dom;return{"z-crt":function(t,e){this.$watch(e,function(e){r[e?"addClass":"delClass"](t,"z-selected")})},"q-render":function(t,e){this.$watch(e,function(e){if(e)t.innerHTML=qs.render(e)})},"r-autofocus":function(t,e){setTimeout(function(){t.focus()},0)},"r-scroll":function(t,e){this.$watch(e,function(e){if(e&&t){var i=t.parentElement.parentElement.parentElement;i.scrollTop=t.offsetTop}})},"r-href":function(t,e){this.$watch(e,function(e){var i=location.href.split("#");i=i[1]||"";r.attr(t,"href","#"+path.join(i,e+""))})},"r-loading":function(e,i){var n=e.getAttribute("rule"),s=window.appConfig,a;this.$watch(i,function(i,o){e.src="https://ysf.nosdn.127.net/0D9A866D6BBCB9665CD53E5201A34324";if(""!==i)if(s){a=s.protocol.boss+"://"+s.domain.boss+s.online.boss;e.src=a+"res/img/loading.gif";t._$addClassName(e,"f-loding");var r=new Image;var _=function(){t._$delClassName(e,"f-loding");e.src=i+n};r.onload=_;r.onerror=_;r.src=i+n}else e.src=i+n})},"r-quickdelete":function(e,n){var s=t._$getByClassName(e,"j-quickdelete"),a=s[0],o=s[1];var _=function(){var t=(""+this.$get(n)).trim()||"";t.length?d.call(this):c.call(this)};var d=function(){t._$delClassName(o,"f-dn")};var c=function(){t._$addClassName(o,"f-dn")};var l=function(t){i._$stop(t);this.$update(n,"");c();a.focus()};c();r.on(a,"focus",_._$bind(this));r.on(a,"keyup",_._$bind(this));r.on(a,"blur",c._$bind(this));r.on(o,"mousedown",l._$bind(this))},"r-number":function(t,e,i,n){var s=this;r.on(t,"keydown",function(t){var e=t.event;var i=e.keyCode;if(!([46,8,9,27,13,110,190].indexOf(i)!==-1||65==i&&e.ctrlKey===!0||67==i&&e.ctrlKey===!0||88==i&&e.ctrlKey===!0||i>=35&&i<=39))if((e.shiftKey||i<48||i>57)&&(i<96||i>105)){t.preventDefault();return!1}})},"r-numberinput":function(t,e,i,n){var s=this;r.on(t,"input",function(t){var e=t.event;var i=new RegExp("^\\d+$");if(!i.test(e.target.value)){t.target.value=isNaN(parseInt(t.target.value))||0==t.target.value?"":parseInt(t.target.value);return!1}})}}},"5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","a9cc71165a1c61dd7fb256bd90639a7b","3e346f2b6313e57a75f5ee9b603c4b65");I$("fe686268a0af212baea04fc64f0059e8",function(t,e,i,n,s,a,o,r){var _=Regular.dom;o.Component=Regular.extend({emmiter:new Regular,diff:a._$walkDiff,origin:{},config:function(t){this.supr(t)},cloneOrigin:function(t){for(var e in t)this.origin[e]=JSON.parse(JSON.stringify(t[e]))},copy:function(t){return JSON.parse(JSON.stringify(t))},clearError:function(t){if("object"===a._$typeOf(t))for(var e in t)for(var i=0,n=t[e].length;i<n;i++)t[e][i].error.error=!1;if("array"===a._$typeOf(t))for(var i=0,n=t.length;i<n;i++)t[i].error.error=!1},uiState:{},uiModel:{},services:{},param:{}}).filter(i).event(n).directive(s);return o},"5fb495f256a5dcde2a92e5fe919a6422","a9cc71165a1c61dd7fb256bd90639a7b","1aa4f6ab9d68a7f59545fd2b44ae9071","67eadb673949a8d477c88c1332c27489","0c810e24ee724449ad1873442eab590d","3e346f2b6313e57a75f5ee9b603c4b65");I$("47c2f4a1e8248d01ae72b66a75aaaba4",'{#if disabledImg }\n<div class="m-gif-animation" on-click={this.onClickGif($event)}>\n    <canvas r-hide= {status} ref="gif" width={width} height={height} >\n        <img src={src} alt="" class="{@(class)}">\n    </canvas>\n    {#if showName}\n    <p class="m-gif-name">{this.getName(name)}</p>        \n    {/if}\n</div>\n{#else}\n    <div class="m-gif-animation" on-click={this.onClickGif($event)} on-mouseover={this.onHoverGif($event)} on-mouseout={this.unHoverGif($event)}>\n        <canvas r-hide= {status} ref="gif" width={width} height={height} >\n            <img src={src} alt="" class="{@(class)}">\n        </canvas>\n        <img r-hide= {!status} src={src} alt="" class="m-animation-img {@(class)}"> \n        {#if showName}\n        <p class="m-gif-name">{this.getName(name)}</p>        \n        {/if}\n    </div>\n{/if}');I$("3d26a747034790a096b7178e1dd6f802",function(t,e,i,n,s,a){a=Regular.extend({name:"gif",template:s,config:function(){e._$extend(this.data,{status:!1,container:null,gifIMG:null,includeCC:null});this.supr();
},init:function(){this.supr();this.staticGif()},getName:function(t){return t.split(".")[0]},staticGif:function(){var t=this.$refs.gif;if(t.getContext){var e=t.getContext("2d");var i=new Image;i.src=this.data.src;i.align="middle";i.onload=function(t){this.data.Imgwidth=i.width;this.data.ImgHeight=i.height;e.drawImage(i,0,0,this.data.width,this.data.height)}.bind(this);this.data.currentCanvas=i}},onClickGif:function(t){this.$emit("onClickGif",this.data)},onHoverGif:function(t){this.data.status=!0},unHoverGif:function(t){if(this.data.status)this.data.status=!1}});return a},"fe686268a0af212baea04fc64f0059e8","3e346f2b6313e57a75f5ee9b603c4b65","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","47c2f4a1e8248d01ae72b66a75aaaba4");I$("c80188f00e89b7c0dd733a9e345d0960",'<textarea name="ntp" id="#<cnt>">\n  <div class="f-dn">\n  \t<div class="j-flag portrait_cnt"></div>\n  </div>\n</textarea>\n\n<textarea name="jst" id="#<list>">\n\t<div class="portrait_wapper">\n\t    <div class="protrait_header portrait-hide-old-sdk">\n\t\t\t{if defaultEmojiStatus}\n\t\t\t\t<p class="protrait_header_tab default_emoji" data-action="showDefault">\n\t\t\t\t\t <img src="https://qiyukf.nosdn.127.net/sdk/res/img/emoji_icon_3b5918ef8e661857f9125df60a295f98.png" alt="">\n\t\t\t\t </p>\n\t\t\t {/if}\n\t\t\t {list emojiLists as e}\n\t\t\t\t{if e.emojiType==1}\n\t\t\t\t\t<p class="protrait_header_tab default_emoji" data-action="showDIY">\n\t\t\t\t\t\t<img src="${e.emojiPackagePicUrl}" alt="">\n\t\t\t\t\t</p>\n\t\t\t\t\t{else}\n\t\t\t\t\t<p class="protrait_header_tab default_emoji" data-action="showEmoji">\n\t\t\t\t\t\t<img src="${e.emojiPackagePicUrl}" alt="">\n\t\t\t\t\t</p>\n\t\t\t\t\t{/if}\n\t\t\t{/list}\n\t\t</div>\n\t\t{if defaultEmojiStatus || newWebTrade }\n\t\t\t<div class="portrait_list f-clr j-list">\n\t\t\t\t{list plist as p}\n\t\t\t\t<!-- 行开始 -->\n\t\t\t\t{if (p_index + 1) % col === 1}\n\t\t\t\t<ul class="f-clr">\n\t\t\t\t{/if}\n\t\t\t\t<!-- 行开始end -->\n\t\t\t\t\t<li><i class="portrait_img portrait_icon_${p.file|reduceExt}" data-src="${prefix}${p.file}" data-id="${p.id}" title="${p.tag}" alt="${p.tag}"></i></li>\n\t\t\t\t<!-- 行结束 -->\n\t\t\t\t{if p_index % col === col-1}\n\t\t\t\t</ul>\n\t\t\t\t{/if}\n\t\t\t\t<!-- 行结束end -->\n\t\t\t\t{/list}\n\t\t\t</div>\n\t\t{/if}\n\t\t{list emojiLists as e}\n\t\t{if e.emojiType==1}\n\t\t\t<div class="portrait_list f-clr j-list portrait-hide-old-sdk"></div>\n\t\t{else}\n\t\t\t<div class="portrait_list f-clr j-list portrait-hide-old-sdk">\n\t\t\t\t{list e.emojiList as p}\n\t\t\t\t<!-- 行开始 -->\n\t\t\t\t{if (p_index + 1) % col === 1}\n\t\t\t\t<ul class="f-clr">\n\t\t\t\t{/if}\n\t\t\t\t<!-- 行开始end -->\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<img class="m-set-emoji" src="${p.emojiUrl}" data-id="${p.id}" title="${p.tag}" alt="${p.tag}" data-img="${p.emojiUrl}"/>\n\t\t\t\t\t</li>\n\t\t\t\t<!-- 行结束 -->\n\t\t\t\t{if p_index % col === col-1}\n\t\t\t\t</ul>\n\t\t\t\t{/if}\n\t\t\t\t<!-- 行结束end -->\n\t\t\t\t{/list}\n\t\t\t</div>\n\t\t{/if}\n\t\t{/list}\n\t</div>\n</textarea>');I$("c40b8b3f75a721d496905d04f6f9a735",{plist:[{id:"emoticon_emoji_01",tag:"[可爱]",file:"emoji_01.png"},{id:"emoticon_emoji_0",tag:"[大笑]",file:"emoji_00.png"},{id:"emoticon_emoji_02",tag:"[色]",file:"emoji_02.png"},{id:"emoticon_emoji_03",tag:"[嘘]",file:"emoji_03.png"},{id:"emoticon_emoji_04",tag:"[亲]",file:"emoji_04.png"},{id:"emoticon_emoji_05",tag:"[呆]",file:"emoji_05.png"},{id:"emoticon_emoji_06",tag:"[口水]",file:"emoji_06.png"},{id:"emoticon_emoji_145",tag:"[汗]",file:"emoji_145.png"},{id:"emoticon_emoji_07",tag:"[呲牙]",file:"emoji_07.png"},{id:"emoticon_emoji_08",tag:"[鬼脸]",file:"emoji_08.png"},{id:"emoticon_emoji_09",tag:"[害羞]",file:"emoji_09.png"},{id:"emoticon_emoji_10",tag:"[偷笑]",file:"emoji_10.png"},{id:"emoticon_emoji_11",tag:"[调皮]",file:"emoji_11.png"},{id:"emoticon_emoji_12",tag:"[可怜]",file:"emoji_12.png"},{id:"emoticon_emoji_13",tag:"[敲]",file:"emoji_13.png"},{id:"emoticon_emoji_14",tag:"[惊讶]",file:"emoji_14.png"},{id:"emoticon_emoji_15",tag:"[流感]",file:"emoji_15.png"},{id:"emoticon_emoji_16",tag:"[委屈]",file:"emoji_16.png"},{id:"emoticon_emoji_17",tag:"[流泪]",file:"emoji_17.png"},{id:"emoticon_emoji_18",tag:"[嚎哭]",file:"emoji_18.png"},{id:"emoticon_emoji_19",tag:"[惊恐]",file:"emoji_19.png"},{id:"emoticon_emoji_20",tag:"[怒]",file:"emoji_20.png"},{id:"emoticon_emoji_21",tag:"[酷]",file:"emoji_21.png"},{id:"emoticon_emoji_22",tag:"[不说]",file:"emoji_22.png"},{id:"emoticon_emoji_23",tag:"[鄙视]",file:"emoji_23.png"},{id:"emoticon_emoji_24",tag:"[阿弥陀佛]",file:"emoji_24.png"},{id:"emoticon_emoji_25",tag:"[奸笑]",file:"emoji_25.png"},{id:"emoticon_emoji_26",tag:"[睡着]",file:"emoji_26.png"},{id:"emoticon_emoji_27",tag:"[口罩]",file:"emoji_27.png"},{id:"emoticon_emoji_28",tag:"[生气]",file:"emoji_28.png"},{id:"emoticon_emoji_29",tag:"[抠鼻孔]",file:"emoji_29.png"},{id:"emoticon_emoji_30",tag:"[疑问]",file:"emoji_30.png"},{id:"emoticon_emoji_31",tag:"[怒骂]",file:"emoji_31.png"},{id:"emoticon_emoji_32",tag:"[晕]",file:"emoji_32.png"},{id:"emoticon_emoji_33",tag:"[呕吐]",file:"emoji_33.png"},{id:"emoticon_emoji_160",tag:"[拜一拜]",file:"emoji_160.png"},{id:"emoticon_emoji_161",tag:"[惊喜]",file:"emoji_161.png"},{id:"emoticon_emoji_162",tag:"[流汗]",file:"emoji_162.png"},{id:"emoticon_emoji_163",tag:"[卖萌]",file:"emoji_163.png"},{id:"emoticon_emoji_164",tag:"[默契眨眼]",file:"emoji_164.png"},{id:"emoticon_emoji_165",tag:"[烧香拜佛]",file:"emoji_165.png"},{id:"emoticon_emoji_166",tag:"[晚安]",file:"emoji_166.png"},{id:"emoticon_emoji_116",tag:"[撇嘴]",file:"new_emoji_01.png"},{id:"emoticon_emoji_117",tag:"[难过]",file:"1f641.png"},{id:"emoticon_emoji_118",tag:"[冷汗]",file:"1f628.png"},{id:"emoticon_emoji_119",tag:"[抓狂]",file:"1f629.png"},{id:"emoticon_emoji_120",tag:"[傲慢]",file:"1f615.png"},{id:"emoticon_emoji_121",tag:"[困]",file:"1f62a.png"},{id:"emoticon_emoji_123",tag:"[疯了]",file:"1f616.png"},{id:"emoticon_emoji_124",tag:"[白眼]",file:"new_emoji_02.png"},{id:"emoticon_emoji_125",tag:"[衰]",file:"new_emoji_05.png"},{id:"emoticon_emoji_126",tag:"[再见]",file:"new_emoji_06.png"},{id:"emoticon_emoji_127",tag:"[哼哼]",file:"1f63e.png"},{id:"emoticon_emoji_129",tag:"[饥饿]",file:"new_emoji_03.png"},{id:"emoticon_emoji_143",tag:"[飞吻]",file:"new_emoji_10.png"},{id:"emoticon_emoji_144",tag:"[微笑]",file:"1f642.png"},{id:"emoticon_emoji_145",tag:"[泪中带笑]",file:"new_emoji_13.png"},{id:"emoticon_emoji_146",tag:"[吐舌头]",file:"1f61d.png"},{id:"emoticon_emoji_147",tag:"[忧郁]",file:"new_emoji_11.png"},{id:"emoticon_emoji_148",tag:"[尴尬]",file:"1f630.png"},{id:"emoticon_emoji_149",tag:"[舒适]",file:"1f60c.png"},{id:"emoticon_emoji_150",tag:"[不悦]",file:"1f612.png"},{id:"emoticon_emoji_155",tag:"[拍掌]",file:"new_emoji_09.png"},{id:"emoticon_emoji_156",tag:"[糗大了]",file:"new_emoji_07.png"},{id:"emoticon_emoji_122",tag:"[奋斗]",file:"1f4aa-1f3fc.png"},{id:"emoticon_emoji_130",tag:"[乒乓]",file:"new_emoji_23.png"},{id:"emoticon_emoji_131",tag:"[猪头]",file:"1f437.png"},{id:"emoticon_emoji_132",tag:"[玫瑰]",file:"new_emoji_25.png"},{id:"emoticon_emoji_133",tag:"[凋谢]",file:"new_emoji_24.png"},{id:"emoticon_emoji_134",tag:"[瓢虫]",file:"1f41e.png"},{id:"emoticon_emoji_135",tag:"[月亮]",file:"new_emoji_30.png"},{id:"emoticon_emoji_136",tag:"[礼物]",file:"new_emoji_28.png"},{id:"emoticon_emoji_137",tag:"[拥抱]",file:"new_emoji_08.png"},{id:"emoticon_emoji_138",tag:"[抱拳]",file:"new_emoji_18.png"},{id:"emoticon_emoji_139",tag:"[勾引]",file:"new_emoji_19.png"},{id:"emoticon_emoji_140",tag:"[差劲]",file:"new_emoji_20.png"},{id:"emoticon_emoji_141",tag:"[爱你]",file:"new_emoji_21.png"},{id:"emoticon_emoji_142",tag:"[NO]",file:"new_emoji_22.png"},{id:"emoticon_emoji_151",tag:"[幽灵]",file:"1f47b.png"},{id:"emoticon_emoji_152",tag:"[礼盒]",file:"1f49d.png"},{id:"emoticon_emoji_153",tag:"[拜托]",file:"1f64f-1f3fc.png"},{id:"emoticon_emoji_154",tag:"[气球]",file:"1f388.png"},{id:"emoticon_emoji_34",tag:"[强]",file:"emoji_34.png"},{id:"emoticon_emoji_35",tag:"[弱]",file:"emoji_35.png"},{id:"emoticon_emoji_36",tag:"[OK]",file:"emoji_36.png"},{id:"emoticon_emoji_37",tag:"[拳头]",file:"emoji_37.png"},{id:"emoticon_emoji_38",tag:"[胜利]",file:"emoji_38.png"},{id:"emoticon_emoji_39",tag:"[鼓掌]",file:"emoji_39.png"},{id:"emoticon_emoji_167",tag:"[握手]",file:"emoji_167.png"},{id:"emoticon_emoji_40",tag:"[发怒]",file:"emoji_40.png"},{id:"emoticon_emoji_41",tag:"[骷髅]",file:"emoji_41.png"},{id:"emoticon_emoji_42",tag:"[便便]",file:"emoji_42.png"},{id:"emoticon_emoji_43",tag:"[火]",file:"emoji_43.png"},{id:"emoticon_emoji_44",tag:"[溜]",file:"emoji_44.png"},{id:"emoticon_emoji_45",tag:"[爱心]",file:"emoji_45.png"},{id:"emoticon_emoji_46",tag:"[心碎]",file:"emoji_46.png"},{id:"emoticon_emoji_47",tag:"[钟情]",file:"emoji_47.png"},{id:"emoticon_emoji_48",tag:"[唇]",file:"emoji_48.png"},{id:"emoticon_emoji_49",tag:"[戒指]",file:"emoji_49.png"},{id:"emoticon_emoji_50",tag:"[钻石]",file:"emoji_50.png"},{id:"emoticon_emoji_51",tag:"[太阳]",file:"emoji_51.png"},{id:"emoticon_emoji_52",tag:"[有时晴]",file:"emoji_52.png"},{id:"emoticon_emoji_53",tag:"[多云]",file:"emoji_53.png"},{id:"emoticon_emoji_54",tag:"[雷]",file:"emoji_54.png"},{id:"emoticon_emoji_55",tag:"[雨]",file:"emoji_55.png"},{id:"emoticon_emoji_56",tag:"[雪花]",file:"emoji_56.png"},{id:"emoticon_emoji_57",tag:"[爱人]",file:"emoji_57.png"},{id:"emoticon_emoji_58",tag:"[帽子]",file:"emoji_58.png"},{id:"emoticon_emoji_59",tag:"[皇冠]",file:"emoji_59.png"},{id:"emoticon_emoji_60",tag:"[篮球]",file:"emoji_60.png"},{id:"emoticon_emoji_61",tag:"[足球]",file:"emoji_61.png"},{id:"emoticon_emoji_62",tag:"[垒球]",file:"emoji_62.png"},{id:"emoticon_emoji_63",tag:"[网球]",file:"emoji_63.png"},{id:"emoticon_emoji_64",tag:"[台球]",file:"emoji_64.png"},{id:"emoticon_emoji_65",tag:"[咖啡]",file:"emoji_65.png"},{id:"emoticon_emoji_66",tag:"[啤酒]",file:"emoji_66.png"},{id:"emoticon_emoji_67",tag:"[干杯]",file:"emoji_67.png"},{id:"emoticon_emoji_68",tag:"[柠檬汁]",file:"emoji_68.png"},{id:"emoticon_emoji_69",tag:"[餐具]",file:"emoji_69.png"},{id:"emoticon_emoji_70",tag:"[汉堡]",file:"emoji_70.png"},{id:"emoticon_emoji_71",tag:"[鸡腿]",file:"emoji_71.png"},{id:"emoticon_emoji_72",tag:"[面条]",file:"emoji_72.png"
},{id:"emoticon_emoji_73",tag:"[冰淇淋]",file:"emoji_73.png"},{id:"emoticon_emoji_74",tag:"[沙冰]",file:"emoji_74.png"},{id:"emoticon_emoji_75",tag:"[生日蛋糕]",file:"emoji_75.png"},{id:"emoticon_emoji_76",tag:"[蛋糕]",file:"emoji_76.png"},{id:"emoticon_emoji_77",tag:"[糖果]",file:"emoji_77.png"},{id:"emoticon_emoji_78",tag:"[葡萄]",file:"emoji_78.png"},{id:"emoticon_emoji_79",tag:"[西瓜]",file:"emoji_79.png"},{id:"emoticon_emoji_80",tag:"[光碟]",file:"emoji_80.png"},{id:"emoticon_emoji_81",tag:"[手机]",file:"emoji_81.png"},{id:"emoticon_emoji_82",tag:"[电话]",file:"emoji_82.png"},{id:"emoticon_emoji_83",tag:"[电视]",file:"emoji_83.png"},{id:"emoticon_emoji_84",tag:"[声音开启]",file:"emoji_84.png"},{id:"emoticon_emoji_85",tag:"[声音关闭]",file:"emoji_85.png"},{id:"emoticon_emoji_86",tag:"[铃铛]",file:"emoji_86.png"},{id:"emoticon_emoji_87",tag:"[锁头]",file:"emoji_87.png"},{id:"emoticon_emoji_88",tag:"[放大镜]",file:"emoji_88.png"},{id:"emoticon_emoji_89",tag:"[灯泡]",file:"emoji_89.png"},{id:"emoticon_emoji_90",tag:"[锤头]",file:"emoji_90.png"},{id:"emoticon_emoji_91",tag:"[烟]",file:"emoji_91.png"},{id:"emoticon_emoji_92",tag:"[炸弹]",file:"emoji_92.png"},{id:"emoticon_emoji_93",tag:"[枪]",file:"emoji_93.png"},{id:"emoticon_emoji_94",tag:"[刀]",file:"emoji_94.png"},{id:"emoticon_emoji_95",tag:"[药]",file:"emoji_95.png"},{id:"emoticon_emoji_96",tag:"[打针]",file:"emoji_96.png"},{id:"emoticon_emoji_97",tag:"[钱袋]",file:"emoji_97.png"},{id:"emoticon_emoji_98",tag:"[钞票]",file:"emoji_98.png"},{id:"emoticon_emoji_99",tag:"[银行卡]",file:"emoji_99.png"},{id:"emoticon_emoji_100",tag:"[手柄]",file:"emoji_100.png"},{id:"emoticon_emoji_101",tag:"[麻将]",file:"emoji_101.png"},{id:"emoticon_emoji_102",tag:"[调色板]",file:"emoji_102.png"},{id:"emoticon_emoji_103",tag:"[电影]",file:"emoji_103.png"},{id:"emoticon_emoji_104",tag:"[麦克风]",file:"emoji_104.png"},{id:"emoticon_emoji_105",tag:"[耳机]",file:"emoji_105.png"},{id:"emoticon_emoji_106",tag:"[音乐]",file:"emoji_106.png"},{id:"emoticon_emoji_107",tag:"[吉他]",file:"emoji_107.png"},{id:"emoticon_emoji_108",tag:"[火箭]",file:"emoji_108.png"},{id:"emoticon_emoji_109",tag:"[飞机]",file:"emoji_109.png"},{id:"emoticon_emoji_110",tag:"[火车]",file:"emoji_110.png"},{id:"emoticon_emoji_111",tag:"[公交]",file:"emoji_111.png"},{id:"emoticon_emoji_112",tag:"[轿车]",file:"emoji_112.png"},{id:"emoticon_emoji_113",tag:"[出租车]",file:"emoji_113.png"},{id:"emoticon_emoji_114",tag:"[警车]",file:"emoji_114.png"},{id:"emoticon_emoji_115",tag:"[自行车]",file:"emoji_115.png"}],pmap:{emoticon_emoji_01:{tag:"[可爱]",file:"emoji_01.png"},emoticon_emoji_00:{tag:"[大笑]",file:"emoji_00.png"},emoticon_emoji_02:{tag:"[色]",file:"emoji_02.png"},emoticon_emoji_03:{tag:"[嘘]",file:"emoji_03.png"},emoticon_emoji_04:{tag:"[亲]",file:"emoji_04.png"},emoticon_emoji_05:{tag:"[呆]",file:"emoji_05.png"},emoticon_emoji_06:{tag:"[口水]",file:"emoji_06.png"},emoticon_emoji_145:{tag:"[汗]",file:"emoji_145.png"},emoticon_emoji_07:{tag:"[呲牙]",file:"emoji_07.png"},emoticon_emoji_08:{tag:"[鬼脸]",file:"emoji_08.png"},emoticon_emoji_09:{tag:"[害羞]",file:"emoji_09.png"},emoticon_emoji_10:{tag:"[偷笑]",file:"emoji_10.png"},emoticon_emoji_11:{tag:"[调皮]",file:"emoji_11.png"},emoticon_emoji_12:{tag:"[可怜]",file:"emoji_12.png"},emoticon_emoji_13:{tag:"[敲]",file:"emoji_13.png"},emoticon_emoji_14:{tag:"[惊讶]",file:"emoji_14.png"},emoticon_emoji_15:{tag:"[流感]",file:"emoji_15.png"},emoticon_emoji_16:{tag:"[委屈]",file:"emoji_16.png"},emoticon_emoji_17:{tag:"[流泪]",file:"emoji_17.png"},emoticon_emoji_18:{tag:"[嚎哭]",file:"emoji_18.png"},emoticon_emoji_19:{tag:"[惊恐]",file:"emoji_19.png"},emoticon_emoji_20:{tag:"[怒]",file:"emoji_20.png"},emoticon_emoji_21:{tag:"[酷]",file:"emoji_21.png"},emoticon_emoji_22:{tag:"[不说]",file:"emoji_22.png"},emoticon_emoji_23:{tag:"[鄙视]",file:"emoji_23.png"},emoticon_emoji_24:{tag:"[阿弥陀佛]",file:"emoji_24.png"},emoticon_emoji_25:{tag:"[奸笑]",file:"emoji_25.png"},emoticon_emoji_26:{tag:"[睡着]",file:"emoji_26.png"},emoticon_emoji_27:{tag:"[口罩]",file:"emoji_27.png"},emoticon_emoji_28:{tag:"[生气]",file:"emoji_28.png"},emoticon_emoji_29:{tag:"[抠鼻孔]",file:"emoji_29.png"},emoticon_emoji_30:{tag:"[疑问]",file:"emoji_30.png"},emoticon_emoji_31:{tag:"[怒骂]",file:"emoji_31.png"},emoticon_emoji_32:{tag:"[晕]",file:"emoji_32.png"},emoticon_emoji_33:{tag:"[呕吐]",file:"emoji_33.png"},emoticon_emoji_160:{tag:"[拜一拜]",file:"emoji_160.png"},emoticon_emoji_161:{tag:"[惊喜]",file:"emoji_161.png"},emoticon_emoji_162:{tag:"[流汗]",file:"emoji_162.png"},emoticon_emoji_163:{tag:"[卖萌]",file:"emoji_163.png"},emoticon_emoji_164:{tag:"[默契眨眼]",file:"emoji_164.png"},emoticon_emoji_165:{tag:"[烧香拜佛]",file:"emoji_165.png"},emoticon_emoji_166:{tag:"[晚安]",file:"emoji_166.png"},emoticon_emoji_34:{tag:"[强]",file:"emoji_34.png"},emoticon_emoji_35:{tag:"[弱]",file:"emoji_35.png"},emoticon_emoji_36:{tag:"[OK]",file:"emoji_36.png"},emoticon_emoji_37:{tag:"[拳头]",file:"emoji_37.png"},emoticon_emoji_38:{tag:"[胜利]",file:"emoji_38.png"},emoticon_emoji_39:{tag:"[鼓掌]",file:"emoji_39.png"},emoticon_emoji_200:{tag:"[握手]",file:"emoji_200.png"},emoticon_emoji_40:{tag:"[发怒]",file:"emoji_40.png"},emoticon_emoji_41:{tag:"[骷髅]",file:"emoji_41.png"},emoticon_emoji_42:{tag:"[便便]",file:"emoji_42.png"},emoticon_emoji_43:{tag:"[火]",file:"emoji_43.png"},emoticon_emoji_44:{tag:"[溜]",file:"emoji_44.png"},emoticon_emoji_45:{tag:"[爱心]",file:"emoji_45.png"},emoticon_emoji_46:{tag:"[心碎]",file:"emoji_46.png"},emoticon_emoji_47:{tag:"[钟情]",file:"emoji_47.png"},emoticon_emoji_48:{tag:"[唇]",file:"emoji_48.png"},emoticon_emoji_49:{tag:"[戒指]",file:"emoji_49.png"},emoticon_emoji_50:{tag:"[钻石]",file:"emoji_50.png"},emoticon_emoji_51:{tag:"[太阳]",file:"emoji_51.png"},emoticon_emoji_52:{tag:"[有时晴]",file:"emoji_52.png"},emoticon_emoji_53:{tag:"[多云]",file:"emoji_53.png"},emoticon_emoji_54:{tag:"[雷]",file:"emoji_54.png"},emoticon_emoji_55:{tag:"[雨]",file:"emoji_55.png"},emoticon_emoji_56:{tag:"[雪花]",file:"emoji_56.png"},emoticon_emoji_57:{tag:"[爱人]",file:"emoji_57.png"},emoticon_emoji_58:{tag:"[帽子]",file:"emoji_58.png"},emoticon_emoji_59:{tag:"[皇冠]",file:"emoji_59.png"},emoticon_emoji_60:{tag:"[篮球]",file:"emoji_60.png"},emoticon_emoji_61:{tag:"[足球]",file:"emoji_61.png"},emoticon_emoji_62:{tag:"[垒球]",file:"emoji_62.png"},emoticon_emoji_63:{tag:"[网球]",file:"emoji_63.png"},emoticon_emoji_64:{tag:"[台球]",file:"emoji_64.png"},emoticon_emoji_65:{tag:"[咖啡]",file:"emoji_65.png"},emoticon_emoji_66:{tag:"[啤酒]",file:"emoji_66.png"},emoticon_emoji_67:{tag:"[干杯]",file:"emoji_67.png"},emoticon_emoji_68:{tag:"[柠檬汁]",file:"emoji_68.png"},emoticon_emoji_69:{tag:"[餐具]",file:"emoji_69.png"},emoticon_emoji_70:{tag:"[汉堡]",file:"emoji_70.png"},emoticon_emoji_71:{tag:"[鸡腿]",file:"emoji_71.png"},emoticon_emoji_72:{tag:"[面条]",file:"emoji_72.png"},emoticon_emoji_73:{tag:"[冰淇淋]",file:"emoji_73.png"},emoticon_emoji_74:{tag:"[沙冰]",file:"emoji_74.png"},emoticon_emoji_75:{tag:"[生日蛋糕]",file:"emoji_75.png"},emoticon_emoji_76:{tag:"[蛋糕]",file:"emoji_76.png"},emoticon_emoji_77:{tag:"[糖果]",file:"emoji_77.png"},emoticon_emoji_78:{tag:"[葡萄]",file:"emoji_78.png"},emoticon_emoji_79:{tag:"[西瓜]",file:"emoji_79.png"},emoticon_emoji_80:{tag:"[光碟]",file:"emoji_80.png"},emoticon_emoji_81:{tag:"[手机]",file:"emoji_81.png"},emoticon_emoji_82:{tag:"[电话]",file:"emoji_82.png"},emoticon_emoji_83:{tag:"[电视]",file:"emoji_83.png"},emoticon_emoji_84:{tag:"[声音开启]",file:"emoji_84.png"},emoticon_emoji_85:{tag:"[声音关闭]",file:"emoji_85.png"},emoticon_emoji_86:{tag:"[铃铛]",file:"emoji_86.png"},emoticon_emoji_87:{tag:"[锁头]",file:"emoji_87.png"},emoticon_emoji_88:{tag:"[放大镜]",file:"emoji_88.png"},emoticon_emoji_89:{tag:"[灯泡]",file:"emoji_89.png"},emoticon_emoji_90:{tag:"[锤头]",file:"emoji_90.png"},emoticon_emoji_91:{tag:"[烟]",file:"emoji_91.png"},emoticon_emoji_92:{tag:"[炸弹]",file:"emoji_92.png"},emoticon_emoji_93:{tag:"[枪]",file:"emoji_93.png"},emoticon_emoji_94:{tag:"[刀]",file:"emoji_94.png"},emoticon_emoji_95:{tag:"[药]",file:"emoji_95.png"},emoticon_emoji_96:{tag:"[打针]",file:"emoji_96.png"},emoticon_emoji_97:{tag:"[钱袋]",file:"emoji_97.png"},emoticon_emoji_98:{tag:"[钞票]",file:"emoji_98.png"},emoticon_emoji_99:{tag:"[银行卡]",file:"emoji_99.png"},emoticon_emoji_100:{tag:"[手柄]",file:"emoji_100.png"},emoticon_emoji_101:{tag:"[麻将]",file:"emoji_101.png"},emoticon_emoji_102:{tag:"[调色板]",file:"emoji_102.png"},emoticon_emoji_103:{tag:"[电影]",file:"emoji_103.png"},emoticon_emoji_104:{tag:"[麦克风]",file:"emoji_104.png"},emoticon_emoji_105:{tag:"[耳机]",file:"emoji_105.png"},emoticon_emoji_106:{tag:"[音乐]",file:"emoji_106.png"},emoticon_emoji_107:{tag:"[吉他]",file:"emoji_107.png"},emoticon_emoji_108:{tag:"[火箭]",file:"emoji_108.png"},emoticon_emoji_109:{tag:"[飞机]",file:"emoji_109.png"},emoticon_emoji_110:{tag:"[火车]",file:"emoji_110.png"},emoticon_emoji_111:{tag:"[公交]",file:"emoji_111.png"},emoticon_emoji_112:{tag:"[轿车]",file:"emoji_112.png"},emoticon_emoji_113:{tag:"[出租车]",file:"emoji_113.png"},emoticon_emoji_114:{tag:"[警车]",file:"emoji_114.png"},emoticon_emoji_115:{tag:"[自行车]",file:"emoji_115.png"},emoticon_emoji_116:{tag:"[撇嘴]",file:"new_emoji_01.png"},emoticon_emoji_117:{tag:"[难过]",file:"1f641.png"},emoticon_emoji_118:{tag:"[冷汗]",file:"1f628.png"},emoticon_emoji_119:{tag:"[抓狂]",file:"1f629.png"},emoticon_emoji_120:{tag:"[傲慢]",file:"1f615.png"},emoticon_emoji_121:{tag:"[困]",file:"1f62a.png"},emoticon_emoji_122:{tag:"[疯了]",file:"1f616.png"},emoticon_emoji_123:{tag:"[奋斗]",file:"1f4aa-1f3fc.png"},emoticon_emoji_124:{tag:"[白眼]",file:"new_emoji_02.png"},emoticon_emoji_125:{tag:"[衰]",file:"new_emoji_05.png"},emoticon_emoji_126:{tag:"[再见]",file:"new_emoji_06.png"},emoticon_emoji_127:{tag:"[哼哼]",file:"1f63e.png"},emoticon_emoji_128:{tag:"[阴险]",file:"1f608.png"},emoticon_emoji_129:{tag:"[饥饿]",file:"new_emoji_03.png"},emoticon_emoji_130:{tag:"[乒乓]",file:"new_emoji_23.png"},emoticon_emoji_131:{tag:"[猪头]",file:"1f437.png"},emoticon_emoji_132:{tag:"[玫瑰]",file:"new_emoji_25.png"},emoticon_emoji_133:{tag:"[凋谢]",file:"new_emoji_24.png"},emoticon_emoji_134:{tag:"[瓢虫]",file:"1f41e.png"},emoticon_emoji_135:{tag:"[月亮]",file:"new_emoji_30.png"},emoticon_emoji_136:{tag:"[礼物]",file:"new_emoji_28.png"},emoticon_emoji_137:{
tag:"[拥抱]",file:"new_emoji_08.png"},emoticon_emoji_138:{tag:"[抱拳]",file:"new_emoji_18.png"},emoticon_emoji_139:{tag:"[勾引]",file:"new_emoji_19.png"},emoticon_emoji_140:{tag:"[差劲]",file:"new_emoji_20.png"},emoticon_emoji_141:{tag:"[爱你]",file:"new_emoji_21.png"},emoticon_emoji_142:{tag:"[NO]",file:"new_emoji_22.png"},emoticon_emoji_143:{tag:"[飞吻]",file:"new_emoji_10.png"},emoticon_emoji_144:{tag:"[微笑]",file:"1f642.png"},emoticon_emoji_146:{tag:"[吐舌头]",file:"1f61d.png"},emoticon_emoji_147:{tag:"[忧郁]",file:"new_emoji_11.png"},emoticon_emoji_148:{tag:"[尴尬]",file:"1f630.png"},emoticon_emoji_149:{tag:"[舒适]",file:"1f60c.png"},emoticon_emoji_150:{tag:"[不悦]",file:"1f612.png"},emoticon_emoji_151:{tag:"[幽灵]",file:"1f47b.png"},emoticon_emoji_152:{tag:"[礼盒]",file:"1f49d.png"},emoticon_emoji_153:{tag:"[拜托]",file:"1f64f-1f3fc.png"},emoticon_emoji_154:{tag:"[气球]",file:"1f388.png"},emoticon_emoji_155:{tag:"[拍掌]",file:"new_emoji_09.png"},emoticon_emoji_156:{tag:"[泪中带笑]",file:"1f602.png"},emoticon_emoji_157:{tag:"[糗大了]",file:"new_emoji_07.png"}},pmap2:{"[大笑]":"emoticon_emoji_00","[可爱]":"emoticon_emoji_01","[色]":"emoticon_emoji_02","[嘘]":"emoticon_emoji_03","[亲]":"emoticon_emoji_04","[呆]":"emoticon_emoji_05","[口水]":"emoticon_emoji_06","[汗]":"emoticon_emoji_145","[呲牙]":"emoticon_emoji_07","[鬼脸]":"emoticon_emoji_08","[害羞]":"emoticon_emoji_09","[偷笑]":"emoticon_emoji_10","[调皮]":"emoticon_emoji_11","[可怜]":"emoticon_emoji_12","[敲]":"emoticon_emoji_13","[惊讶]":"emoticon_emoji_14","[流感]":"emoticon_emoji_15","[委屈]":"emoticon_emoji_16","[流泪]":"emoticon_emoji_17","[嚎哭]":"emoticon_emoji_18","[惊恐]":"emoticon_emoji_19","[怒]":"emoticon_emoji_20","[酷]":"emoticon_emoji_21","[不说]":"emoticon_emoji_22","[鄙视]":"emoticon_emoji_23","[阿弥陀佛]":"emoticon_emoji_24","[奸笑]":"emoticon_emoji_25","[睡着]":"emoticon_emoji_26","[口罩]":"emoticon_emoji_27","[生气]":"emoticon_emoji_28","[抠鼻孔]":"emoticon_emoji_29","[疑问]":"emoticon_emoji_30","[怒骂]":"emoticon_emoji_31","[晕]":"emoticon_emoji_32","[呕吐]":"emoticon_emoji_33","[拜一拜]":"emoticon_emoji_160","[惊喜]":"emoticon_emoji_161","[流汗]":"emoticon_emoji_162","[卖萌]":"emoticon_emoji_163","[默契眨眼]":"emoticon_emoji_164","[烧香拜佛]":"emoticon_emoji_165","[晚安]":"emoticon_emoji_166","[强]":"emoticon_emoji_34","[弱]":"emoticon_emoji_35","[OK]":"emoticon_emoji_36","[拳头]":"emoticon_emoji_37","[胜利]":"emoticon_emoji_38","[鼓掌]":"emoticon_emoji_39","[握手]":"emoticon_emoji_200","[发怒]":"emoticon_emoji_40","[骷髅]":"emoticon_emoji_41","[便便]":"emoticon_emoji_42","[火]":"emoticon_emoji_43","[溜]":"emoticon_emoji_44","[爱心]":"emoticon_emoji_45","[心碎]":"emoticon_emoji_46","[钟情]":"emoticon_emoji_47","[唇]":"emoticon_emoji_48","[戒指]":"emoticon_emoji_49","[钻石]":"emoticon_emoji_50","[太阳]":"emoticon_emoji_51","[有时晴]":"emoticon_emoji_52","[多云]":"emoticon_emoji_53","[雷]":"emoticon_emoji_54","[雨]":"emoticon_emoji_55","[雪花]":"emoticon_emoji_56","[爱人]":"emoticon_emoji_57","[帽子]":"emoticon_emoji_58","[皇冠]":"emoticon_emoji_59","[篮球]":"emoticon_emoji_60","[足球]":"emoticon_emoji_61","[垒球]":"emoticon_emoji_62","[网球]":"emoticon_emoji_63","[台球]":"emoticon_emoji_64","[咖啡]":"emoticon_emoji_65","[啤酒]":"emoticon_emoji_66","[干杯]":"emoticon_emoji_67","[柠檬汁]":"emoticon_emoji_68","[餐具]":"emoticon_emoji_69","[汉堡]":"emoticon_emoji_70","[鸡腿]":"emoticon_emoji_71","[面条]":"emoticon_emoji_72","[冰淇淋]":"emoticon_emoji_73","[沙冰]":"emoticon_emoji_74","[生日蛋糕]":"emoticon_emoji_75","[蛋糕]":"emoticon_emoji_76","[糖果]":"emoticon_emoji_77","[葡萄]":"emoticon_emoji_78","[西瓜]":"emoticon_emoji_79","[光碟]":"emoticon_emoji_80","[手机]":"emoticon_emoji_81","[电话]":"emoticon_emoji_82","[电视]":"emoticon_emoji_83","[声音开启]":"emoticon_emoji_84","[声音关闭]":"emoticon_emoji_85","[铃铛]":"emoticon_emoji_86","[锁头]":"emoticon_emoji_87","[放大镜]":"emoticon_emoji_88","[灯泡]":"emoticon_emoji_89","[锤头]":"emoticon_emoji_90","[烟]":"emoticon_emoji_91","[炸弹]":"emoticon_emoji_92","[枪]":"emoticon_emoji_93","[刀]":"emoticon_emoji_94","[药]":"emoticon_emoji_95","[打针]":"emoticon_emoji_96","[钱袋]":"emoticon_emoji_97","[钞票]":"emoticon_emoji_98","[银行卡]":"emoticon_emoji_99","[手柄]":"emoticon_emoji_100","[麻将]":"emoticon_emoji_101","[调色板]":"emoticon_emoji_102","[电影]":"emoticon_emoji_103","[麦克风]":"emoticon_emoji_104","[耳机]":"emoticon_emoji_105","[音乐]":"emoticon_emoji_106","[吉他]":"emoticon_emoji_107","[火箭]":"emoticon_emoji_108","[飞机]":"emoticon_emoji_109","[火车]":"emoticon_emoji_110","[公交]":"emoticon_emoji_111","[轿车]":"emoticon_emoji_112","[出租车]":"emoticon_emoji_113","[警车]":"emoticon_emoji_114","[自行车]":"emoticon_emoji_115","[撇嘴]":"emoticon_emoji_116","[难过]":"emoticon_emoji_117","[冷汗]":"emoticon_emoji_118","[抓狂]":"emoticon_emoji_119","[傲慢]":"emoticon_emoji_120","[困]":"emoticon_emoji_121","[疯了]":"emoticon_emoji_122","[奋斗]":"emoticon_emoji_123","[白眼]":"emoticon_emoji_124","[衰]":"emoticon_emoji_125","[再见]":"emoticon_emoji_126","[哼哼]":"emoticon_emoji_127","[阴险]":"emoticon_emoji_128","[饥饿]":"emoticon_emoji_129","[乒乓]":"emoticon_emoji_130","[猪头]":"emoticon_emoji_131","[玫瑰]":"emoticon_emoji_132","[凋谢]":"emoticon_emoji_133","[瓢虫]":"emoticon_emoji_134","[月亮]":"emoticon_emoji_135","[礼物]":"emoticon_emoji_136","[拥抱]":"emoticon_emoji_137","[抱拳]":"emoticon_emoji_138","[勾引]":"emoticon_emoji_139","[差劲]":"emoticon_emoji_140","[爱你]":"emoticon_emoji_141","[NO]":"emoticon_emoji_142","[飞吻]":"emoticon_emoji_143","[微笑]":"emoticon_emoji_144","[吐舌头]":"emoticon_emoji_146","[忧郁]":"emoticon_emoji_147","[尴尬]":"emoticon_emoji_148","[舒适]":"emoticon_emoji_149","[不悦]":"emoticon_emoji_150","[幽灵]":"emoticon_emoji_151","[礼盒]":"emoticon_emoji_152","[拜托]":"emoticon_emoji_153","[气球]":"emoticon_emoji_154","[拍掌]":"emoticon_emoji_155","[泪中带笑]":"emoticon_emoji_156","[糗大了]":"emoticon_emoji_157"}});I$("00b1248fcdd93958d87e26de99277f67",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h){var p="PORTRAIT_"+n._$uniqueID(),m=appConfig.path.sdk+"res/portrait/emoji/";u._$$Portrait=t._$klass();h=u._$$Portrait._$extend(o._$$Abstract);h.__init=function(){this.__super();a._$extend({reduceExt:function(t){return t.substr(0,t.length-4)}});r._$delegate(this,this.__body,{showDefault:function(t,e){this.__activeStatus(t,e)},showDIY:function(t,e){this.__activeStatus(t,e)},showEmoji:function(t,e){this.__activeStatus(t,e)}});if(!this.__ccache){this.__ccache=d._$$Cache._$allocate({load_getCF:this.__getCFLists._$bind(this),error_getCF:this.__errorGetCFLists._$bind(this),load_mapCF:this.__mapCFLists._$bind(this),error_mapCF:this.__errorMapCFLists._$bind(this)});var t=window.setting.appkey;this.__ccache._$getCF({data:{appKey:t}});this.__ccache._$mapCF({data:{appKey:t}})}};h.__getCFLists=function(t){this.__originEmojiLists=t;if(this.__originEmojiLists&&this.__originEmojiLists.length){if(this.__originEmojiLists[0].id==-1)f.defaultEmojiStatus=this.__originEmojiLists[0].status;if(this.__originEmojiLists.length>1)this.__emojiLists=this.__originEmojiLists.slice(1);else this.__emojiLists=[]}if(this.__emojiLists&&this.__emojiLists.length)for(var e=0;e<this.__emojiLists.length;e++)if(2==this.__emojiLists[e].emojiType)for(var i=0;i<this.__emojiLists[e].emojiList.length;i++)this.__emojiLists[e].emojiList[i].tag="[:"+this.__emojiLists[e].emojiList[i].emojiName.split(".")[0]+"]";f.emojiLists=this.__emojiLists;this.__render()};h.__errorGetCFLists=function(t){};h.__errorMapCFLists=function(t){};h.__mapCFLists=function(t){f.mapEmojiLists=t};h.__activeStatus=function(t,n){i._$stop(n);this._$show(n);this.__allTabs=e._$getByClassName(this.__body,"protrait_header_tab");this.__portraitLists=e._$getByClassName(this.__body,"portrait_list");for(var s=0;s<this.__allTabs.length;s++)if(this.__allTabs[s]==t){e._$addClassName(this.__allTabs[s],"tab_active");e._$delClassName(this.__portraitLists[s],"f-dn");if(!e._$getChildren(this.__portraitLists[s]).length)if(f.defaultEmojiStatus)this.__injectImg(this.__portraitLists[s],s-1,n);else this.__injectImg(this.__portraitLists[s],s,n)}else{e._$delClassName(this.__allTabs[s],"tab_active");e._$addClassName(this.__portraitLists[s],"f-dn")}};h.__injectImg=function(t,e,i){var n=f.emojiLists[e].emojiList;for(var s=0;s<n.length;s++)new _({data:{disabledImg:!1,src:n[s].emojiUrl,width:90,height:90,hoverAnimation:!0,clickAnimation:!0,stopAnimation:!1,name:n[s].emojiName,showName:!0,id:n[s].id,name:n[s].emojiName,size:n[s].emojiPicContLen}}).$inject(t).$on("onClickGif",this.__selectSingleGIf._$bind(this))};h.__selectSingleGIf=function(t){this._$dispatchEvent("onSendGIf",t)};h.__reset=function(t){this.__btn=e._$get(t.btn);if(this.__btn){t.parent=t.parent&&e._$get(t.parent)||document.body;this.__col=t.col||12;f=n._$merge(f,{col:this.__col,prefix:u._$getPortraitRoot(),defaultEmojiStatus:1,emojiLists:[],mapEmojiLists:[]});if(t.newWebTrade)f.newWebTrade=!1;else f.newWebTrade=!0;this.__super(t);c._$$Scrollbar._$allocate({parent:this.__cnt});this.__doInitDomEvent([[this.__btn,"click",this.__onBtnClick._$bind(this)],[document,"click",this.__hideCnt._$bind(this)],[this.__body,"click",this.__selectItem._$bind(this)]])}};h.__destroy=function(){this.__doClearComponent();this.__super()};h.__initXGui=function(){var t=s._$parseUITemplate(l);return function(){this.__seed_html=t.cnt;this.__seed_list=t.list}}();h.__initNode=function(){this.__super();var t=e._$getByClassName(this.__body,"j-flag");this.__cnt=t[0];this.__prev=t[1];this.__next=t[2]};h.__onBtnClick=function(t){e._$hasClassName(this.__body,"f-dn")?this.__showCnt(t):this.__hideCnt(t)};h.__showCnt=function(t){i._$stop(t);i._$dispatchEvent(document,"click");e._$delClassName(this.__body,"f-dn");this._$dispatchEvent("onShow")};h._$show=function(t){i._$stop(t);e._$delClassName(this.__body,"f-dn");this._$dispatchEvent("onShow")};h._$hide=function(){this.__hideCnt()};h.__hideCnt=function(t){e._$addClassName(this.__body,"f-dn");this._$dispatchEvent("onHide")};h.__selectItem=function(t){if("m-set-emoji"==t.target.className){i._$stop(t);var n=i._$getElement(t,"d:id");if(!n)return;var s={id:e._$dataset(n,"id"),tag:e._$attr(n,"title"),src:e._$dataset(n,"img")};s.html=u._$getImgHTML(s);this._$dispatchEvent("onSelect",s);this.__hideCnt(t)}if("I"==t.target.tagName){i._$stop(t);var n=i._$getElement(t,"d:id");if(!n)return;
var s={id:e._$dataset(n,"id"),tag:e._$attr(n,"title"),src:e._$dataset(n,"src")};s.html=u._$getImgHTML(s);this._$dispatchEvent("onSelect",s);this.__hideCnt(t)}};h.__render=function(){a._$render(this.__cnt,this.__seed_list,f);this.__defaultFace=e._$getByClassName(this.__body,"default_emoji")[0];e._$addClassName(this.__defaultFace,"tab_active");if(!f.defaultEmojiStatus&&!f.newWebTrade)if(f.emojiLists[0]&&1==f.emojiLists[0].emojiType){this.__portraitLists=e._$getByClassName(this.__body,"portrait_list");this.__injectImg(this.__portraitLists[0],0)}this.__setPortraitList(0)};h.__setPortraitList=function(t){this.__portraitLists=e._$getByClassName(this.__body,"portrait_list");this.__portraitLists.forEach(function(i,n){if(t!=n)e._$addClassName(i,"f-dn");else e._$delClassName(i,"f-dn")})};h._$getData=function(){return f};u._$isPortrait=function(t){var e=(t.src||"").toLowerCase(),i=u._$getPortraitRoot();return 0===e.indexOf(i)};u._$hasPortrait=function(t){var e=n._$indexOf(t.getElementsByTagName("img"),function(t){return u._$isPortrait(t)});return e>=0};u._$getPortraitRoot=function(){return appConfig.protocol.sdk+"://"+appConfig.domain.sdk+appConfig.online.sdk+"res/portrait/emoji/"};u._$formatPortrait=function(t){var e=t.getElementsByTagName("img");if(e&&e.length){t=t.cloneNode(!0);n._$reverseEach(t.getElementsByTagName("img"),function(t){var e=t.parentNode;if(u._$isPortrait(t)){var i=t.ownerDocument.createTextNode(t.title);e.replaceChild(i,t)}else e.removeChild(t)});return t}};u._$isPortraitURL=function(t){var e=t.className||"";return e.indexOf(p)>=0};u._$hasPortrait=function(t){var e=n._$indexOf(t.getElementsByTagName("img"),function(t){return u._$isPortraitURL(t)});return e>=0};u._$formatPortrait=function(t){var e=t.getElementsByTagName("img");if(e&&e.length){t=t.cloneNode(!0);n._$reverseEach(t.getElementsByTagName("img"),function(t){var e=t.ownerDocument.createTextNode(t.title);t.parentNode.replaceChild(e,t)});return t}};u._$portrait2text=function(t){var i=document.createElement("div");i.innerHTML=t;var n=i.getElementsByTagName("img");for(var s=n.length-1;s>=0;s--){var a=n[s];var o=e._$attr(a,"title");var r=document.createTextNode(o);i.replaceChild(r,a)}return i.innerHTML};u._$text2portrait=function(){var t=/(\[[^\]]+\])/gi;return function(e){var i=f.pmap;var n=f.pmap2;e=e.replace(t,function(t,e){if(n[e]){var s=u._$getImgHTML({id:n[e],tag:e,src:u._$getPortraitRoot()+i[n[e]].file});return s}else if(f.mapEmojiLists&&f.mapEmojiLists.length){var a;for(var o=0;o<f.mapEmojiLists.length;o++)if(f.mapEmojiLists[o].tag==e)a=f.mapEmojiLists[o];if(a)if(a.tag==e){var s=u._$getImgHTML({id:e,tag:e,src:a.url});return s}else return e;else return e}else return e});return e}}();u._$getImgHTML=function(t){var e='<img class="portrait_icon '+p+'" data-id="'+t.id+'" src="'+t.src+'" title="'+t.tag+'" alt="'+t.tag+'">';return e}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","8fe733a225a830dc6b1da5866dcaf23c","35df4ef4567b6cd0275a1b849d2bea8c","3d26a747034790a096b7178e1dd6f802","ccb6b7d0ce45c3548151b739858e96c8","c711308f00adca75206c9dc3966a29d2","c80188f00e89b7c0dd733a9e345d0960","c40b8b3f75a721d496905d04f6f9a735");I$("4a3976c3b6c36a40b920cec4566ec22b",'<ul class="m-associationques-list j-associationques" r-hide={hide || list.length==0} >\n    {#list list as x}\n    <li r-class={{\'z-sel\': x.key1 == tt.key1}} class="item" data-id={x.key1} on-click={this.selectItem(x_index)}>\n        <p r-html="{x.value| highlight}"></p>\n    </li>\n    {/list}\n</ul>\n');I$("f2b46c0ee658f65c8607f9d898c02a66",function(t,e,i,n,s,a,o,r){var _={};return n.Component.extend({template:s,name:"input-association",config:function(t){i._$extend(t,{list:[],inputcontent:"",tt:{key1:-1,value:""},hide:!0},!0);this.$on({keyboard:this.cbKeyboard.bind(this),change:this.cbChangeList.bind(this)});this.supr()},init:function(){this.supr()},cbKeyboard:function(t){var e=t.keyCode;switch(e){case 40:this.arrowDown();break;case 38:this.arrowUp();break;case 13:this.entryItem()}},arrowDown:function(){var t=this.data.tt,e=this.data.list,n=!1;e.forEach(function(s,a){if(s.key1!=t.key1||n){if(t.key1==-1){n=!0;i._$extend(t,e[0],!0);return}}else{n=!0;i._$extend(t,e[a>=e.length-1?0:a+1],!0)}});this.$update()},arrowUp:function(){var t=this.data.tt,e=this.data.list,n=!1;e.forEach(function(s,a){if(s.key1!=t.key1||n){if(t.key1==-1){i._$extend(t,e[e.length-1],!0);n=!0;return}}else{i._$extend(t,e[a<1?e.length-1:a-1],!0);n=!0}});this.$update()},entryItem:function(){return e._$merge({},this.data.tt,{qalist:this.data.list})},selectItem:function(t){this.data.tt=this.data.list[t];this.onselectItem()},cbChangeList:function(t){i._$extend(this.data,t,!0);if(""==t.inputcontent||t.inputcontent.length>10)this.data.list=[];else this.data.list=this.filterList(this.data.qalist,t.inputcontent);this.data.tt={key1:-1,value:""};this.$update()},filterList:function(t,i){var n=[];e._$forEach(t,function(t){if(t.value.indexOf(i)!=-1)n.push(t)});return n},hide:function(){i._$extend(this.data,{hide:!0,list:[],tt:{key1:-1,value:""}},!0);this.$update()},show:function(t){this.data.hide=!1;this.$update()}}).filter({highlight:function(t){t=a._$escapeWithoutSpace(t);return t.replace(this.data.inputcontent,"<em>"+this.data.inputcontent+"</em>")}})},"5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","3e346f2b6313e57a75f5ee9b603c4b65","fe686268a0af212baea04fc64f0059e8","4a3976c3b6c36a40b920cec4566ec22b","35df4ef4567b6cd0275a1b849d2bea8c");I$("5516f0470d0dd20eb256a2f4cee2aa67",'<div class="m-solve">\n    <span class="solve-label">您的问题：</span>\n    <div class="solve-btn-con">\n        <span class="solve-btn solve-btn-solved" r-class={{"z-sel": selected == \'solved\'}} on-click={this.handleClick(\'solved\')}>已解决</span>\n        <span class="solve-btn solve-btn-unsolved" r-class={{"z-sel": selected == \'unsolved\'}} on-click={this.handleClick(\'unsolved\')}>未解决</span>\n    </div>\n    {#if requiredError}\n        <div class="remarks-error error-top">请选择本次问题是否解决</div>\n    {/if}\n</div>');I$("5d794ea50a4bb887dcfe9d3c7fd0160d",function(t,e,i,n,s){var a=t.Component;s=a.extend({template:n,name:"evaluate-solve",config:function(t){i._$extend(t,{selected:"",resolvedRequired:0,requiredError:!1,evaluation_resolved:0});if(1==t.evaluation_resolved)this.data.selected="solved";if(2==t.evaluation_resolved)this.data.selected="unsolved";this.supr()},handleClick:function(t){if(this.data.selected==t&&!this.data.resolvedRequired)this.data.selected="";else{this.data.selected=t;this.data.requiredError=!1}this.$emit("select",this._$getValue())},_$valid:function(){if(!this.data.selected&&this.data.resolvedRequired){this.data.requiredError=!0;this.$update();return!1}else{this.data.requiredError=!1;this.$update();return!0}},_$getValue:function(){var t=0;if("solved"==this.data.selected)t=1;if("unsolved"==this.data.selected)t=2;return t}});return s},"fe686268a0af212baea04fc64f0059e8","5fb495f256a5dcde2a92e5fe919a6422","3e346f2b6313e57a75f5ee9b603c4b65","5516f0470d0dd20eb256a2f4cee2aa67");I$("e66a90db51041f8fd87a09e0adaf75ed",'<div class="m-star" ref="j-star">\n    {#list list as x}\n        <div class="star-item">\n            <span class="u-star">\n                {#if type == 2}\n                    {#if x.value == 100}\n                        <i class="iconfont u-icon-star icon-zan-offx j-icon-star" \n                        on-mouseenter={this.handleEnter2Level(x_index,x.name)} \n                        on-mouseleave={this.handleLeave()} on-click={this.handleClick2Level(x_index,x.name)}></i>\n                    {/if}\n\n                    {#if x.value == 1}\n                        <i class="iconfont u-icon-star icon-unzan-offx j-icon-star" \n                        on-mouseenter={this.handleEnter2Level(x_index,x.name)} \n                        on-mouseleave={this.handleLeave()} on-click={this.handleClick2Level(x_index,x.name)}></i>\n                    {/if}\n                {#else}\n                    <i class="iconfont u-icon-star icon-star-offx j-icon-star" \n                    on-mouseenter={this.handleEnter(x_index,x.name)} \n                    on-mouseleave={this.handleLeave()} on-click={this.handleClick(x_index,x.name)}></i>\n                {/if}\n            </span>\n        </div>\n    {/list}\n    <div class="current-evaluation">\n        {currentEvaluation}\n    </div>\n</div>');I$("8d4ee540e02f9c245e06b32a11d7c983",function(t,e,i,n,s){var a=t.Component;s=a.extend({template:n,name:"evaluate-star",config:function(t){i._$extend(t,{list:[],index:-1,currentEvaluation:"",type:""});this.data.list=this.copy(t.list);if(t.index!=-1){t.currentEvaluation=this.data.list[t.index].name;t.prevCurrentEvaluation=this.data.list[t.index].name}this.supr()},init:function(){this.$on("inject",function(){if(this.data.index!=-1){if(2!=this.data.type)this.lightStar(this.data.index);else e._$addClassName(e._$getByClassName(this.$refs["j-star"],"j-icon-star")[this.data.index],"z-hover");this.selectDone=!0}}.bind(this))},handleEnter:function(t,e){this.data.currentEvaluation=e;if(!this.selectDone)this.lightStar(t)},handleEnter2Level:function(t,i){this.data.currentEvaluation=i;if(!this.selectDone)e._$addClassName(e._$getByClassName(this.$refs["j-star"],"j-icon-star")[t],"z-hover")},handleLeave:function(){this.data.currentEvaluation=this.data.prevCurrentEvaluation;if(!this.selectDone)this.resetStarStu()},handleClick:function(t,e){this.resetStarStu();this.lightStar(t);this.selectDone=!0;this.data.currentEvaluation=e;try{this.$emit("selectDone",t,e)}catch(i){}this.$update()},handleClick2Level:function(t,i){this.resetStarStu();e._$addClassName(e._$getByClassName(this.$refs["j-star"],"j-icon-star")[t],"z-hover");this.data.currentEvaluation=i;this.$emit("selectDone",t,i);this.$update()},resetStarStu:function(){var t=e._$getByClassName(this.$refs["j-star"],"j-icon-star").length;for(;t>=0;){e._$delClassName(e._$getByClassName(this.$refs["j-star"],"j-icon-star")[t],"z-hover");
t--}},lightStar:function(t){var i=t;for(;i>=0;){e._$addClassName(e._$getByClassName(this.$refs["j-star"],"j-icon-star")[i],"z-hover");i--}}});return s},"fe686268a0af212baea04fc64f0059e8","5fb495f256a5dcde2a92e5fe919a6422","3e346f2b6313e57a75f5ee9b603c4b65","e66a90db51041f8fd87a09e0adaf75ed");I$("2c13c0100e7a151de43cfbee9ad4fb3c",'<textarea name="ntp" id="#<lbBody>">\n  <div class="m-modal m-modal-confirm m-modal-satisfyEva" style="display:none">\n\n      <table>\n          <tbody>\n          <tr>\n              <td class="j-flagmain">\n                  <div class="lywrap j-flag">\n                      <div class="evaluate-modal-title">\n                            <h2 class="form_tlt j-title"></h2>\n                            <div class="close" data-action="close">\n                                &times;\n                            </div>\n                      </div>\n                      <form class="m-form-evaluate j-form">\n                        <div class="evaWrap j-flaglist"></div>\n                        <div class="form_item itm-remarks j-star-show">\n                            <textarea placeholder="评价备注" name="remarks" maxlength="200">&lt/textarea>\n                            <span class="text-counter j-text-counter">1/200</span>\n                        </div>\n                        <div class="js-comment-error j-star-show"></div>\n                        <div class="j-solve j-star-show"></div>\n                        <div class="form_item itm-btn">\n                            <a class="u-btn u-btn-disabled ok j-formbtn " data-action="submitform">提交评价</a>\n                        </div>\n                      </form>\n                  </div>\n              </td>\n\t          <td class="m-modal-confirmEva j-flagconfirm" style="display:none">\n\t\t          <div class="modal_dialog">\n\t\t              <div class="modal_hd">\n\t\t                  <h3 class="modal_title">标题</h3>\n\t\t              </div>\n\t\t              <div class="modal_bd">\n\t\t                  <span class="modal-tip" name="tips">是否放弃当前评价,放弃后不可恢复</span>\n\t\t              </div>\n\t\t              <div class="modal_ft">\n\t\t                  <div class="group">\n\t\t                      <a class="u-btn" data-action="confirmok">确定</a>\n\t\t                      <a class="u-btn u-btn-disabled" data-action="confirmclose">取消</a>\n\t\t                  </div>\n\t\t              </div>\n\t\t          </div>\n\t\t      </td>\n\n          </tr>\n          </tbody>\n      </table>\n  </div>\n</textarea>\n\n<textarea name="jst" id="#<lbForm>">\n    <!-- <ul class="form_item item-list j-formitm">\n        {list list as x}\n        <li>\n            <label>\n                <div class="itm head">\n                    <img src="${x.img}">\n                </div>\n                <div class="itm choice" data-action="selitem" data-index="${x_index}">\n                    <i class="u-icon-radio {if x_index == selModelIndex}active{/if}"></i>\n                    <span>${x.name}</span>\n                    <input type="radio" name="evaluation" value="${x.value}" {if x.active}checked="true"{/if}>\n                </div>\n            </label>\n        </li>\n        {/list}\n    </ul> -->\n    <div class="j-star"></div>\n    {if selModelIndex > -1}\n        <ul class="form_item itm-tag-list">\n        {var tagList = list[selModelIndex].tagList}\n        {list tagList as tag}\n            <li class="tag-item {if tag.isSelected}active{/if}" data-action="selectTag" data-index="${tag_index}">${tag.name|escape}</li>\n        {/list}\n        {if requiredParam.tagRequiredError}\n             <div class="remarks-error">请选择标签</div>\n        {/if}\n        </ul>\n    {/if}\n</textarea>\n\n<textarea name="jst" id="#<lbCommentError>">\n    {if commentRequiredError}\n        <div class="remarks-error error-top">请填写评价备注</div>\n    {/if}\n</textarea>');I$("93872d9c4b2f20c68917dbdfa2b58e43",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h){u._$$EvaluateModal=t._$klass();h=u._$$EvaluateModal._$extend(s._$$Abstract);var p=window.resourceConfig.satisfy;var m={2:{1:p+"s1.png",100:p+"s4.png"},3:{1:p+"s1.png",50:p+"s2.png",100:p+"s3.png"},5:{1:p+"s0.png",25:p+"s1.png",50:p+"s2.png",75:p+"s3.png",100:p+"s4.png"}};h.__init=function(){this.__super();this.lastEvalInfo=null;this.modifyEvalInfo={}};h.__reset=function(t){var s=t.form.type,a=m[s];this.lastEvalInfo=t.lastEvalInfo;this.__nform=i._$getByClassName(this.__container,"j-form")[0];this.__formData=r._$copy(t.form);if(2!=this.__formData.type)this.__formData.list.reverse();if(2!=this.__formData.pattern){this.__formData.list.forEach(function(t){if(!t.tagList)t.tagList=[];n._$forEach(t.tagList,function(t,e,i){i[e]={name:t}})});this.__resetFormData(this.__formData,t.lastEvalInfo,t.enable_evaluation_muttimes);this.__createEvalForm(this.__formData);if(this.lastEvalInfo){var o=i._$getByClassName(this.__body,"j-star-show");n._$forEach(o,function(t){t.style.display="block"},this)}else if(2==this.__formData.type)this.__selectItem(0);else this.__selectItem(this.__formData.list.length-1);e._$addEvent(this.__nform["remarks"],"keyup",this.__cbRemarks._$bind(this));e._$addEvent(this.__nform["remarks"],"blur",this.__cbRemarksBlur._$bind(this));r._$delegate(this,this.__body,{close:function(t,i){e._$stop(i);this.__hideModal(0)},selectTag:this.__selectTag._$bind(this),confirmclose:function(){this.__showModal()},confirmok:function(){this.__hideModal(1)},submitform:this.__submit._$bind(this)});if(this.__formData.resolvedEnabled)this.__solve=new d({data:{resolvedRequired:this.__formData.resolvedRequired,evaluation_resolved:this.__formData.evaluation_resolved}}).$inject(i._$getByClassName(this.__body,"j-solve")[0]).$on("select",function(t){if(this.lastEvalInfo){this.modifyEvalInfo.evaluation_resolved=t;this._isModifyDisSubmit()}}.bind(this));this.__super(t);if(window.setting.isMobile)i._$getByClassName(i._$get("ysf-client"),"chat_show_msg")[0].style.overflowY="hidden"}else{var _=l._$getCurrentSessionId();var c=l._$getDeviceId();var f="";if(this.__formData.patternUrl.indexOf("?")!=-1)f="&sessionId="+_+"&uid="+c+"&fromType=WEB";else f="?sessionId="+_+"&uid="+c+"&fromType=WEB";window.open(this.__formData.patternUrl+f)}};h.__destroy=function(){this.__super()};h.__initXGui=function(){var t=a._$parseUITemplate(f);return function(){this.__seed_html=t.lbBody;this.__seed_modal=t.lbForm;this.__seed_comment_error=t.lbCommentError}}();h.__initNode=function(){this.__super();var t=i._$getByClassName(this.__body,"j-flag");this.__container=t[0];this.__ntitle=i._$getByClassName(this.__body,"j-title")[0];this.__ntip=i._$getByClassName(this.__body,"modal-tip")[0];this.__counter=i._$getByClassName(this.__body,"j-text-counter")[0]};h.__resetFormData=function(t,e,i){var s=this.__formData.type,a=m[s];this.__nform["remarks"].value=e&&e.remarks||"";var o=0;if(this.__nform["remarks"].value&&this.__nform["remarks"].value.length)o=this.__nform["remarks"].value&&this.__nform["remarks"].value.length;this.__counter.innerText=o+"/200";if(i)this.__ntip.innerText="是否放弃当前评价";var r=-1;var _={commentRequiredError:!1,tagRequiredError:!1};this.__formData.list.forEach(function(t,i){if(e&&t.value===e.evaluation)r=i;n._$forEach(t.tagList,function(t){t.isSelected=!1;if(e)n._$forEach(e.tagList,function(e){if(t.name==e)t.isSelected=!0})})});this.__formData.selModelIndex=r;this.__formData.requiredParam=_;if(e&&e.evaluation_resolved)this.__formData.evaluation_resolved=e.evaluation_resolved};h.__render=function(){var t=i._$getByClassName(this.__container,"j-flaglist")[0];var e=i._$getByClassName(this.__container,"js-comment-error")[0];var s=this.__formData;o._$render(t,this.__seed_modal,s);this.__star=new c({data:{list:this.__formData.list||[],index:this.__formData.selModelIndex,currentEvaluation:this.__currentEvaluation,type:this.__formData.type}}).$inject(i._$getByClassName(this.__body,"j-star")[0]).$on("selectDone",function(t,e){this.__currentEvaluation=e;this.__selectItem(t);var s=i._$getByClassName(this.__body,"j-star-show");n._$forEach(s,function(t){t.style.display="block"},this)}.bind(this));o._$render(e,this.__seed_comment_error,s.requiredParam);this._$setEvalTypesClassName(s.list)};h.__createEvalForm=function(t){this.__render();this.__ntitle.innerHTML="请对本次服务进行评价"};h.__hideModal=function(t){var e=this.__nform["remarks"].value,n=i._$getByClassName(this.__body,"j-flagmain")[0],s=i._$getByClassName(this.__body,"j-flagconfirm")[0];var a=function(){this.__resetFormData();this.__render();this.__disSubmit(!0)};if(!e||0!=t){if(1==t){i._$setStyle(n,"display","");i._$setStyle(s,"display","none")}this._$dispatchEvent("onhide");a.call(this);i._$setStyle(this.__body,"display","none");if(window.setting.isMobile)i._$getByClassName(i._$get("ysf-client"),"chat_show_msg")[0].style.overflowY="auto"}else{i._$setStyle(n,"display","none");i._$setStyle(s,"display","")}};h.__showModal=function(){var t=i._$getByClassName(this.__body,"j-flagmain")[0],e=i._$getByClassName(this.__body,"j-flagconfirm")[0];i._$setStyle(t,"display","");i._$setStyle(e,"display","none")};h._$showModal=function(t,e,n){this.__evalFlag=t;this.__sid=e;this.__mid=n;i._$setStyle(this.__body,"display","block");this._$dispatchEvent("onshow")};h.__cbRemarks=function(t){var e=t.target||{value:""},i=e.value.trim().length;if(i>200)e.value=e.value.slice(0,200);this.__counter.innerText=i+"/200";if(this.lastEvalInfo){this.modifyEvalInfo.remarks=e.value;this._isModifyDisSubmit()}if(i){this.__formData.requiredParam.commentRequiredError=!1;this.__render()}};h.__cbRemarksBlur=function(){window.parent.postMessage("pkg:"+JSON.stringify({category:"inputblur"}),"*")};h._$setEvalTypesClassName=function(t){var e={2:"two",3:"three",5:"five"};var n=e[t.length],s=i._$getByClassName(this.__container,"j-formitm")[0];i._$addClassName(s,n)};h.__disSubmit=function(t){var e=i._$getByClassName(this.__container,"j-formbtn")[0];if(t){i._$addClassName(e,"u-btn-disabled");i._$attr(e,"data-flag",0)}else{i._$delClassName(e,"u-btn-disabled");i._$attr(e,"data-flag",1);
}};h._isModifyDisSubmit=function(){var t=Object.keys(this.modifyEvalInfo);evalInfo=this.lastEvalInfo;modifyEval=this.modifyEvalInfo;flag=!0;n._$forEach(t,function(t){if("[object Array]"===Object.prototype.toString.call(modifyEval[t]))if(modifyEval[t].length===evalInfo[t].length)n._$forEach(modifyEval[t],function(e){if(evalInfo[t].indexOf(e)==-1)flag=!1});else flag=!1;else if(evalInfo[t]!==modifyEval[t])flag=!1});this.__disSubmit(flag)},h.__selectItem=function(t){var e=t;this.__formData.selModelIndex=e;this.__disSubmit(!1);if(this.lastEvalInfo){var i=this.__formData,n=i.list[i.selModelIndex];evaluation=n.value,this.modifyEvalInfo.evaluation=evaluation;this._isModifyDisSubmit()}this.__resetError();this.__render()};h.__selectTag=function(t,e){var s=i._$dataset(t,"index"),a=this.__formData;var o=a.list[a.selModelIndex],r=o.tagList[s];r.isSelected=!r.isSelected;this.__formData.requiredParam.tagRequiredError=!1;this.__disSubmit(!1);if(this.lastEvalInfo){var _=a.list[a.selModelIndex];var d=[];n._$forEach(_.tagList,function(t){if(t.isSelected)d.push(t.name)});this.modifyEvalInfo.tagList=d;this._isModifyDisSubmit()}this.__render()};h.__submit=function(t,e){var i=t.getAttribute("data-flag");if(i&&0!=i){var s=this.__formData,a=s.list[s.selModelIndex],o=0;if(this.__solve)o=this.__solve._$getValue();var r={evaluation:a.value,name:a.name,remarks:(this.__nform["remarks"].value||"").trim(),id:this.__mid,flag:this.__evalFlag,sid:!this.__evalFlag?this.__sid:null,messageThanks:this.__formData.messageThanks,evaluation_resolved:o};var _=[];n._$forEach(a.tagList,function(t){if(t.isSelected)_.push(t.name)});r.tagList=_;this.__isRequiredChecked(r,a);if(!(this.__formData.requiredParam.commentRequiredError||this.__formData.requiredParam.tagRequiredError||this.__solve&&!this.__solve._$valid())){this._$dispatchEvent("submit",r);this.__hideModal(1)}else{this.__render();this.__solve&&this.__solve._$valid()}}};h.__isRequiredChecked=function(t,e){if(e.commentRequired&&!t.remarks)this.__formData.requiredParam.commentRequiredError=!0;if(e.tagRequired&&!t.tagList.length)this.__formData.requiredParam.tagRequiredError=!0};h.__resetError=function(){this.__formData.requiredParam.commentRequiredError=!1;this.__formData.requiredParam.tagRequiredError=!1}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","35df4ef4567b6cd0275a1b849d2bea8c","00b1248fcdd93958d87e26de99277f67","5d794ea50a4bb887dcfe9d3c7fd0160d","8d4ee540e02f9c245e06b32a11d7c983","aa835e6c54cfdee711ae8d0d1296fa57","2c13c0100e7a151de43cfbee9ad4fb3c");I$("1c1546fc0227f81bc4b4582e9fe84c28",'<textarea name="ntp" id="#<leaveBody>">\n    <div class="m-leavemessage j-flag">\n    </div>\n</textarea>\n<textarea name="jst" id="#<leaveInfo>">\n    <form class="m-form j-leave-form" id="leaveForm" onsubmit="return false;">\n        <p class="message">${session.message || session.leaveInfo|default:"当前客服不在线，如需帮助请留言~"}</p>\n        <div class="formcnt">\n            {if session.shop.hasMobile || session.hasMobile}\n            <div class="formitm">\n                <label for="lab" class="lab">手机<span class="u-required">&nbsp;&nbsp;*</span></label>\n                <div class="ipts">\n                    <input class="u-ipt j-ipt" type="text" name="mobile" maxlength="11" />\n                    <div class="z-error j-errmsg"></div>\n                </div>\n            </div>\n            {/if}\n            {if session.shop.hasEmail || session.hasEmail}\n            <div class="formitm">\n                <label for="lab" class="lab">邮箱<span class="u-required">&nbsp;&nbsp;*</span></label>\n                <div class="ipts">\n                    <input class="u-ipt j-ipt" type="text" name="email" maxlength="61" />\n                    <div class="z-error j-errmsg"></div>\n                </div>\n            </div>\n            {/if}\n            <div class="formitm lastItem">\n                <label for="lab" class="lab">留言<span class="u-required">&nbsp;&nbsp;*</span></label>\n                <div class="ipts">\n                    <textarea class="u-textarea j-ipt" name="content" maxlength="4000">\n                        <&#47;textarea>\n                </div>\n            </div>\n        </div>\n        <div class="btns">\n            <button class="u-btn j-leave-btn u-btn-disabled" disabled type="button" data-action="sendLeaveMsg" name="leaveBtn" data-bid="${session.shop.id}">发送</button>\n        </div>\n    </form>\n</textarea>\n\n<textarea name="jst" id="#<leaveOffInfo>">\n    <div class="m-leaveoff">\n        <p class="message">${leaveOffTips|default:"当前客服不在线，请在工作时间内联系"}</p>\n        <img class="noleavelogo" src="https://qiyukf.nosdn.127.net/sdk/res/img/nokefunoleave@2x_881d5ed7242589940fdc299968d7e070.png" alt="当前客服不在线，请在工作时间内联系">\n    </div>\n</textarea>\n\n<textarea name="jst" id="#<leaveFinishInfo>">\n    <div class="m-leavefinish">\n        <p class="message success">本次留言发送成功~</p>\n    </div>\n</textarea>');I$("57b425e54e094947e45b4232d3c28d89",function(t,e,i,n,s,a,o,r,_,d){_._$$Leave=t._$klass();d=_._$$Leave._$extend(s._$$Abstract);d.__init=function(){this.__super()};d.__reset=function(t){this.__super(t);var e=t.session,n=e.sessionStatus;if(205==n.status)o._$render(this.__container,this.__seed_offInfo,{leaveOffTips:e.message});else if(n.leaveFinish)this.__renderSended();else{o._$render(this.__container,this.__seed_info,{session:e});this.__nsubmit=i._$getByClassName(this.__body,"j-leave-btn")[0];this.__nform=i._$get("leaveForm");this.__initFormEvent()}};d.__destroy=function(){this.__super()};d.__initXGui=function(){var t=a._$parseUITemplate(r);return function(){this.__seed_html=t.leaveBody;this.__seed_info=t.leaveInfo;this.__seed_offInfo=t.leaveOffInfo;this.__seed_finshInfo=t.leaveFinishInfo}}();d.__initNode=function(){this.__super();this.__container=this.__body};d.__initFormEvent=function(){this.__doInitDomEvent([[this.__nsubmit,"click",this.__onSubmit._$bind(this)]]);var t=i._$get("leaveForm");if(t){if(t.email)this.__doInitDomEvent([[t.email,"input",this.__checkIpt._$bind(this,t,"email")],[t.email,"blur",this.__validateLeaveForm._$bind(this,"email")]]);if(t.mobile)this.__doInitDomEvent([[t.mobile,"input",this.__checkIpt._$bind(this,t,"mobile")],[t.mobile,"blur",this.__validateLeaveForm._$bind(this,"mobile")]]);t.content.value="";this.__doInitDomEvent([[t.content,"input",this.__checkIpt._$bind(this,t,"content")],[t.content,"blur",this.__validateLeaveForm._$bind(this,"content")]]);this.__checkIpt(t)}};d.__renderSended=function(){o._$render(this.__container,this.__seed_finshInfo)};d.__onSubmit=function(t){var e={},i=this.__nform;e.content=(i.content.value||"").trim();if(this.__validateLeaveForm()){e.content=(i.content.value||"").trim();if(i.mobile)e.mobile=(i.mobile.value||"").trim();if(i.email)e.email=(i.email.value||"").trim();this._$dispatchEvent("onsubmit",e);this.__renderSended()}};d.__validateLeaveForm=function(){var t={};var e;var s={email:[/^\w+[-.\w]*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,/^[^@]{1,30}@[^@]{1,30}$/],mobile:[/^\d{11}$/]};var a=function(a){var r=!0;if(t.email&&!t.email.value&&(!a||"email"==a)||t.mobile&&!t.mobile.value&&(!a||"mobile"==a)||!e&&(!a||"content"==a))return!1;n._$forEach(["mobile","email"],function(e){if(a==e||!a){var n=t[e];var _=!0;if(n&&n.must){var d=n.value;var c=s[e];for(var l=0,f=c.length;l<f;l++)if(!c[l].test(d))_=!1}if(n&&!_){n.err.innerText=n.errTip;i._$delClassName(n.err,"f-dn");i._$addClassName(n.node,"z-ipt-error");r=!1}else if(n)o(e)}});return r};var o=function(e){if(e){var n=t[e];if(n){i._$addClassName(n.err,"f-dn");i._$delClassName(n.node,"z-ipt-error")}}};return function(n){var s=i._$get("leaveForm");if(!s)return!1;if("发送中..."===s.leaveBtn.innerText||"发送成功"===s.leaveBtn.innerText)return!1;if(s.mobile&&("mobile"==n||!n))t.mobile={must:!0,value:s.mobile.value.trim(),node:s.mobile,err:i._$getByClassName(s.mobile.parentNode,"j-errmsg")[0],errTip:"手机号不足11位"};if(s.email&&("email"==n||!n))t.email={must:!0,value:s.email.value.trim(),node:s.email,err:i._$getByClassName(s.email.parentNode,"j-errmsg")[0],errTip:"请填写正确的邮箱地址"};if("content"==n||!n)e=s.content.value.trim();return a(n)}}();d.__checkIpt=function(t,e){if("mobile"==e)t.mobile.value=t.mobile.value.replace(/[^\d]/g,"");var n=!t.mobile?0:t.mobile.value.trim()?1:2;var s=!t.email?0:t.email.value.trim()?1:2;if(2==n||2==s||!t.content.value.trim()){i._$addClassName(t.leaveBtn,"u-btn-disabled");t.leaveBtn.disabled=!0}else{i._$delClassName(t.leaveBtn,"u-btn-disabled");t.leaveBtn.disabled=!1}}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","1c1546fc0227f81bc4b4582e9fe84c28");I$("498e0cb8b65810928b208c01c20374db",function(t,e,i,n,s,a){var o="z-icon-playing";var r=this;var _="";a._wxPlay=function(e,i){var n=document.querySelector(".z-icon-playing");if(n)t._$delClassName(n,o);if(_)this._wxStopPlay(n,_,function(){wx.playVoice({localId:i,success:function(){t._$addClassName(e,o);_=i;wx.onVoicePlayEnd({success:function(i){_="";t._$delClassName(e,o)}})}})});else wx.playVoice({localId:i,success:function(){_=i;t._$addClassName(e,o);wx.onVoicePlayEnd({success:function(i){_="";t._$delClassName(e,o)}})}})};a._wxStopPlay=function(e,n,s){var a=n;var r=e;if(!a&&_&&!r){a=_;r=document.querySelector(".z-icon-playing");console.log("audio播放前先关闭微信播放")}if(a||!i._$isFunction(s))wx.stopVoice({localId:a,success:function(e){_="";t._$delClassName(r,o);if(i._$isFunction(s))s()}});else s()}},"5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","295e0344e178c08801d7bce1d9676dd0","f0b1d7ff05e74da750d6bb82da881934");I$("aac22a477c227075a6def1f716ee003f",function(t,e,i,n,s,a,o,r){r._$dur2time=function(){var t=function(t){
return""+t};return function(t){if(!t)return'0"';t=Math.round(t/1e3);return t+'"'}}();r._$dur2width=function(t){return 40+7*t/1e3};r._$media=function(){var r={audio:function(e){var i="z-icon-playing";var r=t._$dataset(e,"id");if(!t._$hasClassName(e,i))s._$do(function(s){s._$getAudioURL(r,function(s,r){if("wxAudio"!=r){if(s){s+=(s.indexOf("?")<0?"?":"&")+"audioTrans&type=mp3";if(a._$isWX())wx.checkJsApi({jsApiList:["stopVoice"],success:function(t){if(1==t.checkResult.stopVoice)o._wxStopPlay()}});n._$play(s,{key:"ysf-online-audio",onstatechange:function(n){if(2==n.state)t._$addClassName(e,i);else t._$delClassName(e,i)},ontimeupdate:function(t){},onerror:function(n){t._$delClassName(e,i)}})}}else{n._$stop("ysf-online-audio");o._wxPlay(e,s)}})});else{n._$stop("ysf-online-audio");s._$do(function(t){t._$getAudioURL(r,function(t,i){if("wxAudio"==i)o._wxStopPlay(e,t)})})}}};return function(n,s){e._$addEvent(n,"click",function(n){var a=e._$getElement(n,"d:action");if(a){var o=r[t._$dataset(a,"action")];if(i._$isFunction(o))o.call(s,a)}})}}()},"5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","295e0344e178c08801d7bce1d9676dd0","f0b1d7ff05e74da750d6bb82da881934","35df4ef4567b6cd0275a1b849d2bea8c","498e0cb8b65810928b208c01c20374db");I$("efb02fe2bd994cabf7a7ad9e337d1a0c","<div class=\"u-status-message u-status-validate-{status}\" r-class={{'ani-fadeIn-status':show,'ani-fadeOut-status':!show}} r-hide={status == 'success'}>\n\t<i class=\"u-icon-{status}\"></i>\n\t<span class=\"status_message\" r-class={{'z-error':status=='error'}} style=\"display:inline-block\" >{#include (message||'')}</span>\n</div>");I$("5a5abbf3b836aeb2da1e4d77efbbd66b",function(t,e,i,n){var s=t.Component;n=s.extend({name:"network-status",template:i,config:function(){this.supr()}});return n},"fe686268a0af212baea04fc64f0059e8","3e346f2b6313e57a75f5ee9b603c4b65","efb02fe2bd994cabf7a7ad9e337d1a0c");I$("d423ffc1fed79387d3a7f03935744813",'<div class="m-modal {@(class)}" r-hide={!show}>\n    <div class="modal_dialog" {#if width}style="width: {width}px"{/if} tabindex="0" ref="dialog">\n        <div class="modal_hd" r-hide={modalType == \'confirm\' || modalType == \'alert\'}>\n            {#if closeButton}\n            <a class="modal_close" on-click={this.cancel($event)}><i class="u-icon u-icon-close"></i></a>\n            {/if}\n            <h3 class="modal_title" title={title} r-class={{"confirm-title": modalType == \'confirmHasTitle\'}}>{title}</h3>\n        </div>\n        <div class="modal_bd" ref="modalbd">\n            {#if confirmIcon}<i class="u-icon u-icon-warning u-icon-4x"></i>{/if}\n            {#if contentTemplate}{#include @(contentTemplate)}{#else}{content}{/if}\n        </div>\n        <div class="modal_ft" r-hide={hideFooter}>\n            <div class="group" {#if btnAlign}style="text-align: {btnAlign}"{/if}>\n            {#if errText}<span class="ft-err">{errText}</span>{/if}\n            {#if cancelButton}\n            <a class="u-btn u-btn-cancel cancel" on-click={this.cancel($event)} >{cancelButton === true ? \'取消\' : cancelButton}</a>\n            {/if}\n            {#if okButton}\n            <button class="u-btn" r-class={{\'u-btn-disabled\' : cancelDisabled}} on-click={this.ok($event)} ref="ok-btn" data-log="{adLog}" >{okButton === true ? okText||\'确定\' : okButton}</button>\n            {/if}\n            </div>\n        </div>\n    </div>\n</div>');I$("fdec2b215e7e7770f7e7b5af3422ee86",function(t,e,i,n,s){var a=t.Component;s=a.extend({template:n,config:function(t){this.data.title=this.data.title||"提示";this.data.show=this.data.show||!0;this.data.okText=this.data.okText||"确定";if(void 0===this.data.okButton)this.data.okButton=!0;if(void 0===this.data.cancelButton)this.data.cancelButton=!0;this.data.status={status:"success",message:"success"};this.$watch("show",function(t){t&&this.focus()});this.$on("$inject",function(){this.data.show&&this.focus()})},init:function(){this.supr();if(this.$root===this)this.$inject(document.body);this.$on("updatestatus",function(t){e._$extend(this.data.status,t,!0);this.$refs["netstatus"].$update()}._$bind(this));this.$on("btnStatus",function(t){this.data.cancelDisabled=!t||!1;this.$update()})},close:function(t,e){this.$emit("close",{result:t});t?this.ok(e):this.cancel(e);this.destroy()},ok:function(t){if(!this.data.hadSomeErr){this.$emit("ok",t);this.destroy()}},cancel:function(t){this.$emit("cancel",t);this.destroy()},hide:function(){this.data.show=!1;this.$update()},show:function(){this.data.show=!0;this.$update()},focus:function(){if(this.$refs.dialog)this.$refs.dialog.focus()}});s.alert=function(t,e,i,n){var a=new s({data:{"class":"m-modal-confirm "+(n||""),modalType:"alert",content:t,title:e,okButton:i||!0,cancelButton:!1}});return a};s.alert3=function(t){var i=e._$extend({"class":"m-modal-confirm "+(t.clazz||""),modalType:"alert",content:"",title:"",okButton:!0,cancelButton:!1},t,!0);var n=new s({data:i});return n};s.alert2=function(t,e,i,n){var a=new s({data:{"class":"m-modal-confirm "+(n||""),modalType:"alert",contentTemplate:t,title:e,okButton:i||!0,cancelButton:!1}});return a};s.confirm=function(t,e,i,n,a){var o=new s({data:{"class":"m-modal-confirm "+(a||""),contentTemplate:'<h3 class="message">'+t+"</h3>",confirmIcon:!1,modalType:"confirm",okButton:e,cancelButton:i||!0,adLog:n}});return o};s.confirm2=function(t,e,i,n){var a=new s({data:{"class":n||"",contentTemplate:t,confirmIcon:!1,modalType:"confirm",okButton:e,cancelButton:i||!0}});return a};s.confirm3=function(t,e,i,n){var a=new s({data:{"class":"m-modal-confirm "+(n||""),contentTemplate:'<h3 class="message">'+t+"</h3>",confirmIcon:!1,modalType:"confirm",okButton:e,cancelButton:i}});return a};s.confirmHasTitle=function(t,e,i,n,a){var o=new s({data:{"class":"m-modal-confirm "+(n||""),contentTemplate:t,confirmIcon:!1,okButton:e,cancelButton:i,title:a,closeButton:!0,modalType:"confirmHasTitle"}});return o};s.guide=function(t,e,i,n,a,o,r){var _=new s({data:{"class":"m-modal-guide "+(r||""),modalType:"guide",contentTemplate:t,title:e,okButton:i||!0,okText:n||"确定",cancelButton:a||!1,closeButton:o||!1}});return _};s.process=function(t,e){var i=e&&e.autoSize?" m-modal-auto":"";var n=new s({data:{"class":"m-modal-confirm"+i,modalType:"alert",contentTemplate:"<div class='m-modal-process'><p>"+t+"</p><div class='process'><div r-class='{{\"process-end\":ended,\"process-go\":!ended}}' class='process-bar'></div></div></div>",hideFooter:!0}});return n};return s},"fe686268a0af212baea04fc64f0059e8","3e346f2b6313e57a75f5ee9b603c4b65","5a5abbf3b836aeb2da1e4d77efbbd66b","d423ffc1fed79387d3a7f03935744813");I$("078c11dc85b47d445b45cb988037563f",function(t,e,i,n,s,a,o,r,_){r._$$WFList=t._$klass();_=r._$$WFList._$extend(s._$$Abstract);_.__init=function(){this.__super()};_.__reset=function(t){this.__super(t);this.__opt={listBox:t.listBox,scrollBox:t.scrollBox,tplSeed:t.tplSeed,scrollDelta:t.scrollDelta};this.__data={list:t.data||[],limit:t.limit,page:t.data.length/t.limit-1};this.__locked=!1;this.__doInitDomEvent([[this.__opt.scrollBox,"scroll",this.__onScroll._$bind(this)]]);this._$addEvent("listchange",this.__onListChange._$bind(this));this._$refresh()};_.__destroy=function(){this.__super()};_._$refresh=function(){o._$render(this.__opt.listBox,this.__opt.tplSeed,{beg:0,end:this.__data.list.length-1,xlist:this.__data.list})};_._$next=function(){this.__locked=!0;this._$dispatchEvent("ongetList",{page:this.__data.page+1})};_.__onListChange=function(t){var e=t.data;switch(t.action){case"append":this.__append(e);break;case"refresh":this._$refresh()}this.__locked=!1};_.__append=function(t){var e=this.__data.list.length;this.__data.list=this.__data.list.concat(t);this.__data.page++;var i=o._$get(this.__opt.tplSeed,{beg:e,end:this.__data.list.length-1,xlist:this.__data.list});this.__opt.listBox.insertAdjacentHTML("beforeend",i)};_.__onScroll=function(){if(!this.__locked){var t=this.__opt.scrollBox,i=this.__opt.listBox,n=e._$offset(i,t),s=n.y+i.offsetHeight-t.scrollTop-t.clientHeight;if(s<=this.__opt.scrollDelta)this._$next()}}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e");I$("7e93713704d077cee7fea044db6977d4",'<textarea name="ntp" id="#<drawerListCnt>">\n\t<div class="m-drawer-list-cnt">\n    <ul class="list"></ul>\n    <div class="load-status"></div>\n\t</div>\n</textarea>\n\n<textarea name="jst" id="#<drawerList>">\n  {list beg..end as y}\n    {var item=xlist[y]}\n    {if item.p_item_type == 1}\n    <li class="bubble-group-item">\n      {if item.p_img}\n      <img src="${item.p_img}" alt="">\n      {/if}\n      <span class="group-title" title="${item.p_title}">${item.p_title}</span>\n    </li>\n    {else}\n    <li class="bubble-good-item" data-action="selectItem" data-index="${y}">\n      <div class="bd">\n        {if item.p_img}\n        <div class="left">\n          <img class="img" src="${item.p_img}">\n        </div>\n        {/if}\n        <div class="right">\n          <div class="top">\n            <span class="title" title="${item.p_title}">${item.p_title}</span>\n            {if item.p_attr_1 || item.p_attr_2}\n              <div class="attr">\n                <p class="attr1" title="${item.p_attr_1}">${item.p_attr_1 || \'\'}</p>\n                <p class="attr2" title="${item.p_attr_2}">${item.p_attr_2 || \'\'}</p>\n              </div>\n            {/if}\n          </div>\n          <div class="bottom">\n            <span class="sub_title" title="${item.p_sub_title}">${item.p_sub_title}</span>\n            {if item.p_attr_3}\n              <span class="attr3" title="${item.p_attr_3}">${item.p_attr_3 || \'\'}</span>\n            {/if}\n          </div>\n        </div>\n      </div>\n    </li>\n    {/if}\n  {/list}\n</textarea>\n\n<textarea name="jst" id="#<drawerListStatus>">\n  <div class="u-status {if status.type == \'empty\'}z-empty{/if}">\n    {if status.type == \'loading\'}\n    <img src="https://qiyukf.nosdn.127.net/sdk/res/img/loading_03ce3dcc84af110e9da8699a841e5200.gif">\n    <span>${status.msg}</span>\n    {elseif status.type == \'error\' || status.type == \'nomore\' || status.type == \'empty\'}\n    <span>${status.msg}</span>\n    {/if}\n  </div>\n</textarea>');
I$("1a639d98b6ec93aeb13d4c9b7aa1a916",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u){f._$$List=t._$klass();u=f._$$List._$extend(s._$$Abstract);u.__init=function(){this.__super()};u.__reset=function(t){this.__super(t);this.__scrollBox=this.__body;this.__listBox=e._$getByClassName(this.__body,"list")[0];this.__nstatus=e._$getByClassName(this.__scrollBox,"load-status")[0];this.__tabId=t.tabId;this.__template=t.template;this.__currentTabData=this.__getCurrentTab(this.__template);if(this.__tabId==this.__template.tab_id){this.__hadRequest=!0;if(this.__currentTabData.list.length)this.__loadStatus={type:"success"};else this.__loadStatus={type:"empty",msg:this.__template.empty_list_hint}}else{this.__hadRequest=!1;this.__loadStatus={type:"init"}}this.__renderStatus(this.__loadStatus);this.__loadComplete=!1;this.__listConfig={listBox:this.__listBox,scrollBox:this.__scrollBox,tplSeed:this.__seed_list,scrollDelta:40,data:this.__currentTabData.list||[],ongetList:this.__getList._$bind(this),loadStatus:this.__loadStatus};var i=e._$getByClassName(this.__body,"modal_close")[0];this.__doInitDomEvent([[i,"click",this.__onClose._$bind(this)],[c._$$Cache,"onmorebotlist",this.__onListLoad._$bind(this)]]);r._$delegate(this,this.__listBox,{selectItem:this.__onSelectItem._$bind(this)});this.__list=_._$$WFList._$allocate(this.__listConfig);if("init"==this.__loadStatus.type)this.__list._$next()};u.__destroy=function(){this.__list&&this.__list._$recycle();this.__list=null;this.__super()};u.__initXGui=function(){var t=a._$parseUITemplate(l);return function(){this.__seed_html=t.drawerListCnt;this.__seed_list=t.drawerList;this.__seed_status=t.drawerListStatus}}();u.__initNode=function(){this.__super()};u.__getCurrentTab=function(t){var e=t.tabList;for(var i=0;i<e.length;i++)if(e[i].tab_id==this.__tabId)return e[i];return{tab_id:this.__tabId,list:[]}};u.__renderStatus=function(t){o._$render(this.__nstatus,this.__seed_status,{status:t})};u.__getList=function(){if(!this.__loadComplete){this.__loadStatus={type:"loading",msg:"加载中"};this.__renderStatus(this.__loadStatus);d._$getMoreBotList({template:{id:this.__template.id,action:{target:this.__currentTabData.action.target,params:this.__currentTabData.action.params}}})}};u.__onListLoad=function(t){var e=t.content;if(e.template.id==this.__template.id)if(e.template.tab_id==this.__tabId)if(t.error){this.__loadStatus={type:"error",msg:"加载失败，"+t.error.message};this.__renderStatus(this.__loadStatus)}else{var i=this.__getCurrentTab(e.template);if(0==i.list.length){this.__loadComplete=!0;if(this.__hadRequest)this.__loadStatus={type:"nomore",msg:"已经到底了"};else this.__loadStatus={type:"empty",msg:this.__template.empty_list_hint};this.__renderStatus(this.__loadStatus)}else{this.__loadStatus={type:"success",msg:""};this.__renderStatus(this.__loadStatus);this.__currentTabData.action=i.action;this.__currentTabData.list=this.__currentTabData.list.concat(i.list);this.__list._$dispatchEvent("listchange",{action:"append",data:i.list})}this.__hadRequest=!0}};u.__onClose=function(){this._$recycle()};u.__onSelectItem=function(t,i){if(t){var n=e._$dataset(t,"index");var s=this.__currentTabData.list[n];this._$dispatchEvent("onselectItem",s)}}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","35df4ef4567b6cd0275a1b849d2bea8c","078c11dc85b47d445b45cb988037563f","d67add781b37b82c1816b8c159701e56","f0b1d7ff05e74da750d6bb82da881934","7e93713704d077cee7fea044db6977d4");I$("17a68abb79eed513d4fdb0d77aadf4ff",'<div class="m-bot-drawer">\n    {#if !template.hideTabNav && (template.tabList.length>1 || (template.tabList.length==1 && template.tabList[0].tab_name) )}\n    <ul class="tabs">\n        {#list template.tabList as tab}\n            <li class="tab" r-class={{\'z-current\': tab.tab_id == currentTabId}} on-click={this.switchTab($event, tab.tab_id)}>\n                <span title="{tab.tab_name}">{tab.tab_name}</span>\n            </li>\n        {/list}\n    </ul>\n    {/if}\n    <ul class="drawer-list-list">\n        {#list template.tabList as tab}\n            <li class="drawer-list-item" ref="tab-{tab.tab_id}" r-class={{\'z-current\': tab.tab_id == currentTabId}}></li>\n        {/list}\n    </ul>\n</div>');I$("7ccdd01e9d3ce809aac4bc84d0216707",function(t,e,i,n,s){var a=i.Component;var o=a.extend({name:"bot-drawer",template:s,config:function(t){this.supr(t);t.currentTabId=t.template.tab_id},init:function(e){this.supr(e);this.clist={};window.requestAnimationFrame(function(){t._$forEach(this.data.template.tabList,function(t,e){this.clist[t.tab_id]=n._$$List._$allocate({parent:this.$refs["tab-"+t.tab_id],template:this.data.template,tabId:t.tab_id,onselectItem:this.selectListItem._$bind(this)})}._$bind(this))}._$bind(this))},destroy:function(){t._$forEach(this.data.template.tabList,function(t,e){this.clist[t.tab_id].__destroy()}._$bind(this));this.supr()},switchTab:function(t,e){this.data.currentTabId=e},selectListItem:function(t){this.$emit("selectItem",t)},close:function(){this.destroy()}});return o},"fbbf6ddc0634989027d138f4ffd4b78b","3e346f2b6313e57a75f5ee9b603c4b65","fe686268a0af212baea04fc64f0059e8","1a639d98b6ec93aeb13d4c9b7aa1a916","17a68abb79eed513d4fdb0d77aadf4ff");I$("a3124d96f6f05c1f39cdc8dc29b0f68f",function(t,e,i,n,s,a,o,r,_,d){o._$request=function(){var t={},a=/\{(.*?)\}/gi,o=/^get|delete|head$/i,c=/json/i,l=/xml/i;var f=function(e){var i=t[e];if(i){delete i.s;delete i.f;delete t[e]}};var u=function(e,i){var n=t[e];if(n){var s=n[i],a=d.slice.call(arguments,2);try{(s||_).apply(null,a)}catch(o){if(!1)throw o;console.error(o.message);console.error(o)}f(e)}};var h=function(t,e){u(t,"s",e)};var p=function(t,i){i=i||{};if(i.code!=n._$CODE_ERRSERV||204!=i.data){e._$dispatchEvent(window,"resterror",i);if(!i.stopped)u(t,"f",i);else f(t)}else h(t,null)};var m=function(t,e,i){var n=t[e]||t[e.toLowerCase()];if(!n){n=i;t[e]=n}return n};var g=function(t,e,n){if(i._$isArray(t))n[e]=JSON.stringify(t)};return function(e,n){n=i._$merge({},n);var d={},f=n.param||r;e=e.replace(a,function(t,e){var i=f[e];if(null!=i)d[e]=!0;return encodeURIComponent(i||"")||t});var u=n.data||{};i._$loop(f,function(t,e){if(!d[e])u[e]=t});var b="text",v=n.headers||{},$=m(v,"Accept","application/json"),y=m(v,"Content-Type","application/json");if(c.test($))b="json";else if(l.test($))b="xml";var x=i._$uniqueID();t[x]={s:n.onload||_,f:n.onerror||_};n.method=n.method||"GET";if(o.test(n.method.trim())){i._$forIn(u,g);n.query=u;u=null}else if(c.test(y))u=JSON.stringify(u);n.type=b;n.data=u;n.headers=v;n.onload=h._$bind(null,x);n.onerror=p._$bind(null,x);return s._$request(e,n)}}();o._$abort=function(t){s._$abort(t)};a._$$CustomEvent._$allocate({element:window,event:"resterror"});if(!0)t.P("nej.j")._$requestByREST=o._$request;return o},"a2e1fe5ad329e35f3966d36c90672926","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","e9f3264f172f0455b684b5c08503be9e","2f42bd4202bba1781886820b65db2a46","5f75dc6bf6467f0a29ae4a457d2e9c8c");I$("5140ae09a025d19918a0cbf9017878db",function(t,e,i,n,s,a){s._$doRequest=function(t,s){if(t){var a=function(t){t=t||{};var i=s.onerror;if(e._$isFunction(i))i.call(this,t,s)};var o=function(t){if(t&&0===(""+t.code).indexOf("2")){var i=s.onload;if(e._$isFunction(i))i.call(this,t.result,t)}else a.call(this,t)};var r=window.setting||{},_=!r.token?"":"?token="+r.token,d=e._$merge({cookie:!0},s,{type:"json",method:s.method||"POST",onload:o._$bind(this),onerror:a._$bind(this)});if(t.indexOf("://")<0)t=(r.remoteRoot||"")+t+_;return!s.rest?i._$request(t,d):n._$request(t,d)}else console.error("not found request url")};s._$abort=function(t,e){!e?i._$abort(t):n._$abort(t)}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","2f42bd4202bba1781886820b65db2a46","a3124d96f6f05c1f39cdc8dc29b0f68f");I$("da89b5f6b8ec53f780d76f94c79071f9",'{#if status == \'pending\' }\n\t  <button type="button" class="u-btn u-btn-sixth" disabled=true >\n        {text}中...\n    </button>\n{#elseif status == \'success\' || _status == \'success\'}\n\t<button type="button" class=" u-btn u-btn-sixth" disabled = true>\n\t  <i class="u-icon-tickwhite"></i> {text}成功\n\t</button>\n{#else}\n\t<button type="button" class="u-btn" on-click = {this.onClick($event)} data-log={dataLog} {#if dataLogLabel!==undefined}data-log-label={dataLogLabel}{/if} r-class={{"u-btn-disabled": (status == \'disabled\' || !!disabled)}} disabled = {(status == \'disabled\' || !!disabled)}>\n\t\t{text}\n  </button>\n{/if}');I$("4150c26d2f7568fcd1585ac499999f5b",function(t,e,i,n){var s=e.Component;n=s.extend({name:"button-save",template:i,config:function(t){var e=this;t.status=t.defstatus||"";t.text=t.text||"保存";t.saveOnce=t.saveOnce||!1;e.uiState={};var i="";this.$watch("status",function(t,n){i="disabled"==t?t:"";if("success"==t&&!e.data.saveOnce){if(e.uiState.timingOne)clearTimeout(e.uiState.timingOne);e.uiState.timingOne=setTimeout(function(){e.data.status=i;e.$update()},3e3)}if("error"==t)e.data.status="";if("disabled"==t&&""!==n&&void 0!==n){e.data._status="success";if(e.uiState.timingTwo)clearTimeout(e.uiState.timingTwo);e.uiState.timingTwo=setTimeout(function(){e.data.status=i;e.data._status="";e.$update()},3e3)}});this.supr()},onClick:function(t){this.$emit("click",t)}});return n},"3e346f2b6313e57a75f5ee9b603c4b65","fe686268a0af212baea04fc64f0059e8","da89b5f6b8ec53f780d76f94c79071f9");I$("7a9fab15b8825ad054809f4119aedc2e",'<div class="u-select" r-class={{"u-report-disabled-status-select": disable == true}}>\n    <div class="select-sel j-ipt" on-click={this.toggle($event)} tabindex=0 on-blur={this.selectBlur($event)} ref="selectbody">\n        <span>{value||\'请选择\'}</span>\n        <i class="u-icon u-icon-down"></i>\n    </div>\n    <div class="select-cnt" r-hide={!show}>\n        <div class="list scro_list">\n            <ul>\n                <li class="itm z-title-hover" r-hide="!needefault">\n                    <h4 class="title-level-1" on-click={this.select($event,{text:"",value:""})}>\n                        <span class="txt">请选择</span><i class="u-icon-tickblue"></i>\n                    </h4>\n                </li>\n                {#list list as item}\n                <li class="itm z-title-hover">\n                    <h4 class="title-level-1" on-click={this.select($event,item)}>\n                        <span class="txt" >{item[textkey]}</span><i class="u-icon-tickblue"></i>\n                    </h4>\n                </li>\n                {/list}\n            </ul>\n        </div>\n    </div>\n    {#if error}\n    <div class="u-status-error">\n        <span>{error}</span>\n    </div>\n    {/if}\n</div>\n');
I$("dd2bdbfcb0339beceb55cbbb1fb2e683",function(t,e,i,n,s,a,o){var r=t.Component.extend({name:"wgt-custom-select",template:a,config:function(t){this.data=s._$extend(t,{value:"",show:!1,textkey:"text",error:"",required:!1,list:[{text:"aa",value:12},{text:"bb",value:12},{text:"cc",value:12},{text:"dd",value:12},{text:"ee",value:12}]});this.supr(t)},init:function(){this.supr();e._$addEvent(document,"click",this.hideOpts._$bind(this))},hideOpts:function(){this.data.show=!1;this.$update()},toggle:function(t){t.stop();e._$dispatchEvent(document,"click");if(!this.data.disable)this.data.show=!this.data.show},select:function(t,i){e._$stopBubble(t);this.data.value=i[this.data.textkey];this.data.show=!1;if(this.validate())this.$emit("select",i)},validate:function(){if(this.data.required&&""==this.data.value){this.data.error="必填项不能为空";return!1}this.data.error="";return!0},isValidate:function(){if(this.data.required&&""==this.data.value)return!1;else return!0},selectBlur:function(){},destroy:function(){this.supr()}});return r},"fe686268a0af212baea04fc64f0059e8","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","5fb495f256a5dcde2a92e5fe919a6422","3e346f2b6313e57a75f5ee9b603c4b65","7a9fab15b8825ad054809f4119aedc2e");I$("cce112a8125bd416ff3fc6908d52c948",'<div class="ipts ipts-clear">\n    <input class="u-ipt j-ipt" placeholder={@(placeholder?placeholder:(isNumber?"请输入数字":"请输入内容"))} r-model={value} on-keyup={this.onkeyup($event)} on-focus={this.onfocus($event)} on-blur={this.onblur($event)} type={@(type)} maxlength={@(max)} style="ime-mode:Disabled" ref="j-edit-input">\n    <i class="u-icon-clear" on-mousedown={this.clearCnt()} r-class={{ \'f-dn\' : !value}} r-hide={!(value && _delIcon)}></i> \n    {#if error}\n    <div class="u-status-error">\n        <span>{error}</span>\n    </div>\n    {/if}\n</div>\n');I$("530708c24d4bd4c96e9de5414fb40fa3",function(t,e,i,n,s,a){var o=i.Component;a=o.extend({name:"wgt-custom-input",template:s,config:function(t){e._$extend(t,{value:"",oldNumber:"",required:!1,isNumber:!1,max:20,error:"",type:t.type||"text",errorInfo:t.errorInfo||"必填项不能为空",rules:[]})},validate:function(){if(!this.data.value&&this.data.required){this.data.error=this.data.errorInfo;return!1}if(this.data.value){var t=this.data.rules;for(var e=0;e<t.length;e++){var i=t[e].regExp;if(!i.test(this.data.value)){this.data.error=t[e].errorMsg;return!1}}}this.data.error="";return!0},isValidate:function(){if(!this.data.value&&this.data.required)return!1;if(this.data.value){var t=this.data.rules;for(var e=0;e<t.length;e++){var i=t[e].regExp;if(!i.test(this.data.value))return!1}}return!0},onblur:function(e){window.parent.postMessage("pkg:"+JSON.stringify({category:"inputblur"}),"*");t._$stopBubble(e.event);this.data._delIcon=!1;if(e.target.value!=e.target.oldVal){if(this.validate())this.$emit("eBlur",this.data.value)}else if(!this.data.value&&this.data.required)this.data.error=this.data.errorInfo},onfocus:function(e){t._$stopBubble(e.event);e.target.oldVal=e.target.value;this.data._delIcon=!0},onkeyup:function(e){t._$stopBubble(e.event);if(this.data.isNumber)if(/^[+-]?(\d+\.?\d*)?$/.test(this.data.value))this.data.oldNumber=this.data.value;else this.data.value=this.data.oldNumber;this.$emit("eKeyup",this.data.value)},clearCnt:function(){this.data.value="";this.data.oldNumber="";this.validate();this.$emit("eKeyup",this.data.value)},$getValue:function(){var t=this.data;return{id:t.id,name:t.name,value:t.value}}});return a},"be567474249a271e4786c144ccf5f75a","3e346f2b6313e57a75f5ee9b603c4b65","fe686268a0af212baea04fc64f0059e8","35df4ef4567b6cd0275a1b849d2bea8c","cce112a8125bd416ff3fc6908d52c948");I$("bce9539c3218c18ce63308c46e173541",'<label class="m-check-item {checked?\'checked\':\'\'}" onselectstart="return false" title={text}>\n    <input type="checkbox" r-model={checked} r-hide={!showCheckbox}>\n    <span>{text}</span>\n    <i class="u-icon-tickblue"></i>\n</label>\n');I$("6ffb51f0ccd95ee6177ca2b33bdfed60",".m-check-item {\n    cursor: pointer;\n    display: inline-block;\n    position: relative;\n    height: 26px;\n    line-height: 16px;\n    width: 120px;\n    font-size: 14px;\n    color: #333333;\n    border: 1px solid #e8e8e8;\n    border-radius: 2px;\n    padding: 4px 20px;\n    box-sizing: border-box;\n    text-align: center;\n    margin-top: 10px;\n    margin-right: 9px;\n}\n\n.m-check-item:last-child {\n    margin-right: 0px;\n}\n\n.m-check-item.checked {\n    border-color: #5092e1;\n}\n\n.m-check-item>input {\n    display: inline-block\\9;\n    position: absolute;\n    left: 5px;\n    top: 3px;\n}\n\n.m-check-item>span {\n    display: inline-block;\n    width: 100%;\n    overflow: hidden;\n    word-wrap: normal;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.m-check-item>i {\n    position: absolute;\n    display: none;\n    top: 6px;\n    right: 4px;\n}\n\n.m-check-item.checked>i {\n    border-color: #5092e1;\n    display: block;\n\n}\n");I$("0da0e4e7fc6344d86953310dff989293",function(t,e,i,n,s,a){i._$pushCSSText(a);i._$dumpCSSText();return t.Component.extend({name:"wgt-check-item",template:s,config:function(t){e._$extend(t,{checked:!1,showCheckbox:!1})},init:function(){}})},"fe686268a0af212baea04fc64f0059e8","3e346f2b6313e57a75f5ee9b603c4b65","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","bce9539c3218c18ce63308c46e173541","6ffb51f0ccd95ee6177ca2b33bdfed60");I$("2ec0fea226417cde811871d9e4cef18d",'<div class="m-select-mul" onselectstart="return false" on-click={this.delegate($event)}>\n    <div class="m-select-mul-sel j-ipt" on-click={this.toggle($event)} tabindex="0" on-blur={this.selectBlur($event)}>\n        <span title={value||\'\'}>{valueAsDefault&&customfieldEdit?\'请选择\':(value||\'请选择\')}</span>\n        <i class="u-icon u-icon-down"></i>\n    </div>\n    <div class="m-select-mul-cnt" r-hide={!show}>\n        <div class="cnt-top">\n            <div class="cnt-head">\n                <label class="m-check-item {isAllSel?\'checked\':\'\'}" onselectstart="return false" title={allText} ref="selAll">\n                    <input type="checkbox" r-model={isAllSel} r-hide={!showCheckbox}>\n                    <span>{allText}</span>\n                    <i class="u-icon-tickblue"></i>\n                </label>\n            </div>\n            <div class="cnt-middle">\n                <div class="level-1-wrap z-show">\n                    <div class="level-1-cnt">\n                        {#list list as c}\n                        <wgt-check-item text="{c[key]}" checked={c.selected} showCheckbox={showCheckbox}></wgt-check-item>\n                        {/list}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="cnt-bottom">\n            <button class="cancel" on-click={this.onCancel()}>取消</button>\n            <button class="ok" on-click={this.onOk()}>确定</button>\n        </div>\n    </div>\n    {#if error}\n    <div class="u-status-error">\n        <span>{error}</span>\n    </div>\n    {/if}\n</div>\n');I$("9af6960f7c31313a98922779f0a71fa4",function(t,e,i,n,s,a){return t.Component.extend({name:"wgt-custom-mulselect",template:a,computed:{isAllSel:{get:function(){for(var t=this.data.list.length-1;t>=0;t--)if(!this.data.list[t].selected)return!1;return!0},set:function(t){for(var e=this.data.list.length-1;e>=0;e--)this.data.list[e].selected=t}}},config:function(t){e._$extend(t,{show:!1,key:"name",allText:"所有选项",value:"",error:"",required:!1,isAll:!1,list:[],showCheckbox:e._$isIEX(8)})},init:function(){n._$addEvent(document,"click",this.__hideOpts._$bind(this));this.__initSelected();this.$watch("isAll",function(t,e){t&&this.__doSelectAll(!i._$hasClassName(this.$refs.selAll,"checked"))})},toggleAll:function(t){n._$stopBubble(t.event);this.isAllSel=!this.isAllSel},__initSelected:function(){var t=this.data.value.split(";");for(var e=0;e<this.data.list.length;e++)if(t.indexOf(this.data.list[e][this.data.key])!==-1)this.data.list[e].selected=!0;else this.data.list[e].selected=!1;if(this.data.value)this.data.error=""},__hideOpts:function(){this.data.show=!1;this.$update()},toggle:function(){n._$dispatchEvent(document,"click",{originSrcElement:Regular.dom.element(this)});this.data.show=!0},delegate:function(t){n._$stopBubble(t.event)},onOk:function(){var t=this.__getSelected(),e=t.names;this.data.value=e.join(";");this.data.show=!1;if(this.validate())this.$emit("ok",this.data.value);return!1},onCancel:function(){this.data.show=!1;this.__initSelected();return!1},validate:function(){if(this.data.required&&""==this.data.value){this.data.error="必填项不能为空";return!1}this.data.error="";return!0},isValidate:function(){if(this.data.required&&""==this.data.value)return!1;else return!0},__doSelectAll:function(t){for(var e=this.data.list.length-1;e>=0;e--)this.data.list[e].selected=t},__getSelected:function(){var t=[];for(var e=0;e<this.data.list.length;e++){var i=this.data.list[e];if(i.selected)t.push(i[this.data.key])}return{names:t}},selectBlur:function(){}})},"fe686268a0af212baea04fc64f0059e8","3e346f2b6313e57a75f5ee9b603c4b65","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","0da0e4e7fc6344d86953310dff989293","2ec0fea226417cde811871d9e4cef18d");I$("f6c75c2b937e171baf7ed163f53e0f05",'<div class="ipts">\n    <textarea class="u-textarea j-ipt" maxlength={@(max)}  placeholder={@(placeholder?placeholder:"请输入内容")} r-model={value} on-keyup={this.onkeyup($event)} on-focus={this.onfocus($event)} on-blur={this.onblur($event)} ref="j-ipt"></textarea>\n    {#if error}\n    <div class="u-status-error">\n        <span>{error}</span>\n    </div>\n    {/if}\n</div>\n');I$("ba4d7793353a96855ce2bb237878b936",function(t,e,i,n,s,a){var o=i.Component;a=o.extend({name:"wgt-custom-textarea",template:s,config:function(t){e._$extend(t,{value:"",required:!1,max:500,error:"",errorInfo:t.errorInfo||"必填项不能为空"})},validate:function(t){if(!this.data.value&&this.data.required){this.data.error=this.data.errorInfo;return!1}this.data.error="";return!0},
isValidate:function(){if(!this.data.value&&this.data.required)return!1;else return!0},onblur:function(e){window.parent.postMessage("pkg:"+JSON.stringify({category:"inputblur"}),"*");t._$stopBubble(e.event);if(e.target.value!=e.target.oldVal){if(this.validate()){if(this.data.value.length>this.data.max){this.data.error="";this.data.value=this.data.value.substr(0,this.data.max)}this.$emit("eBlur",this.data.value)}}else if(!this.data.value&&this.data.required)this.data.error=this.data.errorInfo},onfocus:function(e){t._$stopBubble(e.event);e.target.oldVal=e.target.value},onkeyup:function(e){t._$stopBubble(e.event);this.$emit("eKeyup",this.data.value)},$getValue:function(){var t=this.data;return{id:t.id,name:t.name,value:t.value}}});return a},"be567474249a271e4786c144ccf5f75a","3e346f2b6313e57a75f5ee9b603c4b65","fe686268a0af212baea04fc64f0059e8","35df4ef4567b6cd0275a1b849d2bea8c","f6c75c2b937e171baf7ed163f53e0f05");I$("d197b75c7ee97588bd621778f3238d9d",'<div class="m-progress">\n<div class="progress"  r-hide=\'!progress\' r-animation=\'on: leave;  wait: 200;class: fadeOut\'>\n    <div class="progress-bar" style="background-color: {currentColor};width: {percent||0}% ;"></div>\n</div>\n</div>');I$("56cb656154f2b2db0fc823a657afd58b",function(){var t={};var e=(new Date).setHours(0,0,0,0);var i=864e5;t.UPLOAD_URL="https://nos.netease.com/";t.COLOR_SUCCESS="#62a8ea";t.COLOR_INFO="#62a8ea";t.COLOR_DANGER="#d9534f";t.COLOR_WARNING="#f0ad4e";t.sysStartTime=+new Date("2015-09-01").setHours(0,0,0,0);t.sysEndTime=+(new Date).setHours(23,59,59,999);t.callSysStartTime=+new Date("2016-06-01").setHours(0,0,0,0);t.personalSysStartTime=+new Date("2018-09-01").setHours(0,0,0,0);t.callBackSysStartTime=+new Date("2017-08-01").setHours(0,0,0,0);t.callBackSysEndTime=e+365*i;return t});I$("515e972668c64b394790c22fa1d6a394",function(t,e,i,n){var s={ERROR:e._$rgb(i.COLOR_DANGER),COMPLETE:e._$rgb(i.COLOR_SUCCESS)};var a=n.Component,o=a.extend({template:t,name:"wgt-progress",config:function(t){e._$extend(t,{startColor:e._$rgb(i.COLOR_INFO),endColor:s.COMPLETE,percent:0})},computed:{currentColor:function(t){var i=e._$mix(t.startColor,t.endColor,100-t.percent);return"rgb("+i[0]+","+i[1]+","+i[2]+")"}},move:function(t){clearTimeout(this.timer);if(1e3===t)this.end(!0);else this.$update("percent",t)},start:function(){if(this.timer)clearTimeout(this.timer);this.data.progress=!0;this.data.percent=2;this.data.endColor=s.COMPLETE;this.$update();this._startTimer()},end:function(t){clearTimeout(this.timer);this.data.progress=!1;this.data.percent=100;this.data.endColor=!t?s.COMPLETE:s.ERROR;this.$update()},_startTimer:function(){var t=this.data;this.timer=this.$timeout(function(){t.percent=t.percent+(100-t.percent)*(.2*Math.random());this._startTimer();console.log(this.$get("currentColor"))},1e3*Math.random()+2e3)}}).use("timeout");return new o},"d197b75c7ee97588bd621778f3238d9d","3e346f2b6313e57a75f5ee9b603c4b65","56cb656154f2b2db0fc823a657afd58b","fe686268a0af212baea04fc64f0059e8");I$("45c14227dc6e965278f7b96ec506bfaf",function(t,e){e.imageType=["jpg","jpeg","bmp","png","gif","JPG","JPEG","BMP","PNG","GIF"];return e},"3e346f2b6313e57a75f5ee9b603c4b65");I$("af98b95343cc7d604d3b9a1c3e3a9450",'<li class="m-uploaditem itm" on-click={this.previewPic()}>\n\t<div class="hd">\n\t\t{#if progress == \'progress\'}\n\t\t<i class="iconfont icon-cancel u-icon-clear" on-click={this.cancelUpload()}></i>\n\t\t{#elseif progress == \'error\' || progress == \'finish\'}\n\t\t<i class="iconfont icon-cancel u-icon-clear" on-click={this.delete()}></i>\n\t\t{/if}\n\t</div>\n\t<div class="bd">\n\t\t<i class="u-icon-file-{file.name | spliceSuffix}"></i>\n\t\t<p class="name" title={@(file.name)} r-hide = {this.uiState.updateError}>  {fileName}</p>\n\t\t<p class="kb" r-hide={!this.uiState.progressHide || this.data.progress == \'error\'}>\n\t\t\t{file.size|kbSize}\n\t\t</p>\n\n\t\t{#if progress == \'error\'}\n\t\t\t<div class="operate">\n\t\t\t\t<a class="fail">上传失败</a>\n\t\t    \t<a on-click={this.retryUpload()} class="retry">重试</a>\n\t    \t</div>\n    \t{/if}\n\t\t<div r-hide={this.uiState.progressHide} class="m-progress m-progress-attach">\n\t\t\t<wgt-progress ref="progress"></wgt-progress>\n\t\t</div>\n    </div>\n</li>');I$("ed23d9b57d57350a177e97aa2465575a",function(t,e,i,n,s,a,o,r,_){var d=i.Component;var o=o.imageType;_=d.extend({name:"upload-item",template:r,config:function(e){this.supr();t._$extend(e,{uiState:{}},!0)},init:function(){this.supr();this.upload()},upload:function(){var e=this.data.ev,i=this.data.file.name,n=this.data.suffix;var s=this.data.file;t._$extend(this.uiState,{progressHide:!1},!0);this.$refs["progress"].start();window.nim.previewFile({type:"file",blob:s,uploadprogress:this.onProgress.bind(this,i,n),done:this.onUpload.bind(this,i,n)})},onUpload:function(e,i,n,s){if(!n){t._$extend(this.data,{fileName:e,iconName:i,progress:"finish"},!0);t._$extend(this.uiState,{progressHide:!0},!0);this.$refs["progress"].end();this.data.uploadItem={name:this.data.file.name,size:this.data.file.size,url:s.url.replace(/^(https|http):\/\/nos\.netease\.com\/ysf/g,"https://ysf.nosdn.127.net")};this.$emit("success",this.data.uploadItem);this.$update()}else this.onError(e,i)},onError:function(e,i){t._$extend(this.data,{fileName:e,progress:"error",iconName:i},!0);t._$extend(this.uiState,{progressHide:!0},!0);this.$emit("error");this.$refs["progress"].end();this.$update()},onProgress:function(e,i,n){if(n&&"number"==typeof n.total&&"number"==typeof n.loaded){var s=100*(n.loaded/n.total||0);this.$refs["progress"].move(s);this.$emit("progress",{precentage:s})}t._$extend(this.data,{fileName:e,progress:"progress",iconName:i},!0);this.$update()},"delete":function(){this.$emit("delete",{fileName:this.data.file.name,size:this.data.file.size,index:this.data.index})},cancelUpload:function(){a._$abort(this.data.requestId);this.destroy()},retryUpload:function(){this.upload()},previewPic:function(){if(o.indexOf(this.data.file.name.substr(this.data.file.name.lastIndexOf(".")+1))!=-1)this.$emit("previewPicItem",this.data.uploadItem.url)}});return _},"3e346f2b6313e57a75f5ee9b603c4b65","fbbf6ddc0634989027d138f4ffd4b78b","fe686268a0af212baea04fc64f0059e8","515e972668c64b394790c22fa1d6a394","9733787c25ceca396cb6e8dcce07ee63","2f42bd4202bba1781886820b65db2a46","45c14227dc6e965278f7b96ec506bfaf","af98b95343cc7d604d3b9a1c3e3a9450");I$("1ea0a347248794e0c53a1cc0cbe7f040",'<label class="upload {@(class)}" ref="upload">{btnText || \'上传附件\'}</label>\n{#if error&&error.message}\n<span class=\'z-upload-error\'>\n\t<i class="u-icon-failuremini"></i>\n\t<span class="err-msg">{error.message}</span>\n</span>\n{/if}');I$("e48d9988db605b39057702ce3ebf9643",function(t,e,i,n,s,a,o,r,_){var d=e.Component;_=d.extend({name:"upload-btn",template:r,config:function(e){t._$extend(this.uiState,{lock:!1});t._$extend(this.data,{error:{},maxsize:this.data.maxsize||50,unitname:this.data.unitname||"M"});this.$on("error",this.handleError.bind(this));this.supr()},init:function(t){this.supr(t);this.upload(t)},upload:function(t){var e=this.$refs["upload"],i=this;setTimeout(function(){i.fileId=s._$bind(e,{name:"file",multiple:!i.data.single,accept:i.data.accept,param:{Object:"","x-nos-token":""},onchange:i.onFileChange.bind(i)})},0)},onFileChange:function(t){var e=document.getElementById(t.id).files,i=0;this.clearError();n._$forEach(e,function(t){i+=t.size},this);if(!(i>52428800))n._$forEach(e,function(t){this.$emit("upload",t)},this);else this.handleError({message:"单次上传文件大小不超过50M"})},handleError:function(t){this.data.error.message=t.message;this.$update();if(document.getElementsByClassName("j-set-sdk"))i._$addEvent(document.getElementsByClassName("j-set-sdk")[0],"click",this.clearError._$bind(this))},clearError:function(t){this.data.error.message="";this.$update();if(document.getElementsByClassName("j-set-sdk"))i._$clearEvent(document.getElementsByClassName("j-set-sdk")[0],"click")},abort:function(){this.$emit("abort")}})},"3e346f2b6313e57a75f5ee9b603c4b65","fe686268a0af212baea04fc64f0059e8","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","9733787c25ceca396cb6e8dcce07ee63","2f42bd4202bba1781886820b65db2a46","56cb656154f2b2db0fc823a657afd58b","1ea0a347248794e0c53a1cc0cbe7f040");I$("6c3bb246e3ba575f8d5d26b53ece14f0",'<div class="picviewer-container fn-dn" ref="container" tabindex="-1">\n    <div class="picviewer-canvas-wrap">\n        <div class="picviewer-canvas" ref="canvas"></div>\n        <div class="u-icon-font iconfont icon-arrowleft" data-action="prev" r-hide={index==0}></div>\n        <div class="u-icon-font iconfont icon-arrowright" data-action="next" r-hide={index==pics.length-1}></div>\n        <div class="picviewer-tooltip hide" ref="tooltip"></div>\n        <div class="picviewer-footer" onselectstart="return false">\n            <div class="picviewer-title">{index+1}/{pics.length}</div>\n            <div class="picviewer-toolbar-warp">\n                <div class="picviewer-toolbar">\n                    <a class="u-icon-font iconfont icon-one2one" data-action="one2one" ref="one2one"></a>\n                    <div class="banner"></div>\n                    <a class="u-icon-font iconfont icon-fullscreen {this.isFullEnabled()?\'\':\'disabled\'}" data-action="full" ref="full"></a>\n                    <div class="banner"></div>\n                    <a class="u-icon-font iconfont icon-zoomin" data-action="bigger" ref="bigger"></a>\n                    <div class="banner"></div>\n                    <a class="u-icon-font iconfont icon-zoomout" data-action="smaller" ref="smaller"></a>\n                    <div class="banner"></div>\n                    <a class="u-icon-font iconfont icon-rotate" data-action="rotate"></a>\n                    <div class="banner"></div>\n                    <a class="u-icon-font iconfont icon-download" data-action="download"></a>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="u-icon-font iconfont icon-close" data-action="close"></div>\n</div>\n');
I$("c2988d8e156e484a190351b466078479",function(t,e,i,n,s,a){function o(t){return t+"px"}function r(t){return Number(t.replace("px",""))||0}function _(t,e){var i;if(t.naturalWidth)return e(t.naturalWidth,t.naturalHeight);i=document.createElement("img");i.onload=function(){e(this.width,this.height)};i.src=t.src}var d="mousedown pointerdown MSPointerDown",c="mousemove pointermove MSPointerMove",l="mouseup pointerup pointercancel MSPointerUp MSPointerCancel",f="wheel mousewheel DOMMouseScroll",u="webkitfullscreenchange mozfullscreenchange fullscreenchange",h="keydown",p="click",m=1024,g=360,b=722,v=360;return t.Component.extend({name:"wgt-pic-viewer",template:a,config:function(t){e._$extend(t,{index:0,pics:[{name:"aaa.jpg",src:"http://aa.bb.cc/aaa.jpg"}],appendTo:""});this.data.container={showtime:0,el:null,action:!1};this.data.image={el:null}},init:function(){var t=this,e=this.data.container,i=e.el=this.$refs.container,n=this.onMouseDown._$bind(this),a=this.onKeyDown._$bind(this),o=this.onMouseMove._$bind(this),r=this.onMouseUp._$bind(this),_=this.onClick._$bind(this),m=this.onFullChange._$bind(this),g=this.onWheel._$bind(this);s._$addEvent(i,d,n);s._$addEvent(i,h,a);s._$addEvent(i,f,g);s._$addEvent(i,p,_);if(this.isFullEnabled())s._$addEvent(i,u,m);s._$addEvent(document,c,o);s._$addEvent(document,l,r);if(this.data.appendTo)this.$inject(this.data.appendTo);else this.$inject(document.body);this.$on("$destory",function(){s._$delEvent(i,d,n);s._$delEvent(i,h,a);s._$delEvent(i,f,g);s._$delEvent(document,c,o);s._$delEvent(document,l,r);s._$delEvent(i,p,_);if(this.isFullEnabled())s._$delEvent(i,u,m)})},isFullEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},isFull:function(){return i._$hasClassName(this.$refs.full,"icon-notfullscreen")},onFullChange:function(t){var e=this.data.container.el,n=this.$refs.full;if(this.isFull()){i._$delClassName(n,"icon-notfullscreen");i._$addClassName(n,"icon-fullscreen");this.initImage(this.data.image.el,!0)}else{i._$delClassName(n,"icon-fullscreen");i._$addClassName(n,"icon-notfullscreen");this.setConStyle({left:"0px",top:"0px",width:"100%",height:"100%"});this.zoom(this.data.image.ratio)}},onKeyDown:function(t){if(38==t.which)this.zoom(this.data.image.ratio+.1);else if(40==t.which)this.zoom(this.data.image.ratio-.1);else if(27==t.which)this.close();else if(37==t.which)this.show(this.data.index-1);else if(39==t.which)this.show(this.data.index+1);return!1},show:function(t){if(void 0===t)return i._$delClassName(this.data.container.el,"fn-dn");var e=this.data.container,n=this.$refs.canvas,s=this.data.pics[t]&&this.data.pics[t].src;if(s){i._$clearChildren(n);i._$delClassName(e.el,"fn-dn");e.el.focus();var a=this.data.image.el=i._$create("img","picviewer-img transition",n);a.src=s;i._$attr(a,"draggable","false");i._$dataset(a,"movetarget","img");this.data.index=t;this.data.image.rotate=0;if(this.data.withMask){this.data.showMask=!0;this.initImage1(a)}else this.initImage(a,0===e.showtime++)}},initImage1:function(t){var e=this,i=e.data.container,n=700,s=700,a=e.data.image;var r={width:o(n),height:o(s),left:o((window.innerWidth-n)/2),top:o((window.innerHeight-s)/2)};_(t,function(t,i){a.naturalWidth=t;a.naturalHeight=i;var n=.8*t;if(n>m)n=m;if(n<g)n=g;a.ratio=n/t;e.setConStyle(r);e.zoom(a.ratio);e.$update()})},isMovePic:function(){var t=this.data.image.el,e=this.data.container.el;if(t.clientHeight>e.clientHeight||t.clientWidth>e.clientWidth)return!0;else return!1},initImage:function(t,e){var n=this,s=n.data.container,a=n.data.image;_(t,function(t,_){a.naturalWidth=t;a.naturalHeight=_;var d=.8*t;if(d>m)d=m;if(d<g)d=g;a.ratio=d/t;var c=_*a.ratio;if(c>b)c=b;if(c<v)c=v;var l="";if(e)l={width:o(d),height:o(c),left:o((window.innerWidth-d)/2),top:o((window.innerHeight-c)/2)};else if(!n.isFull()){var f=r(i._$getStyle(s.el,"top")),u=r(i._$getStyle(s.el,"left")),h=r(i._$getStyle(s.el,"width")),p=r(i._$getStyle(s.el,"height"));l={width:o(d),height:o(c),left:o(u+(h-d)/2),top:o(f+(p-c)/2)}}n.setConStyle(l);n.zoom(a.ratio);n.$update()})},close:function(){var t=this.$refs.container;i._$addClassName(t,"fn-dn");this.data.container.showtime=0;if(this.isFull())this.exitfull()},setConStyle:function(t){i._$style(this.data.container.el,t)},setImgStyle:function(t){i._$style(this.data.image.el,t)},onClick:function(t){var e=s._$getElement(t,"d:action");if(e&&!i._$hasClassName(e,"disabled")){var a=i._$dataset(e,"action");switch(a){case"full":this.isFull()?this.exitfull():this.fullscreen();break;case"bigger":this.zoom(this.data.image.ratio+.1);break;case"smaller":this.zoom(this.data.image.ratio-.1);break;case"one2one":this.zoom(1);break;case"rotate":this.rotate();break;case"close":this.close();break;case"prev":this.show(this.data.index-1);break;case"next":this.show(this.data.index+1);break;case"download":var o=this.data.pics[this.data.index],r=o.src,_=o.name||+new Date;if(r.indexOf("?")>-1){var d=r.split("?");var c=n._$query2object(d[1]);if(!c["download"])r=d[0]+"?download="+_}else r+="?download="+_;i._$createXFrame({visible:!1,src:r})}}},rotate:function(){var t=this.data.image.rotate+=90,e="rotate("+t+"deg)";this.setImgStyle({"-webkit-ransform":e,"-ms-transform":e,transform:e})},zoom:function(t){var e=this.data.image,n=this.$refs.bigger,s=this.$refs.smaller,a=this.data.container.el;if(t>5){t=5;i._$addClassName(n,"disabled")}else if(t<.1){t=.1;i._$addClassName(s,"disabled")}else{i._$delClassName(n,"disabled");i._$delClassName(s,"disabled")}e.ratio=t;var r=e.naturalWidth*t,_=e.naturalHeight*t;e.marginL=(a.clientWidth-r)/2;e.marginT=(a.clientHeight-_)/2;this.setImgStyle({"margin-left":o(e.marginL),"margin-top":o(e.marginT),width:o(r),height:o(_)});var d=this.$refs.tooltip,c=this.$refs.one2one,l=Math.round(100*e.ratio);100===l?i._$addClassName(c,"disabled"):i._$delClassName(c,"disabled");d.innerText=l+"%";clearTimeout(this.tiptimer);this.tiptimer=setTimeout(function(){i._$replaceClassName(d,"show","hide")},1e3)},fullscreen:function(){var t=this.data.container.el,e=t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen;if(e)e.call(t)},exitfull:function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.msExitFullscreen)document.msExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen()},onMouseDown:function(t){var e=this.data.container,n=this.data.image,a=e.el,o=s._$getElement(t,"d:movetarget");if(o&&(this.isFull()||this.isMovePic())){e.action="move";i._$replaceClassName(n.el,"transition","move");n.target=o;n.startX=t.pageX;n.startY=t.pageY;n.marginL=r(i._$getStyle(n.el,"margin-left"));n.marginT=r(i._$getStyle(n.el,"margin-top"))}else if(!this.isFull()){e.action="move";n.target=null;e.rect=e.el.getBoundingClientRect();e.startX=t.pageX;e.startY=t.pageY}else s._$stopDefault(t)},onMouseUp:function(t){var e=this.data.container;if("move"===e.action){e.action=!1;i._$replaceClassName(this.data.image.el,"move","transition")}},onMouseMove:function(t){var e=this.data.container,i=this.data.image;if("move"===e.action){s._$stopDefault(t);if(i.target&&(this.isFull()||this.isMovePic()))this.setImgStyle({"margin-left":o(t.pageX-i.startX+i.marginL),"margin-top":o(t.pageY-i.startY+i.marginT)});else if(!this.isFull())this.setConStyle({left:o(t.pageX-e.startX+e.rect.left),top:o(t.pageY-e.startY+e.rect.top)})}},onWheel:function(t){var e=this;var i=1;s._$stopDefault(t);if(!e.wheeling){e.wheeling=!0;setTimeout(function(){e.wheeling=!1},50);if(t.deltaY)i=t.deltaY>0?-1:1;else if(t.wheelDelta)i=t.wheelDelta/120;else if(t.detail)i=t.detail>0?-1:1;e.zoom(this.data.image.ratio+(i>0?.1:-.1))}}})},"fe686268a0af212baea04fc64f0059e8","3e346f2b6313e57a75f5ee9b603c4b65","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","6c3bb246e3ba575f8d5d26b53ece14f0");I$("322f8676c33d71dd47dd15c9a8202626",'<textarea name="ntp" id="#<lbBody>">\n        <div class="m-pic-viewer">\n            <div class="m-pic-viewer-box j-flag"></div>\n            <div class="m-pic-viewer-orgin f-dn j-flag">查看原图<span class="j-flag">(226k)</span></div>\n            <div class="m-pic-viewer-orgin f-dn j-flag">1%</div>\n        </div>\n</textarea>');I$("24da1ed067355a54853a850dbe7184be",function(t,e,i,n,s,a,o,r,_){function d(t,e){var i;if(t.naturalWidth)return e(t.naturalWidth,t.naturalHeight);i=document.createElement("img");i.onload=function(){e(this.width,this.height)};i.src=t.src}function c(t){t=Number(t);var e=1048576;if(t<1024)return t+"B";else if(t<e)return Math.floor(t/1024)+"KB";var i=Math.floor(t/e),n=/0\.(\d)/.exec((t-i*e)/e)[1];return i+"."+n+"M"}var l={NONE:0,FIRST:1,SECOND:2,THREE:3,FOUR:4,FIVE:5,SIX:6,SEVEN:7};var f={NONE:0,ONE:1,TWO:2};r._$$PicViewer=t._$klass();_=r._$$PicViewer._$extend(s._$$Abstract);_.__init=function(){this.__super();this.__winw=window.innerWidth||document.body.clientWidth;this.__winh=window.innerHeight||document.body.clientHeight;this.__marginRight=15;this.__imgChangeMove=this.__winw+this.__marginRight;this.__imgChangeNeedMove=Math.floor(.5*this.__winw);this.__maxScale=4;this.__maxOverScale=6;this.__openTime=.3;this.__slipTime=.5};_.__reset=function(t){this.__super(t);this.__doInitDomEvent([[this.__$container,"click",this.__doClosePreview._$bind(this)],[this.__$originBtn,"click",this.__doShowOrigin._$bind(this)],[this.__$container,"touchstart",this.__doTouchStart._$bind(this)],[this.__$container,"touchmove",this.__doTouchMove._$bind(this)],[this.__$container,"touchend",this.__doTouchEnd._$bind(this)],[this.__$container,"touchcancel",this.__doTouchEnd._$bind(this)]])};_.__doFullScreen=function(){var t=this.__$container.requestFullscreen||this.__$container.msRequestFullscreen||this.__$container.mozRequestFullScreen||this.__$container.webkitRequestFullScreen;if(t)t.call(this.__$container)};_.__initImgs=function(){n._$forEach(this.__list,function(t,e){var i=document.createElement("div");
i.className="m-pic-viewer-item";i.style["marginRight"]=this.__marginRight+"px";i.style["lineHeight"]=this.__winh+"px";var n=new Image;n.className="m-pic-viewer-img";this.__imgStatus[e]={elem:n,isLoad:!1,x:0,x_m:0,y:0,y_m:0,scale:1,scale_m:1};if(e==this.__index){if(t.hasOrigin){n.src=t.origin;this.__showOriginBtn(0)}else{n.src=t.src;d(n,function(e,i){if(e<t.width)this.__showOriginBtn(t.size,t.type);else this.__showOriginBtn(0)}._$bind(this))}n.onload=function(){i.className+=" m-pic-viewer-unloading";this.__imgStatus[e].isLoad=!0}._$bind(this)}i.appendChild(n);this.__$box.appendChild(i)}._$bind(this))};_.__addCSSPerfix=function(t,e,i){n._$forEach(["","-o-","-moz-","-ms-","-webkit-"],function(n){e=n+e;t.style[e]=i})};_.__translateBox=function(t){var e=this.__boxStatus.x+this.__boxStatus.x_m;var i=this.__boxStatus.y+this.__boxStatus.y_m;var n="translate3d("+e+"px,"+(i||0)+"px,0px)";var s="transform "+(t||0)+"s ease-out";this.__addCSSPerfix(this.__$box,"transition",s);this.__addCSSPerfix(this.__$box,"transform",n)};_.__translateContainer=function(t){var e="translate3d("+(t?0:this.__winw)+"px,0px,0px)";var i="transform "+this.__openTime+"s ease-out";this.__addCSSPerfix(this.__$container,"transition",i);this.__addCSSPerfix(this.__$container,"transform",e)};_.__translateImg=function(t,e){var t=void 0==t?this.index:t;var i=this.__imgStatus[t];var n=i.elem;var s=i.scale*i.scale_m;var a=i.x+i.x_m;var o=i.y+i.y_m;var r="scale3d("+s+","+s+",1)  translate3d("+a+"px,"+o+"px,0px)";var _="transform "+e+"s ease-out";this.__addCSSPerfix(n,"transition",_);this.__addCSSPerfix(n,"transform",r)};_.__doTouchStart=function(t){var i=e._$getElement(t,"c:m-pic-viewer-img");if(i){this.__movingFlag=!0;this.__xStatus=l.NONE;this.__yStatus=f.NONE;this.__ts=this.__getTouches(t)}};_.__doTouchMove=function(t){var i=e._$getElement(t,"c:m-pic-viewer-img");if(i&&this.__movingFlag){this.__tm=this.__getTouches(t);this.__moveAction(this.__ts,this.__tm)}};_.__doTouchEnd=function(t){var i=e._$getElement(t,"c:m-pic-viewer-img");if(i){this.__movingFlag=!1;this.__te=this.__getTouches(t);this.__endAction(this.__ts,this.__te)}};_.__getTouches=function(t){var e=t||window.event;var i=e.touches.length?e.touches:e.changedTouches;var n={touches:i,x0:i[0].pageX,y0:i[0].pageY,time:Date.now()};if(i.length>=2){n.x1=i[1].pageX;n.y1=i[1].pageY}return n};_.__moveAction=function(t,e){var i=this.__getImgStatus(),n=.3*this.__winw/i.scale,s=e.x0-t.x0,a=e.y0-t.y0;if(Math.abs(a)>0)event.preventDefault();var o=i.x+s;var r=i.y+a;var _=this.__getAllow(this.__index);this.__allowX=_.x;this.__allowY=_.y0;if(s<=0)this.__allowX=-_.x;if(a<=0)this.__allowY=_.y1;if(1==e.touches.length)if(i.scale>1){if(r>=_.y0){this.__yStatus=f.ONE;var d=r-_.y0;i.y_m=_.y0-i.y+this.__getSlowlyNum(d,n)}else if(r<=_.y1){this.__yStatus=f.ONE;var d=r-_.y1;i.y_m=_.y1-i.y+this.__getSlowlyNum(d,n)}else{this.__yStatus=f.TWO;i.y_m=a}if(s<0&&i.x<=-_.x){this.__xStatus=l.FIRST;this.__boxStatus.x_m=s;if(this.__index==this.__list.length-1)this.__boxStatus.x_m=this.__getSlowlyNum(s);this.__translateBox();this.__translateImg(this.__index,0)}else if(s>0&&i.x>=_.x){this.__xStatus=l.SECOND;this.__boxStatus.x_m=s;if(0==this.__index)this.__boxStatus.x_m=this.__getSlowlyNum(s);this.__translateBox();this.__translateImg(this.__index,0)}else{if(0==s)return;this.__xStatus=l.THREE;i.x_m=s;if(o>=_.x){this.__xStatus=l.FOUR;var c=o-_.x;i.x_m=_.x-i.x+this.__getSlowlyNum(c,n)}if(o<=-_.x){this.__xStatus=l.FOUR;var c=o+_.x;i.x_m=-_.x-i.x+this.__getSlowlyNum(c,n)}this.__translateImg(this.__index,0)}}else if(Math.abs(a)>5&&this.__xStatus!==l.FIVE){var u=i.elem;var h=u.height-this.__winh;if(a>0&&r>0){this.__xStatus=l.SEVEN;this.__allowY=0;i.y_m=-i.y+this.__getSlowlyNum(r,n)}else if(a<0&&r<-h){this.__xStatus=l.SEVEN;if(u.height>this.__winh){var d=r+h;this.__allowY=-h;i.y_m=-h-i.y+this.__getSlowlyNum(d,n)}else{this.__allowY=0;i.y_m=-i.y+this.__getSlowlyNum(r,n)}}else{this.__xStatus=l.SIX;i.y_m=a}this.__translateImg(this.__index,0)}else{this.__xStatus=l.FIVE;if(0==this.__index&&s>0||this.__index==this.__list.length-1&&s<0)this.__boxStatus.x_m=this.__getSlowlyNum(s);else this.__boxStatus.x_m=s;this.__translateBox()}else{var p=this.__getScale(t,e);var m=p*i.scale;if(m>=this.__maxScale){var g=m-this.__maxScale;m=this.__maxScale+this.__getSlowlyNum(g,this.__maxOverScale);p=m/i.scale}i.scale_m=p;this.__translateImg(this.__index,0)}};_.__endAction=function(t,e){var i=this.__getImgStatus();var n=e.x0-t.x0;var s=e.time-t.time;var a=0;if(1==t.touches.length){if(Math.abs(n)>10)event.preventDefault();switch(this.__yStatus){case f.ONE:i.y=this.__allowY;i.y_m=0;a=this.__slipTime;break;case f.TWO:i.y=i.y+i.y_m;i.y_m=0}switch(this.__xStatus){case l.FIRST:if(this.__index!=this.__list.length-1&&(n<=-this.__imgChangeNeedMove||s<200&&n<-30))this._$go(1);else{this._$go(0);if(0!=a)this.__translateImg(this.__index,a)}break;case l.SECOND:if(0!=this.__index&&(n>=this.__imgChangeNeedMove||s<200&&n>30))this._$go(-1);else{this._$go(0);if(0!=a)this.__translateImg(this.__index,a)}break;case l.THREE:i.x=i.x+i.x_m;i.x_m=0;this.__translateImg(this.__index,a);break;case l.FOUR:i.x=this.__allowX;i.x_m=0;a=this.__slipTime;this.__translateImg(this.__index,a);break;case l.FIVE:if(n>=this.__imgChangeNeedMove||s<200&&n>30)this._$go(-1);else if(n<=-this.__imgChangeNeedMove||s<200&&n<-30)this._$go(1);else this._$go(0);break;case l.SIX:i.y=i.y+i.y_m;i.y_m=0;break;case l.SEVEN:i.y=this.__allowY;i.y_m=0;this.__translateImg(this.__index,this.__slipTime)}}else{event.preventDefault();var o=i.scale*i.scale_m;var r=i.elem;i.scale=o;i.scale_m=1;var _=this.__getAllow();if(i.x>_.x){a=this.__slipTime;i.x=_.x}else if(i.x<-_.x){a=this.__slipTime;i.x=-_.x}if(i.y>_.y0){a=this.__slipTime;i.y=_.y0}else if(i.y<_.y1){a=this.__slipTime;i.y=_.y1}if(r.height*i.scale<=this.__winh)i.y=0;if(r.width*i.scale<=this.__winw)i.x=0;if(o>this.__maxScale){i.scale=this.__maxScale;a=this.__slipTime}else if(o<1){this.__initImgStatus();a=this.__slipTime}if(0!=a){this._$go(0);this.__translateImg(this.__index,this.__slipTime)}}};_.__getSlowlyNum=function(t,e){var e=e||.5*this.__winw;if(t<0){t=-t;return-(1-t/(e+t))*t}else return(1-t/(e+t))*t};_.__getScale=function(t,e){var i=Math.sqrt(Math.pow(t.x1-t.x0,2)+Math.pow(t.y1-t.y0,2));var n=Math.sqrt(Math.pow(e.x1-e.x0,2)+Math.pow(e.y1-e.y0,2));var s=n/i;return s};_.__getAllow=function(t){var e=this.__getImgStatus(t);var i=e.elem;var n=Math.floor(i.width*e.scale-this.__winw)/(2*e.scale);var s,a;if(i.height*e.scale<=this.__winh){s=0;a=0}else if(i.height<=this.__winh){s=Math.floor((i.height*e.scale-this.__winh)/(2*e.scale));a=-s}else{s=Math.floor(i.height*(e.scale-1)/(2*e.scale));a=-Math.floor((i.height*(e.scale+1)-2*this.__winh)/(2*e.scale))}return{x:n,y0:s,y1:a}};_.__initImgStatus=function(t){var t=void 0==t?this.__index:t;var e=this.__imgStatus[t];e.x=0;e.y=0;e.x_m=0;e.y_m=0;e.scale=1;e.scale_m=1;if(t!==this.__index)this.__translateImg(t,this.__slipTime)};_.__getImgStatus=function(t){var t=void 0==t?this.__index:t;return this.__imgStatus[t]};_.__doClosePreview=function(t){var i=e._$getElement(t,"c:m-pic-viewer-img");if(i){this._$close();this._$dispatchEvent("onexit")}};_.__destroy=function(){this.__super()};_.__initXGui=function(){var t=a._$parseUITemplate(o);return function(){this.__seed_html=t.lbBody}}();_.__initNode=function(){this.__super();var t=i._$getByClassName(this.__body,"j-flag");this.__$container=this.__body;this.__$box=t[0];this.__$originBtn=t[1];this.__$originSize=t[2];this.__$originStatus=t[3]};_.__doShowOrigin=function(){var t=this.__getImgStatus();var e=1;this.__showOriginBtn(0);this.__$originStatus.innerText="1%";i._$delClassName(this.__$originStatus,"f-dn");var n=setInterval(function(){this.__$originStatus.innerText=10*Math.min(e++,10)+"%"}._$bind(this),200);t.elem.src=this.__list[this.__index].origin;t.elem.onload=function(){clearInterval(n);this.__$originStatus.innerText="已完成";this.__list[this.__index].hasOrigin=1;setTimeout(function(){i._$addClassName(this.__$originStatus,"f-dn")}._$bind(this),1e3)}._$bind(this)};_.__showOriginBtn=function(t,e){if(!t||"webp"==e)i._$addClassName(this.__$originBtn,"f-dn");else{i._$delClassName(this.__$originBtn,"f-dn");this.__$originSize.innerText="("+c(t)+")"}};_._$start=function(t){var e={};if(this.__list)n._$forEach(this.__list,function(t){e[t.origin]=t});this.__list=(t.list||[]).map(function(t){if(t.size)if(t.width>t.height){t.src=t.origin+"?imageView&thumbnail=1500x850";if("webp"==t.type)t.src=t.origin+"?type=png&imageView&thumbnail=1500x850"}else{t.src=t.origin+"?imageView&thumbnail="+this.__winw+"x"+this.__winh;if("webp"==t.type)t.src=t.origin+"?type=png&imageView&thumbnail="+this.__winw+"x"+this.__winh}else t.src=t.origin;if(e[t.origin])return e[t.origin];else return t}._$bind(this));this.__index=parseInt(t.index)||0;this.__boxStatus={x:-this.__imgChangeMove*this.__index,y:0,x_m:0,y_m:0};this.__imgStatus={};this.__$box.innerHTML="";this.__initImgs();this.__translateBox();this._$open()};_._$open=function(){this.__translateContainer(1)};_._$close=function(){this.__translateContainer(0)};_._$go=function(t){var e=this.__index;this.__index=Math.max(0,Math.min(e+(t||0),this.__list.length-1));var i=this.__list[this.__index];var n=this.__getImgStatus();if(!n.isLoad){if(i.hasOrigin){n.elem.src=i.origin;this.__showOriginBtn(0)}else{n.elem.src=i.src;d(n.elem,function(t,e){if(t<i.width)this.__showOriginBtn(i.size,i.type);else this.__showOriginBtn(0)}._$bind(this))}n.elem.onload=function(){n.elem.parentNode.className+="  m-pic-viewer-unloading";n.isLoad=!0}}else d(n.elem,function(t,e){if(t<i.width)this.__showOriginBtn(i.size,i.type);else this.__showOriginBtn(0)}._$bind(this));this.__boxStatus.x=-this.__imgChangeMove*this.__index;this.__boxStatus.x_m=0;if(e!==this.__index)this.__initImgStatus(e);this.__translateBox(this.__slipTime)};r._$delegate=function(t){var s=i._$get(t),a=s.scrollTop,o=r._$$PicViewer._$allocate({parent:document.body,onexit:function(){window.setTimeout(function(){s.scrollTop=a},100)}});e._$addEvent(t,"click",function(t){
var a=e._$getElement(t,"d:group"),r=i._$dataset(a,"group")||"";if(a&&"IMG"==a.tagName){var _=s.getElementsByTagName("IMG"),d=[],c=0;n._$forEach(_,function(t){if(!r||r==i._$dataset(t,"group")){d.push({origin:i._$dataset(t,"origin")||i._$dataset(t,"url"),size:parseInt(i._$dataset(t,"size")||0),height:parseInt(i._$dataset(t,"height")||t.naturalHeight||0),width:parseInt(i._$dataset(t,"width")||t.naturalWidth||0),type:i._$dataset(t,"type")});if(t===a)c=d.length-1}});o._$start({list:d,index:c})}})}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","322f8676c33d71dd47dd15c9a8202626");I$("b682f5da7aeb01d2a3c0a08378d59e0e",'<div class="m-attach m-attach-workflow">\n\t<upload-btn on-upload={this.addUpload($event)} ref="upload" dataLog = {dataLog} disabled={queue.length == 5} ext={list} class={@(class)} dragger={dragger} target={target}>上传附件</upload-btn>\n\n\t<ul ref="queue" class="list">\n\t\t\t\n\t</ul>\n</div>');I$("e07b2624d556eef5ead352b5806fa63b",function(t,e,i,n,s,a,o,r,_,d){var c=i.Component;var l=99;d=c.extend({name:"upload",template:_,config:function(e){this.supr();t._$extend(e,{queue:[],list:[]},!0)},addUpload:function(t){var i=0;if(!(this.data.queue.length>=5)){e._$forEach(this.data.queue,function(t){i+=t.data.file.size},this);if(!(i>=52428800)){var s=new n({data:{file:t}});s.$inject(this.$refs["queue"]);s.$on("success",this.pushQueue.bind(this));s.$on("delete",this.deleteQueue.bind(this,s));s.$on("previewPicItem",this.previewPicItem.bind(this));this.data.queue.push(s)}else this.$refs["upload"].$emit("error",{message:"最多只能上传50M文件"})}else this.$refs["upload"].$emit("error",{message:"最多只能上传5个附件"})},pushQueue:function(t){this.data.list.push(t);this.$emit("changelist");if(window.setting.isMobile)this.initPicViewerH5();else this.initPicViewer()},getImageType:function(){var t=this.data.list;var i=[];e._$forEach(t,function(t){if(r.imageType.indexOf(t.name.substr(t.name.lastIndexOf(".")+1))!=-1)i.push({src:t.url,name:t.name})},this);return i},initPicViewer:function(){this.pics=this.getImageType();this.__picViewer&&this.__picViewer.destroy();this.__picViewer=new a({data:{pics:this.pics}})},initPicViewerH5:function(){this.__picViewer=o._$$PicViewer._$allocate({parent:document.body})},deleteQueue:function(t){var e;if((e=this.data.queue.indexOf(t))!=-1)this.data.queue.splice(e,1);t.destroy();var i=this.copy(this.data.list);i.forEach(function(t){this.data.list.splice(0,1)}.bind(this));this.data.queue.forEach(function(t){if(t.data.uploadItem)this.data.list.push(t.data.uploadItem)}.bind(this));this.data.queueLength=this.data.list.length;this.$refs["upload"].$emit("error",{message:""});this.$emit("changelist")},previewPicItem:function(t){var e=this.pics;var i=e.map(function(t){return t.src}).indexOf(t);if(window.setting.isMobile)this.__picViewer._$start({list:this.getImageType(),index:i});else this.__picViewer.show(i)}});return d},"3e346f2b6313e57a75f5ee9b603c4b65","fbbf6ddc0634989027d138f4ffd4b78b","fe686268a0af212baea04fc64f0059e8","ed23d9b57d57350a177e97aa2465575a","e48d9988db605b39057702ce3ebf9643","c2988d8e156e484a190351b466078479","24da1ed067355a54853a850dbe7184be","45c14227dc6e965278f7b96ec506bfaf","b682f5da7aeb01d2a3c0a08378d59e0e");I$("30bfde564db7b13b76a84957e62056e0",'<upload list={value} ref="upload" id={id} name={name} on-changelist={this.changelist($event)}></upload>');I$("27b35f8f5684208fec1d08cf9fca4473",function(t,e,i,n,s,a){return i.Component.extend({name:"wgt-custom-upload",template:a,config:function(t){e._$extend(t,{required:0,value:[]})},isValidate:function(){var t=!0;if(this.data.required)if(this.data.value.length)t=!0;else t=!1;return t},validate:function(){return!0},changelist:function(t){this.$emit("changelist");this.$update()}})},"be567474249a271e4786c144ccf5f75a","3e346f2b6313e57a75f5ee9b603c4b65","fe686268a0af212baea04fc64f0059e8","35df4ef4567b6cd0275a1b849d2bea8c","e07b2624d556eef5ead352b5806fa63b","30bfde564db7b13b76a84957e62056e0");I$("28c43c782516f6c2a3aabdf27aecfffa",'<div class="m-custom-fields">\n    {#list fields as field}\n    <div class="u-field-itm" r-class={{\'u-field-itm-time\' : field.type == 3}}>\n        <label class="u-field-title" title="{field.name|escape}">{field.name|escape}\n        </label>\n        {#if field.required}\n            <span class="u-necessary">*</span>\n        {/if}\n        <div class="u-field-cnt" r-class={{\'u-field-cnt-time\' : field.status != 1 && !disabled}}>\n            {#if field.type==0}\n                {#if field.description==0}\n                    {#if field.status==0 || disabled}\n                        <span class="u-field-val">{field.value}</span> \n                    {#else}\n                        <wgt-custom-input placeholder={\'请输入\'+field.name} value={field.value||\'\'} isNumber={false} required={!!field.required} max={field.maxlength||100} rules={field.rules} on-eBlur={this.iptBlur($event,field)} on-eKeyup={this.iptKeyup($event,field)} id={field.id} name={field.name}></wgt-custom-input>\n                    {/if}                \n                {#elseif field.description==1}\n                    {#if field.status==0 || disabled}\n                        <span class="u-field-val">{field.value}</span> \n                    {#else}\n                        <wgt-custom-input placeholder={\'请输入\'+field.name} value={field.value||\'\'} isNumber={true} required={!!field.required} max={field.maxlength||100} rules={field.rules} on-eBlur={this.iptBlur($event,field)} on-eKeyup={this.iptKeyup($event,field)} id={field.id} name={field.name}></wgt-custom-input>\n                    {/if}                \n                {#elseif field.description==2}\n                    {#if field.status==0 || disabled}\n                        <div class="ipts">\n                            <textarea placeholder={\'请输入\'+field.name} class="u-textarea" r-model={field.value} disabled></textarea>\n                        </div>\n                    {#else}\n                        <wgt-custom-textarea placeholder={\'请输入\'+field.name} value={field.value||\'\'} required={!!field.required} max={field.maxlength||500} on-eBlur={this.iptBlur($event,field)} on-eKeyup={this.iptKeyup($event,field)} id={field.id} name={field.name}></wgt-custom-textarea>\n                    {/if}                \n                {/if} \n            {#elseif field.type==1}\n                {#if field.status==0 || disabled}\n                    <span class="u-field-val">{field.value}</span> \n                {#else}\n                    <wgt-custom-select list={field.description} textkey="text" needefault={true} value={field.value||\'\'} required={!!field.required} on-select={this.changeSelect($event[\'text\'],field)} id={field.id} name={field.name}></wgt-custom-select>\n                {/if}                 \n            {#elseif field.type==2}\n                {#if field.status==0 || disabled}\n                    <span class="u-field-val">{field.value}</span> \n                {#else}\n                    <wgt-custom-mulselect key="text" list={field.description} value={field.value||\'\'} required={!!field.required} on-ok={this.changeSelect($event,field)} id={field.id} name={field.name}></wgt-custom-mulselect>\n                {/if}\n\n\t        {#elseif field.type==3}\n\t            {#if field.status==0 || disabled }\n\t                <span class="u-field-val">{field.value|time}</span>\n\t            {#else}\n\t                <wgt-custom-singletimer value={field.value||\'\'} required={!!field.required} on-change={this.changeTimer($event,field)} id={field.id} name={field.name} maxDate={15079968000000}></wgt-custom-singletimer>\n\t            {/if}\n            {#elseif field.type==-1}\n                <dateTimePicker type="current" startTime={field.startTime} endTime={field.endTime} on-change={this.changeTimer($event,field)}></dateTimePicker>\n            {#elseif field.type==-4}\n                <wgt-custom-upload ref="upload" required={!!field.required} id={field.id} name={field.name}></wgt-custom-upload> \n            {/if}\n        </div>  \n    </div>\n    {/list}\n</div>\n');I$("1c79086ad3c6a7b4f313fece3fdbae02",function(t,e,i,n,s,a,o,r,_,d,c){return t.Component.extend({name:"customFields",template:c,config:function(t){e._$extend(t,{fields:[]});this.supr(t)},init:function(){this.supr()},destroy:function(){this.supr()},$getFieldsValue:function(){var t=[];for(var e=0;e<this._children.length;e++){var i=this._children[e],n=i.data.value,s=i.validate(),a=i.data.id;name=i.data.name;if(s)t.push({id:a,value:n,name:name})}return t},$isValidate:function(){return this._children.every(function(t){return t.isValidate()})},iptBlur:function(t,e){this.$emit("iptBlur",{id:e.id,value:t})},iptKeyup:function(t,e){this.$emit("iptKeyup",{id:e.id,value:t})},changeSelect:function(t,e){this.$emit("change",{id:e.id,value:t})},changeTimer:function(t,e){var i=t.startTime+";"+t.endTime;if(e.type==-1)this.$emit("change",{id:e.id,value:i});else this.$emit("change",{id:e.id,value:t.time})}}).filter({time:function(t){return s._$format(Number(t),"yyyy-MM-dd HH:mm")}})},"fe686268a0af212baea04fc64f0059e8","3e346f2b6313e57a75f5ee9b603c4b65","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","dd2bdbfcb0339beceb55cbbb1fb2e683","530708c24d4bd4c96e9de5414fb40fa3","9af6960f7c31313a98922779f0a71fa4","ba4d7793353a96855ce2bb237878b936","27b35f8f5684208fec1d08cf9fca4473","28c43c782516f6c2a3aabdf27aecfffa");I$("bed3f105c952ee0547d6351e4de8465f",'<div class="m-leave" r-class={{\'hasLogo\': !!hasLogo}} r-hide={!isShow}>\n\t<div class="leave-bd">\n\t\t{#if !finish}\n\t\t\t<div class="leave-message">\n\t\t\t\t<p class="message">{finish ? \'留言发送成功\' : message}</p>\n\t\t\t</div>\n\t\t\t{#if fields && fields.length}\n\t\t\t<div class="leave-form">\n\t\t\t\t<customFields ref="cfield" fields={fields} disabled={finish}></customFields>\n\t\t\t\t<p r-hide={!tip} class="tip">{tip}</p>\n\t\t\t\t<div class="btns" r-hide={finish}>\n\t\t\t\t\t<button-save ref="saveButton" text="发送" status={this.getBtnStatus()} saveOnce={true} on-click={this.submit($event)}></button-save>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{/if}\n\t\t{#else}\n\t\t\t<div class="leave-finish-tip">\n\t\t\t\t<img src="https://qiyukf.nosdn.127.net/sdk/res/img/leave-close@2x_2e1a9be2a660a6c32c926bca0bcf9376.png" width="15%" alt="留言发送成功">\n\t\t\t\t<div class="title">\n\t\t\t\t\t留言成功\n\t\t\t\t</div>\n\t\t\t\t<a href="javascript:void(0);" class="u-leave-close-btn" on-click={this.close()}>关闭</a>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\t<div class="leave-ft" r-hide={!hasLogo}>\n\t\t<img class="taillogo" src="https://qiyukf.nosdn.127.net/sdk/res/img/tailLogo@2x_51a85b19099da606135ca68d814c5d6e.png" alt="网易七鱼提供服务支持">\n\t</div>\n</div>');
I$("e828814c7955976ce757e55686cc082c",function(t,e,i,n,s,a,o,r,_){var d={"-3":"email","-2":"mobile","-1":"message"};var c="/webapi/user/getLeaveCustomfield";return t.Component.extend({name:"leave",template:_,config:function(t){e._$extend(t,{hasMobile:!1,hasEmail:!1,message:"当前客服不在线，如需帮助请留言",saveStatus:"",tip:"",isShow:!0,hasLogo:!0,finish:!1});if(!this.data.fields)this.getFields();else this.addDefFields();this.supr(t)},init:function(){this.supr();this.$on("show",this.show._$bind(this));this.$on("sendDone",this.onSendDone._$bind(this))},destroy:function(){this.supr()},getFields:function(){var t=this.data;var e={appKey:t.appkey};if(t.bid)s._$merge(e,{bid:t.bid});a._$doRequest(c,{method:"get",data:e,onload:this.onFieldsLoad._$bind(this),onerror:this.onFieldsLoadErr._$bind(this)})},onFieldsLoad:function(t){s._$forEach(t,function(t){t.id=t.fieldId;if(t.description)t.description=JSON.parse(t.description)});this.data.fields=t;this.addDefFields();this.$update()},onFieldsLoadErr:function(t){this.onFieldsLoad([]);console.error("load error")},addDefFields:function(){var t=this.data;var e;t.fields.push({id:-1,name:"留言",type:0,description:2,required:1,maxlength:4e3});s._$forEach(t.fields,function(i){if(i.id==-3)s._$merge(i,{id:-3,name:"邮箱",type:0,description:0,maxlength:61,rules:[{regExp:/^\w+[-.\w]*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,errorMsg:"请填写正确的邮箱地址"},{regExp:/^[^@]{1,30}@[^@]{1,30}$/,errorMsg:"请填写正确的邮箱地址"}]});if(i.id==-2)s._$merge(i,{id:-2,name:"手机",type:0,description:1,maxlength:11,rules:[{regExp:/^\d{11}$/,errorMsg:"手机号不足11位"}]});if(i.id==-4){s._$merge(i,{description:0,name:"附件",type:-4});e=t.fields.splice(t.fields.length-2,1)[0]}},this);t.fields.push(e)},submit:function(t){if("pending"!=this.data.saveStatus&&"success"!=this.data.saveStatus){var e=this.$refs["cfield"];if(e.$isValidate()){this.data.saveStatus="pending";var i=e.$getFieldsValue();var n={};var a=this.customFields=[];s._$forEach(i,function(t,e){this.data.fields[e].value=t.value;if(d[t.id])n[d[t.id]]=t.value;a.push({fieldId:t.id,fieldValue:t.value,fieldName:t.name})}._$bind(this));if(a.length)n.customFields=a;this.$emit("submit",n)}}},onSendDone:function(t){if(t.error){this.data.saveStatus="";if(t.error.trashWords)this.data.tip="消息包含违禁信息，发送失败";else this.data.tip="发送失败"}else{this.data.saveStatus="success";this.data.tip="";this.data.finish=!0}this.$update()},show:function(t){this.data.isShow=t;this.$update()},close:function(){this.$emit("close",this.customFields)},getBtnStatus:function(){var t=this.data;if(""==t.saveStatus)if(this.$refs["cfield"].$isValidate())ret="";else ret="disabled";else ret=t.saveStatus;return ret}})},"fe686268a0af212baea04fc64f0059e8","3e346f2b6313e57a75f5ee9b603c4b65","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","5140ae09a025d19918a0cbf9017878db","4150c26d2f7568fcd1585ac499999f5b","1c79086ad3c6a7b4f313fece3fdbae02","bed3f105c952ee0547d6351e4de8465f");I$("9081a6b39d53cecb96287dfc196657f7",'<div class="m-leaveoff">\n\t<p class="message">{tip}</p>\n    <img class="noleavelogo" src="https://qiyukf.nosdn.127.net/sdk/res/img/nokefunoleave@2x_881d5ed7242589940fdc299968d7e070.png" alt="当前客服不在线，请在工作时间内联系">\n</div>');I$("c5fe1645073625e9b2d8dfbc7ccdc4cb",function(t,e,i,n,s,a){return t.Component.extend({name:"leave-off",template:a,config:function(t){e._$extend(t,{tip:"当前客服不在线，请在工作时间内联系"});this.supr(t)},init:function(){this.supr()},destroy:function(){this.supr()}})},"fe686268a0af212baea04fc64f0059e8","3e346f2b6313e57a75f5ee9b603c4b65","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","9081a6b39d53cecb96287dfc196657f7");I$("a77da8ab8e64d64f5cd96a3f08ecb022",'<textarea name="ntp" id="#<orderBody>">\n\t<div class="m-modal m-modal-thirdorder">\n\t    <div class="modal_dialog">\n\t        <div class="modal_hd1">\n\t            <p class="modal_title">请选择你想咨询的订单</p>\n\t            <div class="modal_close">&times;</div>\n\t        </div>\n\t        <div class="modal_bd">\n\t\t\t\t<div class="m-thirdorder">\n\t\t\t\t\t<ul class="order-list"></ul>\n          <div class="load-status"></div>\n\t\t\t\t</div>\n\t        </div>\n\t    </div>\n\t</div>\n</textarea>\n\n<textarea name="jst" id="#<orderList>">\n\t{list beg..end as y} \n\t\t{var item=xlist[y]}\n      <li class="item">\n        <div class="shop">\n          <i class="icon u-icon-shop"></i>\n          <span class="name" title="${item.s_name}">${item.s_name}</span>\n          <span class="status" title="${item.s_status}">${item.s_status}</span>\n        </div>\n        <ul class="inner-list">\n          {list item.goods as good}\n          <li class="inner-item" data-action="select" data-orderindex="${item_index}" data-goodindex="${good_index}" data-params="${good.params}"  data-target="${good.target}" data-status="${good.p_status}" data-img="${good.p_img}" data-name="${good.p_name}" data-stock="${good.p_stock}" data-price="${good.p_price}" data-count="${good.p_count}">\n            <div class="bd">\n              <div class="left">\n                <img class="img" src="${good.p_img}">\n              </div>\n              <div class="mid">\n                <p class="name" title="${good.p_name}">${good.p_name}</p>\n                <p class="stock">${good.p_stock}</p>\n              </div>\n              <div class="right">\n                <p class="money">${good.p_price}</p>\n                <p class="count">${good.p_count}</p>\n                <p class="status">${good.p_status}</p>\n              </div>\n            </div>\n          </li>\n          {/list}\n        </ul>\n      </li>\n  {/list}\n</textarea>\n\n<textarea name="jst" id="#<orderListStatus>">\n  <div class="u-status">\n    {if status.type == \'loading\'}\n    <img src="https://qiyukf.nosdn.127.net/sdk/res/img/loading_03ce3dcc84af110e9da8699a841e5200.gif">\n    <span>${status.msg}</span>\n    {elseif status.type == \'error\' || status.type == \'empty\'}\n    <span>${status.msg}</span>\n    {/if}\n  </div>\n</textarea>');I$("efd85249b216cf363b67008e4abace17",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u){f._$$ThirdOrderList=t._$klass();u=f._$$ThirdOrderList._$extend(s._$$Abstract);u.__init=function(){this.__super()};u.__reset=function(t){this.__super(t);this.__listBox=e._$getByClassName(this.__body,"order-list")[0];this.__scrollBox=e._$getByClassName(this.__body,"m-thirdorder")[0];this.__nstatus=e._$getByClassName(this.__scrollBox,"load-status")[0];this.__data=r._$copy(t.data);this.__loadComplete=!1;this.__listConfig={listBox:this.__listBox,scrollBox:this.__scrollBox,tplSeed:this.__seed_list,scrollDelta:40,data:this.__data.content.template.list,ongetList:this.__getList._$bind(this)};var i=e._$getByClassName(this.__body,"modal_close")[0];this.__doInitDomEvent([[i,"click",this.__onClose._$bind(this)],[c._$$Cache,"onmorebotlist",this.__onListLoad._$bind(this)]]);r._$delegate(this,this.__listBox,{select:this.__onSelect._$bind(this)});this.__list=_._$$WFList._$allocate(this.__listConfig);this.__list._$next()};u.__destroy=function(){this.__list&&this.__list._$recycle();this.__list=null;this.__super()};u.__initXGui=function(){var t=a._$parseUITemplate(l);return function(){this.__seed_html=t.orderBody;this.__seed_list=t.orderList;this.__seed_status=t.orderListStatus}}();u.__initNode=function(){this.__super()};u.__renderStatus=function(t){o._$render(this.__nstatus,this.__seed_status,{status:t})};u.__getList=function(){if(!this.__loadComplete){this.__renderStatus({type:"loading",msg:"加载中"});d._$getMoreBotList(this.__data.content)}};u.__onListLoad=function(t){var e=t.content;if(e.template.id==(this.__data.template&&this.__data.template.id||this.__data.content&&this.__data.content.template&&this.__data.content.template.id))if(t.error)this.__renderStatus({type:"error",msg:"加载失败，"+t.error.message});else if(0==e.template.list.length){this.__loadComplete=!0;this.__renderStatus({type:"empty",msg:"已经到底了"})}else{this.__renderStatus({type:"success",msg:""});this.__data.content=e;this.__list._$dispatchEvent("listchange",{action:"append",data:e.template.list});setTimeout(function(){if(this.__listBox.clientHeight<=this.__scrollBox.clientHeight)this.__list._$next()}._$bind(this),500)}};u.__onClose=function(){this._$recycle()};u.__onSelect=function(t,e){if(t){this._$dispatchEvent("onselect",t,e);this.__onClose()}}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","35df4ef4567b6cd0275a1b849d2bea8c","078c11dc85b47d445b45cb988037563f","d67add781b37b82c1816b8c159701e56","f0b1d7ff05e74da750d6bb82da881934","a77da8ab8e64d64f5cd96a3f08ecb022");I$("50158e6bb8d5948c5fc7f85fa3a027c4",'<textarea name="ntp" id="#<inputCnt>">\n  <div class="m-input form-item j-flag">\n  </div>\n</textarea>\n<textarea name="jst" id="#<inputBody>">\n  <label class="label">\n    <span class="title" title="${label}">${label}</span>\n    {if required}\n        <span class="u-required">*</span>\n      {/if}\n  </label>\n  <div class="input">\n    <input type="text" class="j-input" name="${key}" maxlength="${maxlength}" value="${value}" autocomplete="off">\n  </div>\n  <div class="z-error j-error"></div>\n</textarea>\n');I$("531679ca2cf3c03c56b5fa499c91761e",function(t,e,i,n,s,a,o,r,_,d,c){d._$$Input=t._$klass();c=d._$$Input._$extend(s._$$Abstract);c.__init=function(){this.__super()};c.__reset=function(t){this.__super(t);this.__data=r._$extend(t.data,{label:"",key:"",value:"",maxlength:100,rules:[]});o._$render(this.__body,this.__seed_body,t.data);this.__defineNode();this.__initEvent()};c.__destroy=function(){this.__super()};c.__initXGui=function(){var t=a._$parseUITemplate(_);return function(){this.__seed_html=t.inputCnt;this.__seed_body=t.inputBody}}();c.__initNode=function(){this.__super()};c.__defineNode=function(){this.__nerror=i._$getByClassName(this.__body,"j-error")[0];this.__ninput=i._$getByClassName(this.__body,"j-input")[0];
};c.__initEvent=function(){this.__doInitDomEvent([[this.__ninput,"keyup",this.__onkeyUp._$bind(this)]])};c.__renderErrorMsg=function(t){this.__nerror.innerText=t};c.__onkeyUp=function(t){var e=this.__ninput.value;n._$forEach(this.__data.forbidden,function(t){this.__data.value=e.replace(t,"")}._$bind(this));if(e!=this.__data.value)this.__ninput.value=this.__data.value};c._$validate=function(){var t={required:function(t){var e="此信息不能为空";if(!t||""==t.trim()){this.__renderErrorMsg(e);return!1}else{this.__renderErrorMsg("");return!0}}};return function(){var e=this.__ninput.value;for(var i=0;i<this.__data.rules.length;i++){var n=this.__data.rules[i];var s=t[n.name].call(this,e);if(!s)return!1}return!0}}();c._$getData=function(){var t={key:this.__data.key,label:this.__data.label,value:this.__ninput.value,type:"input"};return t}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","35df4ef4567b6cd0275a1b849d2bea8c","50158e6bb8d5948c5fc7f85fa3a027c4");I$("5090ae4064382ab1936bd228285d4144",'<textarea name="ntp" id="#<uploadCnt>">\n  <div class="m-upload form-item j-flag">\n  </div>\n</textarea>\n<textarea name="jst" id="#<uploadBody>">\n  <label class="label">\n    <span class="title">${label}</span>\n    {if required}\n    <span class="u-required">*</span>\n    {/if}\n  </label>\n  <div class="input j-input">\n  </div>\n  <div class="z-error j-error"></div>\n</textarea>\n\n<textarea name="jst" id="#<uploadInput>">\n  {if !value}\n  <label class="j-upload" name="${key}">${uploadBtn}</label>\n  {else}\n  <label class="j-upload f-dn" name="${key}">${uploadBtn}</label>\n  <div class="preview">\n    <i class="u-close" data-action="remove"></i>\n    <div class="left">\n      <i class="cover" data-action="preview" data-url="${value.url}"></i>\n    </div>\n    <div class="right">\n      <div class="name">${value.name}</div>\n      <div class="size">${value.size|fileSizeFormat}</div>\n    </div>\n  </div>\n  {/if}\n</textarea>');I$("2f537caf06efcf475391e64c7d2aae2c",function(t,e,i,n,s,a,o,r,_,d,c,l,f){l._$$Upload=t._$klass();f=l._$$Upload._$extend(s._$$Abstract);f.__init=function(){this.__super();o._$extend({fileSizeFormat:d._$fileSizeFormat})};f.__reset=function(t){this.__super(t);this.__data=d._$extend(t.data,{label:"",key:"",value:"",uploadBtn:"上传附件",rules:[],accept:"*"});try{this.__data.value=JSON.parse(this.__data.value)}catch(e){}this.__render();this.__defineNode();this.__initWidget();this.__initEvent()};f.__destroy=function(){this.__super()};f.__initXGui=function(){var t=a._$parseUITemplate(c);return function(){this.__seed_html=t.uploadCnt;this.__seed_body=t.uploadBody;this.__seed_input=t.uploadInput}}();f.__initNode=function(){this.__super()};f.__render=function(){o._$render(this.__body,this.__seed_body,this.__data);this.__renderInput()};f.__renderInput=function(){var t=i._$getByClassName(this.__body,"j-input")[0];o._$render(t,this.__seed_input,this.__data)};f.__defineNode=function(){this.__nerror=i._$getByClassName(this.__body,"j-error")[0]};f.__initWidget=function(){var t=i._$getByClassName(this.__body,"j-upload")[0];var e={accept:this.__data.accept,multiple:!1,node:t,onchange:this.__onFileSelect._$bind(this)};this.__fileSel=r._$bind(t,e)};f.__initEvent=function(){d._$delegateWithStopEvent(this,this.__body,{remove:this.__removeFile._$bind(this),preview:this.__previewFile._$bind(this)})};f.__onFileSelect=function(t){this.__form=t.form;var e=i._$get(t.id),n=e.files;window.nim.previewFile({type:"file",fileInput:e,uploadprogress:this.__onUploadProgress._$bind(this),done:this.__onUploadDone._$bind(this)})};f.__onUploadProgress=function(t){};f.__onUploadDone=function(t,e){if(!t){e.url=d._$transNosToCdn(e.url,"nim");this.__data.value={url:e.url,name:e.name,size:e.size};if(!this.__checkFormat(e))this.__nerror.innerText="目前可支持上传jpg/jpeg/png/bmp/gif格式的图片";else this.__renderInput()}else this.__nerror.innerText="图片上传失败，请稍后重试"};f.__checkFormat=function(t){var e=this.__data.accept.split(",");for(var i=0;i<e.length;i++){var n=e[i];if(n.indexOf("*")>-1)return!0;n=n.split("/")[1];if(t.ext.toLowerCase()==n.toLowerCase())return!0}return!1};f.__renderErrorMsg=function(t){this.__nerror.innerText=t};f._$validate=function(){var t={required:function(t){var e="此信息不能为空";if(!t){this.__renderErrorMsg(e);return!1}else{this.__renderErrorMsg("");return!0}}};return function(){var e=this.__data.value;for(var i=0;i<this.__data.rules.length;i++){var n=this.__data.rules[i];var s=t[n.name].call(this,e);if(!s)return!1}return!0}}();f._$getData=function(){var t={key:this.__data.key,label:this.__data.label,value:this.__data.value,type:this.__data.fileType||"image"};return t};f.__previewFile=function(t,e){var n=e.target,s=i._$dataset(n,"url");if(s)window.open(s,"_blank")};f.__removeFile=function(t,e){this.__data.value=null;this.__renderInput();this.__initWidget()}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","9733787c25ceca396cb6e8dcce07ee63","2f42bd4202bba1781886820b65db2a46","35df4ef4567b6cd0275a1b849d2bea8c","5090ae4064382ab1936bd228285d4144");I$("fa91e6ec32fafa3154dafa1f01d25f67",'<textarea name="ntp" id="#<formCnt>">\n    <div class="m-form j-flag">\n    </div>\n</textarea>\n<textarea name="jst" id="#<formBody>">\n    <div class="form-hd">\n        ${title}\n    </div>\n    <div class="form-content j-form">\n    </div>\n    <div class="actions">\n        <button class="j-submit">${submitBtn}</button>\n    </div>\n</textarea>\n');I$("754af2866a38b8ecac18d2cc44702b71",function(t,e,i,n,s,a,o,r,_,d,c,l,f){l._$$Form=t._$klass();f=l._$$Form._$extend(s._$$Abstract);f.__init=function(){this.__super()};f.__reset=function(t){this.__super(t);d._$extend(t.data,{title:"请填写表单",submitBtn:"提交"});o._$render(this.__body,this.__seed_body,t.data);this.__defineNode();this.__initWidget(t.data.list||[]);this.__initEvent()};f.__destroy=function(){this.__super()};f.__initXGui=function(){var t=a._$parseUITemplate(c);return function(){this.__seed_html=t.formCnt;this.__seed_body=t.formBody}}();f.__initNode=function(){this.__super()};f.__defineNode=function(){this.__nsubmit=i._$getByClassName(this.__body,"j-submit")[0];this.__nform=i._$getByClassName(this.__body,"j-form")[0]};f.__initWidget=function(t){var e={input:r._$$Input,image:_._$$Upload};this.__widgets=[];n._$forEach(t,function(t){var i=e[t.type]._$allocate({parent:this.__nform,data:t});this.__widgets.push(i)}._$bind(this))};f.__initEvent=function(){this.__doInitDomEvent([[this.__nsubmit,"click",this.__submit._$bind(this)]])};f.__validate=function(){var t=!0;n._$forEach(this.__widgets,function(e){var i=e._$validate();if(!i)t=!1});return t};f.__getData=function(){var t=[];n._$forEach(this.__widgets,function(e){var i=e._$getData();t.push(i)});return t};f.__submit=function(){if(this.__validate()){var t=this.__getData();this._$dispatchEvent("onsubmit",t)}}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","531679ca2cf3c03c56b5fa499c91761e","2f537caf06efcf475391e64c7d2aae2c","35df4ef4567b6cd0275a1b849d2bea8c","fa91e6ec32fafa3154dafa1f01d25f67");I$("7ebcabbefc6c600cb0388eda45489bd4",'<textarea name="ntp" id="#<formCnt>">\n    <div class="m-bot-form-cnt">\n    </div>\n</textarea>\n<textarea name="jst" id="#<formBody>">\n    <div class="m-bot-form m-form j-flag">\n        <div class="form-hd">\n            <div class="bot-form-title">填写信息</div>\n            <div class="u-hide j-hide">\n                <i class="icon-hide"></i>\n            </div>\n        </div>\n        <div class="form-content j-form">\n            <div class="title">${title}</div>\n        </div>\n        <div class="actions">\n            <button type="button" class="u-btn-bot-form j-submit">${submitBtn}</button>\n        </div>\n    </div>\n</textarea>\n');I$("bccf270ed787e8f6acee5d1f453d015d",function(t,e,i,n,s,a,o,r,_,d,c,l){c._$$BotForm=t._$klass();l=c._$$BotForm._$extend(_._$$Form);l.__init=function(){this.__super()};l.__reset=function(t){t.data.icon=t.data.icon||"https://qiyukf.nosdn.127.net/sdk/res/default/robot_portrait@2x_5efee7fa6fe0f977ddf09e37822a1b7c.png";this.__super(t)};l.__destroy=function(){this.__super()};l.__initXGui=function(){var t=a._$parseUITemplate(d);return function(){this.__seed_html=t.formCnt;this.__seed_body=t.formBody}}();l.__initNode=function(){this.__super()};l.__defineNode=function(){this.__super();this.__nhide=i._$getByClassName(this.__body,"j-hide")[0]};l.__initEvent=function(){this.__super();this.__doInitDomEvent([[this.__nhide,"click",this.__hide._$bind(this)]])};l.__hide=function(){this._$dispatchEvent("onhide",this.__getData());this._$recycle()}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","35df4ef4567b6cd0275a1b849d2bea8c","754af2866a38b8ecac18d2cc44702b71","7ebcabbefc6c600cb0388eda45489bd4");I$("b4c053a80e048bbedb7f48608a2814ba",'<textarea name="ntp" id="#<botListBody>">\n\t<div class="m-modal m-modal-botList">\n\t    <div class="modal_dialog">\n\t        <div class="modal_hd-bot">\n\t            <p class="modal_title j-title"></p>\n\t            <div class="modal_close">&times;</div>\n\t        </div>\n\t        <div class="modal_bd">\n\t\t\t\t<div class="m-botList j-scroll-box">\n\t\t\t\t\t<ul class="list">\n            <div class="m-card-layout">\n              <ul class="group-list j-list-box">\n              </ul>\n            </div>     \n          </ul>\n          <div class="load-status j-status"></div>\n\t\t\t\t</div>\n\t        </div>\n\t    </div>\n\t</div>\n</textarea>\n\n<textarea name="jst" id="#<botListList>">\n\t{list beg..end as y} \n\t\t{var group=xlist[y]}\n      {if group.action.type == "block"}\n      <li class="group-item" data-action="select" data-target="${group.action.target}" data-params="${group.action.params}" data-label="${group.action.label}" data-type="block">\n      {elseif group.action.type == "popup"}\n        <li class="group-item" data-action="select" data-target="${group.action.target}" data-params="${group.action.params}" data-label="${group.action.label}" data-type="popup">\n      {elseif group.action.type == "url"}\n      <li class="group-item" data-action="openlink" href="${group.action.target}">\n      {else}\n      <li class="group-item">\n      {/if}\n        <ul class="tr-list">\n          {list group.list as tr}\n            <li class="tr-item">\n              <ul class="td-list">\n                {list tr as td}\n                  <li class="td-item" style="${td.style}">\n                    <div class="inner" style="${td.innerStyle}">\n                      {if td.type == "text"}\n                        <span>${td.value}</span>\n                      {elseif td.type == "image"}\n                        <img src="${td.value}" alt="">\n                      {else}\n                        <span>[暂不支持的消息类型]</span>\n                      {/if}\n                    </div>\n                  </li>\n                {/list}\n              </ul>\n            </li>\n          {/list}\n        </ul>\n      </li>\n  {/list}\n</textarea>\n\n<textarea name="jst" id="#<botListStatus>">\n  <div class="u-status">\n    {if status.type == \'loading\'}\n    <img src="https://qiyukf.nosdn.127.net/sdk/res/img/loading_03ce3dcc84af110e9da8699a841e5200.gif">\n    <span>${status.msg}</span>\n    {elseif status.type == \'error\' || status.type == \'empty\'}\n    <span>${status.msg}</span>\n    {/if}\n  </div>\n</textarea>');
I$("e3bf5bcfc6f3892d934d219cb8f1fbb3",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u){f._$$BotList=t._$klass();u=f._$$BotList._$extend(s._$$Abstract);u.__init=function(){this.__super()};u.__reset=function(t){this.__super(t);this.__listBox=e._$getByClassName(this.__body,"j-list-box")[0];this.__scrollBox=e._$getByClassName(this.__body,"j-scroll-box")[0];this.__nstatus=e._$getByClassName(this.__scrollBox,"j-status")[0];this.__ntitle=e._$getByClassName(this.__body,"j-title")[0];this.__data=r._$copy(t.data);this.__loadComplete=!1;this.__listConfig={listBox:this.__listBox,scrollBox:this.__scrollBox,tplSeed:this.__seed_list,scrollDelta:40,data:this.__data.content.template.list,ongetList:this.__getList._$bind(this)};var i=e._$getByClassName(this.__body,"modal_close")[0];this.__doInitDomEvent([[i,"click",this.__onClose._$bind(this)],[c._$$Cache,"onmorebotlist",this.__onListLoad._$bind(this)]]);r._$delegate(this,this.__listBox,{select:this.__onSelect._$bind(this),openlink:this.__openLink._$bind(this)});this.__ntitle.innerText=this.__data.content.template.action.title||"";this.__list=_._$$WFList._$allocate(this.__listConfig);this.__list._$next()};u.__destroy=function(){this.__list&&this.__list._$recycle();this.__list=null;this.__autoScrollTimer&&clearTimeout(this.__autoScrollTimer);this.__super()};u.__initXGui=function(){var t=a._$parseUITemplate(l);return function(){this.__seed_html=t.botListBody;this.__seed_list=t.botListList;this.__seed_status=t.botListStatus}}();u.__initNode=function(){this.__super()};u.__renderStatus=function(t){o._$render(this.__nstatus,this.__seed_status,{status:t})};u.__getList=function(){if(!this.__loadComplete){this.__renderStatus({type:"loading",msg:"加载中"});d._$getMoreBotList(this.__data.content)}};u.__onListLoad=function(t){var e=t.content;if("card_layout"==e.template.id)if(t.error)this.__renderStatus({type:"error",msg:"加载失败，"+t.error.message});else if(0==e.template.list.length){this.__loadComplete=!0;this.__renderStatus({type:"empty",msg:"已经到底了"})}else{this.__renderStatus({type:"success",msg:""});this.__data.content=e;this.__list._$dispatchEvent("listchange",{action:"append",data:e.template.list});this.__autoScrollTimer=setTimeout(function(){if(this.__listBox.clientHeight<=this.__scrollBox.clientHeight)this.__list._$next()}._$bind(this),500)}};u.__onClose=function(){this.__destroy()};u.__onSelect=function(t,e){if(t){this._$dispatchEvent("onselect",t,e);this.__onClose()}};u.__openLink=function(t,i){n._$stop(i);var s=e._$attr(t,"href");window.open(s)}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","35df4ef4567b6cd0275a1b849d2bea8c","078c11dc85b47d445b45cb988037563f","d67add781b37b82c1816b8c159701e56","f0b1d7ff05e74da750d6bb82da881934","b4c053a80e048bbedb7f48608a2814ba");I$("3e0b6c91449e6b55f84e0cac0e63288d",'<textarea name="ntp" id="#<botDetailBody>">\n\t<div class="m-modal m-modal-botDetail">\n    <div class="modal_dialog">\n      <div class="modal_hd-bot">\n        <p class="modal_title j-title"></p>\n        <div class="modal_close">&times;</div>\n      </div>\n      <div class="modal_bd">\n  \t\t\t<div class="m-botDetail">\n  \t\t\t\t<ul class="list j-list"></ul>\n  \t\t\t</div>\n        <div class="load-status j-status"></div>\n      </div>\n    </div>\n\t</div>\n</textarea>\n\n<textarea name="jst" id="#<botDetailList>">\n  <div class="m-card-layout">\n    <ul class="group-list">\n    \t{list list as group} \n        <li class="group-item">\n          <ul class="tr-list">\n            {list group as tr}\n              <li class="tr-item">\n    \t\t\t\t\t\t<div class="left" style="${tr.left.style}">\n                  <div class="inner" style="${tr.left.innerStyle}">\n      \t\t\t\t\t\t\t{if tr.left.type == \'text\'}\n                \t\t\t<span>${tr.left.value}</span>\n                \t\t{elseif tr.left.type == \'image\'}\n                \t\t\t<img src="${tr.left.value}" alt="">\n                    {else}\n                      <span>[暂不支持的消息类型]</span>\n      \t\t\t\t\t\t\t{/if}\n                  </div>\n    \t\t\t\t\t\t</div>\n    \t\t\t\t\t\t<div class="right" style="${tr.right.style}">\n                  <div class="inner" style="${tr.right.innerStyle}">\n      \t\t\t\t\t\t\t{if tr.right.type == \'text\'}\n                \t\t\t<span>${tr.right.value}</span>\n                \t\t{elseif tr.right.type == \'image\'}\n                \t\t\t<img src="${tr.right.value}" alt="">\n                    {else}\n                      <span>[暂不支持的消息类型]</span>\n      \t\t\t\t\t\t\t{/if}\n                  </div>\n    \t\t\t\t\t\t</div>\n              </li>\n            {/list}\n          </ul>\n        </li>\n      {/list}\n    </ul>\n  </div>\n</textarea>\n\n<textarea name="jst" id="#<botDetailStatus>">\n  <div class="u-status">\n    {if status.type == \'loading\'}\n    <img src="https://qiyukf.nosdn.127.net/sdk/res/img/loading_03ce3dcc84af110e9da8699a841e5200.gif">\n    <span>${status.msg}</span>\n    {elseif status.type == \'error\'}\n    <span>${status.msg}</span>\n    {/if}\n  </div>\n</textarea>');I$("0d0bacae316f897a43612de8431d31e0",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u){f._$$BotDetail=t._$klass();u=f._$$BotDetail._$extend(s._$$Abstract);u.__init=function(){this.__super()};u.__reset=function(t){this.__super(t);this.__nlist=e._$getByClassName(this.__body,"j-list")[0];this.__ntitle=e._$getByClassName(this.__body,"j-title")[0];this.__nstatus=e._$getByClassName(this.__body,"j-status")[0];this.__data=r._$copy(t.data);if(this.__data.content){this.__data.content.template.id="pair";i._$merge(this.__data.content.template,this.__data.content.template.detail);this.__onDataLoad({error:null,content:this.__data.content})}else if(this.__data.request)this.__getData(this.__data.request);var n=e._$getByClassName(this.__body,"modal_close")[0];this.__doInitDomEvent([[n,"click",this.__onClose._$bind(this)],[c._$$Cache,"onmorebotdetail",this.__onDataLoad._$bind(this)]])};u.__destroy=function(){this.__super()};u.__initXGui=function(){var t=a._$parseUITemplate(l);return function(){this.__seed_html=t.botDetailBody;this.__seed_list=t.botDetailList;this.__seed_status=t.botDetailStatus}}();u.__initNode=function(){this.__super()};u.__renderList=function(){o._$render(this.__nlist,this.__seed_list,this.__data.content.template)};u.__rendStatus=function(){o._$render(this.__nstatus,this.__seed_status,{status:this.__data.status});if("success"==this.__data.status.type)e._$addClassName(this.__nstatus,"f-dn");else e._$delClassName(this.__nstatus,"f-dn")};u.__renderTitle=function(){this.__ntitle.innerText=this.__data.content.template.label||""};u.__getData=function(t){this.__data.status={type:"loading",msg:""};this.__rendStatus();d._$getMoreBotDetail(t)};u.__onDataLoad=function(t){var e=t.content;if("pair"==e.template.id)if(t.error){this.__data.status={type:"error",msg:"加载失败，"+t.error.message};this.__rendStatus()}else{if(0==e.template.list.length)this.__data.status={type:"error",msg:e.template.label};else{this.__data.status={type:"success",msg:""};this.__data.content=t.content}this.__rendStatus();this.__renderTitle();this.__renderList()}};u.__onClose=function(){this.__destroy()}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","35df4ef4567b6cd0275a1b849d2bea8c","078c11dc85b47d445b45cb988037563f","d67add781b37b82c1816b8c159701e56","f0b1d7ff05e74da750d6bb82da881934","3e0b6c91449e6b55f84e0cac0e63288d");I$("2aea18b8072b6a204c4796f09c4d3d8a",'<div class="bubble-good-item">\n    <div class="bd">\n        {#if item.p_img}\n        <div class="left">\n            <img class="img" src="{item.p_img}">\n        </div>\n        {/if}\n        <div class="right">\n            <div class="top">\n                <span class="title" title="{item.p_title}">{item.p_title}</span>\n                {#if item.p_attr_1 || item.p_attr_2}\n                <div class="attr">\n                    <p class="attr1" title="{item.p_attr_1}">{item.p_attr_1 || \'\'}</p>\n                    <p class="attr2" title="{item.p_attr_2}">{item.p_attr_2 || \'\'}</p>\n                </div>\n                {/if}\n            </div>\n            <div class="bottom">\n                <span class="sub_title" title="{item.p_sub_title}">{item.p_sub_title}</span>\n                {#if item.p_attr_3}\n                <span class="attr3" title="{item.p_attr_3}">{item.p_attr_3 || \'\'}</span>\n                {/if}\n            </div>\n        </div>\n    </div>\n</div>');I$("a344b7aa548b8f4feaa19ef48e1c646b",function(t,e,i,n,s){s=i.extend({name:"bot-bubbleConfirmModal",config:function(t){e._$extend(t,{contentTemplate:n,"class":"m-modal-botBubbleConfirm",closeButton:!0,title:"确认要发送吗？"});this.supr(t)},init:function(){this.supr()},destroy:function(){this.supr()}});return s},"be567474249a271e4786c144ccf5f75a","3e346f2b6313e57a75f5ee9b603c4b65","fdec2b215e7e7770f7e7b5af3422ee86","2aea18b8072b6a204c4796f09c4d3d8a");I$("dc1988625bf1145dfe3e8673ca4ded09",'<div class="m-floatLayer {@(class)}" r-class={{\'z-show\':!!isShow}}>\n    <div class="floatLayer_dialog">\n        <div class="floatLayer_hd">\n            <h3 class="floatLayer_title">{title}</h3>\n            {#if closeButton}\n            <a class="floatLayer_close" on-click={this.close($event)}><i class="u-icon u-icon-close"></i></a>\n            {/if}\n        </div>\n        <div class="floatLayer_bd">\n            {#if contentTemplate}{#include @(contentTemplate)}{#else}{content}{/if}\n        </div>\n    </div>\n</div>');I$("8ce1eadb47c61969ba26a782c805d6c7",function(t,e,i,n){var s=i.Component;var a=s.extend({name:"float-layer",template:n,config:function(t){e._$extend(t,{title:"提示",closeButton:!0,isShow:!1,transitionDur:500});this.supr(t)},init:function(){
this.supr();if(this.$root===this)this.$inject(document.body);window.requestAnimationFrame(function(){this.data.isShow=!0;this.$update()}._$bind(this))},destroy:function(){this.supr()},close:function(t){this.data.isShow=!1;this.$update();setTimeout(function(){this.destroy()}._$bind(this),this.data.transitionDur)}});return a},"be567474249a271e4786c144ccf5f75a","3e346f2b6313e57a75f5ee9b603c4b65","fe686268a0af212baea04fc64f0059e8","dc1988625bf1145dfe3e8673ca4ded09");I$("8b14b657333ef979658cd8dd3b2e3354","<div class=\"m-custom-fields\">\n    {#list fields as field}\n    <div class=\"u-field-itm\">\n        <div class=\"u-field-title-worksheet-content\">\n            {#if field.type == 3}\n                <label class=\"u-field-title\" title=\"{field.label|escape}\">附件</label>\n            {#else}\n                <label class=\"u-field-title\" title=\"{field.label|escape}\">{field.label|escape}</label>\n            {/if}\n            {#if field.required == '1'}\n                <span class=\"u-necessary\">*</span>\n            {/if}\n        </div>\n        \n        <div class=\"u-field-cnt\" r-class={{'u-field-cnt-time' : field.status != 1 && !disabled}}>\n            {#if field.type==0}\n                    {#if field.details==0}\n                        {#if field.status==0 || disabled}\n                            <span class=\"u-field-val\">{field.value}</span> \n                        {#else}\n                            <wgt-custom-input placeholder={field.hint || '请输入'} value={field.prefill||''} isNumber={false} required={field.required == '1'} max={field.maxlength||100} rules={field.rules} on-eBlur={this.iptBlur($event,field)} on-eKeyup={this.iptKeyup($event,field)} id={field.id} name={field.label}></wgt-custom-input>\n                        {/if}                \n                    {#elseif field.details==1}\n                        {#if field.status==0 || disabled}\n                            <span class=\"u-field-val\">{field.value}</span> \n                        {#else}\n                            <wgt-custom-input placeholder={field.hint || '请输入'} value={field.prefill||''} isNumber={true} required={field.required == '1'} max={field.maxlength||100} rules={field.rules} on-eBlur={this.iptBlur($event,field)} on-eKeyup={this.iptKeyup($event,field)} id={field.id} name={field.label}></wgt-custom-input>\n                        {/if}                \n                    {#elseif field.details==2}\n                        {#if field.status==0 || disabled}\n                            <div class=\"ipts\">\n                                <textarea placeholder={field.hint || '请输入'} class=\"u-textarea\" r-model={field.value} disabled></textarea>\n                            </div>\n                        {#else}\n                            <wgt-custom-textarea placeholder={field.hint || '请输入'} value={field.prefill||''} required={field.required == '1'} max={field.maxlength||500} on-eBlur={this.iptBlur($event,field)} on-eKeyup={this.iptKeyup($event,field)} id={field.id} name={field.label}></wgt-custom-textarea>\n                        {/if}   \n                    {/if}         \n            {#elseif field.type==1}\n                {#if field.status==0 || disabled}\n                    <span class=\"u-field-val\">{field.value}</span> \n                {#else}\n                    <wgt-custom-select list={field.details} textkey=\"text\" needefault={true} value={field.prefill||''} required={field.required == '1'} on-select={this.changeSelect($event['text'],field)} id={field.id} name={field.label}></wgt-custom-select>\n                {/if}                 \n            {#elseif field.type==2}\n                {#if field.status==0 || disabled}\n                    <span class=\"u-field-val\">{field.value}</span> \n                {#else}\n                    <wgt-custom-mulselect key=\"text\" list={field.details} value={field.prefill||''} required={field.required == '1'} on-ok={this.changeSelect($event,field)} id={field.id} name={field.label}></wgt-custom-mulselect>\n                {/if}\n\n\t        {#elseif field.type==3}\n                <wgt-custom-upload ref=\"upload\" required={field.required == '1'} id={field.id} name={field.label} on-changelist={this.changelist($event)}></wgt-custom-upload> \n            {/if}\n        </div>  \n    </div>\n    {/list}\n</div>\n");I$("13ea2ef31ec451415dfe7e64ed6c3a9c",function(t,e,i,n,s,a,o,r,_,d,c){return t.Component.extend({name:"worksheetfields",template:c,config:function(t){e._$extend(t,{fields:[]});this.supr(t)},init:function(){this.supr()},destroy:function(){this.supr()},$getFieldsValue:function(){var t=[];for(var e=0;e<this._children.length;e++){var i=this._children[e],n=i.data.value,s=i.validate(),a=i.data.id;name=i.data.name;if(s)t.push({id:a,value:n,name:name})}return t},$isValidate:function(){return this._children.every(function(t){return t.isValidate()})},iptBlur:function(t,e){this.$emit("iptBlur",{id:e.id,value:t})},iptKeyup:function(t,e){this.$emit("iptKeyup",{id:e.id,value:t})},changeSelect:function(t,e){this.$emit("change",{id:e.id,value:t})},changelist:function(){this.$emit("changelist")},changeTimer:function(t,e){var i=t.startTime+";"+t.endTime;if(e.type==-1)this.$emit("change",{id:e.id,value:i});else this.$emit("change",{id:e.id,value:t.time})}}).filter({time:function(t){return s._$format(Number(t),"yyyy-MM-dd HH:mm")}})},"fe686268a0af212baea04fc64f0059e8","3e346f2b6313e57a75f5ee9b603c4b65","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","dd2bdbfcb0339beceb55cbbb1fb2e683","530708c24d4bd4c96e9de5414fb40fa3","9af6960f7c31313a98922779f0a71fa4","ba4d7793353a96855ce2bb237878b936","27b35f8f5684208fec1d08cf9fca4473","8b14b657333ef979658cd8dd3b2e3354");I$("1c9e57ed84cee9a1f4c2488d1d716097",'\t<div class="worksheet-box">\n\t\t<div class="worksheet-bd" id="worksheet-body">\n\t\t\t\t<div class="worksheet-form">\n\t\t\t\t\t{#if list && list.length}\n\t\t\t\t\t\t<div class="form-label" r-hide={!label}>{label}</div>\n\t\t\t\t\t\t<worksheetfields ref="cfield" fields={list} disabled={finish} on-changelist={this.changefilelist($event)}></worksheetfields>\n\t\t\t\t\t\t<!-- <p r-hide={!tip} class="tip">{tip}</p> -->\n\t\t\t\t\t\t\n\t\t\t\t\t{#elseif code == 200}\n\t\t\t\t\t\t<div class="chat_show_loading u-errtip j-loading">\n\t\t\t\t\t\t\t<img src="https://qiyukf.nosdn.127.net/sdk/res/default/loading_3782900ab9d04a1465e574a7d50af408.gif"> \n\t\t\t\t\t\t\t正在加载，请稍等...\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{#else}\n\t\t\t\t\t\t<div class="chat_show_loading u-worksheet-errtip j-loading">\n\t\t\t\t\t\t\t{errorMessage}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\t\n\t\t\t</div>\n\t\t\t{#if list && list.length}\n\t\t\t\t<div class="btns" r-hide={finish}>\n\t\t\t\t\t<button-save ref="saveButton" text={submitBtn} status={this.getBtnStatus()} saveOnce={true} on-click={this.submit($event)}></button-save>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t</div>\n\t');I$("2e070b2101e312979bbd2d79c8b4d129",function(t,e,i,n,s,a,o,r,_){return s.extend({name:"bot-drawerModal",config:function(t){e._$extend(t,{contentTemplate:_,"class":"m-bot-form-cnt m-bot-worksheet-form-cnt",closeButton:!0,okButton:!1,cancelButton:!1,hideFooter:!0,saveStatus:""});this.supr(t)},init:function(){this.supr();if(window.setting.isMobile)n._$getByClassName(n._$get("ysf-client"),"chat_show_msg")[0].style.overflowY="hidden"},destroy:function(){if(window.setting.isMobile)n._$getByClassName(n._$get("ysf-client"),"chat_show_msg")[0].style.overflowY="auto";this.$emit("close");this.supr()},changefilelist:function(){var t=n._$get("worksheet-body");t.scrollTop=2*t.scrollHeight},onSelectItem:function(t){this.$emit("selectItem",t)},submit:function(){if("pending"!=this.data.saveStatus&&"success"!=this.data.saveStatus){var t=this.$refs["cfield"];if(t.$isValidate()){this.data.saveStatus="pending";var e=t.$getFieldsValue();var n={};var s=this.customFields=[];i._$forEach(e,function(t,e){s.push({key:t.id,value:t.value,label:t.name})}._$bind(this));if(s.length)n.customFields=s;var a=this.data.params||"";i._$forEach(s,function(t){var e="uploadFile"==t.key?JSON.stringify(t.value):t.value;var i=t.key+"="+e;a+="&"+i});n.params=a;n.id=this.data.templateId;var o=this.data.mid;this.$emit("submit",n,o)}}},getBtnStatus:function(){var t=this.data;if(""==t.saveStatus)if(this.$refs["cfield"].$isValidate())ret="";else ret="disabled";else ret=t.saveStatus;return ret},setCustomFields:function(t){this.data.list=t;this.$update()},setParams:function(t){this.data.params=t.params;this.data.code=t.code;this.data.errorMessage=t.errorMessage;this.$update()},getTemplateId:function(){return this.data.templateId}})},"be567474249a271e4786c144ccf5f75a","3e346f2b6313e57a75f5ee9b603c4b65","fbbf6ddc0634989027d138f4ffd4b78b","5fb495f256a5dcde2a92e5fe919a6422","8ce1eadb47c61969ba26a782c805d6c7","13ea2ef31ec451415dfe7e64ed6c3a9c","d67add781b37b82c1816b8c159701e56","aa835e6c54cfdee711ae8d0d1296fa57","1c9e57ed84cee9a1f4c2488d1d716097");I$("6262663e8d28575a7d87b94ae8ea47d4",function(t){return t={systemMap:{win:/\(Windows\sNT.*\)/i,osx:/\(Macintosh;\sIntel\sMac\sOS\sX.*\)/i,aos:/(\(Linux.*Android.*\)|\(Android.*Mobile.*\))/i,ios:/\(iPhone.*CPU.*iPhone.*OS.*like.*Mac.*OS.*X/i},browserMap:{ios:{weixin:/Mobile\/.*MicroMessenger\//i,qq:/Version\/.*MQQBrowser\/.*Mobile\/.*Safari\//i,baidu:/Version\/.*Mobile\/.*Safari\/.*baidubrowser\//i,uc:/Mobile\/.*UCBrowser\//i,firefox:/FxiOS\/.*Mobile\/.*Safari\//i,sougou:/Mobile\/.*SogouMobileBrowser\//i,aoyou:/Version\/.*Mobile\/.*Safari\/.*MXiOS\//i,360:/Version\/.*Mobile\/.*Safari\/.*QHBrowser\//i,opera:/Mobile\/[0-9|a-z|A-Z|\.]+$/i,safari:/Version\/.*Mobile\/.*Safari\//i,chrome:/CriOS\/.*Mobile\/.*Safari\//i},aos:{weixin:/AppleWebKit.*Version\/.*Chrome\/.*Mobile.*MQQBrowser.*\/.*Safari\/.*MicroMessenger\//i,qq:/AppleWebKit.*Version\/.*Chrome\/.*MQQBrowser\/.*Mobile\sSafari\//i,baidu:/AppleWebKit.*Version\/.*Chrome\/.*Mobile\sSafari\/.*baidubrowser\//i,
uc:/AppleWebKit.*Version\/.*UCBrowser\/.*Mobile\sSafari\//i,firefox:/Gecko\/.*Firefox\//i,sougou:/AppleWebKit.*Version\/.*Chrome\/.*Mobile\sSafari\/.*SogouMobileBrowser\//i,"360s":/AppleWebKit.*Version\/.*Chrome\/.*Mobile\sSafari\/.*360browser/i,aoyou:/AppleWebKit.*Version\/.*Chrome\/.*Mobile\sSafari\/.*MxBrowser\//i,opera:/AppleWebKit.*Version\/.*OPR\/.*Mobile Safari\//i,safari:/AppleWebKit.*Version\/.*Chrome\/.*Mobile\sSafari\//i,chrome:/AppleWebKit.*(KHTML.*)\sChrome\/.*Mobile\sSafari\//i}},iosSystemVersion:/CPU\siPhone\sOS\s(\S*)\slike\sMac\sOS\sX/i}});I$("796541fce3af5a34aad5c5030fb1c9ba",function(t,e){var i=window.navigator.userAgent||"";var n=t.systemMap;var s=t.browserMap;var a=t.iosSystemVersion;e._$system=function(){for(var t in n){var e=n[t];if(e.test(i))return t}return!1};e._$browser=function(){var t=this._$system();for(var e in s[t]){var n=s[t][e];if(n.test(i))return e}return!1};e._$platform=function(){return!1};e._$iosSystemVersion=function(){if("ios"!=this._$system())return!1;var t=a;if(t.test(i)){var e=i.match(t)[1];return Number(e.replace("_","."))}}},"6262663e8d28575a7d87b94ae8ea47d4");I$("e5b683479b3092543101f3aefac9e20f",'<textarea name="ntp" id="#<cnt>">\n  <div class="f-dn">\n  \t<div class="j-flag portrait_cnt"></div>\n  \t<div class="j-flag portrait_btn_cnt">\n  \t\t<button class="j-flag">上一页</button>\n  \t\t<button class="j-flag">下一页</button>\n\t</div>\n\t<div class="j-flag portrait_cnt_tab"></div>\n  </div>\n</textarea>\n\n<textarea name="jst" id="#<list>">\n\t{if defaultEmojiStatus || newWebTrade }\n\t\t<div class="portrait_list f-clr j-list">\n\t\t\t{list plist as p}\n\t\t\t<!-- 页开始 -->\n\t\t\t{if (p_index + 1) % (col*row) === 1}\n\t\t\t<div class="f-fl page" {if defWidth}style="width:${defWidth}"{/if}>\n\t\t\t{/if}\n\t\t\t<!-- 页开始end -->\n\n\t\t\t<!-- 行开始 -->\n\t\t\t{if (p_index + 1) % col === 1}\n\t\t\t<ul class="f-clr list">\n\t\t\t{/if}\n\t\t\t<!-- 行开始end -->\n\t\t\t\t<li class="item" {if defItemWidth}style="width:${defItemWidth}"{/if}><i class="portrait_img portrait_icon_${p.file|reduceExt}" data-src="${prefix}${p.file}" data-id="${p.id}" title="${p.tag}" alt="${p.tag}"></i></li>\t\n\t\t\t<!-- 行结束 -->\n\t\t\t{if p_index % col === col-1}\n\t\t\t</ul>\n\t\t\t{/if}\n\t\t\t<!-- 行结束end -->\n\n\t\t\t<!-- 页结束 -->\n\t\t\t{if ((p_index+1) % (col*row) === 0 || p_index+1 === emojiLen) && p_index>=0}\n\t\t\t</div>\n\t\t\t{/if}\n\t\t\t<!-- 页结束end -->\n\t\t\t{/list}\n\t\t</div>\n\t{/if}\n\t{list emojiLists as e}\n\t\t{if e.emojiType==1}\n\t\t\t<div class="portrait_list f-clr j-list portrait-hide-old-sdk">\n\t\t\t\t{list e.emojiList as p}\n\t\t\t\t\t<!-- 页开始 -->\n\t\t\t\t\t{if (p_index + 1) % (col*row) === 1}\n\t\t\t\t\t<div class="f-fl page" {if defWidth}style="width:${defWidth}"{/if}>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<!-- 页开始end -->\n\t\t\t\t\t{if (p_index + 1) % col === 1}\n\t\t\t\t\t<ul class="f-clr list" style="display:flex">\n\t\t\t\t\t{/if}\n\t\t\t\t\t\t<!-- 行开始end -->\n\t\t\t\t\t\t<!-- <li  class="gifItem" {if defItemWidth}style="width:${defItemWidth}"{/if}></li> -->\n\t\t\t\t\t\t<li  class="gifImg" {if defItemWidth}style="width:${defItemWidth}"{/if} data-action="showIMG" data-imgurl="${p.emojiUrl}" data-imgname="${p.emojiName}">\n\t\t\t\t\t\t\t <img src="${p.emojiUrl}" alt="">\n\t\t\t\t\t\t\t {if p.emojiName}\n\t\t\t\t\t\t\t <p>${p.emojiName.split(\'.\')[0]}</p>\n\t\t\t\t\t\t\t {/if}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<!-- 行结束 -->\n\t\t\t\t\t{if p_index % col === col-1}\n\t\t\t\t\t</ul>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<!-- 行结束end -->\n\t\t\t\n\t\t\t\t\t<!-- 页结束 -->\n\t\t\t\t\t{if ((p_index+1) % (col*row) === 0 || p_index+1 === e.emojiList.length) && p_index>=0}\n\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<!-- 页结束end -->\n\t\t\t\t{/list}\n\t\t\t</div>\n\t\t{else}\n\t\t<div class="portrait_list f-clr j-list portrait-hide-old-sdk">\n\t\t\t\t{list e.emojiList as p}\n\t\t\t\t<!-- 页开始 -->\n\t\t\t\t{if (p_index + 1) % (col*row) === 1}\n\t\t\t\t<div class="f-fl page" {if defWidth}style="width:${defWidth}"{/if}>\n\t\t\t\t{/if}\n\t\t\t\t<!-- 页开始end -->\n\t\n\t\t\t\t<!-- 行开始 -->\n\t\t\t\t{if (p_index + 1) % col === 1}\n\t\t\t\t<ul class="f-clr list">\n\t\t\t\t{/if}\n\t\t\t\t<!-- 行开始end -->\n\t\t\t\t<li class="item" {if defItemWidth}style="width:${defItemWidth}"{/if}>\n\t\t\t\t\t<img class="m-set-emoji" src="${p.emojiUrl}" data-id="${p.id}" title="${p.tag}" alt="${p.tag}" data-img="${p.emojiUrl}"/>\n\t\t\t\t</li>\t\n\t\t\t\t<!-- 行结束 -->\n\t\t\t\t{if p_index % col === col-1}\n\t\t\t\t</ul>\n\t\t\t\t{/if}\n\t\t\t\t<!-- 行结束end -->\n\t\n\t\t\t\t<!-- 页结束 -->\n\t\t\t\t{if ((p_index+1) % (col*row) === 0 || p_index+1 === e.emojiList.length) && p_index>=0}\n\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t\t<!-- 页结束end -->\n\t\t\t\t{/list}\n\t\t\t</div>\n\t\t{/if}\n\t{/list}\n\t\n</textarea>\n\n<textarea name="jst" id="#<page>">\n\t<ul class="f-clr" style="width:${(all+1)*22}px;">\n\t{list 0..all as index}\n\t\t<li class="j-pageitem ${index === now ? \'active\' : \'\'}"><div class="dot"></div></li>\n\t{/list}\n\t</ul>\n</textarea>\n<textarea name="jst" id="#<tab>">\n\t<div class="protrait_header portrait-hide-old-sdk">\n\t\t{if defaultEmojiStatus}\n\t\t\t<p class="protrait_header_tab default_emoji" data-action="showDefault">\n\t\t\t\t <img src="https://qiyukf.nosdn.127.net/sdk/res/img/emoji_icon_3b5918ef8e661857f9125df60a295f98.png" alt="">\n\t\t\t </p>\n\t\t {/if}\n\t\t{list emojiLists as e}\n\t\t\t{if e.emojiType==1}\n\t\t\t\t<p class="protrait_header_tab default_emoji" data-action="showDIY">\n\t\t\t\t\t<img src="${e.emojiPackagePicUrl}" alt="">\n\t\t\t\t</p>\n\t\t\t{else}\n\t\t\t\t<p class="protrait_header_tab default_emoji" data-action="showEmoji">\n\t\t\t\t\t<img src="${e.emojiPackagePicUrl}" alt="">\n\t\t\t\t</p>\n\t\t\t{/if}\n\t\t{/list}\n\t</div>\n</textarea>');I$("3bbf9ea59cf40caebf198cb8d96a42e5",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u){f._$$Portrait=t._$klass();u=f._$$Portrait._$extend(o._$$Abstract);var h=appConfig.path.sdk+"res/portrait/emoji/";u.__init=function(){this.__super();a._$extend({reduceExt:function(t){return t.substr(0,t.length-4)}});r._$delegate(this,this.__body,{showDefault:function(t,e){this.__activeStatus(t,e)},showDIY:function(t,e){this.__activeStatus(t,e)},showEmoji:function(t,e){this.__activeStatus(t,e)},showIMG:function(t,e){this.__selectIMg(t,e)}});if(!this.__ccache){this.__ccache=d._$$Cache._$allocate({load_getCF:this.__getCFLists._$bind(this),error_getCF:this.__errorGetCFLists._$bind(this),load_mapCF:this.__mapCFLists._$bind(this),error_mapCF:this.__errorMapCFLists._$bind(this)});var t=window.setting.appkey;this.__ccache._$getCF({data:{appKey:t}});this.__ccache._$mapCF({data:{appKey:t}})}};u.__selectIMg=function(t,i){var n=e._$dataset(t,"imgurl");var s=e._$dataset(t,"imgname");var a,o;if(n){var r=new Image;r.src=n;r.onload=function(){a=r.width;o=r.height;if(a&&o){var t={src:n,name:s,Imgwidth:a,ImgHeight:o};this._$dispatchEvent("onSendGIf",t)}}.bind(this)}};u.__getCFLists=function(t){this.__originEmojiLists=t;if(this.__originEmojiLists&&this.__originEmojiLists.length){if(this.__originEmojiLists[0].id==-1)l.defaultEmojiStatus=this.__originEmojiLists[0].status;if(this.__originEmojiLists.length>1)this.__emojiLists=this.__originEmojiLists.slice(1);else this.__emojiLists=[]}if(this.__emojiLists&&this.__emojiLists.length)for(var e=0;e<this.__emojiLists.length;e++)if(2==this.__emojiLists[e].emojiType)for(var i=0;i<this.__emojiLists[e].emojiList.length;i++)this.__emojiLists[e].emojiList[i].tag="[:"+this.__emojiLists[e].emojiList[i].emojiName.split(".")[0]+"]";l.emojiLists=this.__emojiLists;this.__render()};u.__errorGetCFLists=function(t){};u.__errorMapCFLists=function(t){};u.__mapCFLists=function(t){l.mapEmojiLists=t};u.__activeStatus=function(t,n){i._$stop(n);this._$show(n);this.__allTabs=e._$getByClassName(this.__body,"protrait_header_tab");this.__portraitLists=e._$getByClassName(this.__body,"portrait_list");for(var s=0;s<this.__allTabs.length;s++)if(this.__allTabs[s]==t){if(this.preNodeIndex)if(this.preNodeIndex==s)return!1;this.preNodeIndex=s;e._$addClassName(this.__allTabs[s],"tab_active");e._$delClassName(this.__portraitLists[s],"f-dn");var a=this.__portraitLists[s];var o=e._$getByClassName(a,"gifItem");this.__setPage(s)}else{e._$delClassName(this.__allTabs[s],"tab_active");e._$addClassName(this.__portraitLists[s],"f-dn")}};u.__setPage=function(t){var e;if(l.defaultEmojiStatus)if(0==t){l.row=this.__row;l.col=this.__col;e=l.row*l.col;this.__allPage=Math.ceil(l.plist.length/e)-1}else{if(1==l.emojiLists[t-1].emojiType){l.row=2;l.col=5}else{l.row=this.__row;l.col=this.__col}e=l.row*l.col;this.__allPage=Math.ceil(l.emojiLists[t-1].emojiList.length/e)-1}else{if(1==l.emojiLists[t].emojiType){l.row=2;l.col=5}else{l.row=this.__row;l.col=this.__col}e=l.row*l.col;this.__allPage=Math.ceil(l.emojiLists[t].emojiList.length/e)-1}this.__nowPage=0;l.nowPage=0;a._$render(this.__pageCnt,this.__seed_page,{all:this.__allPage,now:0});this._$page();this.__width=this.__getWidth();l=n._$merge(l,{defWidth:this.__width?this.__width+"px":"",defItemWidth:this.__width?this.__width/l.col+"px":""});a._$render(this.__cnt,this.__seed_list,l);this.__setPortraitList(t)};u.__injectImg=function(t,i){var n=l.emojiLists[i].emojiList;var s=e._$getByClassName(t,"gifItem");for(var a=0;a<n.length;a++)new _({data:{disabledImg:!0,src:n[a].emojiUrl,width:55,height:55,hoverAnimation:!0,clickAnimation:!0,stopAnimation:!1,name:n[a].emojiName,showName:!0,id:n[a].id,name:n[a].emojiName,size:n[a].emojiPicContLen}}).$inject(s[a]).$on("onClickGif",this.__selectSingleGIf._$bind(this))};u.__selectSingleGIf=function(t){this._$dispatchEvent("onSendGIf",t)};u.__reset=function(t){this.__btn=e._$get(t.btn);if(this.__btn){t.parent=t.parent&&e._$get(t.parent)||document.body;this.__row=t.row||5;this.__col=t.col||10;this.__nowPage=t.defpage||0;this.__isRepairIosCover=t.isRepairIosCover;var s=this.__row*this.__col;l=n._$merge(l,{row:this.__row,col:this.__col,nowPage:this.__nowPage,prefix:h,defaultEmojiStatus:1,emojiLen:l.plist.length,emojiLists:[],mapEmojiLists:[]
});if(t.newWebTrade)l.newWebTrade=!1;else l.newWebTrade=!0;this.__super(t);var a=!1;this.__doInitDomEvent([[this.__btn,"click",function(t){if(!a){this.__width=this.__getWidth();l=n._$merge(l,{defWidth:this.__width?this.__width+"px":"",defItemWidth:this.__width?this.__width/this.__col+"px":""});this.__render();a=!0}this.__onBtnClick(t)}._$bind(this)],[document,"click",this.__hideCnt._$bind(this)],[this.__body,"click",this.__selectItem._$bind(this)],[window,"orientationchange",function(){e._$clearChildren(this.__cnt);setTimeout(function(){this.__width=this.__getWidth();l=n._$merge(l,{defWidth:this.__width?this.__width+"px":"",defItemWidth:this.__width?this.__width/this.__col+"px":""});this.__render()}._$bind(this),300)}._$bind(this)]]);i._$addEvent(this.__cnt,"touchmove",function(t){t.preventDefault()});touch.on(this.__cnt,"swiperight",this._$page._$bind(this,-1));touch.on(this.__cnt,"swipeleft",this._$page._$bind(this,1));i._$addEvent(this.__tabCnt,"touchmove",function(t){t.preventDefault()});touch.on(this.__tabCnt,"swiperight",this._$scrollTab._$bind(this,-1));touch.on(this.__tabCnt,"swipeleft",this._$scrollTab._$bind(this,1))}};u.__destroy=function(){this.__doClearComponent();this.__super()};u.__initXGui=function(){var t=s._$parseUITemplate(c);return function(){this.__seed_html=t.cnt;this.__seed_list=t.list;this.__seed_page=t.page;this.__seed_tab=t.tab}}();u.__initNode=function(){this.__super();var t=e._$getByClassName(this.__body,"j-flag");this.__cnt=t[0];this.__pageCnt=t[1];this.__tabCnt=t[4]};u.__setPageShow=function(t){var i=e._$getByClassName(this.__pageCnt,"j-pageitem");var n=e._$getByClassName(this.__pageCnt,"active")[0];if(n)e._$delClassName(n,"active");e._$addClassName(i[t],"active")};u.__onBtnClick=function(t){e._$hasClassName(this.__body,"f-dn")?this.__showCnt(t):this.__hideCnt(t)};u.__showCnt=function(t){i._$stop(t);i._$dispatchEvent(document,"click");e._$delClassName(this.__body,"f-dn");this._$dispatchEvent("onShow")};u._$hide=function(){this.__hideCnt()};u.__hideCnt=function(t){e._$addClassName(this.__body,"f-dn");this._$dispatchEvent("onHide")};u.__selectItem=function(t){i._$stop(t);if("m-set-emoji"==t.target.className){var n=i._$getElement(t,"d:id");if(!n)return;var s=e._$dataset(n,"id");if(!s){this._$dispatchEvent("del");return}var a={id:e._$dataset(n,"id"),tag:e._$attr(n,"title"),src:e._$dataset(n,"img")};a.html=f._$getImgHTML(a);this._$dispatchEvent("onSelect",a)}if("I"==t.target.tagName){var n=i._$getElement(t,"d:id");if(!n)return;var s=e._$dataset(n,"id");if(!s){this._$dispatchEvent("del");return}var a={id:e._$dataset(n,"id"),tag:e._$attr(n,"title"),src:e._$dataset(n,"src")};a.html=f._$getImgHTML(a);this._$dispatchEvent("onSelect",a)}if(this.__isRepairIosCover){var o=document.body;o.scrollTop=2*o.scrollHeight;if(this.__isiOS()&&1===this.__judgeOrientation())setTimeout(function(){o.scrollTop-=45},100)}};u._$page=function(t){var e=l.nowPage+(t||0);if(!(e<0||e>this.__allPage)){l.nowPage=e;this.__nowPage=e;var i=e*this.__width;this.__move(0-i);this.__setPageShow(e)}};u._$scrollTab=function(t){var i=this.__width;if(i<=300){var n=e._$getByClassName(this.__body,"protrait_header_tab")[0];if(t>0)e._$style(n,{"margin-left":0-i+"px","-webkit-overflow-scrolling":"touch"});else e._$style(n,{"margin-left":"0","-webkit-overflow-scrolling":"touch"})}};u.__setAllPage=function(t){if("init"==t){var e;if(!l.defaultEmojiStatus)if(!l.newWebTrade){if(l.emojiLists[0]&&l.emojiLists[0].emojiList){if(2==l.emojiLists[0].emojiType){l.row=this.__row;l.col=this.__col}else{l.row=2;l.col=5;this.__IffristGIf=!0}e=l.row*l.col;this.__allPage=Math.ceil(l.emojiLists[0].emojiList.length/e)-1}}else{l.row=this.__row;l.col=this.__col;e=l.row*l.col;this.__allPage=Math.ceil(l.plist.length/e)-1}else{l.row=this.__row;l.col=this.__col;e=l.row*l.col;this.__allPage=Math.ceil(l.plist.length/e)-1}}};u.__setPortraitList=function(t){this.__portraitLists=e._$getByClassName(this.__body,"portrait_list");this.__portraitLists.forEach(function(i,n){if(t!=n)e._$addClassName(i,"f-dn");else e._$delClassName(i,"f-dn")})};u.__render=function(){this.__setAllPage("init");a._$render(this.__cnt,this.__seed_list,l);a._$render(this.__pageCnt,this.__seed_page,{all:this.__allPage,now:this.__nowPage});a._$render(this.__tabCnt,this.__seed_tab,l);this.__defaultFace=e._$getByClassName(this.__body,"protrait_header_tab")[0];e._$addClassName(this.__defaultFace,"tab_active");this.__setPortraitList(0);this._$page()};u.__move=function(t){var i=e._$getByClassName(this.__body,"j-list");var n;for(var s=0;s<i.length;s++)if(!e._$hasClassName(i[s],"f-dn"))n=i[s];if(n)e._$style(n,{left:t+"px"})};u._$getData=function(){return l};f._$portrait2text=function(t){var i=document.createElement("div");i.innerHTML=t;var n=i.getElementsByTagName("img");for(var s=n.length-1;s>=0;s--){var a=n[s];var o=e._$attr(a,"title");var r=document.createTextNode(o);i.replaceChild(r,a)}return i.innerHTML};f._$text2portrait=function(){var t=/(\[[^\]]+\])/gi;return function(e){var i=l.pmap;var n=l.pmap2;e=e.replace(t,function(t,e){if(n[e]){var s=f._$getImgHTML({id:n[e],tag:e,src:h+i[n[e]].file});return s}else if(l.mapEmojiLists&&l.mapEmojiLists.length){var a;for(var o=0;o<l.mapEmojiLists.length;o++)if(l.mapEmojiLists[o].tag==e)a=l.mapEmojiLists[o];if(a)if(a.tag==e){var s=f._$getImgHTML({id:e,tag:e,src:a.url});return s}else return e;else return e}else return e});return e}}();f._$getImgHTML=function(t){var e='<img class="portrait_icon" data-id="'+t.id+'" src="'+t.src+'" title="'+t.tag+'" alt="'+t.tag+'">';return e};u.__judgeOrientation=function(){if(180==window.orientation||0==window.orientation)return 1;else if(90==window.orientation||window.orientation==-90)return 2;return 0};u.__isiOS=function(){var t=window.navigator.userAgent.toLowerCase();return/(iphone|ios|mini|ipod|ipad)/gi.test(t)};u.__getWidth=function(){var t=this.__width;var i=document.documentElement.clientWidth||window.innerWidth||window.screen.width||document.body.clientWidth;if(!i){var n=e._$getChildren(document.body)[0];i=n.clientWidth}return i||300}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","8fe733a225a830dc6b1da5866dcaf23c","35df4ef4567b6cd0275a1b849d2bea8c","3d26a747034790a096b7178e1dd6f802","ccb6b7d0ce45c3548151b739858e96c8","e5b683479b3092543101f3aefac9e20f","c40b8b3f75a721d496905d04f6f9a735");I$("4dc59da3f39f68309baa4598da7b7279",'<div class="audio-toast" r-hide={!visibility}>\n    <div class="audio-icon-box">\n        {#if !count || type == \'move\' }\n            <i class="iconfont u-icon-font audio-icon {icon}"></i>\n        {#else}\n            <span class="down-count">{count}</span>\n        {/if}\n    </div>\n    <div class="audio-text">{text}</div>\n</div>');I$("63b76cce412b0d2087fbefc0249750a7",function(t,e,i,n,s,a,o){var r=t.Component;this.timer=null;AudioToast=r.extend({name:"audio-toast",template:a,config:function(t){e._$extend(t,{visibility:!1,text:"",icon:"",count:0})},init:function(){this.supr();if(this.$root===this)this.$inject(document.body)},setContent:function(t){this.$update();this.data.visibility=!0;this.data.text=t.text;this.data.icon=t.icon;this.data.type=t.type;var e=this;if(t.startTime){this.data.startTime=t.startTime;clearInterval(this.timer);var i=60;var e=this;this.timer=setInterval(function(){if(i>0){i-=1;if(i<11){e.data.count=i;e.$update();console.log("count---",i)}}else clearInterval(e.timer)},1e3)}this.$update();if(t.disappearTime){if(this.disappearTime)clearTimeout(e.disappearTime);this.disappearTime=setTimeout(function(){this.close()}._$bind(this),t.disappearTime)}},close:function(){this.data.visibility=!1;this.data.count=0;clearInterval(this.timer);this.$update()},destroy:function(){this.supr()}});return AudioToast},"fe686268a0af212baea04fc64f0059e8","3e346f2b6313e57a75f5ee9b603c4b65","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","35df4ef4567b6cd0275a1b849d2bea8c","4dc59da3f39f68309baa4598da7b7279");I$("283ed3a121fa5fc91dbb0fa762b039b5",'<label class="camera-photo action-box" ref="imgbtn" r-style={{width: width}}>\n    <!-- <i class="iconfont u-icon-font icon-camera font-size click-no-hidden"></i> -->\n    <div class="action-content" >\n            <img src={(data.imgUrl)|| \'https://qiyukf.nosdn.127.net/sdk/res/img/take_photo@3x_d80cb85b73bde58040545a8332443883.png\'}/>\n            <form class="form j-form click-no-hidden" ref="imgform"></form>\n            <span class="action-tilte">{data.label}</span>\n    </div>\n    \n</label>\n<!-- <div class="action-box" ref="imgbtn">\n    <img src={imgurl || "/res/img/photo@3x.png"}/>\n    <span class="action-tilte">{label}</span>\n    <form class="form j-form click-no-hidden" ref="imgform"></form>\n</div> -->\n    \n    ');I$("3ec2f107368809ca84232ae7eb2381ea",function(t,e,i,n,s,a,o,r,_,d){return s.Component.extend({template:o,name:"camera-photo",config:function(t){this.supr()},init:function(){this.supr();this.__btn=t._$get(this.btn);this.__iopt={btn:this.$refs["imgbtn"],form:this.$refs["imgform"],accept:"image/*",onchange:this.onImageSelect._$bind(this)};if(this.__selbind){a._$unbind(this.__selbind);delete this.__selbind}this.__selbind=a._$bind(this.$refs["imgbtn"],this.__iopt)},onImageSelect:function(t){this.$emit("imageChange",t);this.$refs["imgform"].reset()}})},"5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","3e346f2b6313e57a75f5ee9b603c4b65","fe686268a0af212baea04fc64f0059e8","9733787c25ceca396cb6e8dcce07ee63","283ed3a121fa5fc91dbb0fa762b039b5","35df4ef4567b6cd0275a1b849d2bea8c");I$("c00a3f4ea27caf469ebe44b7abbc5879",'<label class="videobtm action-box" ref="videobtn" r-style={{width: width}}>\n        <!-- <i class="iconfont u-icon-font icon-vcr font-size click-no-hidden"></i> -->\n        <div class="action-content">\n                <img src={(data.imgUrl) || \'https://qiyukf.nosdn.127.net/sdk/res/img/take_video@3x_4882a75ec26a9dbcf00730463cc5c79e.png\'}/>\n                <span class="action-tilte">{data.label}</span>\n                <form class="form j-form click-no-hidden" ref="videoform"></form>\n        </div>\n</label>\n    \n    ');
I$("2df8c6119887cf2df75c3f599753c463",function(t,e,i,n,s,a,o,r,_,d){return s.Component.extend({template:o,name:"camera-video",config:function(t){n._$extend(t,{label:"视频"});this.supr()},init:function(){this.supr();this.__ioptVideo={btn:this.$refs["videobtn"],form:this.$refs["videoform"],accept:"video/*",onchange:this.onVideoSelect._$bind(this)};if(this.__selVideobind){a._$unbind(this.__selVideobind);delete this.__selbind}this.__selVideobind=a._$bind(this.$refs["videobtn"],this.__ioptVideo)},onVideoSelect:function(t){this.$emit("videoChange",t);this.$refs["videoform"].reset()}})},"5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","3e346f2b6313e57a75f5ee9b603c4b65","fe686268a0af212baea04fc64f0059e8","9733787c25ceca396cb6e8dcce07ee63","c00a3f4ea27caf469ebe44b7abbc5879","35df4ef4567b6cd0275a1b849d2bea8c");I$("188c9549fb1454566f79e416b674c713",'<textarea name="ntp" id="#<mdlBody>">\n<div class="m-modal">\n    <div class="modal_dialog">\n        <div class="modal_hd" style="display:none;">\n            <h3 class="modal_title j-flag"></h3>\n        </div>\n        <div class="modal_bd">\n            <h3 class="message j-flag"></h3>\n        </div>\n        <div class="modal_ft j-flag-btn">\n            <button class="u-btn ok j-flag">确定</button>\n            <button class="u-btn u-btn-cancel cancel j-flag">取消</button>\n        </div>\n    </div>\n</div>\n</textarea>\n');I$("972fe5ebc7a7940b3c06cefa017b585c",function(t,e,i,n,s,a,o,r,_){r._$$Modal=t._$klass();_=r._$$Modal._$extend(s._$$Abstract);_.__init=function(t){this.__btnopt={btnOK:{value:"确定"},btnCC:{value:"取消"}};this.__super(t)};_.__reset=function(t){this.__super(t);this.__doInitDomEvent([[this.__btnopt.btnOK.body,"click",this.__onOK._$bind(this)],[this.__btnopt.btnCC.body,"click",this.__onCC._$bind(this)]]);var i=t.label||{};this.__nttl.innerHTML=t.title||"标题";this.__ncnt.innerHTML=t.message||"内容";if("center"==t.style){e._$setStyle(this.__ncnt,"text-align","center");e._$setStyle(this.__nbtn,"text-align","center")}n._$forIn(this.__btnopt,function(i,n){var s=t[n]||{};if(s.hidden)e._$addClassName(i.body,"f-dn");else{i.body.disabled=!1;e._$delClassName(i.body,"f-dn");i.body.innerHTML=s.label||i.value}});this.__btnopt.btnOK.body.focus()};_.__destroy=function(){this._$dispatchEvent("onbeforedestroy");this.__super()};_.__initXGui=function(){var t=a._$parseUITemplate(o);return function(){this.__seed_html=t.mdlBody}}();_.__initNode=function(){this.__super();var t=e._$getByClassName(this.__body,"j-flag");this.__nttl=t[0];this.__ncnt=t[1];this.__btnopt.btnOK.body=t[2];this.__btnopt.btnCC.body=t[3];this.__nbtn=e._$getByClassName(this.__body,"j-flag-btn")[0]};_.__onOK=function(t){var e={};this._$dispatchEvent("onok",e);if(e.stopped){if(e.disabled){this.__btnopt.btnOK.body.disabled=!0;this.__btnopt.btnCC.body.disabled=!0}}else this._$recycle()};_.__onCC=function(t){this._$dispatchEvent("oncc");this._$recycle()};var d,c={parent:document.body,onbeforedestroy:function(){d=null}};r._$alert=function(t){r._$hide();t.btnCC=n._$merge({hidden:!0},t.btnCC);d=r._$$Modal._$allocate(n._$merge({clazz:"m-modal-confirm"},c,t))};r._$confirm=function(t){r._$hide();d=r._$$Modal._$allocate(n._$merge({clazz:"m-modal-confirm"},c,t))};r._$hide=function(){if(d)d._$recycle()}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","188c9549fb1454566f79e416b674c713");I$("198423259e8879b83969e727848b3f79",'<div class="click-no-hidden editor-more-box" r-hide={hide} on-click={this.onClickEditorBox($event)}>\n    <div class="editor_more_cnt f-clr" ref="edtiorMoreCnt">\n        <div class="page f-clr" r-style={{left: scrollLeft}}>\n        {#list list as y}\n            <!--页开始-->\n                <div class="editor-content fl" r-style={{width: clientWidth + \'px\'}}>\n                    {#list y as x}\n                        {#if x.action == "take_photo"}\n                            <camera-photo data={x} width={width} on-imageChange={this.onImageChange($event)}></camera-photo>\n                        {#elseif x.action == "take_video"}\n                            <camera-video data={x} width={width} on-videoChange={this.onVideoChange($event)}></camera-video>\n                        {#else}\n                            <label class="action-box" r-style={{width: width}}>\n                                <div class="action-content">\n                                    {#if x.imgUrl}\n                                        <img src={x.imgUrl} on-click={this.selectAction(x)}/>\n                                    {#elseif x.action == "close_session"}\n                                        <img src="https://qiyukf.nosdn.127.net/sdk/res/img/close_session@3x_d88ca18af8c0b1a28930cf5f57fcd88a.png" on-click={this.selectAction(x)}/>\n                                    {#else}\n                                        <img src="https://qiyukf.nosdn.127.net/sdk/res/img/evaluate@3x_ea89c21887e0dd7d1670a037a969c16d.png" on-click={this.selectAction(x)}/>\n                                        <!-- <img src="/res/img/{x.action}@3x.png" on-click={this.selectAction(x)}/> -->\n                                    {/if}\n                                </div>\n                                <span class="action-tilte">{x.label}</span>\n                                \n                            </label>\n                        {/if}\n                    {/list}\n                </div>\n            <!-- {#if x.action == "selectOrPhoto"}\n                <camera-photo data={x} width={width} on-imageChange={this.onImageChange($event)}></camera-photo>\n            {#elseif x.action == "selectOrVideo"}\n                <camera-video data={x} width={width} on-videoChange={this.onVideoChange($event)}></camera-video>\n            {#else}\n                <label class="action-box" r-style={{width: width}} on-click={this.selectAction(x)}>\n                    <div class="action-content">\n                        <img src={x.imgurl || x.defaultImgUrl}/>\n                    </div>\n                    <span class="action-tilte">{x.label}</span>\n                    \n                </label>\n            {/if} -->\n            <!-- <span>{x.label}</span> -->\n        {/list}\n        </div>\n        \n    </div>\n    <div class="editor_more_cnt_btn">\n        <ul class="f-clr" r-style={{width: ((list.length +1)*22) + \'px\'}}>\n            {#list list as x}\n                <li class="page-item" r-class={{"active": x_index == nowPage}}>\n                    <div class="dot"></div>\n                </li>\n            {/list}\n        </ul>\n    </div>\n    \n</div>\n    ');I$("c5410e466fbfe92606cfa9864ef19c78",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h){var p={};return s.Component.extend({template:l,name:"editor-more",config:function(t){this.supr(t);n._$extend(t,{list:[],hide:!0,nowPage:0});this.data.list=this.initDefaultList(f._$copy(t.list));this.data.clientWidth=this.getWidth();this.data.width=this.data.clientWidth?this.data.clientWidth/4+"px":"";this.$on({actionListChange:this.cbActionListChange.bind(this)})},init:function(){this.supr();this.__btn=t._$get(this.btn);i._$addEvent(document,"click",this.hide._$bind(this));i._$addEvent(this.$refs["edtiorMoreCnt"],"touchmove",function(t){t.preventDefault()});touch.on(this.$refs["edtiorMoreCnt"],"swiperight",this.page._$bind(this,-1));touch.on(this.$refs["edtiorMoreCnt"],"swipeleft",this.page._$bind(this,1))},page:function(t){var e=this.data.nowPage+(t||0);if(!(e<0||e>=this.data.list.length)){this.data.nowPage=e;var i=e*this.data.clientWidth;this.move(0-i)}},move:function(t){this.data.scrollLeft=t+"px";this.$update()},selectItem:function(t){this.data.tt=this.data.list[t];this.onselectItem()},onImageSelect:function(t){this.onsubmitImg(t)},onVideoSelect:function(t){this.onsubmitVideo(t)},formReset:function(){},isShowEditorMore:function(){this.data.hide?this.show():this.hide();this.$update()},onImageChange:function(t){this.onsubmitImg(t)},onVideoChange:function(t){this.onsubmitVideo(t)},cbActionListChange:function(t){this.data.list=this.initDefaultList(t);this.$update()},initDefaultList:function(t){var e=[];for(var i=0;i<t.length;i+=8)e.push(t.slice(i,i+8));return e},hide:function(){this.data.hide=!0;t._$delClassName(this.__btn,"img_video_btn_transform");this.onHide();this.$update()},show:function(e){this.data.hide=!1;t._$addClassName(this.__btn,"img_video_btn_transform");this.onShow();this.$update()},selectAction:function(t){switch(t.action){case"evaluate":d._$goEvaluate();break;case"close_session":var e=_._$getSessionByBid(_.SHOPID);if(!_._$canSendMessage(_.SHOPID)){d._$onshowtip("当前已经退出会话");return}c._$confirm({message:"确认退出对话？",style:"center",onok:function(){d._$sendFinishSession(_.SHOPID,{sessionId:e.id})}});break;case"open_link":i._$stop(event);window.open(t.data,"_blank");break;case"create_worksheet":var e=_._$getSessionByBid(_.SHOPID);if(e&&e["templateId-"+t.data]){d._$showWorksheet(e["templateId-"+t.data]);return}d._$getWorksheetInfo(_.SHOPID,{worksheetId:t.data})}},getWidth:function(){var e=this.__width;var i=document.documentElement.clientWidth||window.innerWidth||window.screen.width||document.body.clientWidth;if(!i){var n=t._$getChildren(document.body)[0];i=n.clientWidth}return i||300},onClickEditorBox:function(){},destroy:function(){this.supr()}})},"5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","3e346f2b6313e57a75f5ee9b603c4b65","fe686268a0af212baea04fc64f0059e8","9733787c25ceca396cb6e8dcce07ee63","3ec2f107368809ca84232ae7eb2381ea","2df8c6119887cf2df75c3f599753c463","aa835e6c54cfdee711ae8d0d1296fa57","d67add781b37b82c1816b8c159701e56","972fe5ebc7a7940b3c06cefa017b585c","198423259e8879b83969e727848b3f79","35df4ef4567b6cd0275a1b849d2bea8c");I$("9066fc40e81cf96e4a18f5bb3bed9086",'<textarea name="ntp" id="#<cnt>">\n    <div class="f-dn click-no-hidden">\n       <label class="imgbtn icon-box j-flag-img click-no-hidden">\n            <i class="iconfont u-icon-font icon-camera font-size click-no-hidden"></i>\n       </label>\n       <label class="videobtm icon-box j-flag-video click-no-hidden">\n            <i class="iconfont u-icon-font icon-vcr font-size click-no-hidden"></i>\n        </label>\n        <form class="form j-form click-no-hidden"></form>\n        <form class="form j-form click-no-hidden"></form>\n    </div>\n</textarea>');
I$("338dcdf62a06147627bacd5836a81cd8",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u){f._$$EditorMore=t._$klass();u=f._$$EditorMore._$extend(o._$$Abstract);u.__init=function(){this.__super()};u.__reset=function(t){this.__btn=e._$get(t.btn);this.__super(t);var i=!1;this.__iopt={btn:this.__nImg,form:this.__nForm,parent:this.__body,accept:"image/*",onchange:this.__onImageSelect._$bind(this)};if(this.__selbind){r._$unbind(this.__selbind);delete this.__selbind}this.__selbind=r._$bind(this.__iopt.btn,this.__iopt);this.__ioptVideo={btn:this.__nVideo,form:this.__nVideoForm,parent:this.__body,accept:"video/*",onchange:this.__onVideoSelect._$bind(this)};if(this.__selVideobind){r._$unbind(this.__selVideobind);delete this.__selbind}this.__selVideobind=r._$bind(this.__ioptVideo.btn,this.__ioptVideo);this.__doInitDomEvent([[this.__btn,"click",function(t){this.__onBtnClick(t)}._$bind(this)],[document,"click",this.__hideCnt._$bind(this)],[this.__body,"click",this.__selectItem._$bind(this)]])};u.__onImageSelect=function(t){this._$dispatchEvent("onsubmitImg",t)};u.__onVideoSelect=function(t){this._$dispatchEvent("onsubmitVideo",t)};u._$formReset=function(){this.__iopt.form.reset();this.__ioptVideo.form.reset()};u.__destroy=function(){this.__super()};u.__initXGui=function(){var t=s._$parseUITemplate(l);return function(){this.__seed_html=t.cnt}}();u.__initNode=function(){this.__super();this.__nImg=e._$getByClassName(this.__body,"j-flag-img")[0];this.__nVideo=e._$getByClassName(this.__body,"j-flag-video")[0];this.__nForm=e._$getByClassName(this.__body,"j-form")[0];this.__nVideoForm=e._$getByClassName(this.__body,"j-form")[1]};u.__selectItem=function(t){};u.__onChooseImg=function(t){i._$stop(t)};u.__onBtnClick=function(t){e._$hasClassName(this.__body,"f-dn")?this.__showCnt(t):this.__hideCnt(t)};u.__showCnt=function(t){i._$stop(t);i._$dispatchEvent(document,"click");e._$delClassName(this.__body,"f-dn");e._$addClassName(this.__btn,"img_video_btn_transform");this._$dispatchEvent("onShow")};u._$hide=function(){this.__hideCnt()};u.__hideCnt=function(t){e._$addClassName(this.__body,"f-dn");e._$delClassName(this.__btn,"img_video_btn_transform");this._$dispatchEvent("onHide")}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","8fe733a225a830dc6b1da5866dcaf23c","9733787c25ceca396cb6e8dcce07ee63","35df4ef4567b6cd0275a1b849d2bea8c","3d26a747034790a096b7178e1dd6f802","ccb6b7d0ce45c3548151b739858e96c8","9066fc40e81cf96e4a18f5bb3bed9086");I$("c960e5f9bd8003d9098bc2006a28228f",'<textarea name="ntp" id="#<mEditorBody>">\n    <div class="editor_box j-flag f-show-input z-hide-label-switch-audio">\n        <label id="switch_audio_btn" class="switch_audiobtn switch_audio_img j-switch-audio">\n          <!--键盘图标-->\n          <i class="iconfont u-icon-font icon-chat-keyboard audio-btn-show"></i>\n          <!---语音图标-->\n          <i class="iconfont u-icon-font icon-chat-voice-btn input-btn-show"></i>\n        </label>\n        <div class="m-iptbox">\n          <div class="tips-message j-toast f-dn"></div>\n            <div class="input-portrait-box">\n              <textarea class="input-btn-show j-input" maxlength="4500"><&#47;textarea>\n                <div class="audio-btn audio-btn-show j-audio">按住 说话</div>\n                <label id="portrait_btn" class="imgbtn portrait_img_btn j-portrait input-btn-show" title="发送表情"><i class="iconfont u-icon-font icon-chat-portraitmobile"></i></label>\n            </div>\n          \n          <label class="imgbtn img_video_btn j-image-video editor_more_btn"><i class="iconfont u-icon-font icon-chat-more"></i></label>\n          <button class="u-btn sendbtn j-send">发送</button>\n          <form class="form j-form"></form>\n          <div class="disabled"></div>\n        </div>\n    </div>\n  </textarea>\n  \n  <textarea name="jst" id="#<mEditorToast>">\n    <i class ="u-icon u-icon-warning"></i>\n    <h4>${content}</h4>\n  </textarea>');I$("9b608793e095b569735c8658e1b43865",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h,p,m,g,b,v,$,y,x){y._$$YSFEditor=t._$klass();x=y._$$YSFEditor._$extend(s._$$Abstract);x.__init=function(t){this.__super(t);var i=this;this.startTime=0;this.endTime=0;this.postStart=0;this.postEnd=0;this.postMove=0;this.audioTime=0;this.timeOutEvent=0;this.touchendSubmit=!0;this.wxAppId;this.__autioToast=new g;if(h._$isWX()&&t.showAudio)m._$doRequest("/client/sendAudioByH5InWx/enabled",{method:"get",rest:!0,data:{k:window.setting.appkey},onload:function(t){if(t)i.__getWxConfig()},onerror:function(t){e._$addClassName(i.__body,"z-hide-label-switch-audio")}});e._$addClassName(i.__body,"z-hide-label-switch-audio")};x.__getWxConfig=function(){var t=this;m._$doRequest("/mnst/api/wx/js/config",{method:"get",rest:!0,data:{url:encodeURIComponent(location.href)},onload:function(i){t.wxAppId=i.appId;var n=!1;wx.config({debug:!1,appId:i.appId,timestamp:i.timestamp,nonceStr:i.nonceStr,signature:i.signature,jsApiList:["startRecord","stopRecord","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","onVoiceRecordEnd"]});wx.ready(function(){wx.checkJsApi({jsApiList:["startRecord"],success:function(i){if(i.checkResult.startRecord&&!n)e._$delClassName(t.__body,"z-hide-label-switch-audio")}})});wx.error(function(t){n=!0})}})};x.__reset=function(t){this.__super(t);if(t.hideImageSel)this.__hideImageSel();if(!t.showEmoji)e._$addClassName(this.__nPortrait,"f-dn");this.__showAudio=t.showAudio;this.__nInput.setAttribute("placeholder",t.inputPlaceholder);this.__isRepairIosCover=t.isRepairIosCover;this._isIOSWX=t._isIOSWX;this.__position={start:0,end:0};this.__inputComposition=!1;this.__iopt={btn:this.__nImage,form:this.__nForm,parent:this.__body,accept:"image/*",onchange:this.__onImageSelect._$bind(this)};if(this.__selbind){r._$unbind(this.__selbind);delete this.__selbind}this.__selbind=r._$bind(this.__iopt.btn,this.__iopt);this.__popt={clazz:"mobile_portrait",row:3,col:7,isRepairIosCover:t.isRepairIosCover,_isIOSWX:t._isIOSWX,parent:this.__body.parentNode,btn:this.__nPortrait,onSelect:this.__onPortraitSelect._$bind(this),onSendGIf:this.__onSendGif._$bind(this),onShow:function(){i._$dispatchEvent(window.document,"focus");this._$dispatchEvent("onshowPortrait")}._$bind(this),onHide:function(){this._$dispatchEvent("onhidePortrait")}._$bind(this)};if(t.editFrom)this.__popt.newWebTrade=!0;this.__portrait=f._$$Portrait._$allocate(this.__popt);this.__moreopt={data:{list:[{action:"selectOrPhoto",label:"照片"},{action:"selectOrVideo",label:"视频"}]},btn:this.__nImageVideo,onShow:function(){i._$dispatchEvent(window.document,"focus");this._$dispatchEvent("onshowEditorMore")}._$bind(this),onHide:function(){this._$dispatchEvent("onhideEditorMore")}._$bind(this),onsubmitImg:this.__onImageSelect._$bind(this),onsubmitVideo:this.__onVideoSelect._$bind(this)};e._$addClassName(this.__body,"z-hide-eidtor-more");this.__aopt={onselectItem:this.__onSelectRbItem._$bind(this)};this.__inputAssociation=new u(this.__aopt).$inject(this.__body.parentNode,"before");this.__initInput();this.__initEventListener();if(this.__isRepairIosCover)this.__compat();if(!this.__ccache){this.__ccache=c._$$Cache._$allocate({load_getCF:this.__getCFLists._$bind(this)});var n=window.setting.appkey;this.__ccache._$getCF({data:{appKey:n}})}};x.__getCFLists=function(t){this.__emojiLists=t;if(!this.__emojiLists.length){if(this.__popt.newWebTrade){this.__nPortrait=e._$getByClassName(this.__body,"j-portrait")[0];e._$addClassName(this.__nPortrait,"f-dn");this.portraitIsNull=!0}}else if(1==this.__emojiLists.length&&1!=this.__emojiLists[0].status&&this.__emojiLists[0].id==-1)if(this.__popt.newWebTrade){this.__nPortrait=e._$getByClassName(this.__body,"j-portrait")[0];e._$addClassName(this.__nPortrait,"f-dn");this.portraitIsNull=!0}};x.__destroy=function(){this.__super()};x.__initXGui=function(){var t=a._$parseUITemplate($);return function(){this.__seed_html=t.mEditorBody;this.__seed_toast=t.mEditorToast}}();x.__initNode=function(){this.__super();this.__nInput=e._$getByClassName(this.__body,"j-input")[0];this.__nPortrait=e._$getByClassName(this.__body,"j-portrait")[0];this.__nPortraitCnt=e._$getByClassName(document.body,"mobile_portrait")[0];this.__nImage=e._$getByClassName(this.__body,"j-image")[0];this.__nForm=e._$getByClassName(this.__body,"j-form")[0];this.__nSend=e._$getByClassName(this.__body,"j-send")[0];this.__nToast=e._$getByClassName(this.__body,"j-toast")[0];this.__nAudio=e._$getByClassName(this.__body,"j-audio")[0];this.__nswitchAudio=e._$getByClassName(this.__body,"j-switch-audio")[0];this.__nImageVideo=e._$getByClassName(this.__body,"j-image-video")[0]};x.__initInput=function(){this.__nInput.blur();this.__position={start:this.__nInput.selectionStart||0,end:this.__nInput.selectionEnd||0}};x.__initEventListener=function(){this.__doInitDomEvent([[this.__nSend,"click",this.__onSend._$bind(this)],[this.__nInput,"input",this.__onInput._$bind(this)],[this.__nInput,"focus",this.__onInputFocus._$bind(this)],[this.__nInput,"blur",this.__onInputBlur._$bind(this)],[this.__nInput,"compositionstart",this.__onCompositionStart._$bind(this)],[this.__nInput,"compositionend",this.__onCompositionEnd._$bind(this)],[this.__nAudio,"touchstart",this.__onAudioStart._$bind(this)],[this.__nAudio,"touchmove",this.__onAudioMove._$bind(this)],[this.__nAudio,"touchend",this.__onAudioEnd._$bind(this)],[this.__nAudio,"touchcancel",this.__onTouchCancel._$bind(this)],[this.__nswitchAudio,"click",this.__toggleSwitchAudio._$bind(this)],[p._$$Cache,"onhidenaudio",this.__onHidenAudioBtn._$bind(this)],[this.__nImageVideo,"click",this.__onClickEditorMore._$bind(this)],[p._$$Cache,"editmoresetting",this.__onEditmoreSetting._$bind(this)],[p._$$Cache,"onevaluate",this.__onEvaluate._$bind(this)],[p._$$Cache,"onsession",this.__onSession._$bind(this)]])};x.__onEvaluate=function(){var t=d._$getSessionByBid(d.SHOPID);this.__onEditmoreSetting({editMoreSetting:t.editmoresetting
})};x.__onSession=function(){this.__onEditmoreSetting()};x.__onImageSelect=function(){var t=function(t,e,i){var n=this,s=new Image;s.onload=function(){e.call(n,t)};s.onerror=function(){t.file=null;(i||e).call(n,t)};s.src=t.url};var i=function(t){if(!n._$isArray(t))this._$dispatchEvent("onsubmit",{type:"image",content:{url:t.url,file:t.file}});else n._$forEach(t,i,this)};return function(n){var s=e._$get(n.id),a={file:(s.files||[])[0]};if(!a.file)a.file=s;else if(a.file.type.indexOf("image")<0)a.file=null;else try{a.url=URL.createObjectURL(a.file)}catch(o){a.url="https://qiyukf.nosdn.127.net/sdk/res/img/defaultimg_900f3791e581f15954f4e79607680990.png"}if(a.url)t.call(this,a,i);else i.call(this,a)}}();x.__onVideoSelect=function(){var t=function(t,e,i){var n=this,s=new Image;s.onload=function(){e.call(n,t)};s.onerror=function(){t.file=null;(i||e).call(n,t)};s.src=t.url};var i=function(t){this._$dispatchEvent("onsubmit",{type:"video",content:{url:t.url,file:t.file}})};return function(t){var n=e._$get(t.id),s={file:(n.files||[])[0]};if(!s.file)s.file=n;else if(s.file.type.indexOf("video")<0)s.file=null;else try{s.url=URL.createObjectURL(s.file)}catch(a){s.url="https://qiyukf.nosdn.127.net/sdk/res/img/defaultimg_900f3791e581f15954f4e79607680990.png"}i.call(this,s)}}();x.__onPortraitSelect=function(t){var e=this.__nInput.value;var n=this.__position.start>=0?this.__position.start:e.length;var s=this.__position.end>=0?this.__position.end:e.length;e=e.substring(0,n)+t.tag+e.substr(s);this.__nInput.value=e;this.__nInput.setAttribute("readonly","readonly");this.__nInput.selectionEnd=s+t.tag.length||0;this.__nInput.selectionStart=s+t.tag.length||0;i._$dispatchEvent(this.__nInput,"blur");this.__nInput.removeAttribute("readonly");this.__enableSendBtn(!0)};x.__onSendGif=function(t){var e={};var i='<img src="'+t.src+'" title="'+t.name+'" width="'+t.Imgwidth+'" height="'+t.ImgHeight+'">';e=n._$merge(e,{type:"rich",content:i});this._$dispatchEvent("onsubmit",e)};x.__onSend=function(t){var e=this._$getContent();if(e){var i={type:"text",content:e};this._$dispatchEvent("onsubmit",i);this._$setContent("");this.__inputAssociation.hide();this.__enableSendBtn(!1)}};x.__onTouchCancel=function(t){t.preventDefault();clearTimeout(this.timeOutEvent);if("ios"==h._$isMobilePlatformType()){this.__nAudio.innerHTML="按住 说话";this.__autioToast.close();e._$delClassName(this.__nAudio,"audio-btn-touch");wx.stopRecord({success:function(t){e._$delClassName(this.__nAudio,"audio-btn-touch");this.__nAudio.innerHTML="按住 说话"}})}else this.__onAudioEnd(t)};x.__onAudioStart=function(t){t.preventDefault();var i=this;i.startTime=0;i.touchendSubmit=!0;var n=localStorage&&localStorage.getItem("rainAllowRecord");this.postStart=t.clientY||t.changedTouches[0]&&t.changedTouches[0].clientY;this.timeOutEvent=setTimeout(function(){if(n&&"true"==n){i.touchendSubmit=!0;i.__nAudio.innerHTML="松开 结束";e._$addClassName(i.__nAudio,"audio-btn-touch");wx.startRecord({success:function(){i.startTime=(new Date).getTime();i.__autioToast.setContent({text:"手指上滑，取消发送",icon:"icon-chat-voice",startTime:i.startTime});wx.onVoiceRecordEnd({complete:function(t){i.__autioToast.setContent({text:"说话时间超长",icon:"icon-caveat",disappearTime:1e3,type:"close"});i.__nAudio.innerHTML="按住 说话";e._$delClassName(i.__nAudio,"audio-btn-touch");var n=t.localId;i._$dispatchEvent("onsubmitwxaudio",{type:"audio",content:{localId:n,dur:6e4,wxAppId:i.wxAppId}});i.touchendSubmit=!1}})},cancel:function(){console.log("用户拒绝授权录音");i.touchendSubmit=!1}})}else{i.touchendSubmit=!1;wx.startRecord({success:function(){localStorage.setItem("rainAllowRecord","true");i.__autioToast.setContent({text:"无效录音，请重新录音",icon:"icon-caveat",disappearTime:3e3,type:"end"});wx.stopRecord()},cancel:function(){console.log("用户拒绝授权录音")}})}},500)};x.__onAudioMove=function(t){t.preventDefault();this.postMove=t.clientY||t.changedTouches[0]&&t.changedTouches[0].clientY;if(this.touchendSubmit)if(this.postStart-this.postMove>50)this.__autioToast.setContent({text:"松开手指，取消发送",icon:"icon-chat-cancel",type:"move"});else this.__autioToast.setContent({text:"手指上滑，取消发送",icon:"icon-chat-voice",type:"start"})};x.__onAudioEnd=function(t){t.preventDefault();var i=this;i.__autioToast.close();clearTimeout(this.timeOutEvent);this.postEnd=t.clientY||t.changedTouches[0]&&t.changedTouches[0].clientY;e._$delClassName(i.__nAudio,"audio-btn-touch");this.__nAudio.innerHTML="按住 说话";if(i.touchendSubmit){i.endTime=(new Date).getTime();i.audioTime=i.endTime-this.startTime;if(!(i.audioTime<1e3)&&i.startTime){i.__autioToast.close();wx.stopRecord({success:function(t){var n=t.localId;if(n&&i.postStart-i.postEnd<50){e._$delClassName(i.__nAudio,"audio-btn-touch");i.__nAudio.innerHTML="按住 说话";i._$dispatchEvent("onsubmitwxaudio",{type:"audio",content:{localId:n,dur:i.audioTime,wxAppId:i.wxAppId}})}}})}else{i.__autioToast.setContent({text:"说话时间太短",icon:"icon-caveat",disappearTime:1e3,type:"end"});wx.stopRecord({success:function(t){e._$delClassName(i.__nAudio,"audio-btn-touch");i.__nAudio.innerHTML="按住 说话"},fail:function(){wx.stopRecord({success:function(t){e._$delClassName(i.__nAudio,"audio-btn-touch");i.__nAudio.innerHTML="按住 说话"}})}})}}};x.__toggleSwitchAudio=function(){if(e._$hasClassName(this.__body,"f-show-input")){e._$addClassName(this.__body,"f-show-audio");e._$delClassName(this.__body,"f-show-input")}else{e._$addClassName(this.__body,"f-show-input");e._$delClassName(this.__body,"f-show-audio")}};x.__onHidenAudioBtn=function(){var t=this;m._$doRequest("/client/sendAudioByH5InWx/enabled",{method:"get",rest:!0,data:{k:window.setting.appkey},onload:function(i){if(!i){e._$addClassName(t.__body,"z-hide-label-switch-audio");e._$addClassName(t.__body,"f-show-input");e._$delClassName(t.__body,"f-show-audio")}},onerror:function(t){console.log(t)}})};x.__onSendMsg=function(t){var e={type:"text",content:t};this._$dispatchEvent("onsubmit",e);this._$setContent("");this.__inputAssociation.hide();this.__enableSendBtn(!1)};x.__onInput=function(t){var e=this.__nInput.value.trim();!this.__inputComposition&&this._$dispatchEvent("oninputChange",e);this.__inputAssociation.$emit("change",{inputcontent:e});this.__enableSendBtn(!!e)};x.__onInputFocus=function(t){window.parent.postMessage("pkg:"+JSON.stringify({category:"inputonfocus"}),"*")};x.__onInputBlur=function(t){this.__nInput.blur();this.__position={start:this.__nInput.selectionStart,end:this.__nInput.selectionEnd};window.parent.postMessage("pkg:"+JSON.stringify({category:"inputblur"}),"*");if(h._$isWX())if(this.__isRepairIosCover){var e=this.scrolltopBefor;var i=this._interval;setTimeout(function(){clearInterval(i);document.body.scrollTop=e},500)}};x.__onClickEditorMore=function(t){i._$stop(event);this.__comeditorMore.isShowEditorMore();this.__portrait&&this.__portrait._$hide()};x.__onEditmoreSetting=function(){var t=d._$getSessionByBid(d.SHOPID);var i=t.editmoresetting;if(i)if(!i||i.length){if(i&&i.length>=1){var n=h._$copy(i);for(var s=n.length-1;s>=0;s--){n[s].defaultImgUrl="/res/img/"+n[s].action+"@3x.png";if(!("evaluate"!=n[s].action||t.sessionStatus&&t.sessionStatus.initShowEvaluation))n.splice(s,1)}}e._$delClassName(this.__body,"z-hide-eidtor-more");if(this.__comeditorMore)this.__comeditorMore.$emit("actionListChange",n);else{this.__moreopt.data.list=n;this.__comeditorMore=new b(this.__moreopt).$inject(this.__body.parentNode)}}else{this.__comeditorMore&&this.__comeditorMore.hide();e._$addClassName(this.__body,"z-hide-eidtor-more");this.__comeditorMore&&this.__comeditorMore.destroy();this.__comeditorMore=null}};x.__onCompositionStart=function(t){this.__inputComposition=!0};x.__onCompositionEnd=function(t){this.__inputComposition=!1;var e=this._$getContent();!this.__inputComposition&&this._$dispatchEvent("oninputchange",e);this.__inputAssociation.$emit("change",{inputcontent:e})};x.__hideImageSel=function(){e._$addClassName(this.__nImage,"f-dn");e._$setStyle(this.__nSend,"display","inline-block")};x.__enableSendBtn=function(t){if(t){e._$addClassName(this.__body,"z-cansend");this.__nSend.disabled=!1}else{e._$delClassName(this.__body,"z-cansend");this.__nSend.disabled=!0}};x._$blur=function(){this.__nInput.blur()};x._$toast=function(t,e){if(t)this.__doShowToast(t,e);else this.__doHideToast()};x.__doShowToast=function(t,i){this.__nToast.innerHTML=o._$get(this.__seed_toast,{content:t||""});e._$delClassName(this.__nToast,"f-dn");this.__toastTimer=setTimeout(function(){this.__doHideToast()}._$bind(this),i||5e3)};x.__doHideToast=function(){if(this.__toastTimer)this.__toastTimer=clearTimeout(this.__toastTimer);e._$addClassName(this.__nToast,"f-dn")};x._$disable=function(t){t?e._$addClassName(this.__body,"z-dis"):e._$delClassName(this.__body,"z-dis");this.__portrait._$hide()};x._$toggleOpr=function(t){if(t)e._$addClassName(this.__body,"z-hide-label");else{e._$delClassName(this.__body,"z-hide-label");if(this.portraitIsNull){this.m_ipot=e._$getByClassName(this.__body,"m-iptbox")[0];e._$setStyle(this.m_ipot,"padding","8px 50px 8px 10px")}}};x._$getContent=function(){return this.__nInput.value.trim()};x._$setContent=function(t){this.__nInput.value=t;this._$dispatchEvent("oninputchange",t)};x._$reset=function(){this._$resetFile();this._$resetContent()};x._$resetFile=function(){};x._$resetContent=function(){this._$setContent("")};x._$clear=function(){this._$reset()};x._$renderInputAssociation=function(t){var e={qalist:t,inputcontent:this._$getContent().trim()};this.__inputAssociation.$emit("change",e);this.__inputAssociation.show()};x._$hideInputAssociation=function(){this.__inputAssociation.hide()};x.__compat=function(){function t(t,e){var e=e||500;if(s||t){var i=navigator.userAgent.toLowerCase();var n=i.match(/cpu iphone os (.*?) like mac os/);if(n)if(11==parseInt(n[1].replace(/_/g,".")))return;setTimeout(function(){document.body.scrollTop=document.body.scrollHeight+100;s=!1},e)}}var e=l._$system(),n=l._$browser();var s=!1;i._$addEvent(this.__nInput,"click",function(i){this._$dispatchEvent("onInputClick");if("ios"==e)switch(n){case"baidu":break;case"weixin":
case"qq":case"safari":case"uc":t(!0);break;case"chrome":case"360":case"firefox":t()}}._$bind(this));i._$addEvent(this.__nInput,"input",function(t){s=!0}._$bind(this));i._$addEvent(this.__nPortraitCnt,"click",function(t){s=!0}._$bind(this));i._$addEvent(this.__nPortrait,"click",function(t){this._$dispatchEvent("onPortraitBtnClick");s=!0}._$bind(this));i._$addEvent(this.__nImage,"click",function(t){this._$dispatchEvent("onImageSelectClick");this.__nInput.blur()}._$bind(this));i._$addEvent(this.__nSend,"click",function(t){if(""==this.__nInput.value){s=!0;this.__nInput.click()}}._$bind(this))};x.__onSelectRbItem=function(){var t=this.__inputAssociation.entryItem();this.__onSendMsg(t.value);this.__inputAssociation.hide()}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","9733787c25ceca396cb6e8dcce07ee63","b8c452dcf5e5dd56a4db87471ce5da65","aa835e6c54cfdee711ae8d0d1296fa57","ccb6b7d0ce45c3548151b739858e96c8","796541fce3af5a34aad5c5030fb1c9ba","3bbf9ea59cf40caebf198cb8d96a42e5","f2b46c0ee658f65c8607f9d898c02a66","35df4ef4567b6cd0275a1b849d2bea8c","e4a45dc3cf399bf73004ce111fd4b206","5140ae09a025d19918a0cbf9017878db","63b76cce412b0d2087fbefc0249750a7","c5410e466fbfe92606cfa9864ef19c78","338dcdf62a06147627bacd5836a81cd8","c960e5f9bd8003d9098bc2006a28228f");I$("a5d89c9f43ef9127c3199d542dd0c4d2",'<div class="video-modal" r-hide={!visibility}>\n        <div class="video-modal-dialog" r-class={{\'video-modal-enable\': draggable}} ref="container">\n                <div class="video-modal-body">\n                    <video\n                        class="video-box"\n                        src="{src}"\n                        controls\n                        ref="video"\n                        controlslist="nodownload"\n                        playsinline\n                        webkit-playsinline\n                    >\n                    </video>\n                </div>\n                \n            <div class="video-modal-close" on-click={this.close($event)}>\n                <i class="iconfont icon-close"></i>\n            </div>\n        </div>\n    \n</div>');I$("608a2155be0cf8b73e49149cfde9bb2d",function(t,e,i,n,s,a,o){var r=t.Component;o=r.extend({name:"video-modal",template:a,_startPoint:{x:void 0,y:void 0},_moved:{diffX:void 0,diffY:void 0},config:function(t){e._$extend(t,{visibility:!1,draggable:!0})},init:function(){this.supr();var t=this.$refs.container;if(this.$root===this)this.$inject(document.body);if(this.data.draggable){this._onMouseMove=this._onMouseMove._$bind(this);this._onMouseDown=this._onMouseDown._$bind(this);this._onMouseUp=this._onMouseUp._$bind(this);n._$addEvent(t,"mousedown",this._onMouseDown);n._$addEvent(t,"mouseup",this._onMouseUp)}},destroy:function(){this.supr()},open:function(t){this.$update();if("undefined"!=typeof t)this.replaceSrc(t);if(!this.data.visibility){this.data.visibility=!0;this.$update();var e=this.$refs.video;if(e&&e.paused)e.play()}},close:function(){if(this.data.visibility){this.data.visibility=!1;this.$update();var t=this.$refs.video;if(t&&!t.paused)t.pause()}},replaceSrc:function(t){if("ios"==s._$isMobilePlatformType())this.data.src=t+"&"+(new Date).getTime();else this.data.src=t;this.$update();return this},_onMouseDown:function(t){if(0==t.button){var e=this.$refs.container;this._startPoint.x=t.pageX;this._startPoint.y=t.pageY;this._moved.diffX=parseInt(i._$getStyle(e,"left"),10)||0;this._moved.diffY=parseInt(i._$getStyle(e,"top"),10)||0;n._$addEvent(document.body,"mousemove",this._onMouseMove)}},_onMouseMove:function(t){if(1&t.buttons)this.ignoredEvent(function(){var e=this._getDiff(t.pageX,t.pageY);this._updatePostion(e)}._$bind(this),30,"mouse-move");else n._$delEvent(document.body,"mousemove",this._onMouseMove)},_onMouseUp:function(t){if(0==t.button){delete this._startPoint.x;delete this._startPoint.y;n._$delEvent(document.body,"mousemove",this._onMouseMove)}},_getDiff:function(t,e){var i=this._startPoint;var n=this._moved;var s=n.diffX+t-i.x;var a=n.diffY+e-i.y;return{x:s,y:a}},_updatePostion:function(t){if(this.data.visibility){var e=this.$refs.container;if(!t)t={x:0,y:0};i._$style(e,{left:t.x+"px",top:t.y+"px"})}},_updatePostionByDirective:function(t){if(this.data.visibility){var e=this.data;e.dataX=t.x;e.dataY=t.y;this.$update()}},ignoredEvent:function(){var t={},e,i;return function(n,s,a){i=(new Date).getTime();a=a||"ignored event";e=t[a]?i-t[a]:i;if(e>s){t[a]=i;n()}}}()});return o},"fe686268a0af212baea04fc64f0059e8","3e346f2b6313e57a75f5ee9b603c4b65","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","35df4ef4567b6cd0275a1b849d2bea8c","a5d89c9f43ef9127c3199d542dd0c4d2");I$("e357f5fd8bf828b5275e76b289f423fa",'<textarea name="jst" id="chat-list">\n\t<!-- macro start -->\n\t<!-- 文件消息 -->\n\t{macro file(x)}\n\t{var expired = !!(new Date().getTime() > x.content.expire)}\n\t<div class="arrow"></div>\n\t<div class="file-wrap {if !!expired}z-expired{/if}">\n\t\t<div class="file-bd">\n\t\t\t<div class="file-left">\n\t\t\t\t<i class="u-icon-${x.content.name|spliceSuffix} icon"></i>\n\t\t\t</div>\n\t\t\t<div class="file-right">\n\t\t\t\t<div class="hd">\n\t\t\t\t\t<p class="name">${x.content.name}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="bd">\n\t\t\t\t\t{if !isLeft}\n\t\t\t\t\t{if x.state == 1}\n\t\t\t\t\t<span class="progress-size size">${x|fileProgressFormat}</span>\n\t\t\t\t\t<div class="progress-bar">\n\t\t\t\t\t\t{var width = x.progressObj ? x.progressObj.percentage / 100 * 78 : 0}\n\t\t\t\t\t\t<div class="inner" style="width: ${width + \'px\'}"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{if x.uploadObj}\n\t\t\t\t\t<i class="abort" data-action="abortFileTrans" data-id="${x.id}"></i>\n\t\t\t\t\t{/if}\n\t\t\t\t\t{else}\n\t\t\t\t\t<span class="size">${x.content.size|fileSizeFormat}</span>\n\t\t\t\t\t{if !!expired}\n\t\t\t\t\t<span class="info">已失效</span>\n\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\t\t\t\t\t{else}\n\t\t\t\t\t<span class="size">${x.content.size|fileSizeFormat}</span>\n\t\t\t\t\t{if !expired}\n\t\t\t\t\t<a class="download" data-action="download" data-url="${x.content.url}" data-name="${x.content.name}">下载</a>\n\t\t\t\t\t{else}\n\t\t\t\t\t<span class="info">已失效</span>\n\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="file-ft">\n\t\t\t{if x.state == -1}\n\t\t\t<span class="error">${x.error.message}</span>\n\t\t\t<a class="resend" data-action="resend" data-id="${x.id}">重试</a>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n\t{/macro}\n\t{macro video(x)}\n\t<div class="video-wrap" src="${x.content.url|escape}&vframe" data-action="openVideo" data-videosrc="${x.content.url|escape}" data-expired="${x.content.expire}">\n\t{if x.fromUser}\n\t\t{if x.state == 1}\n\t\t\t<img class="video-fist-img video" src="${x.content.url|escape}" alt="">\n\t\t\t<i class="iconfont u-icon-font icon-rotate ani-rotate icon-background"></i>\n\t\t{elseif x.state == -1}\n\t\t\t<img class="video-fist-img video" src="${x.content.url|escape}" alt="">\n\t\t\t<i class="iconfont u-icon-font icon-play"></i>\n\t\t{else}\n\t\t\t\t<!-- <div class="video-cover-top"></div> -->\n\t\t\t\t<img class="video-fist-img" src="${x.content.url|escape}&vframe" alt="">\n\t\t\t\t<span class="video-size">${x.content.size|fileSizeFormat}</span>\n\t\t\t\t<span class="video-time">${x.content.dur|formatDuring}</span>\n\t\t\t\t<i class="iconfont u-icon-font icon-play"></i>\n\t\t\t\t<div class="video-cover-bottom"></div>\n\t\t{/if}\n\t{else}\n\t\t\t<!-- <div class="video-cover-top"></div> -->\n\t\t\t<img class="video-fist-img" src="${x.content.url|escape}&vframe" alt="">\n\t\t\t<span class="video-size">${x.content.size|fileSizeFormat}</span>\n\t\t\t<span class="video-time">${x.content.dur|formatDuring}</span>\n\t\t\t<i class="iconfont u-icon-font icon-play"></i>\n\t\t\t<div class="video-cover-bottom"></div>\n\t{/if}\n</div>\n\n\t\n\t{/macro}\n\t<!-- bot消息 -->\n\t{macro bot(x, tpl)}\n\t  {var tpl = tpl || x.content.template}\n\t  <!-- 订单列表 -->\n\t  <div class="${tpl.id}">\n\t  {if tpl.id == "order_list"}\n\t  <div class="bot-bd">\n\t    <div class="tlt">${tpl.label|default:""|escape|filterHref}</div>\n\t    <ul class="list">\n\t      {list tpl.list as item}\n\t      <li class="item">\n\t        <div class="shop">\n\t        \t<div class="shop-inner">\n\t        \t\t<div class="shop-icon">\n\t\t          \t<i class="icon u-icon-shop"></i>\n\t        \t\t</div>\n\t\t          <span class="name" title="${item.s_name}">${item.s_name}</span>\n\t\t          <span class="status" title="${item.s_status}">${item.s_status}</span>\n\t        \t</div>\n\t        </div>\n\t        <ul class="inner-list">\n\t\t\t\t\t\t{list item.goods as good}\n\t\t\t\t\t\t\t{if good.p_url}\n\t\t\t\t\t\t\t<li class="good-item inner-item">\n\t\t\t\t\t\t\t\t\t<a href="${good.p_url}" target="_black">\n\t\t\t\t\t\t\t\t\t\t<div class="bd">\n\t\t\t\t\t\t\t\t\t\t\t<div class="bd-inner">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="left">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img class="img" src="${good.p_img}">\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="mid">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p class="name" title="${good.p_name}">${good.p_name}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p class="stock">${good.p_stock}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="right">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p class="money">${good.p_price}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p class="count">${good.p_count}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p class="status">${good.p_status}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{else}\n\t          \t<li class="good-item inner-item" data-action="selectOrderItem" data-sid="${x.sessionid || x.sid}" data-params="${good.params}" data-id="${x.id}" data-target="${good.target}" data-orderindex="${item_index}" data-goodindex="${good_index}" data-status="${good.p_status}" data-img="${good.p_img}" data-name="${good.p_name}" data-stock="${good.p_stock}" data-price="${good.p_price}" data-count="${good.p_count}">\n\t            <div class="bd">\n\t              <div class="bd-inner">\n\t\t              <div class="left">\n\t\t                <img class="img" src="${good.p_img}">\n\t\t              </div>\n\t\t              <div class="mid">\n\t\t                <p class="name" title="${good.p_name}">${good.p_name}</p>\n\t\t                <p class="stock">${good.p_stock}</p>\n\t\t              </div>\n\t\t              <div class="right">\n\t\t                <p class="money">${good.p_price}</p>\n\t\t                <p class="count">${good.p_count}</p>\n\t\t                <p class="status">${good.p_status}</p>\n\t\t              </div>\n\t              </div>\n\t            </div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{/if}\n\t          {/list}\n\t        </ul>\n\t      </li>\n\t      {/list}\n\t    </ul>\n\t    {if tpl.action}\n\t    <div class="ft" data-action="moreOrderList" data-sid="${x.sessionid || x.sid}" data-id="${x.id}">\n\t      <a>${tpl.action.label}</a>\n\t    </div>\n\t    {/if}\n\t  </div>\n\t  <!-- 单个商品 -->\n\t  {elseif tpl.id == "qiyu_template_goods"}\n\t  <div class="bot-bd">\n\t    <div class="good-item">\n\t      <div class="bd">\n\t      \t<div class="bd-inner">\n\t\t        <div class="left">\n\t\t          <img class="img" src="${tpl.p_img}">\n\t\t        </div>\n\t\t        <div class="mid">\n\t\t          <p class="name" title="${tpl.p_name}">${tpl.p_name}</p>\n\t\t          <p class="stock">${tpl.p_stock}</p>\n\t\t        </div>\n\t\t        <div class="right">\n\t\t          <p class="money">${tpl.p_price}</p>\n\t\t          <p class="count">${tpl.p_count}</p>\n\t\t          <p class="status">${tpl.p_status}</p>\n\t\t        </div>\n\t\t      </div>\n\t      \t</div>\n\t    </div>\n\t  </div>\n\t  <!-- 商品详情 -->\n\t  {elseif tpl.id == "order_detail"}\n\t  <div class="bot-bd">\n\t\t\t{if tpl.url}\n\t\t\t<a href="${tpl.url}" target="_blank">\n\t\t\t{/if}\n\t    <div class="tlt">${tpl.label|default:""|escape|filterHref}</div>\n\t    <ul class="list">\n\t      <li class="item">\n\t        <div class="item-tlt">\n\t          <i class="icon u-icon-status"></i>\n\t          <span>${tpl.status}</span>\n\t        </div>\n\t      </li>\n\t      <li class="item">\n\t        <div class="item-tlt">\n\t          <i class="icon u-icon-address"></i>\n\t          <span>${tpl.user_name}</span>\n\t        </div>\n\t        <ul class="inner-list">\n\t          <li class="inner-item">\n\t            <span>${tpl.address}</span>\n\t          </li>\n\t        </ul>\n\t      </li>\n\t      <li class="item">\n\t        <div class="item-tlt">\n\t          <i class="icon u-icon-date"></i>\n\t          <span>${tpl.orderNo}</span>\n\t        </div>\n\t        <ul class="inner-list">\n              {if tpl.date}\n\t          {list tpl.date as dateItem}\n\t          <li class="inner-item">\n\t            <span>${dateItem}</span>\n\t          </li>\n\t          {/list}\n              {/if}\n\t        </ul>\n\t      </li>\n\t\t\t</ul>\n\t\t\t{if tpl.url}\n\t\t\t</a>\n\t\t\t{/if}\n\t  </div>\n\t  <!-- 物流信息 -->\n\t  {elseif tpl.id == "order_logistic"}\n\t  <div class="bot-bd">\n\t    <div class="tlt">${tpl.label|default:""|escape|filterHref}</div>\n\t    <div class="info">${tpl.title.label}</div>\n\t    {if tpl.list}\n\t    <ul class="list">\n\t\t      {list tpl.list as item}\n\t\t      <li class="{if item_index==0}z-current{/if}">\n\t\t        <div class="left">\n\t\t          <span class="dot"></span>\n\t\t        </div>\n\t\t        <div class="right">\n\t\t          <p class="content">${item.logistic}</p>\n\t\t          <p class="time">${item.timestamp}</p>\n\t\t        </div>\n\t\t      </li>\n\t\t      {/list}\n\t    </ul>\n      {else}\n      <div class="info">暂无物流信息</div>\n      {/if}\n\t    {if tpl.action}\n\t    <div class="ft">\n\t      <a href="${tpl.action.target}" target="_blank">${tpl.action.p_name}</a>\n\t    </div>\n\t    {/if}\n\t  </div>\n\t  <!-- 订单可选操作 -->\n\t  {elseif tpl.id == "order_status"}\n\t  <div class="bot-bd">\n\t    <div class="tlt">${tpl.label|default:""|escape|filterHref}</div>\n\t    <div class="info">${tpl.title}</div>\n\t    <ul class="list">\n\t      {list tpl.list as item}\n\t      <li class="item">\n\t\t\t\t\t{if item.type=="url"}\n\t\t\t\t\t\t<a href="${item.target}" target="_blank"><button type="button" class="service-action">${item.valid_operation}</button></a>\n\t\t\t\t\t{else}\n\t\t        <button type="button" class="service-action" data-action="clickBotBlock" data-target="${item.target}" data-params="${item.params}" data-label="${item.valid_operation}">${item.valid_operation}</button>\n\t\t\t\t\t{/if}\n\t      </li>\n\t      {/list}\n\t    </ul>\n\t  </div>\n\t  <!-- 退款信息 -->\n\t  {elseif tpl.id == "refund_detail"}\n\t  <div class="bot-bd">\n\t    <div class="tlt">${tpl.label|default:""|escape|filterHref}</div>\n\t    <div class="bd">\n\t      <div class="state state-${tpl.state.type}">\n\t        <i class="icon u-icon-${tpl.state.type}"></i>\n\t        <span>${tpl.state.name}</span>\n\t      </div>\n\t      <ul class="list">\n\t        {list tpl.list as item}\n\t        <li class="item">\n\t          <p>${item}</p>\n\t        </li>\n\t        {/list}\n\t      </ul>\n\t    </div>\n\t  </div>\n\t  <!-- 服务 -->\n\t  {elseif tpl.id == "action_list"}\n\t  <div class="bot-bd">\n\t    <div class="tlt">${tpl.label|default:""|escape|filterHref}</div>\n\t    <ul class="list">\n\t      {list tpl.list as item}\n\t      <li class="item">\n\t        {if item.type == "url"}\n\t        <a class="service-action" href="${item.target}" target="_blank">${item.p_name}</a>\n\t        {else}\n\t        <button type="button" class="service-action" data-action="clickBotBlock" data-target="${item.target}" data-params="${item.params}" data-label="${item.p_name}">${item.p_name}</button>\n\t        {/if}\n\t      </li>\n\t      {/list}\n\t    </ul>\n\t  </div>\n\t  <!-- 活动推广 -->\n\t  {elseif tpl.id == "active_page"}\n\t  <div class="bot-bd">\n\t    <img src="${tpl.img}" alt="">\n\t    <p class="content">${tpl.content}</p>\n\t    {if tpl.action}\n\t    <div class="active-action">\n\t      <a href="${tpl.action.url}" target="_blank">${tpl.action.label}</a>\n\t    </div>\n\t    {/if}\n\t  </div>\n\t  <!-- 提示信息 -->\n\t  {elseif tpl.id == "error_msg"}\n\t  <div class="bot-bd">\n\t    <p data-action="richContentDelegate" data-msgid="${x.id}">\n\t      ${tpl.label}\n\t    </p>\n\t  </div>\n\t  <!-- 表单 -->\n\t  {elseif tpl.id == "bot_form"}\n\t  <div class="bot-bd">\n\t    <p data-action="richContentDelegate">\n\t      ${tpl.label}\n\t    </p>\n\t  </div>\n\t  {if !tpl.submitted}\n\t  <div class="bot-ft">\n\t    <div class="bot-form-action" data-action="showBotForm" data-id="${x.id}" data-sid="${x.sessionid || x.sid}">\n\t      <span>填写表单</span>\n\t    </div>\n\t  </div>\n\t  {/if}\n\t  <!-- 表单结果 -->\n\t  {elseif tpl.id == "qiyu_template_botForm"}\n\t  <div class="bot-bd">\n\t    <ul class="list">\n\t      {list tpl.forms as item}\n\t        <li class="item">\n\t          <label>${item.label}</label>\n\t          {if item.value}\n\t          {if item.type == "image"}\n\t          <div class="preview" data-group="ysf" data-action="picHref" data-href=${item.value.url}>\n\t            <div class="left">\n\t              <i class="cover"></i>\n\t            </div>\n\t            <div class="right">\n\t              <div title="${item.value.name}" class="name">${item.value.name}</div>\n\t              <div class="size">${item.value.size|fileSizeFormat}</div>\n\t            </div>\n\t          </div>\n\t          {else}\n\t          <p>${item.value}</p>\n\t          {/if}\n\t          {/if}\n\t        </li>\n\t      {/list}\n\t    </ul>\n\t  </div>\n\t  <!-- 通用，图片+文本+按钮 -->\n\t  {elseif tpl.id == "static_union"}\n\t  <div class="bot-bd">\n\t    <ul class="list">\n\t      {list tpl.unions as item}\n\t      <li class="item item_${item.type}">\n\t        {var detail = item.detail}\n\t        {if item.type == "image"}\n\t        <img  data-group="ysf" data-action="picHref" data-href="${detail.url}" data-size="${detail.size}" data-height="${detail.h}" data-width="${detail.w}" data-origin="${detail.origin}" src="${detail.url}" alt="">\n\t        {elseif item.type == "text"}\n\t        <p class="content">${detail.label|escape}</p>\n\t        {elseif item.type == "link"}\n\t          <div class="link">\n\t            {if detail.type == "block"}\n\t            <button type="button" data-action="clickBotBlock" data-target="${detail.target}" data-params="${detail.params}" data-label="${detail.label}">${detail.label}</button>\n\t            {elseif detail.type == "url"}\n\t            <a href="${detail.target}" target="_blank">${detail.label}</a>\n\t            {elseif detail.type == "tel"}\n\t            <a href="${detail.target}"  data-action="clickBotTel">${detail.label}</a>\n\t            {/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{elseif item.type == "richText"}\n\t\t\t\t\t\t<div class="bot-rich" data-action="richContentDelegate" data-msgid="${x.id}">${detail.label|default:""|text2portrait}</div>\n\t        {/if}\n\t      </li>\n\t      {/list}\n\t    </ul>\n\t  </div>\n\t  {elseif tpl.id == "card_layout"}\n\t    <div class="bot-bd">\n\t      <div class="tlt">${tpl.label|default:""|escape}</div>\n\t      <div class="bd m-card-layout">\n\t        <ul class="group-list">\n\t          {list tpl.list as group}\n\t            {if group.action.type == "block"}\n\t              <li class="group-item" data-action="selectBotCard" data-target="${group.action.target}" data-params="${group.action.params}" data-label="${group.action.label}" data-type="block">\n\t            {elseif group.action.type == "popup"}\n\t              <li class="group-item" data-action="selectBotCard" data-target="${group.action.target}" data-params="${group.action.params}" data-label="${group.action.label}" data-type="popup">\n\t            {elseif group.action.type == "url"}\n\t              <li class="group-item" data-action="openlink" href="${group.action.target}">\n\t            {else}\n\t              <li class="group-item">\n\t            {/if}\n\t                <ul class="tr-list">\n\t                  {list group.list as tr}\n\t                    <li class="tr-item">\n\t                      <ul class="td-list">\n\t                        {list tr as td}\n\t                          <li class="td-item" style="${td.style}">\n\t                            <div class="inner" style="${td.innerStyle}">\n\t                              {if td.type == "text"}\n\t                                <span>${td.value}</span>\n\t                              {elseif td.type == "image"}\n\t                                <img src="${td.value}" alt="">\n\t                              {else}\n\t                                <span>[暂不支持的消息类型]</span>\n\t                              {/if}\n\t                            </div>\n\t                          </li>\n\t                        {/list}\n\t                      </ul>\n\t                    </li>\n\t                  {/list}\n\t                </ul>\n\t              </li>\n\t          {/list}\n\t        </ul>\n\t      </div>\n\t      {if tpl.action}\n\t      <div class="ft">\n\t        {if tpl.action.type == "block"}\n\t          <a data-action="clickBotBlock" data-target="${tpl.action.target}" data-params="${tpl.action.params}" data-label="${tpl.action.label}">${tpl.action.label}</button>\n\t        {elseif tpl.action.type == "url"}\n\t          <a href="${tpl.action.target}" target="_blank">${tpl.action.label}</a>\n\t        {elseif tpl.action.type == "float"}\n\t\t\t  <a data-action="moreBotCardList" data-id="${x.id}">${tpl.action.label}</a>\n\t\t\t{elseif tpl.action.type == "popup"}\n\t\t\t<a data-action="moreBotCardList" data-id="${x.id}">${tpl.action.label}</a>\n\t        {/if}\n\t      </div>\n\t      {/if}\n\t    </div>\n\t  {elseif tpl.id == "detail_view"}\n\t    <div class="bot-bd">\n\t      <div class="bd m-card-layout">\n\t        <ul class="group-list">\n\t          <li class="group-item">\n\t            <ul class="tr-list">\n\t              {list tpl.thumbnail.list as tr}\n\t                <li class="tr-item">\n\t                  <ul class="td-list">\n\t                    {list tr as td}\n\t                      <li class="td-item" style="${td.style}">\n\t                        <div class="inner" style="${td.innerStyle}">\n\t                          {if td.type == "text"}\n\t                            <span>${td.value}</span>\n\t                          {elseif td.type == "image"}\n\t                            <img src="${td.value}" alt="">\n\t                          {else}\n\t                            <span>[暂不支持的消息类型]</span>\n\t                          {/if}\n\t                        </div>\n\t                      </li>\n\t                    {/list}\n\t                  </ul>\n\t                </li>\n\t              {/list}\n\t            </ul>\n\t          </li>\n\t        </ul>\n\t      </div>\n\t      {if tpl.thumbnail.action}\n\t      <div class="ft">\n\t        {if tpl.thumbnail.action.type == "block"}\n\t          <a data-action="clickBotBlock" data-target="${tpl.thumbnail.action.target}" data-params="${tpl.thumbnail.action.params}" data-label="${tpl.thumbnail.action.label}">${tpl.thumbnail.action.label}</button>\n\t        {elseif tpl.thumbnail.action.type == "url"}\n\t          <a href="${tpl.thumbnail.action.target}" target="_blank">${tpl.thumbnail.action.label}</a>\n\t        {else if tpl.thumbnail.action.type == "float"}\n\t          <a data-action="botCardDetail" data-id="${x.id}">${tpl.thumbnail.action.label}</a>\n\t        {/if}\n\t      </div>\n\t      {/if}\n\t\t\t</div>\n\n        <!-- v4.4,新增mix_reply模版-->\n        {elseif tpl.id == "mix_reply"}\n        <div class="qa-list">\n            <!--<div class="arrow"></div>-->\n             <div class="p">\n                <div class="qa_label" {if !(tpl.label && tpl.label.length>0)} style="display:none" {/if}>${tpl.label}</div>\n                <ul class="list">\n                    {list tpl.list as item}\n                    <li>\n                        <a data-action="mixReply" data-target="${item.target}" data-label="${item.label}" data-type="${item.type}" data-params="${item.params}">\n                            ${item.label}\n                        </a>\n                    </li>\n                    {/list}\n                </ul>\n             </div>\n        </div>\n\t\t<!-- 单选按钮列表 -->\n\t\t{elseif tpl.id == "radio_button"}\n\t\t<div class="bot-bd">\n\t\t\t<div class="tlt" data-action="richContentDelegate" data-msgid="${x.id}">${tpl.label|default:\'\'|text2portrait}</div>\n\t\t\t<ul class="list">\n\t\t\t\t{list tpl.list as item}\n\t\t\t\t<li class="item">\n\t\t\t\t\t<button type="button" class="service-action" data-action="clickBotBlock" data-label="${item.label}">${item.label}</button>\n\t\t\t\t</li>\n\t\t\t\t{/list}\n\t\t\t</ul>\n\t\t</div>\n\t\t<!-- 气泡节点列表 -->\n\t\t{elseif tpl.id == "bubble_node_list"}\n\t\t<div class="bot-bd">\n\t\t\t<div class="tlt">${tpl.label|default:""|escape|filterHref}</div>\n\t\t\t<div class="info">${tpl.title.label}</div>\n\t\t\t{if tpl.showList && tpl.showList.length}\n\t\t\t\t<ul class="list">\n\t\t\t\t\t{list tpl.showList as item}\n\t\t\t\t\t<li class="{if item.p_is_current == 1}z-current{/if}">\n\t\t\t\t\t\t<div class="left">\n\t\t\t\t\t\t\t<span class="dot"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="right">\n\t\t\t\t\t\t\t<p class="content">${item.p_title}</p>\n\t\t\t\t\t\t\t<p class="time">${item.p_desc}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t\t{/list}\n\t\t\t\t</ul>\n\t\t\t\t{if tpl.showList.length != tpl.list.length}\n\t\t\t\t<div class="ft">\n\t\t\t\t\t<a data-action="showMoreBotBubbleNode" data-msgid="${x.id}">查看更多</a>\n\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t{else}\n\t\t\t<div class="hint">${tpl.empty_list_hint}</div>\n\t\t\t{/if}\n\t\t</div>\n\t\t{elseif tpl.id == "bubble_list"}\n\t\t<div class="bot-bd">\n\t\t\t{if x.isSelectedBotItem}\n\t\t\t\t<div style="padding: 9px 12px;">${tpl.label|default:""|escape|filterHref}</div>\n\t\t\t{else}\n\t\t\t\t<div class="tlt">${tpl.label|default:""|escape|filterHref}</div>\n\t\t\t\t{var list = tpl.tabList[0].list}\n\t\t\t\t{var showList = tpl.tabList[0].showList}\n\t\t\t\t{if showList.length}\n\t\t\t\t\t<ul class="list">\n\t\t\t\t\t\t{list showList as item}\n\t\t\t\t\t\t{if item.p_item_type == 1}\n\t\t\t\t\t\t<li class="bubble-group-item">\n\t\t\t\t\t\t\t{if item.p_img}\n\t\t\t\t\t\t\t<img src="${item.p_img}" alt="">\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t<span class="group-title" title="${item.p_title}">${item.p_title}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{else}\n\t\t\t\t\t\t<li class="bubble-good-item" data-action="selectBotBubbleListItem" data-sid="${x.sessionid || x.sid}" data-msgid="${x.id}"\n\t\t\t\t\t\t\tdata-target="${item.target}" data-index="${item_index}">\n\t\t\t\t\t\t\t<div class="bd">\n\t\t\t\t\t\t\t\t{if item.p_img}\n\t\t\t\t\t\t\t\t<div class="left">\n\t\t\t\t\t\t\t\t\t<img class="img" src="${item.p_img}">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t<div class="right">\n\t\t\t\t\t\t\t\t\t<div class="top">\n\t\t\t\t\t\t\t\t\t\t<span class="title" title="${item.p_title}">${item.p_title}</span>\n\t\t\t\t\t\t\t\t\t\t{if item.p_attr_1 || item.p_attr_2}\n\t\t\t\t\t\t\t\t\t\t<div class="attr">\n\t\t\t\t\t\t\t\t\t\t\t<p class="attr1" title="${item.p_attr_1}">${item.p_attr_1 || \'\'}</p>\n\t\t\t\t\t\t\t\t\t\t\t<p class="attr2" title="${item.p_attr_2}">${item.p_attr_2 || \'\'}</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="bottom">\n\t\t\t\t\t\t\t\t\t\t<span class="sub_title" title="${item.p_sub_title}">${item.p_sub_title}</span>\n\t\t\t\t\t\t\t\t\t\t{if item.p_attr_3}\n\t\t\t\t\t\t\t\t\t\t<span class="attr3" title="${item.p_attr_3}">${item.p_attr_3 || \'\'}</span>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/list}\n\t\t\t\t\t</ul>\n\t\t\t\t\t{var action = tpl.tabList[0].action}\n\t\t\t\t\t{if action}\n\t\t\t\t\t<div class="ft" data-action="showBotDrawerModal" data-sid="${x.sessionid || x.sid}" data-rmsgid="${x.id}">\n\t\t\t\t\t\t<a>${action.label}</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{else}\n\t\t\t\t\t<div class="hint">${tpl.empty_list_hint}</div>\n\t\t\t\t{/if}\n\t\t\t{/if}\n\n\t\t</div>\n\t\t{elseif tpl.id == \'qiyu_template_item\'}\n\t\t<div class="bot-bd">\n\t\t\t<div class="bubble-good-item">\n\t\t\t\t<div class="bd">\n\t\t\t\t\t{if tpl.p_img}\n\t\t\t\t\t<div class="left">\n\t\t\t\t\t\t<img class="img" src="${tpl.p_img}">\n\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<div class="right">\n\t\t\t\t\t\t<div class="top">\n\t\t\t\t\t\t\t<span class="title" title="${tpl.p_title}">${tpl.p_title}</span>\n\t\t\t\t\t\t\t{if tpl.p_attr_1 || tpl.p_attr_2}\n\t\t\t\t\t\t\t<div class="attr">\n\t\t\t\t\t\t\t\t<p class="attr1" title="${tpl.p_attr_1}">${tpl.p_attr_1 || \'\'}</p>\n\t\t\t\t\t\t\t\t<p class="attr2" title="${tpl.p_attr_2}">${tpl.p_attr_2 || \'\'}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bottom">\n\t\t\t\t\t\t\t<span class="sub_title" title="${tpl.p_sub_title}">${tpl.p_sub_title}</span>\n\t\t\t\t\t\t\t{if tpl.p_attr_3}\n\t\t\t\t\t\t\t<span class="attr3" title="${tpl.p_attr_3}">${tpl.p_attr_3 || \'\'}</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{if !x.ishistory}\n\t\t\t\t\t<div class="ft" data-action="showBotDrawerModal" data-rmsgid="${x.content.relatedMsgId}">\n\t\t\t\t\t\t<a>重新选择</a>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t\t{elseif tpl.id == \'auto_worksheet\'}\n\t\t<div class="arrow"></div>\n\t\t<div class="worksheet-box" id="${x.id|seed}" data-bid="${x.bid}" data-id="${x.id}" data-action="richContentDelegate">\n\t\t\t<div class="comment_tlt">\n\t\t\t\t${tpl.label|default:"请点击以下按钮填写信息"}\n\t\t\t</div>\n\t\t\t<div class="btn-box">\n\t\t\t\t{if !tpl.submitted} <!--未提交过表单-->\n\t\t\t\t\t<button type="submit" class="u-btn u-btn-send j-flag" data-action="showWorksheet" data-sid="${x.sessionid}" data-mid="${x.id}">填写信息</button>\n\t\t\t\t{else}\n\t\t\t\t\t<button type="submit" class="u-btn u-btn-send j-flag u-btn-weak-disabled" data-sid="${x.sessionid}" data-mid="${x.id}">填写信息</button>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t\t{elseif tpl.id == \'ysf_template_auto_worksheet\'}\n\t\t\t<p class="default-content">信息已提交</p>\n\t  {else}\n\t\t<div class="bot-bd">\n\t\t\t<p class="default-content">${tpl.label|default:"未知消息类型"}</p>\n\t\t</div>\n\t  {/if}\n\t  </div>\n      <div class="arrow"></div>\n\t{/macro}\n\n\t<!-- 消息入口 -->\n\t{macro message(xlist, y, x, tpl)}\n\t{var type = x.type}\n\t<div id="${x.id|seed}" class="msg {if isLeft}msg_left{else}msg_right{/if} f-cb">\n\t\t{if xlist[y-1]}\n\t\t\t{if (y==0 || (x.time - xlist[y-1].time) >= (5*60*1000)) && !x.state}\n\t\t\t<div class="date">\n\t\t\t\t<span>${x.time|timeformat:(y==0?y:xlist[y-1].time)}</span>\n\t\t\t\t<div class="line"></div>\n\t\t\t</div>\n\t\t\t{/if}\n\t\t{/if}\n\t\t<div class="msg_main {if x.ext.auditResult}z-trashed{/if}">\n\t\t\t<i class="u-icon-avater">\n\t\t\t\t{if isLeft}\n\t\t\t\t\t{if x.kefu.isRobot}\n\t\t\t\t\t<img src="${x.kefu.iconurl|default:\'res/default/robot_portrait2x.png\'|imgclip}" alt="在线客服头像">\n\t\t\t\t\t{else}\n\t\t\t\t\t<img src="${x.kefu.iconurl|default:\'res/default/portrait2x.png\'|imgclip}" alt="在线客服头像">\n\t\t\t\t\t{/if}\n\t\t\t\t{else}\n\t\t\t\t\t<img src="${x.clientIconUrl|default:\'res/skin/default/ico-kefu@2x.png\'|imgclip}" alt="">\n\t\t\t\t{/if}\n\t\t\t\t</i>\n\t\t\t\t<div class="${type} msg_bubble\n\t\t\t\t{if x.type==\'rich\' && x.content.indexOf(\'<img\')==0} rich-customface {/if} \n\t\t\t\t{if x.type==\'bot\' && x.content && x.content.template}bot-${x.content.template.id}{/if} \n\t\t\t\t{if x.reallyType == \'video\' && ext.isMobile}video-file{/if} \n\t\t\t\t{if x.type == \'eval-show\' || x.type == \'finish\' ||  x.type == \'overtime\' || x.type == \'leavemsg\' || x.type == \'queue\'}rich{/if} \n\t\t\t\t{if x.type==\'bot\' && x.content && x.content.template && x.content.template.id == \'ysf_template_auto_worksheet\'}text{/if} \n\n\t\t\t\t" \n\t\t\t\t>\n\t\t\t\t\t{if type == \'image\'}\n\t\t\t\t\t<!-- 图片 -->\n\t\t\t\t\t<!-- <div class="arrow"></div> -->\n\t\t\t\t\t<img data-group="ysf" data-action="picHref" data-href="${x.content.url}" data-size="${x.content.size}" data-height="${x.content.h}" data-width="${x.content.w}" data-origin="${x.content.origin}" src="${x.content.url}" {if x.content.thumb}data-thumb="${x.content.thumb}" {/if} data-type="${x.content.ext}"/>\n\t\t\t\t\t{elseif type==\'audio\'}\n\t\t\t\t\t<!-- 音频 -->\n\t\t\t\t\t<div class="audio-wrap" data-action="audio" data-id="${x.id}" style="width:${x.content.dur|d2w}px;">\n\t\t\t\t\t\t<div class="arrow"></div>\n\t\t\t\t\t\t<!-- <i class="icon"></i> -->\n\t\t\t\t\t\t<div class="cricleplay">\n\t\t\t\t\t\t\t\t<div class="small"></div>\n\t\t\t\t\t\t\t\t<div class="middle stopanimate"></div>\n\t\t\t\t\t\t\t\t<div class="large stopanimate"></div>\n\t\t\t\t\t\t </div>\n\t\t\t\t\t\t<div class="length"><span>${x.content.dur|duration}</span></div>\n\t\t\t\t\t</div> \n\t\t\t\t\t{elseif type == \'file\'}\n\t\t\t\t\t<!-- 文件 -->\n\t\t\t\t\t\t<!--视频文件-->\n\t\t\t\t\t\t{if ext.isMobile}\n\t\t\t\t\t\t\t{if x.reallyType == \'video\'}\n\t\t\t\t\t\t\t\t${video(x)}\n\t\t\t\t\t\t\t{else}\n\t\t\t\t\t\t\t<div class="arrow"></div>\n\t\t\t\t\t\t\t<!-- <p>暂不支持该消息类型文件</p> -->\n\t\t\t\t\t\t\t<a href="${x.content.url}" target="_black">${x.content.name}</a>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{else}\n\t\t\t\t\t\t\t${file(x)}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{elseif type == \'video\'}\n\t\t\t\t\t\t${video(x)}\n\t\t\t\t\t{elseif type == \'text\'}\n\t\t\t\t\t<!-- 文本 -->\n\t\t\t\t\t<div class="arrow"></div>\n\t\t\t\t\t<p>${x.richContent|default:x.content|filterTagA|escapeWithoutSpace|complete|text2portrait|default:\'[空消息]\'}</p>\n\t\t\t\t\t{elseif type == \'qa\' || type == \'qa-list\'}\n\t\t\t\t\t\t{if type == \'qa-list\'}\n\t\t\t\t\t\t<!-- 机器人问题列表 -->\n\t\t\t\t\t\t<div class="arrow"></div>\n\t\t\t\t\t\t<div class="p">\n\t\t\t\t\t\t\t<div class="qa_label" data-action="richContentDelegate" data-msgid="${x.id}">${x.label|default:\'\'|filterLabel|filterHref|text2portrait}</div>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t{list x.list as qa}\n\t\t\t\t\t\t\t\t<li><a data-id="${qa.id}" data-msgidclient="${x.msgIdClient}" data-action="selRobot">${qa.question}</a></li>\n\t\t\t\t\t\t\t\t{/list}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{else}\n\t\t\t\t\t\t<!-- 机器人问题 -->\n\t\t\t\t\t\t<div class="arrow"></div>\n\t\t\t\t\t\t<div class="p">\n\t\t\t\t\t\t\t<div class="qa_label" data-action="richContentDelegate" data-msgid="${x.id}">${x.content|default:\'\'|filterLabel|filterHref|text2portrait}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{if x.evaluation && ext.permission[\'KNOWLEDGE_STATISTICS\']}\n\t\t\t\t\t\t<div class="qa_eval_wrapper msgid${x.id}">\n\t\t\t\t\t\t\t<div class="qa_eval">\n\t\t\t\t\t\t\t\t\t<div class="eval-up eval-robot-answer {if x.evaluation==2}z-sel{/if}" data-action="evalRobotAnswer" data-id="${x.id}" data-sid="${x.sessionid || x.sid}" data-evaluation="2" data-reason="${x.evaluation_reason}">\n\t\t\t\t\t\t\t\t\t\t<i class="icon-eval-up"></i>\n\t\t\t\t\t\t\t\t\t\t<span>有用</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="eval-down eval-robot-answer {if x.evaluation==3}z-sel{/if}" data-action="evalRobotAnswer" data-id="${x.id}" data-sid="${x.sessionid || x.sid}" data-idclient="${x.msgIdClient}" data-evaluation="3" data-reason="${x.evaluation_reason}">\n\t\t\t\t\t\t\t\t\t\t<i class="icon-eval-down"></i>\n\t\t\t\t\t\t\t\t\t\t<span>没用</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!-- 差评嵌入 -->\n\t\t\t\t\t\t\t{if x.evaluation_reason && x.evaluation==3}\n\t\t\t\t\t\t\t\t<div class="qa_eval_box">\n\t\t\t\t\t\t\t\t\t<div id="${x.id+\'content\'}" class="qa_eval_content {if !x.evalcontent}f-dn{/if} {if x.ishistory}history{/if}" data-action="changeEvalContent" data-id="${x.id}" data-sid="${x.sessionid || x.sid}" data-idclient="${x.msgIdClient}" data-evalcontent="${encodeURIComponent(x.evalcontent)}" data-evalguide="${encodeURIComponent(x.evaluation_guide)}">${x.evalcontent|escapeWithoutSpace|trim|text2portrait}</div>\n\t\t\t\t\t\t\t\t\t<div id="${x.id+\'guide\'}" data-id="${x.id}" data-sid="${x.sessionid || x.sid}" data-idclient="${x.msgIdClient}" class="qa_eval_guide {if (x.ishistory || x.evalcontent)}f-dn{/if}" data-evalguide="${encodeURIComponent(x.evaluation_guide)}" data-action="changeEvalContent">\n\t\t\t\t\t\t\t\t\t\t${x.evaluation_guide}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class="qa_eval_box_tips j-qa_eval_box_tips z-hidden">✓ 评价提交成功</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{elseif x.type == "bot"}\n\t\t\t\t<!-- bot消息 -->\n\t\t\t\t${bot(x, tpl)}\n\t\t\t\t{elseif type == \'productinfo\' && x.content.show == 1}\n\t\t\t\t\t<!-- 自定义商品链接 -->\n\t\t\t\t\t<div class="product-wrap product-${tpl|default:\'default\'}">\n\t\t\t\t\t\t{if x.content.url}\n\t\t\t\t\t\t<a class="pdLink" onclick="javascript:window.open(\'${x.content.url|urlFormat}\', \'_blank\'); return false;">{/if}\n\t\t\t\t\t\t<div class="arrow"></div>\n\t\t\t\t\t\t{if tpl == \'order\'}\n\t\t\t\t\t\t\t<div class="product_right">\n\t\t\t\t\t\t\t\t<img src="${x.content.picture|urlFormat}" height="80" width="80" alt="商品图片">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="product_left product_left_hasmark">\n\t\t\t\t\t\t\t\t<h2 class="tlt" title="${x.content.title|default:\'\'}">${x.content.title|default:\'\'}</h2>\n\t\t\t\t\t\t\t\t<p class="desc" title="${x.content.desc|default:\'\'}">${x.content.desc|default:\'\'}</p>\n\t\t\t\t\t\t\t\t<p class="note note-custom-msg" title="${x.content.note|default:\'\'}">\n\t\t\t\t\t\t\t\t\t<span class="tlt-sku">${x.content.orderSku|default:\'\'}</span>\n\t\t\t\t\t\t\t\t\t<span class="tlt-statu">${x.content.orderStatus|default:\'\'}</span>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="product_mark">\n\t\t\t\t\t\t\t\t{if x.content.payMoney}\n\t\t\t\t\t\t\t\t<h2 class="tlt-money">${x.content.payMoney}</h2>{/if} {if x.content.orderCount}\n\t\t\t\t\t\t\t\t<h2 class="tlt-count">${x.content.orderCount}</h2>{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{elseif tpl == "pictureLink"}\n\t\t\t\t\t\t\t<img src="${x.content.picture|urlFormat}" class="picture" alt="商品图片">\n\t\t\t\t\t\t{else}\n\t\t\t\t\t\t\t<div class="product_right">\n\t\t\t\t\t\t\t\t<img src="${x.content.picture|urlFormat}" height="80" width="80" alt="商品图片">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="product_left">\n\t\t\t\t\t\t\t\t<h2 class="tlt" title="${x.content.title|default:\'\'}">${x.content.title|default:\'\'}</h2>\n\t\t\t\t\t\t\t\t<p class="desc" title="${x.content.desc|default:\'\'}">${x.content.desc|default:\'\'}</p>\n\t\t\t\t\t\t\t\t<p class="note" title="${x.content.note|default:\'\'}">${x.content.note|default:\'\'}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{if x.content.url}</a>{/if} \n\t\t\t\t\t\t{if tpl == \'order\'}\n\t\t\t\t\t\t\t<div class="orderInfo">\n\t\t\t\t\t\t\t\t<span class="tlt-id">订单编号：${x.content.orderId}</span>\n\t\t\t\t\t\t\t\t{if x.content.orderTime}\n\t\t\t\t\t\t\t\t<span class="tlt-time">下单时间：${x.content.orderTime}</span>{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{if tpl != \'pictureLink\'}\n\t\t\t\t\t\t\t{if x.content.activity}\n\t\t\t\t\t\t\t\t<div class="activity">\n\t\t\t\t\t\t\t\t\t<a href="${x.content.activityHref}" class="activity_link" target="_blank">${x.content.activity}</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if} \n\t\t\t\t\t\t\t{if x.content.showCustomMsg} \n\t\t\t\t\t\t\t\t{if x.content && x.content.tags && x.content.tags.length}\n\t\t\t\t\t\t\t\t\t<div class="product-tags">\n\t\t\t\t\t\t\t\t\t\t{list x.content.tags as it}\n\t\t\t\t\t\t\t\t\t\t<a href="${it.url}" target="_blank" class="tags-link">${it.label}</a>\n\t\t\t\t\t\t\t\t\t\t{/list}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if} \n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{elseif x.type == "leaveInfo"}\n\t\t\t\t\t\t<div class="leaveInfo-wrap">\n\t\t\t\t\t\t\t<div class="arrow"></div>\n\t\t\t\t\t\t\t<div class="title">${x.content}</div>\n\t\t\t\t\t\t\t{list x.customFields as c}\n\t\t\t\t\t\t\t\t{if c.fieldValue}\n\t\t\t\t\t\t\t\t\t<div class="leaveInfo-item">\n\t\t\t\t\t\t\t\t\t\t<span class="u-label" title="${c.fieldName}">${c.fieldName}：</span>\n\t\t\t\t\t\t\t\t\t\t{if c.fieldId == -4}\n\t\t\t\t\t\t\t\t\t\t\t<span class="u-value">${c.fieldValue|attachsFormat}</span>\n\t\t\t\t\t\t\t\t\t\t{else}\n\t\t\t\t\t\t\t\t\t\t\t<span class="u-value">${c.fieldValue|escape}</span>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/list}\n\t\t\t\t\t</div>\n\t\t\t\t{elseif x.type == \'finish\'}\n\t\t\t\t<div class="arrow"></div>\n\t\t\t\t<div class="finish-box" id="${x.id|seed}" data-bid="${x.bid}" data-id="${x.id}" data-action="richContentDelegate">\n\t\t\t\t\t<div class="comment_tlt">\n\t\t\t\t\t\t${x.content|text2portrait}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="btn-box">\n\t\t\t\t\t\t\t<button type="submit" class="u-btn u-btn-send j-flag j-finish u-weak-btn" data-action="reconnect" data-bid="${x.bid}" data-id="${x.id}">重新连接</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{elseif x.type == \'queue\'}\n\t\t\t\t<div class="arrow"></div>\n\t\t\t\t<div class="comment_tlt">\n\t\t\t\t\t${x.content|text2portrait}\n\t\t\t\t</div>\n\t\t\t\t<div class="btn-box">\n\t\t\t\t\t{if x.quitQueueStu}\n\t\t\t\t\t\t<button type="submit" class="u-btn u-btn-send u-btn-weak-disabled" data-action="quitQueue" data-bid="${x.bid}" data-id="${x.id}">退出排队</button>\n\t\t\t\t\t{else}\n\t\t\t\t\t\t<button type="submit" class="u-btn u-btn-send u-weak-btn" data-action="quitQueue" data-bid="${x.bid}" data-id="${x.id}" data-sid="${x.sessionid}">退出排队</button>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t\t{elseif type == \'overtime\'}\n\t\t\t\t<div class="arrow"></div>\n\t\t\t\t<div id="${x.id|seed}" data-action="richContentDelegate">\n\t\t\t\t\t<h3>${x.content|text2portrait|escape}</h3>\n\t\t\t\t</div>\n\t\t\t\t{elseif type == \'leavemsg\'}\n\t\t\t\t<div class="arrow"></div>\n\t\t\t\t<div id="${x.id|seed}" data-action="richContentDelegate">\n\t\t\t\t\t<h3>${x.content|text2portrait}</h3>\n\t\t\t\t</div>\n\t\t\t\t\t<!-- 评价选择begin -->\n\t\t\t\t{elseif type==\'eval-show\'}\n\t\t\t\t<div class="arrow"></div>\n\t\t\t\t<div id="${x.id|seed}" class="" data-action="richContentDelegate">\n\t\t\t\t\t<!-- <div class="comment_box"> -->\n\t\t\t\t\t\t{if !!x.evaluated}\n\t\t\t\t\t\t\t\t{if !x.messageThanks}\n\t\t\t\t\t\t\t\t\t<div class="comment_cnt_img comment_tlt">${x.messageThanks|default:"你对我们的服务评价为："}<span class="bolder">${x.name}</span>。非常感谢！</div>\n\t\t\t\t\t\t\t\t\t{if x.enable_evaluation_muttimes}\n\t\t\t\t\t\t\t\t\t\t\t<div class="btn-box">\n\t\t\t\t\t\t\t\t\t\t\t\t{if x.btnUnDisabled}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="submit" class="u-btn u-btn-send j-flag u-btn-weak-disabled" >已评价</button>\n\t\t\t\t\t\t\t\t\t\t\t\t{else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="submit" class="u-btn u-btn-send j-flag u-weak-btn" data-action="modifyEval" data-sid="${x.sessionid}" data-mid="${x.id}" data-type="1">修改评价</button>\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{else}\n\t\t\t\t\t\t\t\t\t<div class="comment_cnt_img comment_tlt">\n\t\t\t\t\t\t\t\t\t\t${x.messageThanks}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{if x.enable_evaluation_muttimes}\n\t\t\t\t\t\t\t\t\t\t\t<div class="btn-box">\n\t\t\t\t\t\t\t\t\t\t\t\t{if x.btnUnDisabled}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="submit" class="u-btn u-btn-send j-flag u-btn-weak-disabled" >已评价</button>\n\t\t\t\t\t\t\t\t\t\t\t\t{else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="submit" class="u-btn u-btn-send j-flag u-weak-btn" data-action="modifyEval" data-sid="${x.sessionid}" data-mid="${x.id}" data-type="1">修改评价</button>\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{else}\n\t\t\t\t\t\t<div class="comment_tlt j-flagcomment">${x.messageInvite|default:"感谢您的咨询，请对我们的服务做出评价"|text2portrait}</div>\n\t\t\t\t\t\t\t<div class="btn-box">\n\t\t\t\t\t\t\t\t\t{if x.btnUnDisabled}\n\t\t\t\t\t\t\t\t\t\t<button type="submit" class="u-btn u-btn-send j-flag u-btn-weak-disabled" >已评价</button>\n\t\t\t\t\t\t\t\t\t{else}\n\t\t\t\t\t\t\t\t\t\t{if x.evaluationTimes}\n\t\t\t\t\t\t\t\t\t\t\t<button type="submit" class="u-btn u-btn-send j-flag u-weak-btn" data-action="modifyEval" data-sid="${x.sessionid}" data-mid="${x.id}" data-type="2">再次评价</button>\n\t\t\t\t\t\t\t\t\t\t{else}\n\t\t\t\t\t\t\t\t\t\t\t<button type="submit" class="u-btn u-btn-send j-flag" data-action="modifyEval" data-sid="${x.sessionid}" data-mid="${x.id}">评价</button>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t<!-- </div> -->\n\t\t\t\t</div>\t\n\t\t\t\t{elseif type == \'rich\'}\n\t\t\t\t<div class="arrow"></div>\n\t\t\t\t<div class="p" data-action="richContentDelegate" data-msgid="${x.id}">${x.content|default:\'\'|text2portrait}</div>\n\t\t\t\t{else}\n\t\t\t\t<div class="arrow"></div>\n\t\t\t\t<div class="default_content">未知消息类型</div>\n\t\t\t\t{/if}\n\t\t\t\t{if x.state === -1}\n\t\t\t\t<!-- 无网络情况下 ios通过设置background: url(/res/img/wrong.png)获取不到图片 -->\n\t\t\t\t\t{if ext.isIos}\n\t\t\t\t\t\t<i data-id="${x.id}" data-action="resend" class= "j-resend u-icon u-icon-failure iconfont icon-alert"></i>\n\t\t\t\t\t{else}\n\t\t\t\t\t\t<i data-id="${x.id}" data-action="resend" class= "j-resend u-icon u-icon-failure"></i>\n\t\t\t\t\t{/if}\n\t\t\t\t{elseif x.state === 1}\n\t\t\t\t\t{if ext.isIos}\n\t\t\t\t\t<i data-id="${x.id}" class= "j-resend u-icon u-icon-loading ani-rotate"></i>\n\t\t\t\t\t{else}\n\t\t\t\t\t\t<i data-id="${x.id}" class= "j-resend u-icon u-icon-loading"></i>\n\t\t\t\t\t{/if}\n\t\t\t\t\n\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<!-- transhwords -->\n\t\t\t{if x.ext && x.ext.auditResult==1 && !isLeft}\n\t\t\t\t<div class="trash-word">${x.ext|formatTrashWords}</div>\n\t\t\t{/if}\n\n\t\t\t{if x.readState && !x.kefu.isRobot && x.ext.auditResult!=1}\n\t\t\t<!-- readstate -->\n\t\t\t\t{if x.ishistory}\n\t\t\t\t\t{if x.read == 1}\n\t\t\t\t\t<span class="read-state">已读</span>\n\t\t\t\t\t{elseif x.read == 0}\n\t\t\t\t\t<span class="read-state un-read">未读</span>\n\t\t\t\t\t{/if}\n\t\t\t\t{else}\n\t\t\t\t\t{if !isLeft}\n\t\t\t\t\t\t{if x.read == 1}\n\t\t\t\t\t\t<span class="read-state">已读</span>\n\t\t\t\t\t\t{elseif x.read == 0}\n\t\t\t\t\t\t<span class="read-state un-read">未读</span>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t{/if}\n\t\t</div>\n\t{/macro}\n\n\t{list beg..end as y}\n\t{var x=xlist[y]}\n\t{var type = x.type}\n\t<!-- 评价选择end-->\n\t{if x.type == \'shunt\'}\n\t<!--访客分流 start-->\n\t<div class="msg msg_left f-cb j-sel-shunt {if x.disabled}u-shunt-disabled{/if}">\n\t\t<i class="u-icon-avater"><img src="${x.from.portrait|default:\'res/default/portrait2x.png\'|imgclip}" alt="在线客服头像"></i>\n\t\t<div class="qa-list" id="${x.id}">\n\t\t\t<div class="arrow"></div>\n\t\t\t<div class="p">\n\t\t\t\t<div class="qa_label">${x.label}</div>\n\t\t\t\t<ul>\n\t\t\t\t\t{list x.entries as entry}\n\t\t\t\t\t<li><a data-id="${entry.id}" data-mid="${x.id}" data-disabled="${x.disabled}" data-action="selShunt" data-type="${entry.type}" class="shunt_child" data-entryid="${entry.entryid}">${entry.label}</a></li>\n\t\t\t\t\t{/list}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t{elseif type == \'ainvalid\'}\n\n\t<!--访客分流 end -->\n\t<!-- 系统消息 start -->\n\t{elseif type == \'cnotify\'}\n\t<div class="sys-tip" id="${x.id|seed}">\n\t\t<h3>${x.content}</h3>\n\t</div>\n\t{elseif type == \'tip\'}\n\t<div class="sys" id="${x.id|seed}">\n\t\t<h3>${x.content}</h3>\n\t</div>\n\t{elseif x.type == "sys"}\n\t<div class="sys" id="${x.id|seed}">\n\t\t<h3>${x.content|escape}</h3>\n\t</div>\n\t{elseif type == \'success\'}\n\t<div class="sys-info" id="${x.id|seed}">\n\t\t<h3>${x.content|escape}</h3>\n\t</div>\n\t{elseif type == \'transferresult\'}\n\t<div class="sys-info" id="${x.id|seed}">\n\t\t<h3>${x.content|escape}</h3>\n\t</div>\n\t<!-- 系统消息 end -->\n  <!-- 历史消息分隔 start -->\n  {elseif x.type == "messageSplit"}\n  <div class="sys">\n\t  <div class="msg-split">\n\t\t\t<span>${x.content}</span>\n\t\t\t<div class="line"></div>\n\t  </div>\n\t\n  </div>\n  {elseif x.type == "historySplit"}\n  <div class="history-split j-history-split"></div>\n  <!-- 历史消息分隔 end -->\n  {elseif x.type == "pre-product"}\n  {var content = x.content}\n  <div id="${x.id|seed}" class="pre-product pre-product-${content.template|default:"default"} productinfo">\n    <div class="product-wrap">\n      {if content.url}\n      <a class="pdLink" onclick="javascript:window.open(\'${x.content.url|urlFormat}\', \'_blank\'); return false;">{/if}\n        {if content.template == "pictureLink"}\n          <img src="${content.picture|urlFormat}" class="pictureLink" alt="商品图片">\n        {else}\n          <div class="product_right">\n            <img src="${content.picture|urlFormat}" height="100" width="100" alt="商品图片">\n          </div>\n          <div class="product_left">\n            <h2 class="tlt" title="${content.title|default:" "}">${content.title|default:""}</h2>\n            <p class="desc" title="${content.desc|default:" "}">${content.desc|default:""}</p>\n            <p class="note" title="${content.note|default:" "}">${content.note|default:""}</p>\n          </div>\n        {/if}\n      {if content.url}</a>{/if}\n      <div class="product-action">\n        <span class="action-text" {if content.actionTextColor}style="color: ${content.actionTextColor|escape};" {/if} data-action="sendProduct"\n         data-id=${x.id}>${content.actionText|default:"发送链接"}</span>\n      </div>\n    </div>\n\t</div>\n\t{elseif type == \'productinfo\' && (x.content.show == 0 || x.content.show == undefined)}\n\t<!-- empty -->\n\t{else}\n\t\t{if x.fromUser === 0}\n\t\t\t{var isLeft = true}\n\t\t{else}\n\t\t\t{var isLeft = false}\n\t\t{/if}\n\t\t<!-- 消息展示 判断是否需要分多条展示 -->\n\t\t{if x.content && x.content.template}\n\t\t\t{if Array.isArray(x.content.template)}\n\t\t\t\t{list x.content.template as tempTpl}\n\t\t\t\t\t${message(xlist, y, x, tempTpl)}\n\t\t\t\t{/list}\n\t\t\t{else}\n\t\t\t\t${message(xlist, y, x, x.content.template)}\n\t\t\t{/if}\n\t\t{else}\n\t\t\t${message(xlist, y, x)}\n\t\t{/if}\n\t<!-- 消息相关end -->\n\t{/if}\n\t\n\t{/list}\n</textarea>\n\n<!-- 上拉加载状态 -->\n<textarea name="jst" id="upscroll">\n  {if status == "loading"}\n    <div class="upscroll-status pending">\n      <i class="u-icon-loading"></i>\n    </div>\n  {elseif status == "error"}\n    <div class="upscroll-status fail">\n      <h2 class="">加载失败</h2>\n    </div>\n  {elseif status == "end" && historyHasLoad}\n    <div class="upscroll-status end">\n      <h2 class="">没有更多了</h2>\n    </div>\n  {/if}\n</textarea>\n');
I$("80c60f966b61d385b5685c49f4bad8f1",function(t){t.__pushHistory=function(t){};return t});I$("0c43c7399e677ca244b554b522fc28b0",function(t,e,i,n,s,a,o){if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="4.0")I$("d5921e531819af329c959125a02dd505",function(){window.hst_lock={};e.__pushHistory=function(){var t,n,s=[],a="cb-"+ +new Date,o='<script>parent.hst_lock["'+a+'"] = !0;parent.location.hash = decodeURIComponent("#<HASH>");</script>';var r=function(){t=window.clearTimeout(t);if(s.length){var e=s.shift();try{var i=n.contentWindow.document;i.open();i.write("<head><title>");i.write(document.title);i.write("</title>");i.write(o.replace("#<HASH>",encodeURIComponent(e)));i.write("</head><body></body>");if(location.hostname!=document.domain)i.domain=document.domain;i.close();hst_lock[a]=!1}catch(_){console.log(_.message||_);s.unshift(e)}t=window.setTimeout(r,50)}};return function(t){if(!e[a]&&(n||t)){s.push(t);if(!n)n=i._$createXFrame();r()}}}()});return e},"e7be6ff9122e14c2be65196e9dffe066","80c60f966b61d385b5685c49f4bad8f1","5fb495f256a5dcde2a92e5fe919a6422");I$("10b27bf37194b3f84bbcfd01c1323e9d",function(t,e,i,n,s,a,o,r,_,d){var c=/^[#?]+/,l=/#(.*?)$/,f=this;var u=function(){return!history.pushState||i._$IS.android||!history.auto};var h=function(t,e){var i=!e?"pushState":"replaceState";f.history[i](null,document.title,t)};var p=function(){return location.parse(f.location.href)};h=h._$aop(function(t){if(u()){t.stopped=!0;var e=t.args;_url=e[0].replace(c,"");!e[1]?f.location.hash=_url:f.location.replace("#"+_url)}});p=p._$aop(function(t){if(u()){t.stopped=!0;var e=l.test(f.location.href)?RegExp.$1:"";t.value=location.parse(e.replace(c,""))}});location.redirect=function(t,e){h(t,e)};location.active=function(){var t,n,o,r,_;var d=function(t){if(!r){var i={oldValue:o,newValue:p()};if(location.ignored)location.ignored=!1;else{e._$dispatchEvent(location,"beforeurlchange",i);if(i.stopped){if(o){r=!0;h(o.href,!0)}return}}n=f.location.href;o=i.newValue;e._$dispatchEvent(location,"urlchange",o);a.__pushHistory(o.href)}else r=!1};var c=function(){if(n!=f.location.href)d();t=s.requestAnimationFrame(c)};var l=function(){var t=i._$KERNEL;_ie7="trident"==t.engine&&t.release<="3.0";return u()&&"onhashchange"in window&&!_ie7};return function(i){if(!_){_=!0;f=i||window;if(l()){e._$addEvent(f,"hashchange",d);d()}else if(!t){t=s.requestAnimationFrame(c);c()}}}}();location.parse=function(){var e=/^https?:\/\/.*?\//i,i=/[?#]/;return function(n){var s={href:n};n=(n||"").replace(e,"/").split(i);var a=1;if("/"==n[0]&&0==(n[1]||"").indexOf("/"))a=2;s.path=n.splice(0,a).join("?");s.query=t._$query2object(n.join("&"));return s}}();location.same=function(t){return p().href==t};n._$$CustomEvent._$allocate({element:location,event:["beforeurlchange","urlchange"]});return o},"fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","e7be6ff9122e14c2be65196e9dffe066","5f75dc6bf6467f0a29ae4a457d2e9c8c","424f8506ac4d9ad6d34fecf84130c1b2","0c43c7399e677ca244b554b522fc28b0");I$("6c0f38526670b5c604711a80cd5053a6",function(t,e,i,n,s,a,o,r){var _;s._$$Node=e._$klass();_=s._$$Node._$extend(n._$$EventTarget);_.__init=function(){this.__super();this.__children=[]};_.__reset=function(t){this.__super(t);this._$setParent(t.parent);this.__name=t.name||"/";this.__data=t.data||{}};_.__destroy=function(){var t=function(t,e,i){i.splice(e,1);t._$recycle()};return function(){this.__super();delete this.__data;i._$reverseEach(this.__children,t);this._$setParent(null)}}();_.__isNode=function(t){return t instanceof this.constructor};_.__hasChild=function(t){return i._$indexOf(this.__children,t)>=0};_._$getName=function(){return this.__name};_._$getData=function(){return this.__data};_._$getPath=function(){var t=this._$getParent(),e=this._$getName();if(!t)return e;var i=t._$getName();if("/"!=i&&"/"!=e)e="/"+e;return t._$getPath()+e};_._$getParent=function(){return this.__parent};_._$getChildren=function(){return this.__children};_._$getChildByName=function(t){var e=i._$indexOf(this.__children,function(e){return t==e._$getName()});return this.__children[e]||null};_._$setParent=function(t){t=this.__isNode(t)?t:null;if(t!=this.__parent){t?t._$appendChild(this):this.__parent._$removeChild(this);this.__parent=t}};_._$appendChild=function(t){t=this.__isNode(t)?t:null;if(t&&!this.__hasChild(t)){this.__children.push(t);t._$setParent(this)}};_._$removeChild=function(t){t=this.__isNode(t)?t:null;var e=i._$indexOf(this.__children,t);if(e>=0){this.__children.splice(e,1);t._$setParent(null)}return t};return s},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","e32a3e597220aa11cee4e5c41da1a3ff");I$("768fb845335f67e75a3916513d859c71",function(t,e,i,n,s,a,o){var r=function(e,i,n){var s=e,n=n||a;if("/"!=i)t._$forEach(i.split("/"),function(t){var e=n(s,t);if(!e)return!0;s=e});return s};n._$getNodeByUMI=function(){var t=function(t,e){var e=e||"/",i=t._$getName();if("/"==i&&"/"==e)return t;else return t._$getChildByName(e)};return function(e,i){return r(e,i,t)}}();n._$appendNodeByUMI=function(){var t=function(t,i){var n=t._$getName();if(!i&&"/"==n)return t;var s=null;if("/"!=n){s=t._$getChildByName("/");if(!s){s=e._$$Node._$allocate();t._$appendChild(s)}}if(i){s=t._$getChildByName(i);if(!s){s=e._$$Node._$allocate({name:i});t._$appendChild(s)}}return s};return function(e,i){return r(e,i,t)}}();n._$getCommonRoot=function(e,i,s){if(!i||!s)return e;var i=i._$getPath().split("/"),s=s._$getPath().split("/"),a=t._$forIn(i,function(t,e){if(t!=s[e])return!0})||1,o=i.splice(0,a).join("/")||"/";return n._$getNodeByUMI(e,o)};n._$breadthFirstSearch=function(t,e){var i=[t],n=i.shift(),e=e||a;for(;n;){i.push.apply(i,n._$getChildren());e(n);n=i.shift()}};n._$isNode=function(t){return t instanceof e._$$Node};n._$isModule=function(t){return t instanceof i._$$ModuleAbstract};n._$isUMIPrivate=function(){var t=/^\/?\?(?=\/|$)/;return function(e){return t.test(e||"")}}();n._$path2umi=function(){var t=/[\?#]/;return function(e){var i=(e||"").trim().split(t),n="/"==i[0]&&0==(i[1]||"").indexOf("/");return i[0]+(n?"?"+i[1]:"")}}();return n},"fbbf6ddc0634989027d138f4ffd4b78b","6c0f38526670b5c604711a80cd5053a6","0378fd42981a8eb6e9ac9758a5373fef");I$("cb94acd23ad4a530e7f3247fdc98f3e4",function(t,e,i,n,s,a,o,r,_,d,c,l){var f;_._$$GroupManager=e._$klass();f=_._$$GroupManager._$extend(a._$$EventTarget);f.__reset=function(t){this.__super(t);this.__root=t.root;this.__dispatcher=t.dispatcher;this.__mpool={}};f.__destroy=function(){this.__super();delete this.__root;delete this.__mpool;delete this.__dispatcher};f.__isStopped=function(t){if(!r._$isNode(t))return!1;else return!!t._$getData().stopped||this.__isStopped(t._$getParent())};f.__doClearStopped=function(t){if(r._$isNode(t)){delete t._$getData().stopped;this.__doClearStopped(t._$getParent())}};f.__doModuleHide=function(t,e){this.__doModuleCheck("onhide",t,e)};f.__doModuleShow=function(t,e){this.__doModuleCheck("onshow",t,e);this.__doModuleAction(t)};f.__doModuleRefresh=function(t){this.__doModuleCheck("onrefresh",t);this.__doModuleAction(t)};f.__doModuleCheck=function(t,e,i){if(e!=i&&r._$isNode(e)){if("onhide"==t)this.__doModuleDispatch(e,t);this.__doModuleCheck(t,e._$getParent(),i);if("onhide"!=t)this.__doModuleDispatch(e,t)}};f.__doModuleAction=function(e){if(!r._$isNode(e))return!0;var i=e._$getData(),n=i.action,s=i.module;if(!this.__doModuleAction(e._$getParent())||n&&t._$isString(s))return!1;if(s&&s._$allocate&&n&&"onhide"!=n){if(this.__isStopped(e))return;var a={umi:e._$getPath(),composite:i.composite,dispatcher:this.__dispatcher};s=s._$allocate(a);if(r._$isModule(s)){i.module=s;this.__doModuleDispatch(e,"onshow")}else delete i.module}delete i.action;return!0};f.__doModuleDispatch=function(){var e=function(t){var e;t=t._$getParent();for(;t;){e=t._$getData().module;if(r._$isModule(e))return e._$getExportData();t=t._$getParent()}return null};var i=function(t,e){var i={url:(e.root||"")+t,version:(e.ver||d)[t]};if(e.mode&&i.version){i.url=i.url.replace(/(\.[^.\/]*?)$/,"_"+i.version+"$1");i.version=null}return i};return function(a,_){if(r._$isNode(a)){var c=a._$getData(),l=c.module,f="onhide"!=_;if(r._$isModule(l)){if(f&&this.__isStopped(a))return;var u=!this.__source?c.event:this.__source._$getData().event;if(u){u.umi=a._$getPath();u.data=e(a)}var h=c.xname||"onhide";if("onshow"==_&&"onhide"!=h)_="onrefresh";if("onrefresh"==_&&"onhide"==h)_="onshow";c.xname=_;l._$dispatchEvent(_,u||{});if(f&&u&&u.pos&&u.umi==u.target)n._$scrollTo(u.pos);if(f&&u){c.stopped=u.stopped;delete u.stopped}}else if(l){c.action=_;if("onshow"==_&&t._$isString(l)){var p=n._$get("umi://"+l);if(p)o._$parseTemplate(p);else{var m=location.config||d,g=i(l,m);s._$loadHtml(g.url,{version:g.version,onload:o._$parseTemplate})}}}}}}();f._$hasUMI=function(t){return!!this.__mpool[t]};f._$addUMI=function(t){this.__mpool[t]=!0};f._$delUMI=function(t){delete this.__mpool[t]};f._$loadedUMI=function(t){if(this._$hasUMI(t))this.__doModuleAction(r._$getNodeByUMI(this.__root,t))};f._$dispatchUMI=function(t){if(this._$hasUMI(t)){var e=r._$getNodeByUMI(this.__root,t);this.__doClearStopped(e);this.__doModuleShow(e)}};f._$hideUMI=function(t){if(this._$hasUMI(t))this.__doModuleHide(r._$getNodeByUMI(this.__root,t))};return _},"fbbf6ddc0634989027d138f4ffd4b78b","e4f0b0b7857ed3c1e2d0a46ba5b670d6","e9f3264f172f0455b684b5c08503be9e","5fb495f256a5dcde2a92e5fe919a6422","10b61f5e8cde9864a0c2f183fe725ea2","e32a3e597220aa11cee4e5c41da1a3ff","d252039c36767cb4f534ca3f91188796","768fb845335f67e75a3916513d859c71");I$("2df6c50bd2d28e910a53226ea3481951",function(t,e,i,n,s,a,o,r){var _;s._$$GroupManagerSingle=t._$klass();_=s._$$GroupManagerSingle._$extend(n._$$GroupManager);_.__reset=function(t){this.__super(t);this.__classed=!!t.classed};_.__destroy=function(){this.__super();delete this.__cmroot;delete this.__source};_._$exitable=function(t){if(!this.__source)return!0;var e=this.__source._$getData().module;if(i._$isModule(e))e._$dispatchEvent("onbeforehide",t);return!t.stopped;
};_._$refresh=function(){if(this.__source)window.setTimeout(this._$dispatchUMI._$bind(this,this.__source._$getPath()),0)};_._$dispatchUMI=function(t){if(this._$hasUMI(t)){var n=i._$getNodeByUMI(this.__root,t),s=n._$getData();if(s.module){var o=this.__source,r=s.event,_=a;this.__source=n;this.__doClearStopped(n);if(o){_=o._$getData().event;r.referer=_.href||""}if(o!=n){this.__cmroot=i._$getCommonRoot(this.__root,o,n);if(null!=o){if(o!=this.__cmroot){if(this.__classed)e._$delClassName(document.body,_.clazz);this.__doModuleHide(o,this.__cmroot)}this.__doModuleRefresh(this.__cmroot)}else this.__doModuleShow(this.__cmroot);if(n!=this.__cmroot){if(this.__classed)e._$addClassName(document.body,r.clazz);this.__doModuleShow(n,this.__cmroot)}}else this.__doModuleRefresh(this.__source)}}};_._$loadedUMI=function(t){if(this._$hasUMI(t))this.__doModuleAction(this.__source)};_._$hide=function(){if(this.__source){this._$hideUMI(this.__source._$getPath());delete this.__cmroot;delete this.__source}};return s},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","768fb845335f67e75a3916513d859c71","cb94acd23ad4a530e7f3247fdc98f3e4");I$("bac16ef2ce327585e4acbb487a0745d4",function(t,e,i,n,s){e.__doFixTitle=function(){var t=/#.*?$/i;return function(e){var i=document.title,n=i.replace(t,"");if(i!=n){e=n||e;document.title=e}return document.title}}();e.__doFixHashTitle=function(t){};return e},"e7be6ff9122e14c2be65196e9dffe066");I$("576b32e00914ade04d938eda7c558c02",function(t,e,i,n,s,a){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release>="7.0")I$("418a1d14970963a60aa0eb23931625f6",function(e){t.__doFixHashTitle=function(i){new MutationObserver(function(n){e._$reverseEach(n,function(e){if("TITLE"==e.target.tagName||"characterData"==e.type){i=t.__doFixTitle(i);return!0}})}).observe(document,{subtree:!0,childList:!0,characterData:!0})}},"fbbf6ddc0634989027d138f4ffd4b78b");if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<"7.0")I$("e2d00ecb49057eaaf3eb6ca459be0d79",function(e){t.__doFixHashTitle=function(i){e._$addEvent(document,"propertychange",function(e){if("title"==e.propertyName)i=t.__doFixTitle(i)})}},"be567474249a271e4786c144ccf5f75a");return t},"bac16ef2ce327585e4acbb487a0745d4","e7be6ff9122e14c2be65196e9dffe066");I$("94f850ca66788dd0753c1e7b6f5879b3",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h,p,m,g){var b;h._$$Dispatcher=e._$klass();b=h._$$Dispatcher._$extend(r._$$EventTarget);b.__init=function(){this.__super();var t=s._$uniqueID();this.__pbseed="pb-"+t;this.__pvseed="pv-"+t};b.__reset=function(t){this.__dtmp={};this.__rest=!!t.rest;this.__root=d._$$Node._$allocate();this.__config={m:{},mg:{},r:[],rr:{},al:{},am:{}};this.__groups={};this.__doBuildGroup(this.__pbseed);this.__groups[this.__pvseed]=c._$$GroupManager._$allocate({root:this.__root,dispatcher:this});u.__doFixHashTitle(document.title);this.__doInitDomEvent([[location,"urlchange",this.__onURLChange._$bind(this)]]);this.__super(t);this._$rule(t.rules);this._$regist(t.modules)};b.__destroy=function(){var t=function(t,e,i){delete i[e];t._$recycle()};return function(){delete this.__config;this.__root=this.__root._$recycle();s._$loop(this.__groups,t);this.__super()}}();b.__setModuleConf=function(t,e,i){var n=this.__config.m[t];if(!n){n={};this.__config.m[t]=n}n[e]=i};b.__getModuleConf=function(t,e){var i=this.__config.m[t];return!i?"":i[e]};b.__doBuildGroup=function(t){if(t){var e=this.__groups[t];if(!e){e=l._$$GroupManagerSingle._$allocate({root:this.__root,dispatcher:this,classed:t==this.__pbseed});this.__groups[t]=e}return e}};b.__doAddUMI2Group=function(t,e){var i=this.__doBuildGroup(e);if(!i){e=_._$isUMIPrivate(t)?this.__pvseed:this.__pbseed;i=this.__groups[e]}i._$addUMI(t);this.__config.mg[t]=e};b.__doRewriteUMI=function(){var t=/\$\d/;return function(e,i){var n;s._$forIn(this.__config.r,function(a){s._$forIn(a,function(a,o){if(null!=a){if(s._$isFunction(a)){var r=!1;try{r=a.call(null,{umi:e,href:i})}catch(_){}if(r){n=o;return!0}}if(s._$isArray(a)){var d=s._$indexOf(a,function(t){return t===e||t===i});if(d>=0){n=o;return!0}}if(a.test&&(a.test(e)||a.test(i))){n=t.test(o)?e.replace(a,o):o;return!0}if(a===e||a===i){n=o;return!0}}});return!!n});return n||e}}();b.__onURLChange=function(){var t=/(?:^\/+)|(?:\/+$)/gi,e=/#(\$.*?)$/,i=/\/$/;var n=function(e,i){var n=i._$getPath(),e=e.replace(n,"").replace(t,"");return e.split("/")};var s=function(t,e){var i,n=t.split("/");for(;n.length>0;){if(!n[n.length-1])n.pop();else n[n.length-1]="";i=e[n.join("/")];if(i)return i}return""};return function(t){if(0!=t.path.indexOf("$")){var a=this.__dtmp[t.path];delete this.__dtmp[t.path];this._$dispatchEvent("onbeforechange",t);var o=this.__doRewriteUMI(t.path,t.href),r=this.__config.mg[o];if(!r&&this.__rest)r=s(o,this.__config.mg);if(!r&&!_._$isUMIPrivate(o)){o=this.__config.rr["404"];r=this.__config.mg[o]}if(!r&&this.__rest)r=s(o,this.__config.mg);if(r){var d=_._$getNodeByUMI(this.__root,o),c=null;if(this.__rest){c=n(o,d);if(!i.test(o)&&this.__config.mg[o+"/"])d=d._$getChildByName("/")}var l=o;o=d._$getPath();d._$getData().event={target:o,source:l,href:t.href,param:t.query,input:a,prest:c,clazz:this.__getModuleConf(o,"clazz"),pos:e.test(t.href)?RegExp.$1:""};var f=this.__getModuleConf(l,"title");if(f)document.title=f;this.__groups[r]._$dispatchUMI(o)}}}}();b.__onClickDelegate=function(){var t=function(t,e){if(t){var i=location.parse(t);this._$dispatchEvent("onbeforechange",i);var n=this.__doRewriteUMI(i.path,e||i.href);return this.__groups[this.__pbseed]._$hasUMI(n)}};var e=function(e){var n=i._$dataset(e,"href");if(n)return n;var a=i._$attr(e,"href");if(a&&!i._$dataset(e,"notUmi")){var o=a.split("#");o.shift();var n=o.join("#");if(t.call(this,n,a))return n;if(t.call(this,a)){var r=location.parse(a);return r.path+"?"+s._$object2query(r.query)}}};var a=function(t){return!!e.call(this,t)};return function(t){var i=n._$getElement(t,a._$bind(this));if(i){n._$stopDefault(t);this._$redirect(e.call(this,i))}}}();b.__onActionDelegate=function(t){var e=this.__config.am,s=e[t.type];if(s){var a=n._$getElement(t,"d:resAction");if(a){var o=i._$dataset(a,"resAction")||"",r=s[o.toLowerCase()];if(r){var _={action:o,target:a,id:i._$dataset(a,"resId"),type:i._$dataset(a,"resType"),extra:i._$dataset(a,"resExtra")};this._$dispatchEvent("onbeforeaction",{event:t,target:a,result:_});r.call(this,_)}}}};b._$rule=function(){var t=["404"];var e=function(t,e){this._$rule(e,t)};var i=function(t,e){this.__setModuleConf(e,"title",t)};var n=function(t,e){this.__config.al[e]=t};var a=function(e){if(e){this.__config.r.push(e);s._$forEach(t,function(t){if(e[t]){this.__config.rr[t]=e[t];delete e[t]}},this)}};var o=function(t,e){var i=this.__config.am;var n="click",a=t,e=(e||"").toLowerCase();if(s._$isObject(t)){n=t.event||n;a=t.value}if(s._$isString(a))a=function(t,e){this._$redirect(t,{force:!0,input:e})}._$bind(this,a);else if(s._$isFunction(a))a=a._$aop(null,function(t){var e=t.value;if(s._$isString(e))this._$redirect(e,{force:!0,input:t.args[0]})}._$bind(this));if(s._$isFunction(a)){if(!i[n]){this.__doInitDomEvent([[document,n,this.__onActionDelegate._$bind(this)]]);i[n]={}}i[n][e]=a}};var r={title:function(t){s._$loop(t,i,this)},rewrite:function(t){if(!s._$isArray(t))a.call(this,t);else s._$forEach(t,a,this)},alias:function(t){s._$loop(t,n,this)},action:function(t){s._$loop(t,o,this)}};return function(t,i){if(s._$isArray(t)){i=t;t="rewrite"}else if(!s._$isString(t)){s._$forIn(t,e,this);return}(r[t]||m).call(this,i)}}();b._$regist=function(){var t=function(t,e){this._$regist(e,t)};var e=function(t){return!!t&&!!t._$extend};return function(i,n){if(s._$isString(i)){var a=_._$appendNodeByUMI(this.__root,i)._$getData(),o=a.module;if(!_._$isModule(o)&&!e(o)){var r=this.__config.mg[i],o;if(s._$isString(n)||e(n))o=n;else{n=n||p;r=n.gid;o=n.module;if(n.title)this.__setModuleConf(i,"title",n.title);if(n.clazz)this.__setModuleConf(i,"clazz",n.clazz);if(n.composite)a.composite=n.composite}this.__doAddUMI2Group(i,r);a.module=o}}else s._$forIn(i,t,this)}}();b._$message=function(){var t=function(t,e){var i=t._$getData().module;if(_._$isModule(i))i._$dispatchEvent("onmessage",e)};var e=[t,function(e,i){var n=i.from;for(;e;){if(e._$getPath()!=n)t(e,i);e=e._$getParent()}},function(e,i){var n=i.from;_._$breadthFirstSearch(e,function(e){if(e._$getPath()!=n)t(e,i)})}];return function(t){var i=s._$merge({},t),n=_._$getNodeByUMI(this.__root,i.to);i.path=n._$getPath();(e[i.mode]||e[0]).call(this,n,i)}}();b._$publish=function(t,e){var e=s._$merge({},e);e.type=t||"";this._$dispatchEvent((e.from||"")+":"+e.type,e)};b._$subscribe=function(t,e,i){t=this.__config.al[t]||t;this._$addEvent((t||"")+":"+(e||""),i)};b._$unsubscribe=function(t,e,i){t=this.__config.al[t]||t;this._$delEvent((t||"")+":"+(e||""),i)};b._$hide=function(t){var e=this.__config.mg[t];if(e==this.__pvseed)this.__groups[e]._$hideUMI(t)};b._$hideGroup=function(t){var e=this.__groups[t];if(e)e._$hide()};b._$redirect=function(t,e){e=e||p;var i=_._$path2umi(t),n=location.parse(t);this.__dtmp[n.path]=e.input;if(_._$isUMIPrivate(i))this.__onURLChange(n);else{var s=this.__groups[this.__pbseed],a={target:n,umi:i};if(s._$exitable(a))if(location.same(t)&&e.force)this.__onURLChange(n);else{location.ignored=!!e.ignored;location.redirect(t,!!e.replace)}}};b._$refresh=function(t){if(t)this._$redirect(t,{replace:!0,force:!0});else this.__groups[this.__pbseed]._$refresh()};b._$delegate=function(){this.__doInitDomEvent([[document,"click",this.__onClickDelegate._$bind(this)]])};b._$active=function(){location.active()};b._$loaded=function(t,e){t=this.__config.al[t]||t;if(!s._$isArray(t)){this._$regist(t,e);this.__groups[this.__config.mg[t]]._$loadedUMI(t)}else s._$forEach(t,function(t){this._$loaded(t,e)},this)};h._$startup=function(t){window.dispatcher=h._$$Dispatcher._$getInstance(t);f._$dumpModules();o._$parseTemplate((t||p).tid||"template-box",location.config);n._$addEvent(document,"templateready",function(){window.setTimeout(dispatcher._$active._$bind(dispatcher),0)});return window.dispatcher;
};if(!0){t.P("nej.e")._$startup=h._$startup;t.P("nej.ut")._$$Dispatcher=h._$$Dispatcher}return h},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","10b27bf37194b3f84bbcfd01c1323e9d","d252039c36767cb4f534ca3f91188796","e32a3e597220aa11cee4e5c41da1a3ff","768fb845335f67e75a3916513d859c71","6c0f38526670b5c604711a80cd5053a6","cb94acd23ad4a530e7f3247fdc98f3e4","2df6c50bd2d28e910a53226ea3481951","0378fd42981a8eb6e9ac9758a5373fef","576b32e00914ade04d938eda7c558c02");I$("0378fd42981a8eb6e9ac9758a5373fef",function(t,e,i,n,s,a,o,r,_,d){var c;o._$$ModuleAbstract=e._$klass();c=o._$$ModuleAbstract._$extend(s._$$EventTarget);c.__init=function(){this.__super();this.__export={};this.__doBuild()};c.__reset=function(t){this.__super(t);this.__umi=t.umi||"";this.__dispatcher=t.dispatcher;this.__composites=t.composite||r;this._$batEvent({onshow:this.__onShow._$bind(this),onhide:this.__onHide._$bind(this),onrefresh:this.__onRefresh._$bind(this),onmessage:this.__onMessage._$bind(this),onbeforehide:this.__onBeforeHide._$bind(this)})};c.__destroy=function(){this.__super();this.__export={};delete this.__umi;delete this.__composites;delete this.__dispatcher};c.__stop=function(t){if(t)t.stopped=!0};c.__doBuild=_;c.__onBeforeHide=_;c.__doClearComponentExDsp=function(){var t=function(t){return!!a._$$Dispatcher&&t instanceof a._$$Dispatcher};return function(){this.__doClearComponent(t)}}();c.__onMessage=_;c.__doSendMessage=function(t,e,i){this.__dispatcher._$message({to:t,mode:i||0,data:e,from:this.__umi})};c.__doPublishMessage=function(t,e){this.__dispatcher._$publish(t,{from:this.__umi,data:e})};c.__doSubscribeMessage=function(){this.__dispatcher._$subscribe.apply(this.__dispatcher,arguments)};c._$getExportData=function(){return this.__export};c.__doParseParent=function(t){var e;if(!e){var n=t.input||r;e=i._$get(n.parent)}if(!e){var n=t.data||r;e=i._$get(n.parent)}if(!e)e=i._$get(t.parent);return e};c.__onShow=function(t){var e=this.__doParseParent(t);if(e&&this.__body)e.appendChild(this.__body);this.__doApplyComposite("onshow",t);this.__onRefresh(t)};c.__onRefresh=function(t){this.__doApplyComposite("onrefresh",t)};c.__onHide=function(){this.__doHideComposite();i._$removeByEC(this.__body)};c.__isEscapedComposite=function(){var t=/^onshow|onrefresh|delay$/;return function(e){return t.test(e)}}();c.__doGenCompositeParam=_;c.__doApplyComposite=function(){var t=function(t,e,i,n){if(!this.__isEscapedComposite(n)){if(t)i+=(i.indexOf("?")>1?"&":"?")+t;var s=this.__doGenCompositeParam(n,e)||{};s.location=e;s.parent=this.__export[n];this.__dispatcher._$redirect(i,{input:s})}};return function(e,i){if(!i.nodelay){if(this.__composites.delay)return;var s=this.__composites[e]||r;if(s.delay)return}var a=n._$object2query(i.param)||"";if("onrefresh"==e)n._$loop(this.__composites,t._$bind(this,a,i));n._$loop(s,t._$bind(this,a,i))}}();c.__doHideComposite=function(){var t=function(t,e){if(!this.__isEscapedComposite(e))this.__dispatcher._$hide(t)};return function(){n._$loop(this.__composites,t,this);n._$loop(this.__composites.onshow,t,this);n._$loop(this.__composites.onrefresh,t,this)}}();o._$regist=function(){var t;o._$dumpModules=function(){if(t){n._$loop(t,function(t,e){dispatcher._$loaded(e,t)});t=null}};return function(e,i){if(window.dispatcher)dispatcher._$loaded.apply(dispatcher,arguments);else{if(!t)t={};t[e]=i}}}();if(!0){t.P("nej.e")._$regist=o._$regist;t.P("nej.ut")._$$Module=o._$$ModuleAbstract;t.P("nej.ut")._$$AbstractModule=o._$$ModuleAbstract}return o},"a2e1fe5ad329e35f3966d36c90672926","e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","e32a3e597220aa11cee4e5c41da1a3ff","94f850ca66788dd0753c1e7b6f5879b3");I$("8432624716159a6412219f26247c91bd",function(t,e,i,n,s,a,o,r){o._$$Module=t._$klass();r=o._$$Module._$extend(a._$$ModuleAbstract);r.__doBuild=function(){this.__super();var t=s._$getTextTemplate(this.__tid);if(!t)this.__body=e._$create("div");else this.__body=e._$html2node(t);this.__acktime=window.setInterval(this.__doUpdateACK._$bind(this),2e3)};r.__init=function(t){this.__super(t)};r.__onRefresh=function(t){this.__super(t)};r.__onShow=function(t){this.__super(t)};r.__onHide=function(){this.__doClearDomEvent();this.__super()};r.__doUpdateACK=function(){var t=(setting.appkey||"").toUpperCase();if(window.localStorage)localStorage.setItem("X-"+t+"-YSF-ACK",+new Date)};o._$regist=a._$regist._$bind(a)},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","d252039c36767cb4f534ca3f91188796","0378fd42981a8eb6e9ac9758a5373fef");I$("36d99ebff621b8efb3f90d915049bdd7",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h,p,m,g,b,v,$,y,x,w,S,C,I,E,k,j,T,M,N){M._$$Module=t._$klass();N=M._$$Module._$extend(T._$$Module);var L=!0;N.__doBuild=function(){this.__tid="chat-body";this.__super();s._$parseUITemplate(j);this.__nChat=n._$getByClassName(this.__body,"j-chat")[0];this.__nHeadTip=n._$getByClassName(this.__body,"j-tip")[0];this.__nList=n._$getByClassName(this.__body,"j-list")[0];this.__nEditor=n._$getByClassName(this.__body,"j-editor")[0];this.__nUpscroll=n._$getByClassName(this.__body,"j-upscroll")[0];this.__initListConfig(this.__nList);this.__initEditorConfig(this.__nEditor);b._$media(this.__nList)};N.__onShow=function(t){this.__initEventListener();this.__initEditor();this.__initQiyuInfo(window.setting.qiyuInfoSwitch);this.__super(t);if(!this.__videoModal)this.__initVideoModal()};N.__initVideoModal=function(){this.__videoModal=new E};N.__openVideo=function(t){var e=n._$dataset(t,"expired");if(!(e&&(new Date).getTime()>e)){var i=n._$dataset(t,"videosrc");this.__videoModal.open(i)}else this.__showTip("视频文件已过期",!0)};N.__onRefresh=function(t){this.__super(t);this.__upscrollStatus="init";this.__scrollTop=0;var e=_._$getSessionByBid(_.SHOPID);if(e)this.__resetAll({session:e,byRefresh:!0})};N.__onHide=function(){this.__super()};N.__initListConfig=function(t){this.__listConfig={limit:1e4,parent:t,item:{ext:{isPlatform:window.setting.tradeTag,permission:window.permissionSetting,isMobile:r._$isMobilePlatform(),isIos:"ios"==r._$isMobilePlatformType()},klass:"chat-list",json:function(t){t=t||{};return JSON.stringify(t)},imgclip:r._$avatorClip,filterLabel:function(t){t=t||"";return t.replace(/\n/g,'<p class="br"></p>')},filterTagA:function(t){t=t||"";return t.replace(/<a[^>]*>([\s\S]*?)<\/a>/gi,function(t,e){return e})},filterHref:function(t){t=t||"";var e=/(<a)/g;return t.replace(e,'$1 target="_blank"')},fileSizeFormat:r._$fileSizeFormat,fileProgressFormat:function(t){var e=t.content.size,i=0;if(t.progressObj)i=t.progressObj.loaded;if(i>e)i=e;if(e>Math.pow(1024,2))return r._$fileSizeFormat(i,"MB")+"/"+r._$fileSizeFormat(e,"MB")+"MB";else if(e>1024)return r._$fileSizeFormat(i,"KB")+"/"+r._$fileSizeFormat(e,"KB")+"KB";else return r._$fileSizeFormat(i,"B")+"/"+r._$fileSizeFormat(e,"B")+"B"},spliceSuffix:r._$spliceSuffix,text2portrait:u._$text2portrait,complete:function(t){t=t||"";return p._$decode(t)},d2w:b._$dur2width,duration:b._$dur2time,urlFormat:function(t){t=t||"";t=t.trim();var e=/^http[s]?:\/\//.test(t);return e?t:"http://"+t},escapeWithoutSpace:r._$escapeWithoutSpace,trim:r._$trim,formatTrashWords:r._$formatTrashWords,attachsFormat:function(t){if(t&&t.length)return t.map(function(t){return t.name}).join()}},cache:{data:{},klass:c._$$Cache},onafterlistload:this.__onAfterListLoad._$bind(this),onafterlistrender:this.__onAfterListRender._$bind(this),onemptylist:this.__onEmptyList._$bind(this),onafterupdaterender:this.__onAfterUpdateRender._$bind(this),onafterinsert:this.__onAfterInsert._$bind(this)};a._$extend({timeformat:function(t,e){if(0===e||new Date(e).getFullYear()===new Date(t).getFullYear())return i._$format(t,"HH:mm");else return i._$format(t,"yyyy-MM-dd HH:mm")},timeformatEx:function(t){var e=864e5,n=+new Date;if((new Date).getFullYear()==new Date(t).getFullYear())if(n-t<=e)return"今天"+i._$format(t,"HH:mm:ss");else if(n-t<=2*e)return"昨天"+i._$format(t,"HH:mm:ss");else return i._$format(t,"MM-dd HH:mm:ss");else return i._$format(t,"yyyy-MM-dd HH:mm:ss")},formatDuring:function(t){var e=parseInt(t%36e5/6e4);var i=parseInt(t%6e4/1e3);if(e<10)e="0"+e;if(i<10)i="0"+i;return e+":"+i}})};N.__initEditorConfig=function(){this.__thSendInputContent=new Function;this.__assoSendInputContent=new Function};N.__initEventListener=function(){i._$loop({lifecyclecreated:this.__cbYunxinCreated._$bind(this),onapplytimeout:this.__onApplyTimeout._$bind(this),onconfig:this.__onConfig._$bind(this),oncansendfile:this.__onCanSendFile._$bind(this),onusererror:this.__onUserError._$bind(this),oninputassociation:this.__onInputAssociation._$bind(this)},function(t,e){l._$addEvent(e,t)});f._$addEvent("onrobotevalcontentDone",this.__onrobotevalcontentDone._$bind(this));this.__doInitDomEvent([[this.__nChat,"scroll",this.__onScroll._$bind(this)],[d._$$Cache,"onsession",this.__cbOnSession._$bind(this)],[d._$$Cache,"onqueuestart",this.__cbQueueStart._$bind(this)],[d._$$Cache,"onqueuechange",this.__cbQueueChange._$bind(this)],[d._$$Cache,"onqueuefail",this.__cbQueueFail._$bind(this)],[d._$$Cache,"onshopconfig",this.__onShopConfig._$bind(this)],[d._$$Cache,"onbotentry",this.__onBotEntry._$bind(this)],[d._$$Cache,"onkefusetting",this.__onKefuSetting._$bind(this)],[c._$$Cache,"invalidimage",this.__onInvalidImage._$bind(this)],[c._$$Cache,"invalidvideo",this.__onInvalidVideo._$bind(this)],[c._$$Cache,"fileuploadprogress",this.__onFileUploadProgress._$bind(this)],[c._$$Cache,"onbotmsg",this.__onBotMsg._$bind(this)],[c._$$Cache,"onhistorylistload",this.__onHistoryListLoad._$bind(this)],[c._$$Cache,"onhistorylistend",this.__onHistoryListEnd._$bind(this)],[c._$$Cache,"onhistorylistloaderr",this.__onHistoryListLoadErr._$bind(this)],[c._$$Cache,"oneval",this.__onEval._$bind(this)],[c._$$Cache,"onmessageshowtip",this.__onShowTip._$bind(this)],[c._$$Cache,"onscrollbottom",this.__onScrollBottom._$bind(this)],[d._$$Cache,"onevaluate",this.__onEvaluate._$bind(this)],[c._$$Cache,"ongetworksheetinfo",this.__onGetWorkSheetInfo._$bind(this)]]);
r._$delegateWithStopEvent(this,this.__body,{reconnect:this.__reconnect._$bind(this),richContentDelegate:this.__richContentDelegate._$bind(this),evaluate:this.__evaluateClick._$bind(this),modifyEval:this.__modifyEval._$bind(this),selRobot:this.__selRobotMsg._$bind(this),selShunt:this.__selShunt._$bind(this),resend:this.__resend._$bind(this),download:this.__downloadFile._$bind(this),abortFileTrans:this.__abortFileTrans._$bind(this),clickBotBlock:this.__clickBotBlock._$bind(this),clickBotTel:this.__clickBotTel._$bind(this),selectBotCard:this.__selectBotCard._$bind(this),moreBotCardList:this.__seeMoreBotCardList._$bind(this),botCardDetail:this.__seeBotCardDetail._$bind(this),showBotForm:this.__showBotForm._$bind(this),selectOrderItem:this.__selectOrderItem._$bind(this),moreOrderList:this.__moreOrderList._$bind(this),evalRobotAnswer:this.__evalRobotAnswer._$bind(this),changeEvalContent:this.__changeEvalContent._$bind(this),quitQueue:this.__quitQueue._$bind(this),sendProduct:this.__sendPrdMsgByUser._$bind(this),mixReply:this.__onSendMixReply._$bind(this),openVideo:this.__openVideo._$bind(this),showMoreBotBubbleNode:this.__showMoreBotBubbleNode._$bind(this),selectBotBubbleListItem:this.__onSelectBotBubbleListItem._$bind(this),showBotDrawerModal:this.__showBotDrawerModal._$bind(this),showWorksheet:this.__showWorksheet._$bind(this)});this.__doSubscribeMessage("/?/session/list/","sessionSwitch",this.__onSessionSwitch._$bind(this));this.__doSubscribeMessage("/?/session/show/","applyKefu",function(){this.__renderLoading(!0);this.__removeFinishMsg()}._$bind(this))};N.__onEvaluate=function(){this.__onKefuSetting()};N.__initQiyuInfo=function(t){if(t)n._$addClassName(this.__body,"haslogo");else n._$delClassName(this.__body,"haslogo")};N.__resetAll=function(t){var e=t.session,i=t.byRefresh;this.__resetInputConfig(e);this.__resetModule(t);if(r._$isFrameModule()){if(_.isLayerOpen)l._$clearUnreadMsg(_.SHOPID);else if(r._$isMobilePlatform()&&window==top)l._$clearUnreadMsg(_.SHOPID)}else l._$clearUnreadMsg(_.SHOPID)};N.__resetInputConfig=function(t){var e=t.shop.setting.sendingRate||3600;this.__thSendInputContent=r._$throttle(this.__sendInputContent,1e3*e)._$bind(this);var i=t.shop.setting.inputAssociationSendingRate||.5;this.__assoSendInputContent=r._$throttle(this.__assoSendInputContentMore,1e3*i)._$bind(this)};N.__resetModule=function(t){var e=t.session,i=t.byRefresh;this.__renderUpscroll();if(e){var n=e.sessionStatus.status;if(n==-1)this.__renderLoading(!0);else this.__renderLoading(!1);switch(n){case 201:this.__initLeave(e,!0);this.__toggleOprBySession(e);break;case 205:this.__initLeaveOff(e,!0);break;case 200:case 203:case 206:this.__initLeave(e,!1);this.__initLeaveOff(e,!1);if(i||!this.__module)this.__reBuildListModule(e);this.__renderQueueInfo(e);this.__toggleOprBySession(e);if(i)this.__setEditorContent(e);this.__renderBotEntry(e);break;default:console.log("未知情况")}}else this.__renderLoading(!0)};N.__cacheEditorContent=function(){if(this.__editor)_._$cacheEditorContent(_.SHOPID,this.__editor._$getContent())};N.__onInputChange=function(t,e){if(_._$canSendMessage(_.SHOPID)&&_._$getSessionByBid(_.SHOPID)){this.__thSendInputContent(t.substring(0,4500));this.__assoSendInputContent(t.substring(0,4500),e)}};N.__setEditorContent=function(t){};N.__editorSubmit=function(t){this.__sendMessage(t)};N.__onWxAudioSubmit=function(t,e){var i=t;if(this.__checkCanSend())if(e)l._$reSendWxAudioMessage(_.SHOPID,i.id);else l._$sendWxAudioMessage(_.SHOPID,i)};N.__toggleOprBySession=function(t){this.__editor._$toast();if(t.kefu.isRobot||t.isShunt){this.__editor._$toggleOpr(!0);n._$addClassName(this.__nEditor,"z-robot");this.__associationques(!0)}else{this.__editor._$toggleOpr(!1);this.__editor._$hideInputAssociation();n._$delClassName(this.__nEditor,"z-robot");this.__associationques(!1)}setTimeout(function(){if(t.isShunt){this.__editor._$disable(!0);this.__editor._$blur()}else this.__editor._$disable(!1)}._$bind(this),0)};N.__reBuildListModule=function(t){if(this.__module)this.__module=this.__module._$recycle();this.__listConfig.cache.data.id=t.shop.id;this.__listConfig.cache.data.s=t.id;this.__listConfig.cache.lkey="msg-session-"+t.shop.id;this.__module=o._$$ListModuleWF._$allocate(this.__listConfig)};N.__initLeave=function(t,e){var i=n._$getByClassName(this.__body,"j-leave")[0],s=n._$getByClassName(this.__body,"j-chat-show")[0];this.__cLeave&&this.__cLeave.$emit("show",!1);if(e){this.__reBuildListModule(t);if(t.leaveType){n._$addClassName(i,"f-hide");n._$delClassName(s,"f-hide");l._$showLeaveMsg(t.richmessage||t.message);this.__editor._$disable(!1)}else{if(t.cLeave){this.__cLeave=t.cLeave;this.__cLeave.$emit("show",!0)}else this.__cLeave=t.cLeave=new m({data:{bid:_.SHOPID,appkey:_._$getAppkey(),message:t.message,hasMobile:t.shop.hasMobile,hasEmail:t.shop.hasEmail,hasLogo:!1}}).$inject(i).$on("submit",this.__sendLeaveMsg._$bind(this)).$on("close",function(t){this.__cLeave.destroy();n._$addClassName(i,"f-hide");n._$delClassName(s,"f-hide");l._$closeLeave(t);this.__editor._$disable(!0);this.__onBotEntry();try{this.__editor._$placeholder("客服离线状态，暂不可发送消息")}catch(e){}}._$bind(this));n._$delClassName(i,"f-hide");n._$addClassName(s,"f-hide")}}else{n._$addClassName(i,"f-hide");n._$delClassName(s,"f-hide");if(t.leaveType){l._$showLeaveMsg(t.richmessage||t.message);this.__editor._$disable(!1)}}};N.__initLeaveOff=function(t,e){var i=n._$getByClassName(this.__body,"j-leave")[0],s=n._$getByClassName(this.__body,"j-chat-show")[0];this.__cLeaveOff&&this.cLeaveOff.destroy();if(e){this.__cLeaveOff=new g({data:{tip:t.message}}).$inject(i);n._$delClassName(i,"f-hide");n._$addClassName(s,"f-hide")}else{n._$addClassName(i,"f-hide");n._$delClassName(s,"f-hide")}};N.__sendLeaveMsg=function(t){l._$sendLeaveMsg(_.SHOPID,t)};N.__renderQueueInfo=function(t){if(t){var e=t.sessionStatus.status;if(203==e)l._$startQueue(t);else l._$quitQueueStatus(t)}};N.__cbQueueStart=function(t){this.__renderQueueInfo(t)};N.__cbQueueChange=function(t){this.__renderQueueInfo(t)};N.__cbQueueFail=function(t){this.__renderQueueInfo(t);if(205==t.sessionStatus.status)this.__initLeaveOff(t,!0);else this.__initLeave(t,!0)};N.__quitQueue=function(t,i){e._$stop(i);var s=n._$dataset(t,"sid");var a=_._$getSessionById(s);l._$quitQueue(_.SHOPID,a);this.__hideTip()};N.__evaluateClick=function(t,i){e._$stop(i);var s=n._$dataset(t,"sid"),a=n._$dataset(t,"mid"),o=n._$dataset(t,"type");var r=_._$getSessionById(s);var d=r.shop.setting&&r.shop.setting.enable_evaluation_muttimes;var c=r.closeTime;var l=(new Date).getTime();var f=r.shop.setting&&60*r.shop.setting.evaluation_timeout*1e3||6e5;if(!(!window.setting.tradeTag&&c&&l-c>f)){var u=r.evaluation;this.__evalModal=h._$$EvaluateModal._$allocate({form:u,enable_evaluation_muttimes:d,parent:document.body,submit:this.__evalSubmit._$bind(this),onshow:this.__onEvalModalShow._$bind(this),onhide:this.__onevalModalHide._$bind(this)});this.__evalModal._$showModal(0,s,a)}else this.__showTip("评价已超时，无法进行评价",!0)};N.__modifyEval=function(t,s){e._$stop(s);var a=n._$dataset(t,"sid"),o=n._$dataset(t,"mid"),r=n._$dataset(t,"type"),d=_._$getSessionById(a);var c=d.evaluation;var l=d.evaluateResult;var f=d.shop.setting&&d.shop.setting.enable_evaluation_muttimes;var u=d.closeTime;var p=(new Date).getTime();var m=d.shop.setting&&60*d.shop.setting.evaluation_timeout*1e3||6e5;if(!(!window.setting.tradeTag&&u&&p-u>m)){var g={form:c,lastEvalInfo:l,enable_evaluation_muttimes:f,parent:document.body,submit:this.__evalSubmit._$bind(this),onshow:this.__onEvalModalShow._$bind(this),onhide:this.__onevalModalHide._$bind(this)};if(2==r)i._$merge(g,{lastEvalInfo:void 0},!0);this.__evalModal=h._$$EvaluateModal._$allocate(g);this.__evalModal._$showModal(0,a,o)}else this.__showTip("评价已超时，无法进行评价",!0)};N.__onEval=function(t){var e=t.msg;var i=e.sid,n=e.id,s=_._$getSessionById(e.sid);if(!this.__isEvalModalOpen&&t.autoPopup&&2!=s.evaluation.pattern){var a=s.shop.setting&&s.shop.setting.enable_evaluation_muttimes;if((s.sessionStatus.hasEvaluation||a)&&L){var o=s.evaluation;this.__evalModal=h._$$EvaluateModal._$allocate({form:o,parent:document.body,submit:this.__evalSubmit._$bind(this),onshow:this.__onEvalModalShow._$bind(this),onhide:this.__onevalModalHide._$bind(this)});L=!1;this.__evalModal._$showModal(0,i,n)}}};N.__onShowTip=function(t){this.__showTip(t.text,!0)};N.__onScrollBottom=function(){this.__doScrollBottom()};N.__evalSubmit=function(t){t=i._$merge(t,{sessionid:t.sid,id:t.id});L=!0;l._$sendEvaluate(_.SHOPID,t)};N.__onEvalModalShow=function(){this.__isEvalModalOpen=!0};N.__onevalModalHide=function(){this.__isEvalModalOpen=!1;L=!0};N.__doScrollToNode=function(t,e){var e=e||0,i=this.__nChat;if(this.__scrollTimer){clearTimeout(this.__scrollTimer);delete this.__scrollTimer}this.__scrollTimer=setTimeout(function(){i.scrollTop=i.scrollHeight-i.clientHeight-t.offsetHeight+e},100)};N.__doScrollBottom=function(t){var e=this.__nChat;if(this.__scrollTimer){clearTimeout(this.__scrollTimer);delete this.__scrollTimer}this.__scrollTimer=setTimeout(function(){e.scrollTop=2*e.scrollHeight},100)};N.__doScrollToFill=function(){var t=this.__nChat;if(this.__scrollTimer){clearTimeout(this.__scrollTimer);delete this.__scrollTimer}this.__scrollTimer=setTimeout(function(){var e=n._$getByClassName(t,"j-history-split");if(!(e.length<2)){var i=Math.abs(n._$offset(e[0],document.body).y-n._$offset(e[1],document.body).y)-50;t.scrollTop=i<0?0:i}}._$bind(this),100)};N.__onAfterInsert=function(t){var e=t.msg,i=t.nodeId;if("afterBegin"==t.pos&&_._$isHistoryMsgLoaded(_.SHOPID))this.__doScrollToFill();else{var s=n._$get(i);if(s&&!e.fromUser&&s.offsetHeight>this.__nChat.offsetHeight)this.__doScrollToNode(s,this.__scrollToNodeOffset);else this.__doScrollBottom()}};N.__onEmptyList=function(t){t.stopped=!0;this.__checkSendPrdMsg()};N.__onAfterListLoad=function(t){setTimeout(this.__doScrollBottom._$bind(this),0)};N.__onAfterListRender=function(t){this.__checkSendPrdMsg()};N.__updateLastMessage=function(){var t=_._$getMsgListByBid(_.SHOPID);if(t.length)l._$updateLastMessage(t[t.length-1]);
};N.__renderLoading=function(t){var e=n._$getByClassName(this.__body,"j-loading")[0];if(e)if(t)n._$delClassName(e,"f-hide");else n._$addClassName(e,"f-hide")};N.__showTip=function(t,e){this.__nHeadTip.innerHTML=t;n._$addClassName(this.__body,"showtip");if(e)setTimeout(function(){n._$delClassName(this.__body,"showtip")}._$bind(this),3e3)};N.__hideTip=function(){this.__nHeadTip.innerHTML="";n._$delClassName(this.__body,"showtip")};N.__onBeforeUnload=function(t){var e=_._$getSessionByBid(_.SHOPID);v._$closeBySessionId();if(_._$canSendMessage(_.SHOPID)&&!window.setting.unconfirm){t=t||window.event;var i="要离开此网站吗？";if(t)t.returnValue=i;return i}};N.__cbYunxinCreated=function(){};N.__onUserError=function(t){this.__showTip(t.msg);this.__renderLoading(!1);this.__editor._$disable(!0)};N.__cbOnSession=function(t){this.__resetAll({session:t});if(_._$isMsgListLoaded(_.SHOPID))this.__checkSendPrdMsg();if(!window.setting.tradeTag)this.__reportWebAnalytics(t)};N.__checkCanSend=function(){if(_._$canSendMessage(_.SHOPID))return!0;else{this.__editor._$resetFile();this.__editor._$toast("请等待连线成功后，再发送消息");l._$applyKefu(_.SHOPID);this.__removeFinishMsg();return!1}};N.__checkCanSendRobot=function(t){var e=_._$getSessionByBid(_.SHOPID);var i=e.sessionStatus.status;if(!e.kefu.isRobot&&200==i&&t!=_._$getSessionId(_.SHOPID)){this.__showTip("消息已失效，无法选择",!0);return!1}else return!0};N.__sendMessage=function(t,e){if(this.__checkCanSend()){if(e)l._$reSendMessage(_.SHOPID,t.id);else l._$sendMessage(_.SHOPID,t);if("image"==t.type||"file"==t.type)this.__editor._$resetFile();else if("rich"!=t.type||!t.content||0!=t.content.indexOf("<img"))this.__editor._$clear({focus:!0})}};N.__resend=function(t,e){var i=n._$dataset(t,"id");this.__sendMessage({id:i},!0)};N.__reconnect=function(t,i){e._$stop(i);var s=n._$dataset(t,"id");if(s){var a=n._$dataset(t,"bid"),o=_._$getSessionByBid(a);if(o&&206==o.sessionStatus.status){this.__hideTip();this.__renderLoading(!0);l._$applyKefu(a);this.__nsubmit=n._$getByClassName(this.__body,"j-finish")[0];n._$delClassName(this.__nsubmit,"u-weak-btn");n._$addClassName(this.__nsubmit,"u-btn-weak-disabled")}}else{this.__hideTip();this.__renderLoading(!0);l._$applyKefu(_.SHOPID)}};N.__removeFinishMsg=function(){var t=n._$getByClassName(document.body,"j-finish");if(t)i._$forEach(t,function(t){var e=n._$dataset(t,"id");var i=n._$dataset(t,"bid");l._$delMessageById(i,e)},this)};N.__onInvalidImage=function(t){var e=t.code;switch(e){case"NotAnImage":text="目前可支持传送bmp/jpg/png/gif格式的图片";this.__showTip(text);setTimeout(function(){this.__hideTip()}._$bind(this),3e3)}};N.__onInvalidVideo=function(t){var e=t.code;switch(e){case"overVideoSize":text=t.message;this.__showTip(text);setTimeout(function(){this.__hideTip()}._$bind(this),3e3);break;case"NotAnVideo":text="目前只支持传送视频类型文件";this.__showTip(text);setTimeout(function(){this.__hideTip()}._$bind(this),3e3)}};N.__selRobotMsg=function(t,s){e._$stop(s);if(this.__checkCanSend()){var a=n._$dataset(t,"sid");if(this.__checkCanSendRobot(a)){var o=n._$dataset(t,"id"),r=_._$getSessionByBid(_.SHOPID);if(o){var d=_._$getRobotItem(o);if(d){var c=n._$dataset(t,"msgidclient");d=i._$merge({questionMsgidClient:c},d);if(0==r.kefu.isRobot){var f=d.question;l._$sendMessage(_.SHOPID,{type:"text",content:f})}else l._$sendRobotMessage(_.SHOPID,d)}}}}};N.__selShunt=function(t,s){e._$stop(s);var a=n._$dataset(t,"id"),o=n._$dataset(t,"type"),r=n._$dataset(t,"disabled"),d=n._$dataset(t,"entryid");mid=n._$dataset(t,"mid");var c=n._$get(mid),f=n._$getByClassName(c,"shunt_child");n._$addClassName(c.parentNode,"u-shunt-disabled");i._$forEach(f,function(t){n._$dataset(t,"disabled",1)});if(1!=r&&null!=a&&null!=o&&null!=d){var u=1==o?{staffid:0,groupid:a,entryid:d}:{staffid:a,groupid:0,entryid:d};if(a)l._$sendSelectShunt(u,_.SHOPID,mid)}};N.__checkSendPrdMsg=function(){var t=_._$getSessionByBid(_.SHOPID);if(t){if(200==t.sessionStatus.status)if(0==t.kefu.isRobot)l._$sendPrdMsg(_.SHOPID);else{var e=l.__getProductInfo();if(e&&1==e.sendProToRobot)l._$sendPrdMsg(_.SHOPID)}}else console.error("session not exist when send prdMsg")};N.__onFileUploadProgress=function(t){if(t.bid==_.SHOPID){var e=t.msg,s=n._$getByClassName(this.__body,"msg_right");var a;i._$forEach(s,function(t){if(n._$attr(t,"id").indexOf(e.id)>-1)a=t});if(a){var o=n._$getByClassName(a,"progress-size")[0],r=n._$getByClassName(a,"progress-bar")[0],d=n._$getByClassName(r,"inner")[0];var c=this.__listConfig.item.fileProgressFormat(e);o.innerText=c;var l=n._$getStyle(r,"width").replace("px","");n._$setStyle(d,"width",e.progressObj.percentage/100*l+"px")}}};N.__downloadFile=function(t,e){var i=n._$dataset(t,"url"),s=n._$dataset(t,"name");var a=(window.setting.remoteRoot||"")+i+"?download="+encodeURIComponent(s);n._$createXFrame({visible:!1,src:a})};N.__abortFileTrans=function(t,e){var i=n._$dataset(t,"id");l._$abortFileTrans(_.SHOPID,i,!0)};N.__checkCanSendFile=function(t){f._$checkCanSendFile({timestamp:t})};N.__onCanSendFile=function(t){this.__editor._$dispatchEvent("oncansendfile",t)};N.__onConfig=function(t){};N.__onShopConfig=function(t){switch(t.type){case"client_input":this.__thSendInputContent=r._$throttle(this.__sendInputContent,1e3*config.sendingRate);break;case"input_assciation_permisson":this.__assoSendInputContent=r._$throttle(this.__assoSendInputContentMore,1e3*config.sendingRate)}};N.__sendInputContent=function(t){var e=_._$getSessionByBid(_.SHOPID);if(e)if(t!=e.shop.lastReportInput)if(!e.kefu.isRobot&&e.shop.setting.inputSwitch){_._$cacheReportInput(_.SHOPID,t);l._$sendInputContent({bid:_.SHOPID,sessionId:e.id,content:t,sendingRate:e.shop.setting.sendingRate})}};N.__assoSendInputContentMore=function(t,e){var i=_._$getSessionByBid(_.SHOPID);if(i){var n=i.shop.lastReportInput;if(!e){if(t!=n)if(!(""==t||t.length>10)){if(i.shop.setting.inputAssociationSwitch)l._$assoSendInputContent({bid:_.SHOPID,sessionId:i.id,content:t});_._$cacheReportInput(_.SHOPID,t)}else{_._$cacheReportInput(_.SHOPID,t);this.__editor._$hideInputAssociation()}}else _._$cacheReportInput(_.SHOPID,t)}};N.__onInputAssociation=function(t){var e=t.bid,i=t.questionContents;var n=_._$getShopByBid(e);if(t.bid==_.SHOPID&&n.setting.inputAssociationSwitch)this.__editor&&this.__editor._$renderInputAssociation(i)};N.__onSessionSwitch=function(){this.__cacheEditorContent()};N.__onBotEntrySelect=function(t){var i=t.action;if(1==i)this.__sendMessage({type:"text",content:t.label});else if(2==i)window.open(t.url,"bot-"+t.label);else if("evaluate"==i){e._$stop(event);l._$goEvaluate()}else if("close_session"==i){e._$stop(event);var n=_._$getSessionByBid(_.SHOPID);if(!_._$canSendMessage(_.SHOPID)){l._$onshowtip("当前已经退出会话");return}k._$confirm({message:"确认退出对话？",style:"center",onok:function(){l._$sendFinishSession(_.SHOPID,{sessionId:n.id})}})}else if("open_link"==i){e._$stop(event);window.open(t.url,"_blank")}else if("create_worksheet"==i){var n=_._$getSessionByBid(_.SHOPID);if(n&&n["templateId-"+t.id]){this.__onGetWorkSheetInfo(n["templateId-"+t.id]);return}l._$getWorksheetInfo(_.SHOPID,{worksheetId:t.id})}};N.__clickBotBlock=function(t,i){e._$stop(event);if(this.__checkCanSend()){var s=n._$dataset(t,"sid");var a=n._$dataset(t,"id");if(this.__checkCanSendRobot(s)){var o=n._$dataset(t,"target"),r=n._$dataset(t,"params"),d=n._$dataset(t,"label");var c={};if(!o)c={type:"text",content:d};else c={content:{target:o,params:r,template:{id:"qiyu_template_text",label:d}},type:"bot"};l._$sendMessage(_.SHOPID,c)}else{var f=_._$getMsgById(a);f.disableBtn=!0;l._$updateMessage(_.SHOPID,f)}}};N.__clickBotTel=function(t,i){if(r._$isMobilePlatform());else{e._$stop(event);this.__showTip("无法拨打号码",!0)}};N.__selectBotCard=function(t,i){e._$stop(event);if(this.__checkCanSend()){var s=n._$dataset(t,"sid");if(this.__checkCanSendRobot(s)){var a=n._$dataset(t,"target"),o=n._$dataset(t,"params"),r=n._$dataset(t,"label"),d=n._$dataset(t,"type");if("popup"==d)w._$$BotDetail._$allocate({parent:document.body,data:{request:{target:a,params:o}}});else{var c;if(!a)c={type:"text",content:r};else c={type:"bot",content:{target:a,params:o,template:{id:"qiyu_template_text",label:r}}};l._$sendMessage(_.SHOPID,c)}}}};N.__seeMoreBotCardList=function(t,e){if(this.__checkCanSend()){var i=n._$dataset(t,"sid");if(this.__checkCanSendRobot(i)){var s=n._$dataset(t,"id"),a=_._$getMsgById(s);if(a)x._$$BotList._$allocate({parent:document.body,data:a,onselect:this.__selectBotCard._$bind(this)})}}};N.__seeBotCardDetail=function(t,e){if(this.__checkCanSend()){var i=n._$dataset(t,"sid");if(this.__checkCanSendRobot(i)){var s=n._$dataset(t,"id"),a=_._$getMsgById(s);if(a)w._$$BotDetail._$allocate({parent:document.body,data:{request:{target:a.content.template.target,params:a.content.template.params},content:a.content}})}}};N.__onBotMsg=function(t){var e=t.msg,i=e.content.template;if(i){if("bot_form"==i.id)this.__initBotForm(e);if("drawer_list"==i.id)this.__initBotDrawerModal(e,t.sid);if("auto_worksheet"==i.id)this.__initWorksheet(e)}};N.__onGetWorkSheetInfo=function(t){var e=t.workSheetTemplateVo&&t.workSheetTemplateVo.forms||[];var n=t.worksheetId||t.workSheetTemplateVo&&t.workSheetTemplateVo.id;i._$forEach(e,function(t){if(t.details&&!i._$isArray(t.details))t.details=JSON.parse(t.details)});var s=_._$getSessionByBid(_.SHOPID);if(t.workSheetTemplateVo&&s)s["templateId-"+t.workSheetTemplateVo.id]={workSheetTemplateVo:t.workSheetTemplateVo};if(!this.__worksheet){if("11036"!=t.cmd||this.__worksheet)this.__worksheet=new C({data:{list:e,title:"填写信息",submitBtn:"提交",params:t.workSheetTemplateVo&&t.workSheetTemplateVo.params,templateId:n,code:t.code||200,errorMessage:t.message}}).$inject(this.__body).$on("submit",this.__sendkefuWorksheetMsg._$bind(this)).$on("close",this.__closeWorksheet._$bind(this))}else if(this.__worksheet.getTemplateId()==n){this.__worksheet.setCustomFields(e);this.__worksheet.setParams({params:t.workSheetTemplateVo&&t.workSheetTemplateVo.params,code:t.code,errorMessage:t.message})}};N.__showBotForm=function(t,e){var i=n._$dataset(t,"id"),s=n._$dataset(t,"sid");
if(s==_._$getSessionId(_.SHOPID)&&_._$canSendMessage(_.SHOPID)){var a=_._$getMsgById(i);if(a)this.__initBotForm(a)}else{var o="该会话已结束，表单已失效";this.__showTip(o,!0)}};N.__initBotForm=function(t){var e=t.content.template;this.__botForm=y._$$BotForm._$allocate({parent:this.__body,data:{list:e.forms,title:e.label,icon:r._$avatorClip(t.kefu.iconurl),submitBtn:"提交"},onhide:this.__onBotFormHide._$bind(this,t),onsubmit:this.__onBotFormSubmit._$bind(this,t)})};N.__initWorksheet=function(t){var e=t.content.template;var n=e.forms;i._$forEach(n,function(t){if(t.details&&!i._$isArray(t.details))t.details=JSON.parse(t.details)});this.__worksheet=new C({data:{list:n,label:e.label,title:"填写信息",icon:r._$avatorClip(t.kefu.iconurl),params:e.params,mid:t.id,submitBtn:"提交",templateId:t.worksheetId}}).$inject(this.__body).$on("submit",this.__sendWorksheetMsg._$bind(this)).$on("close",this.__closeWorksheet._$bind(this))};N.__sendWorksheetMsg=function(t,e){var i=_._$getMsgById(e);var n=t.params;n+="&msgIdClient="+i.msgIdClient;if(_._$canSendMessage(_.SHOPID)){l._$submitWorksheetForm(_.SHOPID,{type:"bot",content:{params:n,template:{id:"ysf_template_auto_worksheet",forms:t.customFields}}},t);this.__worksheet.close()}else{this.__showTip("信息表单已过期",!0);this.__worksheet.close()}i.content.template.submitted=1;l._$updateMessage(_.SHOPID,i)};N.__sendkefuWorksheetMsg=function(t){t.sessionId=_._$getSessionByBid(_.SHOPID).sessionid;l._$submitKefuWorksheetForm(_.SHOPID,t);this.__worksheet.close()};N.__closeWorksheet=function(){if(this.__worksheet)this.__worksheet=null};N.__onBotFormSubmit=function(t,e){var n=t.content.template,s=n.params;i._$forEach(e,function(t){var e="image"==t.type?JSON.stringify(t.value):t.value;var i=t.key+"="+e;s+="&"+i});s+="&msgIdClient="+t.msgIdClient;if(_._$canSendMessage(_.SHOPID)){l._$submitBotForm(_.SHOPID,{type:"bot",content:{params:s,template:{id:"qiyu_template_botForm",forms:e}}},t);this.__botForm._$recycle()}else{this.__botForm._$recycle();var a="该会话已结束，表单已失效";this.__showTip(a,!0)}};N.__onBotFormHide=function(t,e){var n=t.content.template;i._$forEach(n.forms,function(t,i){t.value=e[i].value});l._$updateMessage(_.SHOPID,t)};N.__selectOrderItem=function(t,i){e._$stop(event);var s=n._$dataset(t,"sid");if(this.__checkCanSendRobot(s)){var a=n._$dataset(t,"target"),o=n._$dataset(t,"params"),r=n._$dataset(t,"status"),d=n._$dataset(t,"img"),c=n._$dataset(t,"name"),l=n._$dataset(t,"stock"),f=n._$dataset(t,"price"),u=n._$dataset(t,"count");this.__sendMessage({bid:_.SHOPID,type:"bot",content:{target:a,params:o,template:{id:"qiyu_template_goods",p_status:r,p_img:d,p_name:c,p_stock:l,p_price:f,p_count:u}}})}};N.__moreOrderList=function(t,e){if(this.__checkCanSend()){var i=n._$dataset(t,"sid");if(this.__checkCanSendRobot(i)){var s=n._$dataset(t,"id"),a=_._$getMsgById(s);$._$$ThirdOrderList._$allocate({parent:document.body,data:a,onselect:this.__selectOrderItem._$bind(this)})}}};N.__evalRobotAnswer=function(t,e){var i=n._$dataset(t,"id"),s=n._$dataset(t,"sid"),a=n._$dataset(t,"evaluation"),o=n._$dataset(t,"reason");var r=n._$getParent(t,"msg").previousElementSibling;if(!n._$hasClassName(t,"z-sel")){if(s!=_._$getSessionId(_.SHOPID)&&s!=_._$getRobotSessionId(_.SHOPID)){d="该会话已结束，暂不支持评价";this.__showTip(d,!0);return}if(!_._$canSendMessage(_.SHOPID)){var d="会话已结束，暂不支持评价";this.__showTip(d,!0);return}var c=_._$getSessionByBid(_.SHOPID);if(c&&!c.kefu.isRobot){var d="当前会话非机器人会话，暂不支持评价";this.__showTip(d,!0);return}if("3"==a)if("1"==o){l._$evalRobotAnswer(_.SHOPID,{id:i,evaluation:a,needFocus:!0});return}else f._$evaluationContent(_.SHOPID,{id:i,evalcontent:""});l._$evalRobotAnswer(_.SHOPID,{id:i,evaluation:a,needFocus:!1})}};N.__changeEvalContent=function(t,e){var i=n._$dataset(t,"id"),s=n._$dataset(t,"sid"),a=n._$dataset(t,"idclient"),o=decodeURIComponent(n._$dataset(t,"evalcontent")||""),r=decodeURIComponent(n._$dataset(t,"evalguide")||"");if(s==_._$getSessionId(_.SHOPID)||s==_._$getRobotSessionId(_.SHOPID))if(_._$canSendMessage(_.SHOPID)){var d=_._$getSessionByBid(_.SHOPID);if(!d||d.kefu.isRobot){var c=o?o:"";n._$addClassName(t,"z-hidden");this.__addTextareaElem(c,"qa_eval_input",t,function(e){var s=e.target||e.srcElement;var a=s.value.trim();if(o&&a!=o)l._$evaluationContent(_.SHOPID,{id:i,evalcontent:a,needFocus:!1});else if(!o&&""!=a)l._$evaluationContent(_.SHOPID,{id:i,evalcontent:a,needFocus:!1});else{f._$evaluationContent(_.SHOPID,{id:i,evalcontent:""});n._$remove(s);n._$delClassName(t,"z-hidden")}},r)}else{var u="当前会话非机器人会话，暂不支持评价";this.__showTip(u,!0)}}else{var u="会话已结束，暂不支持评价";this.__showTip(u,!0)}else{u="该会话已结束，暂不支持评价";this.__showTip(u,!0)}};N.__onScroll=function(t){e._$stop(t);if("loading"!=this.__upscrollStatus&&"end"!=this.__upscrollStatus){if(!this.__scrollTop)this.__scrollTop=this.__nChat.scrollTop;var i=this.__nChat.scrollTop<this.__scrollTop?"up":"down";if("up"==i&&this.__nChat.scrollTop<=20){this.__upscrollStatus="loading";this.__renderUpscroll();l._$getHistoryMsg(_.SHOPID)}this.__scrollTop=this.__nChat.scrollTop}};N.__renderUpscroll=function(){a._$render(this.__nUpscroll,"upscroll",{status:this.__upscrollStatus,historyHasLoad:_._$isHistoryMsgLoaded(_.SHOPID)});if("loading"==this.__upscrollStatus||"error"==this.__upscrollStatus)this.__nChat.scrollTop=0};N.__onHistoryListLoad=function(){this.__upscrollStatus="success";this.__renderUpscroll()};N.__onHistoryListLoadErr=function(){this.__upscrollStatus="error";this.__renderUpscroll()};N.__onHistoryListEnd=function(){this.__upscrollStatus="end";this.__renderUpscroll()};N.__reportWebAnalytics=function(t){if(!t.kefu.isRobot&&!t.isShunt){var e=function(t,e){e=e||function(){};var i=new Image;i.onerror=function(){console.log("faild to load qa.gif")};i.onload=function(){e()};i.src=t;i.width=1;i.height=1;return i};if(window.localStorage){var n="X-"+setting.appkey.toUpperCase()+"-YSF-WEBANALYTICS",s=localStorage.getItem(n);if(!s)return;var a=i._$query2object(s);var o=window.__YSFDAROOT__+"?ak="+a.ak+"&dv="+a.dv+"&si="+t.sid+"&su="+a.su+"&cup="+a.cup+"&tm="+a.tm+"&cy="+a.cy+"&lp="+a.lp;e(o)}}};N.__disableLink=function(t){n._$dataset(t,"disabled",!0);n._$setStyle(t,"color","#37474f")};N.__addTextareaElem=function(t,i,s,a,o){var r=n._$create("textarea");r.value=t;r.spellcheck=!1;r.placeholder=o||"感谢你的评价，请填写具体原因供我们改进";n._$addClassName(r,i);n._$attr(r,"maxlength","200");s.insertAdjacentElement("afterend",r);e._$addEvent(r,"blur",a);r.focus()};N.__onApplyTimeout=function(){this.__renderLoading(!1);var t='连接失败，你可以尝试<a href="#" data-action="reconnect">重新连接</a>';this.__showTip(t)};N.__onAfterUpdateRender=function(t){if("3"==t.data.evaluation&&"1"==t.data.evaluation_reason)this.__doScrollToEvalcontent(t);if(t.data.needFocus){var e;if(t.data.evalcontent)e=document.getElementById(t.data.id+"content");else e=document.getElementById(t.data.id+"guide");e.click()}};N.__doScrollToEvalcontent=function(t){if("3"==t.data.evaluation&&"1"==t.data.evaluation_reason){var e=n._$getParent(t.parent,"chat_show_msg");var i=t.node;var s=e.offsetHeight;var a=n._$offset(i,document.body).y;var o=n._$offset(e,document.body).y;var r=a+i.offsetHeight-o-s;if(r>0)e.scrollTop=e.scrollTop+r}};N.__sendPrdMsgByUser=function(t,e){if(_._$canSendMessage(_.SHOPID)){var i=_._$getSessionByBid(_.SHOPID);if(!i.kefu.isRobot){var s=n._$dataset(t,"id"),a=_._$getMsgById(s);if(a&&a.content)l._$sendPrdMsgToServer(a.content)}else{var o="发送失败，机器人看不懂卡片哦";this.__showTip(o,!0)}}else{var o="发送失败，会话已结束";this.__showTip(o,!0)}};N.__onBotEntry=function(){var t=_._$getSessionByBid(_.SHOPID);this.__renderBotEntry(t)};N.__onKefuSetting=function(){var t=_._$getSessionByBid(_.SHOPID);this.__renderBotEntry(t)};N.__onSendMixReply=function(t,i){e._$stop(i);var s=n._$dataset(t,"sid");if(this.__checkCanSendRobot(s)){var a=decodeURIComponent(n._$dataset(t,"target")||""),o=n._$dataset(t,"params"),r=n._$dataset(t,"label"),d=n._$dataset(t,"type");var c={cmd:"202",target:a,label:r,params:o,type:d,template:{id:"qiyu_template_mixReply",label:r}};if(!a)l._$sendMessage(_.SHOPID,{type:"text",content:r});else l._$sendMessage(_.SHOPID,{type:"bot",content:c})}};N.__associationques=function(t){var e=n._$getByClassName(this.__body,"j-associationques")[0];var i=t?!0:!1;if(i)n._$addClassName(e,"u-status-robot");else n._$delClassName(e,"u-status-robot")};N.__onrobotevalcontentDone=function(t){function e(t,e){n._$delClassName(t,"z-hidden");setTimeout(function(){n._$addClassName(t,"z-hidden")},1e3*e)}var i=n._$getByClassName(document.body,"m-msglist")[0];var s=n._$getByClassName(i,"msgid"+t)[0];var a=n._$getByClassName(s,"j-qa_eval_box_tips")[0];e(a,3)};N.__onRichContentLinkClick=function(t,i){var s=n._$attr(t,"href"),a=n._$dataset(t,"name");if("kefu"==a||"qiyu://action.qiyukf.com?command=applyHumanStaff"==s){e._$stopDefault(i);var o=n._$dataset(t,"id"),d=n._$dataset(t,"disabled");if(d)return;this.__disableLink(t);var c={};var f=e._$getElement(i,"d:action");if(f){var u=n._$dataset(f,"msgid");var h=_._$getMsgById(u);if(h)if("rich"===h.type)c.transferRgType=r.TransferRgType["rgMsg"];else c.transferRgType=h.transferRgType}l._$applyRGKefu(_.SHOPID,c)}else n._$attr(t,"target","_blank")};N.__showMoreBotBubbleNode=function(t,e){var i=n._$dataset(t,"sid");if(this.__checkCanSendRobot(i)){var s=n._$dataset(t,"msgid");l._$showMoreBotBubbleNode(_.SHOPID,s)}};N.__onSelectBotBubbleListItem=function(t,e){var i=n._$dataset(t,"sid");if(this.__checkCanSendRobot(i)){var s=n._$dataset(t,"msgid"),a=n._$dataset(t,"index"),o=_._$getMsgById(s);var r=o.content.template.tabList[0].list[a];this.__onSelectBotBubbleItem(r,o,i)}};N.__onSelectBotBubbleItem=function(t,e,i,n){var s=e.id;if("display"!=t.type)if("url"!=t.type||!t.target){if("block"==t.type)new S({data:{item:t}}).$on("ok",function(){n&&n.destroy();this.__sendMessage({bid:_.SHOPID,type:"bot",content:{relatedMsgId:s,sid:i,target:t.target,params:t.params,template:{id:"qiyu_template_item",p_img:t.p_img,p_title:t.p_title,p_sub_title:t.p_sub_title,p_attr_1:t.p_attr_1,p_attr_2:t.p_attr_2,p_attr_3:t.p_attr_3}}});e.isSelectedBotItem=!0;l._$updateMessage(_.SHOPID,e);
}._$bind(this))}else window.open(t.target)};N.__showBotDrawerModal=function(t,e){var i=n._$dataset(t,"sid");if(this.__checkCanSendRobot(i)){var s=n._$dataset(t,"rmsgid");var a=_._$getMsgById(s);this.__initBotDrawerModal(a,i)}};N.__showWorksheet=function(t,e){var i=n._$dataset(t,"sid");if(this.__checkCanSendRobot(i)){var s=n._$dataset(t,"mid");var a=n._$dataset(t,"sid");var o=_._$getMsgById(s);var r=_._$getSessionByBid(_.SHOPID);var d=r.id;if(203==r.code)d=r.robotSessionId;if(a==d&&_._$canSendMessage(_.SHOPID))this.__initWorksheet(o);else{this.__showTip("信息表单已过期",!0);o.content.template.submitted=1;l._$updateMessage(_.SHOPID,o)}}};M._$regist=T._$regist._$bind(T)},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","5fb495f256a5dcde2a92e5fe919a6422","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","d99f29446b4a4cf86c6084cb99df7ab0","35df4ef4567b6cd0275a1b849d2bea8c","aa835e6c54cfdee711ae8d0d1296fa57","e4a45dc3cf399bf73004ce111fd4b206","f0b1d7ff05e74da750d6bb82da881934","d67add781b37b82c1816b8c159701e56","4e09e3c278408cd8001c7779e34c93e9","00b1248fcdd93958d87e26de99277f67","93872d9c4b2f20c68917dbdfa2b58e43","9e07459e62a4073031ead15e8b2bc7b2","e828814c7955976ce757e55686cc082c","c5fe1645073625e9b2d8dfbc7ccdc4cb","aac22a477c227075a6def1f716ee003f","9531d121cb4951680b01e0baab61bd6c","efd85249b216cf363b67008e4abace17","bccf270ed787e8f6acee5d1f453d015d","e3bf5bcfc6f3892d934d219cb8f1fbb3","0d0bacae316f897a43612de8431d31e0","a344b7aa548b8f4feaa19ef48e1c646b","2e070b2101e312979bbd2d79c8b4d129","9b608793e095b569735c8658e1b43865","608a2155be0cf8b73e49149cfde9bb2d","972fe5ebc7a7940b3c06cefa017b585c","e357f5fd8bf828b5275e76b289f423fa","8432624716159a6412219f26247c91bd");I$("fce14694f1ca3def78e7116e211b4610",'<textarea name="txt" id="resource-status-loading">\n  <div class ="m-status">\n      <div class="u-msg">\n          <h3 class="j-msg">\n              <i class ="u-icon u-icon-loading">\n                  <!--<img src="/prd/res/img/loading.gif" width="16" height="16"  />-->\n              </i>\n          </h3>\n      </div>\n  </div>\n</textarea>\n<textarea name="txt" id="resource-status-error">\n  <div class ="m-status">\n      <div class="u-msg">\n          <h3 class="j-msg">\n              <i class ="u-icon u-icon-error"></i>\n              加载失败，请\n              <a href="#" data-action="reload">重试</a>\n              <p class="j-flag"></p>\n          </h3>\n      </div>\n  </div>\n</textarea>\n<textarea name="txt" id="resource-status-empty">\n  <div class ="m-status">\n      <div class="u-msg">\n          <h3 class="j-msg">\n              <i class ="u-icon u-icon-info"></i>\n              暂无数据记录\n          </h3>\n      </div>\n  </div>\n</textarea>\n<textarea name="txt" id="resource-status-network">\n  <div class = "m-notify m-notify-top-center">\n    <div class ="notify_message ">\n        <i class = "u-icon-status u-icon-error"></i>\n        <div class ="notify_text">网络连接失败，请检查网络后重试</div>\n    </div>\n  </div>\n</textarea>');I$("a103f9e5f3b010e075bdc803b70d9f52","<textarea name=\"jst\" id=\"session-list\">\n  {list beg..end as y}\n\t{var x=xlist[y]}\n    <li class =\"session_item {if ext.id==x.shop.id}is-selected{/if}\" data-action=\"redirect\" data-id=${x.shop.id} id=\"${('ses-'+x.id)|seed}\" >\n\n    <div class=\"item_left\">\n      <img src=\"${x.shop.logo|default:'res/default/portrait2x.png'|imgClip}\"  class=\"item_logo\" tlt=\"${x.shop.name|escape}\">\n      {if x.unread > 0 && ext.id != x.shop.id}\n\t    <span class=\"item_unread\">${x.unread|unreadfilter}</span>\n      {/if}\n    </div>\n    <div class=\"item_right\">\n\t    <div class=\"item_tlt\">\n\t\t    <span class=\"name\" title=\"${x.shop.name|default:'商户名称为空'|escape}\">\n\t\t\t\t${x.shop.name|default:'商户名称为空'|escape}\n\t\t    </span>\n\t\t    <span class=\"time\" title=\"${x.lastMessage.time|datetime|default:''}\">\n\t\t\t    {if x.lastMessage.time}\n\t\t\t        ${x.lastMessage.time|datetime|default:''}\n\t\t\t    {/if}\n\t\t    </span>\n\t    </div>\n\t    <div class=\"item_info {if x.lastMessage.ext && x.lastMessage.ext.auditResult}z-trashed{/if}\">\n\t\t\t\t{var type = x.lastMessage.type}\n\t\t    <span class=\"msg ${type}\">\n\t\t\t\t\t{if type=='success' || type=='shunt' || type=='overtime' || type=='finish' || type=='eval-show' || type=='leave-result' || type=='sys'}\n\t\t\t\t\t{if x.lastMessage.content}[${x.lastMessage.content}]{/if}\n\t\t      {elseif x.lastMessage.type=='image'}\n\t          [图片]\n\t          {elseif x.lastMessage.type=='audio'}\n\t          [语音]\n\t          {elseif x.lastMessage.type=='file'}\n\t          [文件]${x.lastMessage.content.name}\n\t          {elseif x.lastMessage.type=='qa-list'}\n\t          ${x.lastMessage.label}\n\t          {elseif x.lastMessage.type == 'productinfo'}\n\t          \t{if x.lastMessage.fromUser == 1}\n\t\t\t\t\t[发送了一条消息]\t\n\t          \t{else}\n\t\t\t\t\t[收到了一条消息]\n\t          \t{/if}\n\t          {elseif x.lastMessage.type=='rich'}\n\t          ${x.lastMessage.content|default:''|richGifFilter}\n\t          {elseif x.lastMessage.type == 'bot'}\n\t          [查询消息]\n\t          {else}\n\t          ${x.lastMessage.content|default:''|filterTagA|escape|strap}\n\t          {/if}\n\t\t    </span>\n\t    </div>\n    </div>\n    </li>\n  {/list}\n</textarea>");I$("88b788956da2767fcaa8ddc366db6d27",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h){u._$$Module=t._$klass();h=u._$$Module._$extend(f._$$Module);h.__doBuild=function(){this.__tid="session-body";this.__super();s._$parseUITemplate(l);s._$parseUITemplate(c);var t=i._$getByClassName(this.__body,"j-flag");this.__optionsConfig={limit:1e5,parent:t[0],item:{prefix:"ses-",datetime:d._$datetime,ext:{},klass:"session-list",unreadfilter:function(t){if(t>99)return"99+";else return t},strap:function(t){return(t||"").replace(/<br\/?>/g,"&nbsp;").substr(0,250)},filterTagA:function(t){t=t||"";return t.replace(/<a[^>]*>([\s\S]*?)<\/a>/gi,function(t,e){return e})},richGifFilter:function(t){return t.replace(/<img[^>]*title=['"]([^'"]+)[^>]*>/gi,function(e,i){if(i.indexOf(".")>-1)return"["+i.split(".")[0]+"]";else return d._$replaceRich(t)})},imgClip:d._$avatorClip,richFilter:d._$replaceRichAndUnescape},cache:{lkey:"ses-online",klass:r._$$Cache},onbeforelistload:function(t){t.value=i._$html2node(s._$getTextTemplate("resource-status-loading"))},onafterlistload:function(){},onemptylist:function(t){t.stopped=!0}};this.__initEventListener()};h.__initEventListener=function(){n._$loop({lifecyclecreated:this.__cbYunxinCreated._$bind(this)},function(t,e){_._$addEvent(e,t)});d._$delegate(this,this.__body,{redirect:this.__redirect._$bind(this)})};h.__onShow=function(t){this.__super(t)};h.__onRefresh=function(t){this.__super(t);if(o._$isYXConnected())this.__reBuildSessionList(o.SHOPID)};h.__cbYunxinCreated=function(){this.__reBuildSessionList(o.SHOPID)};h.__reBuildSessionList=function(t){n._$merge(this.__optionsConfig.item,{ext:{id:t},klass:"session-list"});n._$merge(this.__optionsConfig.cache,{ext:{bid:t}});if(this.__module)this.__module._$recycle();this.__module=a._$$ListModuleWF._$allocate(this.__optionsConfig)};h.__redirect=function(t,s){e._$stop(s);var a=i._$dataset(t,"id");if(a!=o.SHOPID){this.__doPublishMessage("sessionSwitch");var r=n._$query2object(location.search.substr(1));n._$merge(r,{bid:a});var _=location.pathname+"?"+n._$object2query(r);this.__dispatcher._$redirect(_)}};h.__onHide=function(){this.__super()};u._$regist=f._$regist._$bind(f)},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","d252039c36767cb4f534ca3f91188796","d99f29446b4a4cf86c6084cb99df7ab0","aa835e6c54cfdee711ae8d0d1296fa57","e4a45dc3cf399bf73004ce111fd4b206","d67add781b37b82c1816b8c159701e56","35df4ef4567b6cd0275a1b849d2bea8c","fce14694f1ca3def78e7116e211b4610","a103f9e5f3b010e075bdc803b70d9f52","8432624716159a6412219f26247c91bd");I$("65479b0fb799c45358b718abc296d7cd",'<textarea name="jst" id="body-title">\n\t{if dialogMobileStyle == 2 && isMobile}\n\t<button class="float-frame-close" data-action="hideIframe">\n\t\t<i class="u-icon-close"></i>\n\t</button>\n\t{/if}\n\t<div class="u-bd-title">\n\t\t{if showKfInputTip}\n\t\t<span class="name">对方正在输入...</span>\n\t\t{else}\n\t\t\t{if winType == 1}\n\t\t\t\t{if session.kefu.isRobot}\n\t\t\t\t\t<img class="kefu-logo" src="${session.kefu.iconurl|default:\'res/default/robot_portrait2x.png\'|imgclip}" alt="在线客服头像">\n\t\t\t\t{else}\n\t\t\t\t\t<img class="kefu-logo" src="${session.kefu.iconurl|default:\'res/img/test/kefu-1.png\'|imgclip}" alt="在线客服头像">\n\t\t\t\t{/if}\n\t\t\t\t<span class="name">${session.kefu.staffname}</span>\n\t\t\t{elseif showLogo && corpLogo}\n\t\t\t\t<img class="corp-logo" src="${corpLogo}?imageView&type=png|imageView" alt="企业logo">\n\t\t\t{else}\n\t\t\t\t<span class="name">${corpName}</span>\n\t\t\t{/if}\n\t\t{/if}\n\t</div>\n</textarea>\n\n\n<textarea name="jst" id="body-corp">\n\t<div class="u-bd-corp">\n\t\t{if session.sessionStatus.hasKefuEntry}\n\t\t\t<button class="u-contact" data-action="applyKf" data-bid="${session.shop.id}" data-sid="${session.id}">\n\t\t\t\t<span>人工客服</span>\n\t\t\t</button>\n\t\t{/if}\n\t\t\t{if session.sessionStatus.initShowEvaluation}\n\t\t\t<button type="button" class="u-comment" data-action="comment" data-bid="${session.shop.id}" data-sid="${session.id}">\n\t\t\t    <i class="u-icon-comment"></i>\n\t\t\t    <span>评价</span>\n\t\t\t</button>\n\t\t{/if}\n\t\t\n\n\t\t{if winType == 1}\n\t\t\t<div class="minimize" data-action="hideIframe" title="最小化">\n\t\t\t    <i></i>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n</textarea>');I$("8fed76e567e32545928564a257a7dda4",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h,p,m){h._$$Module=t._$klass();p=h._$$Module._$extend(u._$$Module);p.__doBuild=function(){this.__tid="show-body";this.__super();s._$parseUITemplate(f);var t=n._$getByClassName(this.__body,"j-flag");this.__export={parent:this.__body,chat:t[0],tab:t[1]};a._$extend({imgclip:o._$avatorClip
})};p.__initEventListener=function(){this.__doInitDomEvent([[d._$$Cache,"onsession",this.__onSession._$bind(this)],[d._$$Cache,"onqueuefail",this.__onQueueFail._$bind(this)],[d._$$Cache,"onevaluate",this.__onEvaluate._$bind(this)],[_._$$Cache,"onkfinput",this.__onkfWriting._$bind(this)],[_._$$Cache,"onshuntentries",this.__onShunt._$bind(this)]]);e._$loop({goEvaluate:this.__doEvaluate._$bind(this)},function(t,e){c._$addEvent(e,t)});o._$delegateWithStopEvent(this,this.__body,this.__eventDelegate.call(this))};p.__onShow=function(t){this.__super(t);this.__initEventListener()};p.__onRefresh=function(t){this.__super(t);this.__renderHeader()};p.__onHide=function(){this.__super()};p.__onSession=function(t){this.__renderHeader()};p.__onQueueFail=function(t){this.__renderHeader()};p.__renderHeader=function(t){var e=this.__getSessionEntry(r.SHOPID),i=n._$getByClassName(this.__body,"j-flag-tlt"),s=n._$getByClassName(this.__body,"head-box");var _=!1;if(t&&t.msg&&"kf-input"==t.msg.type)_=!0;if(e){if(e&&e.kefu)if(t&&"shunt"==t.msg.type)e.kefu.iconurl=t.msg.iconurl;var d=o._$isMobilePlatform();a._$render(i[1],"body-title",{session:e,winType:window.setting.winType,tradeTag:window.setting.tradeTag,showLogo:!!window.companyInfo.logoSwitch,corpLogo:window.setting.corpLogo,corpName:window.companyInfo.name,dialogMobileStyle:window.setting.dialogMobileStyle,isMobile:d,showKfInputTip:_});a._$render(i[0],"body-corp",{session:e,tradeTag:window.setting.tradeTag,winType:window.setting.winType,showEvaluation:window.setting.showEvaluation});if(this.__tipTimeout)clearTimeout(this.__tipTimeout);this.__tipTimeout=setTimeout(function(){a._$render(i[1],"body-title",{session:e,winType:window.setting.winType,tradeTag:window.setting.tradeTag,showLogo:!!window.companyInfo.logoSwitch,corpLogo:window.setting.corpLogo,corpName:window.companyInfo.name,dialogMobileStyle:window.setting.dialogMobileStyle,isMobile:d,showKfInputTip:!1})}.bind(this),2e3)}};p.__getSessionEntry=function(t){return r._$getSessionByBid(t)};p.__eventDelegate=function(){var t=this;return{applyKf:function(t,e){i._$stop(e);var s=n._$dataset(t,"bid");n._$remove(t);c._$applyRGKefu(s,{transferRgType:o.TransferRgType["entry"]});this.__doPublishMessage("applyKefu")},comment:this.__doEvaluate._$bind(this),pictureHref:function(t){var e=n._$dataset(t,"href");window.open(e,"_blank")},openlink:function(t,e){i._$stop(e);var s=n._$attr(t,"href");window.open(s)},hideIframe:function(){parent.postMessage("pkg:"+JSON.stringify({category:"closeIframe"}),"*")}}};p.__doEvaluate=function(){var t=this.__getSessionEntry(r.SHOPID);var e=t.shop.setting&&t.shop.setting.enable_evaluation_muttimes;var i=t.closeTime;var n=(new Date).getTime();var s=t.shop.setting&&60*t.shop.setting.evaluation_timeout*1e3||6e5;if(t.sessionStatus.hasEvaluation)if(!(!window.setting.tradeTag&&i&&n-i>s)){this.__evalModal=l._$$EvaluateModal._$allocate({form:t.evaluation,enable_evaluation_muttimes:e,parent:document.body,submit:this.__evalSubmit._$bind(this,t.id)});this.__evalModal._$showModal()}else c._$onshowtip("评价已超时，无法进行评价");else c._$onshowtip("您已经评价过了哦～")};p.__evalSubmit=function(t,i){i=e._$merge(i,{sessionid:t});c._$sendEvaluate(r.SHOPID,i)};p.__onEvaluate=function(t){this.__renderHeader()};p.__onkfWriting=function(t){this.__renderHeader(t)};p.__onShunt=function(t){setTimeout(function(){this.__renderHeader(t)}.bind(this),0)};h._$regist=u._$regist._$bind(u)},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","35df4ef4567b6cd0275a1b849d2bea8c","aa835e6c54cfdee711ae8d0d1296fa57","f0b1d7ff05e74da750d6bb82da881934","e4a45dc3cf399bf73004ce111fd4b206","d67add781b37b82c1816b8c159701e56","93872d9c4b2f20c68917dbdfa2b58e43","65479b0fb799c45358b718abc296d7cd","8432624716159a6412219f26247c91bd");I$("9604de6a06fe5cd5d221f2eeb54e2987",{rules:{rewrite:{404:"/client/trade"},title:{},alias:{layout:"/client/trade",sess:"/?/session/list/",chat:"/?/session/chat/",tab:"/?/session/tab/",show:"/?/session/show/"}},modules:{"/client/trade":{module:"trade/layout/index.html",composite:{sess:"/?/session/list/",show:"/?/session/show/"}},"/?/session/show/":{module:"trade/show/pc/index.html",composite:{chat:"/?/session/chat/",tab:"/?/session/tab/"}},"/?/session/chat/":"trade/chat/pc/index.html","/?/session/tab/":"trade/tab/index.html","/?/session/list/":"trade/session/pc/index.html"}});I$("1bed2dd81a9cf0d5f2e16a970a02d24b",{rules:{rewrite:{404:"/client/trade"},title:{},alias:{layout:"/client/trade",sess:"/?/session/list/",chat:"/?/session/chat/",tab:"/?/session/tab/",show:"/?/session/show/"}},modules:{"/client/trade":{module:"trade/layout/index.html",composite:{show:"/?/session/show/"}},"/?/session/show/":{module:"trade/show/pc/index.html",composite:{chat:"/?/session/chat/",tab:"/?/session/tab/"}},"/?/session/chat/":"trade/chat/pc/index.html","/?/session/tab/":"trade/tab/index.html","/?/session/list/":"trade/session/index.html"}});